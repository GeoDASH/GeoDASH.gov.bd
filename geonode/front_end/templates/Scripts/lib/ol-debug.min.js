(function(a,b){if(typeof exports==="object"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{a.ol=b()}}}(this,function(){var OPENLAYERS={};var goog=this.goog={};this.CLOSURE_NO_DEPS=true;var COMPILED=false;var goog=goog||{};goog.global=this;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(val){return val!==void 0};goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split(".");var cur=opt_objectToExportTo||goog.global;if(!(parts[0] in cur)&&cur.execScript){cur.execScript("var "+parts[0])}for(var part;parts.length&&(part=parts.shift());){if(!parts.length&&goog.isDef(opt_object)){cur[part]=opt_object}else{if(cur[part]){cur=cur[part]}else{cur=cur[part]={}}}}};goog.define=function(name,defaultValue){var value=defaultValue;if(!COMPILED){if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,name)){value=goog.global.CLOSURE_UNCOMPILED_DEFINES[name]}else{if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,name)){value=goog.global.CLOSURE_DEFINES[name]}}}goog.exportPath_(name,value)};goog.define("goog.DEBUG",true);goog.define("goog.LOCALE","en");goog.define("goog.TRUSTED_SITE",true);goog.define("goog.STRICT_MODE_COMPATIBLE",false);goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",false);goog.provide=function(name){if(!COMPILED){if(goog.isProvided_(name)){throw Error('Namespace "'+name+'" already declared.')}}goog.constructNamespace_(name)};goog.constructNamespace_=function(name,opt_obj){if(!COMPILED){delete goog.implicitNamespaces_[name];var namespace=name;while((namespace=namespace.substring(0,namespace.lastIndexOf(".")))){if(goog.getObjectByName(namespace)){break}goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name,opt_obj)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(name){if(!goog.isString(name)||!name||name.search(goog.VALID_MODULE_RE_)==-1){throw Error("Invalid module identifier")}if(!goog.isInModuleLoader_()){throw Error("Module "+name+" has been loaded incorrectly.")}if(goog.moduleLoaderState_.moduleName){throw Error("goog.module may only be called once per module.")}goog.moduleLoaderState_.moduleName=name;if(!COMPILED){if(goog.isProvided_(name)){throw Error('Namespace "'+name+'" already declared.')}delete goog.implicitNamespaces_[name]}};goog.module.get=function(name){return goog.module.getInternal_(name)};goog.module.getInternal_=function(name){if(!COMPILED){if(goog.isProvided_(name)){return name in goog.loadedModules_?goog.loadedModules_[name]:goog.getObjectByName(name)}else{return null}}};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_()){throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module")}if(!COMPILED&&!goog.moduleLoaderState_.moduleName){throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.")}goog.moduleLoaderState_.declareLegacyNamespace=true};goog.setTestOnly=function(opt_message){if(goog.DISALLOW_TEST_ONLY_CODE){opt_message=opt_message||"";throw Error("Importing test-only code into non-debug environment"+(opt_message?": "+opt_message:"."))}};goog.forwardDeclare=function(name){};goog.forwardDeclare("Document");goog.forwardDeclare("XMLHttpRequest");if(!COMPILED){goog.isProvided_=function(name){return(name in goog.loadedModules_)||(!goog.implicitNamespaces_[name]&&goog.isDefAndNotNull(goog.getObjectByName(name)))};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(name,opt_obj){var parts=name.split(".");var cur=opt_obj||goog.global;for(var part;part=parts.shift();){if(goog.isDefAndNotNull(cur[part])){cur=cur[part]}else{return null}}return cur};goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;for(var x in obj){global[x]=obj[x]}};goog.addDependency=function(relPath,provides,requires,opt_isModule){if(goog.DEPENDENCIES_ENABLED){var provide,require;var path=relPath.replace(/\\/g,"/");var deps=goog.dependencies_;for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;deps.pathIsModule[path]=!!opt_isModule}for(var j=0;require=requires[j];j++){if(!(path in deps.requires)){deps.requires[path]={}}deps.requires[path][require]=true}}};goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(msg){if(goog.global.console){goog.global.console.error(msg)}};goog.require=function(name){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_){goog.maybeProcessDeferredDep_(name)}if(goog.isProvided_(name)){if(goog.isInModuleLoader_()){return goog.module.getInternal_(name)}else{return null}}if(goog.ENABLE_DEBUG_LOADER){var path=goog.getPathFromDeps_(name);if(path){goog.included_[path]=true;goog.writeScripts_();return null}}var errorMessage="goog.require could not find: "+name;goog.logToConsole_(errorMessage);throw Error(errorMessage)}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){if(ctor.instance_){return ctor.instance_}if(goog.DEBUG){goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor}return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;if(goog.DEPENDENCIES_ENABLED){goog.included_={};goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var doc=goog.global.document;return typeof doc!="undefined"&&"write" in doc};goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else{if(!goog.inHtmlDocument_()){return}}var doc=goog.global.document;var scripts=doc.getElementsByTagName("SCRIPT");for(var i=scripts.length-1;i>=0;--i){var script=(scripts[i]);var src=script.src;var qmark=src.lastIndexOf("?");var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=="base.js"){goog.basePath=src.substr(0,l-7);return}}};goog.importScript_=function(src,opt_sourceText){var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(importScript(src,opt_sourceText)){goog.dependencies_.written[src]=true}};goog.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document.all);goog.importModule_=function(src){var bootstrap='goog.retrieveAndExecModule_("'+src+'");';if(goog.importScript_("",bootstrap)){goog.dependencies_.written[src]=true}};goog.queuedModules_=[];goog.wrapModule_=function(srcUrl,scriptText){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON)){return'goog.loadModule(function(exports) {"use strict";'+scriptText+"\n;return exports});\n//# sourceURL="+srcUrl+"\n"}else{return"goog.loadModule("+goog.global.JSON.stringify(scriptText+"\n//# sourceURL="+srcUrl+"\n")+");"}};goog.loadQueuedModules_=function(){var count=goog.queuedModules_.length;if(count>0){var queue=goog.queuedModules_;goog.queuedModules_=[];for(var i=0;i<count;i++){var path=queue[i];goog.maybeProcessDeferredPath_(path)}}};goog.maybeProcessDeferredDep_=function(name){if(goog.isDeferredModule_(name)&&goog.allDepsAreAvailable_(name)){var path=goog.getPathFromDeps_(name);goog.maybeProcessDeferredPath_(goog.basePath+path)}};goog.isDeferredModule_=function(name){var path=goog.getPathFromDeps_(name);if(path&&goog.dependencies_.pathIsModule[path]){var abspath=goog.basePath+path;return(abspath) in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(name){var path=goog.getPathFromDeps_(name);if(path&&(path in goog.dependencies_.requires)){for(var requireName in goog.dependencies_.requires[path]){if(!goog.isProvided_(requireName)&&!goog.isDeferredModule_(requireName)){return false}}}return true};goog.maybeProcessDeferredPath_=function(abspath){if(abspath in goog.dependencies_.deferred){var src=goog.dependencies_.deferred[abspath];delete goog.dependencies_.deferred[abspath];goog.globalEval(src)}};goog.loadModule=function(moduleDef){var previousState=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined};var exports;if(goog.isFunction(moduleDef)){exports=moduleDef.call(goog.global,{})}else{if(goog.isString(moduleDef)){exports=goog.loadModuleFromSource_.call(goog.global,moduleDef)}else{throw Error("Invalid module definition")}}var moduleName=goog.moduleLoaderState_.moduleName;if(!goog.isString(moduleName)||!moduleName){throw Error('Invalid module name "'+moduleName+'"')}if(goog.moduleLoaderState_.declareLegacyNamespace){goog.constructNamespace_(moduleName,exports)}else{if(goog.SEAL_MODULE_EXPORTS&&Object.seal){Object.seal(exports)}}goog.loadedModules_[moduleName]=exports}finally{goog.moduleLoaderState_=previousState}};goog.loadModuleFromSource_=function(){var exports={};eval(arguments[0]);return exports};goog.writeScriptSrcNode_=function(src){goog.global.document.write('<script type="text/javascript" src="'+src+'"><\/script>')};goog.appendScriptSrcNode_=function(src){var doc=goog.global.document;var scriptEl=doc.createElement("script");scriptEl.type="text/javascript";scriptEl.src=src;scriptEl.defer=false;scriptEl.async=false;doc.head.appendChild(scriptEl)};goog.writeScriptTag_=function(src,opt_sourceText){if(goog.inHtmlDocument_()){var doc=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&doc.readyState=="complete"){var isDeps=/\bdeps.js$/.test(src);if(isDeps){return false}else{throw Error('Cannot write "'+src+'" after document load')}}var isOldIE=goog.IS_OLD_IE_;if(opt_sourceText===undefined){if(!isOldIE){if(goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){goog.appendScriptSrcNode_(src)}else{goog.writeScriptSrcNode_(src)}}else{var state=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";doc.write('<script type="text/javascript" src="'+src+'"'+state+"><\/script>")}}else{doc.write('<script type="text/javascript">'+opt_sourceText+"<\/script>")}return true}else{return false}};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(script,scriptIndex){if(script.readyState=="complete"&&goog.lastNonModuleScriptIndex_==scriptIndex){goog.loadQueuedModules_()}return true};goog.writeScripts_=function(){var scripts=[];var seenScript={};var deps=goog.dependencies_;function visitNode(path){if(path in deps.written){return}if(path in deps.visited){if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}return}deps.visited[path]=true;if(path in deps.requires){for(var requireName in deps.requires[path]){if(!goog.isProvided_(requireName)){if(requireName in deps.nameToPath){visitNode(deps.nameToPath[requireName])}else{throw Error("Undefined nameToPath for "+requireName)}}}}if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}for(var path in goog.included_){if(!deps.written[path]){visitNode(path)}}for(var i=0;i<scripts.length;i++){var path=scripts[i];goog.dependencies_.written[path]=true}var moduleState=goog.moduleLoaderState_;goog.moduleLoaderState_=null;var loadingModule=false;for(var i=0;i<scripts.length;i++){var path=scripts[i];if(path){if(!deps.pathIsModule[path]){goog.importScript_(goog.basePath+path)}else{loadingModule=true;goog.importModule_(goog.basePath+path)}}else{goog.moduleLoaderState_=moduleState;throw Error("Undefined script input")}}goog.moduleLoaderState_=moduleState};goog.getPathFromDeps_=function(rule){if(rule in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[rule]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){goog.importScript_(goog.basePath+"deps.js")}}goog.normalizePath_=function(path){var components=path.split("/");var i=0;while(i<components.length){if(components[i]=="."){components.splice(i,1)}else{if(i&&components[i]==".."&&components[i-1]&&components[i-1]!=".."){components.splice(--i,2)}else{i++}}}return components.join("/")};goog.loadFileSync_=function(src){if(goog.global.CLOSURE_LOAD_FILE_SYNC){return goog.global.CLOSURE_LOAD_FILE_SYNC(src)}else{var xhr=new goog.global.XMLHttpRequest();xhr.open("get",src,false);xhr.send();return xhr.responseText}};goog.retrieveAndExecModule_=function(src){if(!COMPILED){var originalPath=src;src=goog.normalizePath_(src);var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var scriptText=goog.loadFileSync_(src);if(scriptText!=null){var execModuleScript=goog.wrapModule_(src,scriptText);var isOldIE=goog.IS_OLD_IE_;if(isOldIE){goog.dependencies_.deferred[originalPath]=execModuleScript;goog.queuedModules_.push(originalPath)}else{importScript(src,execModuleScript)}}else{throw new Error("load of "+src+"failed")}}};goog.typeOf=function(value){var s=typeof value;if(s=="object"){if(value){if(value instanceof Array){return"array"}else{if(value instanceof Object){return s}}var className=Object.prototype.toString.call((value));if(className=="[object Window]"){return"object"}if((className=="[object Array]"||typeof value.length=="number"&&typeof value.splice!="undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("splice"))){return"array"}if((className=="[object Function]"||typeof value.call!="undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(s=="function"&&typeof value.call=="undefined"){return"object"}}return s};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=="array"};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=="array"||type=="object"&&typeof val.length=="number"};goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=="function"};goog.isString=function(val){return typeof val=="string"};goog.isBoolean=function(val){return typeof val=="boolean"};goog.isNumber=function(val){return typeof val=="number"};goog.isFunction=function(val){return goog.typeOf(val)=="function"};goog.isObject=function(val){var type=typeof val;return type=="object"&&val!=null||type=="function"};goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(obj){return !!obj[goog.UID_PROPERTY_]};goog.removeUid=function(obj){if("removeAttribute" in obj){obj.removeAttribute(goog.UID_PROPERTY_)}try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_="closure_uid_"+((Math.random()*1000000000)>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(obj.clone){return obj.clone()}var clone=type=="array"?[]:{};for(var key in obj){clone[key]=goog.cloneObject(obj[key])}return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return(fn.call.apply(fn.bind,arguments))};goog.bindJs_=function(fn,selfObj,var_args){if(!fn){throw new Error()}if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else{return function(){return fn.apply(selfObj,arguments)}}};goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=args.slice();newArgs.push.apply(newArgs,arguments);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source){target[x]=source[x]}};goog.now=(goog.TRUSTED_SITE&&Date.now)||(function(){return +new Date()});goog.globalEval=function(script){if(goog.global.execScript){goog.global.execScript(script,"JavaScript")}else{if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _evalTest_ = 1;");if(typeof goog.global._evalTest_!="undefined"){try{delete goog.global._evalTest_}catch(ignore){}goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(script)}else{var doc=goog.global.document;var scriptElt=doc.createElement("SCRIPT");scriptElt.type="text/javascript";scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(className,opt_modifier){var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split("-");var mapped=[];for(var i=0;i<parts.length;i++){mapped.push(getMapping(parts[i]))}return mapped.join("-")};var rename;if(goog.cssNameMapping_){rename=goog.cssNameMappingStyle_=="BY_WHOLE"?getMapping:renameByParts}else{rename=function(a){return a}}if(opt_modifier){return className+"-"+rename(opt_modifier)}else{return rename(className)}};goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING){goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING}goog.getMsg=function(str,opt_values){if(opt_values){str=str.replace(/\{\$([^}]+)}/g,function(match,key){return key in opt_values?opt_values[key]:match})}return str};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor();childCtor.prototype.constructor=childCtor;childCtor.base=function(me,methodName,var_args){var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i]}return parentCtor.prototype[methodName].apply(me,args)}};goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||(goog.DEBUG&&!caller)){throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C")}if(caller.superClass_){var ctorArgs=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++){ctorArgs[i-1]=arguments[i]}return caller.superClass_.constructor.apply(me,ctorArgs)}var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i]}var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor){if(ctor.prototype[opt_methodName]===caller){foundCaller=true}else{if(foundCaller){return ctor.prototype[opt_methodName].apply(me,args)}}}if(me[opt_methodName]===caller){return me.constructor.prototype[opt_methodName].apply(me,args)}else{throw Error("goog.base called from a method of one name to a method of a different name")}};goog.scope=function(fn){fn.call(goog.global)};if(!COMPILED){goog.global.COMPILED=COMPILED}goog.defineClass=function(superClass,def){var constructor=def.constructor;var statics=def.statics;if(!constructor||constructor==Object.prototype.constructor){constructor=function(){throw Error("cannot instantiate an interface (no constructor defined).")}}var cls=goog.defineClass.createSealingConstructor_(constructor,superClass);if(superClass){goog.inherits(cls,superClass)}delete def.constructor;delete def.statics;goog.defineClass.applyProperties_(cls.prototype,def);if(statics!=null){if(statics instanceof Function){statics(cls)}else{goog.defineClass.applyProperties_(cls,statics)}}return cls};goog.defineClass.ClassDescriptor;goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(ctr,superClass){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(superClass&&superClass.prototype&&superClass.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]){return ctr}var wrappedCtr=function(){var instance=ctr.apply(this,arguments)||this;instance[goog.UID_PROPERTY_]=instance[goog.UID_PROPERTY_];if(this.constructor===wrappedCtr){Object.seal(instance)}return instance};return wrappedCtr}return ctr};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(target,source){var key;for(key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){key=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}};goog.tagUnsealableClass=function(ctr){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES){ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.provide("ol.PostRenderFunction");goog.provide("ol.PreRenderFunction");ol.PostRenderFunction;ol.PreRenderFunction;goog.provide("goog.debug.Error");goog.debug.Error=function(opt_msg){if(Error.captureStackTrace){Error.captureStackTrace(this,goog.debug.Error)}else{var stack=new Error().stack;if(stack){this.stack=stack}}if(opt_msg){this.message=String(opt_msg)}this.reportErrorToServer=true};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.provide("goog.dom.NodeType");goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.provide("goog.string");goog.provide("goog.string.Unicode");goog.define("goog.string.DETECT_DOUBLE_ESCAPING",false);goog.define("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",false);goog.string.Unicode={NBSP:"\xa0"};goog.string.startsWith=function(str,prefix){return str.lastIndexOf(prefix,0)==0};goog.string.endsWith=function(str,suffix){var l=str.length-suffix.length;return l>=0&&str.indexOf(suffix,l)==l};goog.string.caseInsensitiveStartsWith=function(str,prefix){return goog.string.caseInsensitiveCompare(prefix,str.substr(0,prefix.length))==0};goog.string.caseInsensitiveEndsWith=function(str,suffix){return goog.string.caseInsensitiveCompare(suffix,str.substr(str.length-suffix.length,suffix.length))==0};goog.string.caseInsensitiveEquals=function(str1,str2){return str1.toLowerCase()==str2.toLowerCase()};goog.string.subs=function(str,var_args){var splitParts=str.split("%s");var returnString="";var subsArguments=Array.prototype.slice.call(arguments,1);while(subsArguments.length&&splitParts.length>1){returnString+=splitParts.shift()+subsArguments.shift()}return returnString+splitParts.join("%s")};goog.string.collapseWhitespace=function(str){return str.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=function(str){return/^[\s\xa0]*$/.test(str)};goog.string.isEmptyString=function(str){return str.length==0};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(str){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(str))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(str){return !/[^\t\n\r ]/.test(str)};goog.string.isAlpha=function(str){return !/[^a-zA-Z]/.test(str)};goog.string.isNumeric=function(str){return !/[^0-9]/.test(str)};goog.string.isAlphaNumeric=function(str){return !/[^a-zA-Z0-9]/.test(str)};goog.string.isSpace=function(ch){return ch==" "};goog.string.isUnicodeChar=function(ch){return ch.length==1&&ch>=" "&&ch<="~"||ch>="\u0080"&&ch<="\uFFFD"};goog.string.stripNewlines=function(str){return str.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(str){return str.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(str){return str.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(str){return str.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(str){return str.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=(goog.TRUSTED_SITE&&String.prototype.trim)?function(str){return str.trim()}:function(str){return str.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(str){return str.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(str){return str.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(str1,str2){var test1=String(str1).toLowerCase();var test2=String(str2).toLowerCase();if(test1<test2){return -1}else{if(test1==test2){return 0}else{return 1}}};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;goog.string.numerateCompare=function(str1,str2){if(str1==str2){return 0}if(!str1){return -1}if(!str2){return 1}var tokens1=str1.toLowerCase().match(goog.string.numerateCompareRegExp_);var tokens2=str2.toLowerCase().match(goog.string.numerateCompareRegExp_);var count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i];var b=tokens2[i];if(a!=b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2){return num1-num2}}return a<b?-1:1}}if(tokens1.length!=tokens2.length){return tokens1.length-tokens2.length}return str1<str2?-1:1};goog.string.urlEncode=function(str){return encodeURIComponent(String(str))};goog.string.urlDecode=function(str){return decodeURIComponent(str.replace(/\+/g," "))};goog.string.newLineToBr=function(str,opt_xml){return str.replace(/(\r\n|\r|\n)/g,opt_xml?"<br />":"<br>")};goog.string.htmlEscape=function(str,opt_isLikelyToContainHtmlChars){if(opt_isLikelyToContainHtmlChars){str=str.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;");if(goog.string.DETECT_DOUBLE_ESCAPING){str=str.replace(goog.string.E_RE_,"&#101;")}return str}else{if(!goog.string.ALL_RE_.test(str)){return str}if(str.indexOf("&")!=-1){str=str.replace(goog.string.AMP_RE_,"&amp;")}if(str.indexOf("<")!=-1){str=str.replace(goog.string.LT_RE_,"&lt;")}if(str.indexOf(">")!=-1){str=str.replace(goog.string.GT_RE_,"&gt;")}if(str.indexOf('"')!=-1){str=str.replace(goog.string.QUOT_RE_,"&quot;")}if(str.indexOf("'")!=-1){str=str.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")}if(str.indexOf("\x00")!=-1){str=str.replace(goog.string.NULL_RE_,"&#0;")}if(goog.string.DETECT_DOUBLE_ESCAPING&&str.indexOf("e")!=-1){str=str.replace(goog.string.E_RE_,"&#101;")}return str}};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=(goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/);goog.string.unescapeEntities=function(str){if(goog.string.contains(str,"&")){if(!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document" in goog.global){return goog.string.unescapeEntitiesUsingDom_(str)}else{return goog.string.unescapePureXmlEntities_(str)}}return str};goog.string.unescapeEntitiesWithDocument=function(str,document){if(goog.string.contains(str,"&")){return goog.string.unescapeEntitiesUsingDom_(str,document)}return str};goog.string.unescapeEntitiesUsingDom_=function(str,opt_document){var seen={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var div;if(opt_document){div=opt_document.createElement("div")}else{div=goog.global.document.createElement("div")}return str.replace(goog.string.HTML_ENTITY_PATTERN_,function(s,entity){var value=seen[s];if(value){return value}if(entity.charAt(0)=="#"){var n=Number("0"+entity.substr(1));if(!isNaN(n)){value=String.fromCharCode(n)}}if(!value){div.innerHTML=s+" ";value=div.firstChild.nodeValue.slice(0,-1)}return seen[s]=value})};goog.string.unescapePureXmlEntities_=function(str){return str.replace(/&([^;]+);/g,function(s,entity){switch(entity){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if(entity.charAt(0)=="#"){var n=Number("0"+entity.substr(1));if(!isNaN(n)){return String.fromCharCode(n)}}return s}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(str,opt_xml){return goog.string.newLineToBr(str.replace(/  /g," &#160;"),opt_xml)};goog.string.preserveSpaces=function(str){return str.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(str,quoteChars){var length=quoteChars.length;for(var i=0;i<length;i++){var quoteChar=length==1?quoteChars:quoteChars.charAt(i);if(str.charAt(0)==quoteChar&&str.charAt(str.length-1)==quoteChar){return str.substring(1,str.length-1)}}return str};goog.string.truncate=function(str,chars,opt_protectEscapedCharacters){if(opt_protectEscapedCharacters){str=goog.string.unescapeEntities(str)}if(str.length>chars){str=str.substring(0,chars-3)+"..."}if(opt_protectEscapedCharacters){str=goog.string.htmlEscape(str)}return str};goog.string.truncateMiddle=function(str,chars,opt_protectEscapedCharacters,opt_trailingChars){if(opt_protectEscapedCharacters){str=goog.string.unescapeEntities(str)}if(opt_trailingChars&&str.length>chars){if(opt_trailingChars>chars){opt_trailingChars=chars}var endPoint=str.length-opt_trailingChars;var startPoint=chars-opt_trailingChars;str=str.substring(0,startPoint)+"..."+str.substring(endPoint)}else{if(str.length>chars){var half=Math.floor(chars/2);var endPos=str.length-half;half+=chars%2;str=str.substring(0,half)+"..."+str.substring(endPos)}}if(opt_protectEscapedCharacters){str=goog.string.htmlEscape(str)}return str};goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(s){s=String(s);if(s.quote){return s.quote()}else{var sb=['"'];for(var i=0;i<s.length;i++){var ch=s.charAt(i);var cc=ch.charCodeAt(0);sb[i+1]=goog.string.specialEscapeChars_[ch]||((cc>31&&cc<127)?ch:goog.string.escapeChar(ch))}sb.push('"');return sb.join("")}};goog.string.escapeString=function(str){var sb=[];for(var i=0;i<str.length;i++){sb[i]=goog.string.escapeChar(str.charAt(i))}return sb.join("")};goog.string.escapeChar=function(c){if(c in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[c]}if(c in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[c]=goog.string.specialEscapeChars_[c]}var rv=c;var cc=c.charCodeAt(0);if(cc>31&&cc<127){rv=c}else{if(cc<256){rv="\\x";if(cc<16||cc>256){rv+="0"}}else{rv="\\u";if(cc<4096){rv+="0"}}rv+=cc.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[c]=rv};goog.string.contains=function(str,subString){return str.indexOf(subString)!=-1};goog.string.caseInsensitiveContains=function(str,subString){return goog.string.contains(str.toLowerCase(),subString.toLowerCase())};goog.string.countOf=function(s,ss){return s&&ss?s.split(ss).length-1:0};goog.string.removeAt=function(s,index,stringLength){var resultStr=s;if(index>=0&&index<s.length&&stringLength>0){resultStr=s.substr(0,index)+s.substr(index+stringLength,s.length-index-stringLength)}return resultStr};goog.string.remove=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"");return s.replace(re,"")};goog.string.removeAll=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"g");return s.replace(re,"")};goog.string.regExpEscape=function(s){return String(s).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(string,length){return new Array(length+1).join(string)};goog.string.padNumber=function(num,length,opt_precision){var s=goog.isDef(opt_precision)?num.toFixed(opt_precision):String(num);var index=s.indexOf(".");if(index==-1){index=s.length}return goog.string.repeat("0",Math.max(0,length-index))+s};goog.string.makeSafe=function(obj){return obj==null?"":String(obj)};goog.string.buildString=function(var_args){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){var x=2147483648;return Math.floor(Math.random()*x).toString(36)+Math.abs(Math.floor(Math.random()*x)^goog.now()).toString(36)};goog.string.compareVersions=function(version1,version2){var order=0;var v1Subs=goog.string.trim(String(version1)).split(".");var v2Subs=goog.string.trim(String(version2)).split(".");var subCount=Math.max(v1Subs.length,v2Subs.length);for(var subIdx=0;order==0&&subIdx<subCount;subIdx++){var v1Sub=v1Subs[subIdx]||"";var v2Sub=v2Subs[subIdx]||"";var v1CompParser=new RegExp("(\\d*)(\\D*)","g");var v2CompParser=new RegExp("(\\d*)(\\D*)","g");do{var v1Comp=v1CompParser.exec(v1Sub)||["","",""];var v2Comp=v2CompParser.exec(v2Sub)||["","",""];if(v1Comp[0].length==0&&v2Comp[0].length==0){break}var v1CompNum=v1Comp[1].length==0?0:parseInt(v1Comp[1],10);var v2CompNum=v2Comp[1].length==0?0:parseInt(v2Comp[1],10);order=goog.string.compareElements_(v1CompNum,v2CompNum)||goog.string.compareElements_(v1Comp[2].length==0,v2Comp[2].length==0)||goog.string.compareElements_(v1Comp[2],v2Comp[2])}while(order==0)}return order};goog.string.compareElements_=function(left,right){if(left<right){return -1}else{if(left>right){return 1}}return 0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(str){var result=0;for(var i=0;i<str.length;++i){result=31*result+str.charCodeAt(i);result%=goog.string.HASHCODE_MAX_}return result};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(str){var num=Number(str);if(num==0&&goog.string.isEmptyOrWhitespace(str)){return NaN}return num};goog.string.isLowerCamelCase=function(str){return/^[a-z]+([A-Z][a-z]*)*$/.test(str)};goog.string.isUpperCamelCase=function(str){return/^([A-Z][a-z]*)+$/.test(str)};goog.string.toCamelCase=function(str){return String(str).replace(/\-([a-z])/g,function(all,match){return match.toUpperCase()})};goog.string.toSelectorCase=function(str){return String(str).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(str,opt_delimiters){var delimiters=goog.isString(opt_delimiters)?goog.string.regExpEscape(opt_delimiters):"\\s";delimiters=delimiters?"|["+delimiters+"]+":"";var regexp=new RegExp("(^"+delimiters+")([a-z])","g");return str.replace(regexp,function(all,p1,p2){return p1+p2.toUpperCase()})};goog.string.capitalize=function(str){return String(str.charAt(0)).toUpperCase()+String(str.substr(1)).toLowerCase()};goog.string.parseInt=function(value){if(isFinite(value)){value=String(value)}if(goog.isString(value)){return/^\s*-?0x/i.test(value)?parseInt(value,16):parseInt(value,10)}return NaN};goog.string.splitLimit=function(str,separator,limit){var parts=str.split(separator);var returnVal=[];while(limit>0&&parts.length){returnVal.push(parts.shift());limit--}if(parts.length){returnVal.push(parts.join(separator))}return returnVal};goog.string.editDistance=function(a,b){var v0=[];var v1=[];if(a==b){return 0}if(!a.length||!b.length){return Math.max(a.length,b.length)}for(var i=0;i<b.length+1;i++){v0[i]=i}for(var i=0;i<a.length;i++){v1[0]=i+1;for(var j=0;j<b.length;j++){var cost=a[i]!=b[j];v1[j+1]=Math.min(v1[j]+1,v0[j+1]+1,v0[j]+cost)}for(var j=0;j<v0.length;j++){v0[j]=v1[j]}}return v1[b.length]};goog.provide("goog.asserts");goog.provide("goog.asserts.AssertionError");goog.require("goog.debug.Error");goog.require("goog.dom.NodeType");goog.require("goog.string");goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG);goog.asserts.AssertionError=function(messagePattern,messageArgs){messageArgs.unshift(messagePattern);goog.debug.Error.call(this,goog.string.subs.apply(null,messageArgs));messageArgs.shift();this.messagePattern=messagePattern};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(defaultMessage,defaultArgs,givenMessage,givenArgs){var message="Assertion failed";if(givenMessage){message+=": "+givenMessage;var args=givenArgs}else{if(defaultMessage){message+=": "+defaultMessage;args=defaultArgs}}var e=new goog.asserts.AssertionError(""+message,args||[]);goog.asserts.errorHandler_(e)};goog.asserts.setErrorHandler=function(errorHandler){if(goog.asserts.ENABLE_ASSERTS){goog.asserts.errorHandler_=errorHandler}};goog.asserts.assert=function(condition,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!condition){goog.asserts.doAssertFailure_("",null,opt_message,Array.prototype.slice.call(arguments,2))}return condition};goog.asserts.fail=function(opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS){goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(opt_message?": "+opt_message:""),Array.prototype.slice.call(arguments,1)))}};goog.asserts.assertNumber=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(value)){goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertString=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isString(value)){goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertFunction=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(value)){goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertObject=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isObject(value)){goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertArray=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isArray(value)){goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertBoolean=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(value)){goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertElement=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&(!goog.isObject(value)||value.nodeType!=goog.dom.NodeType.ELEMENT)){goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2))}return(value)};goog.asserts.assertInstanceof=function(value,type,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!(value instanceof type)){goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(type),goog.asserts.getType_(value)],opt_message,Array.prototype.slice.call(arguments,3))}return value};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var key in Object.prototype){goog.asserts.fail(key+" should not be enumerable in Object.prototype.")}};goog.asserts.getType_=function(value){if(value instanceof Function){return value.displayName||value.name||"unknown type name"}else{if(value instanceof Object){return value.constructor.displayName||value.constructor.name||Object.prototype.toString.call(value)}else{return value===null?"null":typeof value}}};goog.provide("goog.array");goog.provide("goog.array.ArrayLike");goog.require("goog.asserts");goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE);goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",false);goog.array.ArrayLike;goog.array.peek=function(array){return array[array.length-1]};goog.array.last=goog.array.peek;goog.array.ARRAY_PROTOTYPE_=Array.prototype;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(arr,obj,opt_fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?0:(opt_fromIndex<0?Math.max(0,arr.length+opt_fromIndex):opt_fromIndex);if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=1){return -1}return arr.indexOf(obj,fromIndex)}for(var i=fromIndex;i<arr.length;i++){if(i in arr&&arr[i]===obj){return i}}return -1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(arr,obj,fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;if(fromIndex<0){fromIndex=Math.max(0,arr.length+fromIndex)}if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=1){return -1}return arr.lastIndexOf(obj,fromIndex)}for(var i=fromIndex;i>=0;i--){if(i in arr&&arr[i]===obj){return i}}return -1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);goog.array.ARRAY_PROTOTYPE_.forEach.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++){if(i in arr2){f.call(opt_obj,arr2[i],i,arr)}}};goog.array.forEachRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=l-1;i>=0;--i){if(i in arr2){f.call(opt_obj,arr2[i],i,arr)}}};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.filter.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=[];var resLength=0;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++){if(i in arr2){var val=arr2[i];if(f.call(opt_obj,val,i,arr)){res[resLength++]=val}}}return res};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.map.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=new Array(l);var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++){if(i in arr2){res[i]=f.call(opt_obj,arr2[i],i,arr)}}return res};goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(arr,f,val,opt_obj){goog.asserts.assert(arr.length!=null);if(opt_obj){f=goog.bind(f,opt_obj)}return goog.array.ARRAY_PROTOTYPE_.reduce.call(arr,f,val)}:function(arr,f,val,opt_obj){var rval=val;goog.array.forEach(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(arr,f,val,opt_obj){goog.asserts.assert(arr.length!=null);if(opt_obj){f=goog.bind(f,opt_obj)}return goog.array.ARRAY_PROTOTYPE_.reduceRight.call(arr,f,val)}:function(arr,f,val,opt_obj){var rval=val;goog.array.forEachRight(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.some.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++){if(i in arr2&&f.call(opt_obj,arr2[i],i,arr)){return true}}return false};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.every.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++){if(i in arr2&&!f.call(opt_obj,arr2[i],i,arr)){return false}}return true};goog.array.count=function(arr,f,opt_obj){var count=0;goog.array.forEach(arr,function(element,index,arr){if(f.call(opt_obj,element,index,arr)){++count}},opt_obj);return count};goog.array.find=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndex=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++){if(i in arr2&&f.call(opt_obj,arr2[i],i,arr)){return i}}return -1};goog.array.findRight=function(arr,f,opt_obj){var i=goog.array.findIndexRight(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndexRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=l-1;i>=0;i--){if(i in arr2&&f.call(opt_obj,arr2[i],i,arr)){return i}}return -1};goog.array.contains=function(arr,obj){return goog.array.indexOf(arr,obj)>=0};goog.array.isEmpty=function(arr){return arr.length==0};goog.array.clear=function(arr){if(!goog.isArray(arr)){for(var i=arr.length-1;i>=0;i--){delete arr[i]}}arr.length=0};goog.array.insert=function(arr,obj){if(!goog.array.contains(arr,obj)){arr.push(obj)}};goog.array.insertAt=function(arr,obj,opt_i){goog.array.splice(arr,opt_i,0,obj)};goog.array.insertArrayAt=function(arr,elementsToAdd,opt_i){goog.partial(goog.array.splice,arr,opt_i,0).apply(null,elementsToAdd)};goog.array.insertBefore=function(arr,obj,opt_obj2){var i;if(arguments.length==2||(i=goog.array.indexOf(arr,opt_obj2))<0){arr.push(obj)}else{goog.array.insertAt(arr,obj,i)}};goog.array.remove=function(arr,obj){var i=goog.array.indexOf(arr,obj);var rv;if((rv=i>=0)){goog.array.removeAt(arr,i)}return rv};goog.array.removeAt=function(arr,i){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.call(arr,i,1).length==1};goog.array.removeIf=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);if(i>=0){goog.array.removeAt(arr,i);return true}return false};goog.array.removeAllIf=function(arr,f,opt_obj){var removedCount=0;goog.array.forEachRight(arr,function(val,index){if(f.call(opt_obj,val,index,arr)){if(goog.array.removeAt(arr,index)){removedCount++}}});return removedCount};goog.array.concat=function(var_args){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.join=function(var_args){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(object){var length=object.length;if(length>0){var rv=new Array(length);for(var i=0;i<length;i++){rv[i]=object[i]}return rv}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(arr1,var_args){for(var i=1;i<arguments.length;i++){var arr2=arguments[i];if(goog.isArrayLike(arr2)){var len1=arr1.length||0;var len2=arr2.length||0;arr1.length=len1+len2;for(var j=0;j<len2;j++){arr1[len1+j]=arr2[j]}}else{arr1.push(arr2)}}};goog.array.splice=function(arr,index,howMany,var_args){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.apply(arr,goog.array.slice(arguments,1))};goog.array.slice=function(arr,start,opt_end){goog.asserts.assert(arr.length!=null);if(arguments.length<=2){return goog.array.ARRAY_PROTOTYPE_.slice.call(arr,start)}else{return goog.array.ARRAY_PROTOTYPE_.slice.call(arr,start,opt_end)}};goog.array.removeDuplicates=function(arr,opt_rv,opt_hashFn){var returnArray=opt_rv||arr;var defaultHashFn=function(item){return goog.isObject(item)?"o"+goog.getUid(item):(typeof item).charAt(0)+item};var hashFn=opt_hashFn||defaultHashFn;var seen={},cursorInsert=0,cursorRead=0;while(cursorRead<arr.length){var current=arr[cursorRead++];var key=hashFn(current);if(!Object.prototype.hasOwnProperty.call(seen,key)){seen[key]=true;returnArray[cursorInsert++]=current}}returnArray.length=cursorInsert};goog.array.binarySearch=function(arr,target,opt_compareFn){return goog.array.binarySearch_(arr,opt_compareFn||goog.array.defaultCompare,false,target)};goog.array.binarySelect=function(arr,evaluator,opt_obj){return goog.array.binarySearch_(arr,evaluator,true,undefined,opt_obj)};goog.array.binarySearch_=function(arr,compareFn,isEvaluator,opt_target,opt_selfObj){var left=0;var right=arr.length;var found;while(left<right){var middle=(left+right)>>1;var compareResult;if(isEvaluator){compareResult=compareFn.call(opt_selfObj,arr[middle],middle,arr)}else{compareResult=compareFn(opt_target,arr[middle])}if(compareResult>0){left=middle+1}else{right=middle;found=!compareResult}}return found?left:~left};goog.array.sort=function(arr,opt_compareFn){arr.sort(opt_compareFn||goog.array.defaultCompare)};goog.array.stableSort=function(arr,opt_compareFn){for(var i=0;i<arr.length;i++){arr[i]={index:i,value:arr[i]}}var valueCompareFn=opt_compareFn||goog.array.defaultCompare;function stableCompareFn(obj1,obj2){return valueCompareFn(obj1.value,obj2.value)||obj1.index-obj2.index}goog.array.sort(arr,stableCompareFn);for(var i=0;i<arr.length;i++){arr[i]=arr[i].value}};goog.array.sortByKey=function(arr,keyFn,opt_compareFn){var keyCompareFn=opt_compareFn||goog.array.defaultCompare;goog.array.sort(arr,function(a,b){return keyCompareFn(keyFn(a),keyFn(b))})};goog.array.sortObjectsByKey=function(arr,key,opt_compareFn){goog.array.sortByKey(arr,function(obj){return obj[key]},opt_compareFn)};goog.array.isSorted=function(arr,opt_compareFn,opt_strict){var compare=opt_compareFn||goog.array.defaultCompare;for(var i=1;i<arr.length;i++){var compareResult=compare(arr[i-1],arr[i]);if(compareResult>0||compareResult==0&&opt_strict){return false}}return true};goog.array.equals=function(arr1,arr2,opt_equalsFn){if(!goog.isArrayLike(arr1)||!goog.isArrayLike(arr2)||arr1.length!=arr2.length){return false}var l=arr1.length;var equalsFn=opt_equalsFn||goog.array.defaultCompareEquality;for(var i=0;i<l;i++){if(!equalsFn(arr1[i],arr2[i])){return false}}return true};goog.array.compare3=function(arr1,arr2,opt_compareFn){var compare=opt_compareFn||goog.array.defaultCompare;var l=Math.min(arr1.length,arr2.length);for(var i=0;i<l;i++){var result=compare(arr1[i],arr2[i]);if(result!=0){return result}}return goog.array.defaultCompare(arr1.length,arr2.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.inverseDefaultCompare=function(a,b){return -goog.array.defaultCompare(a,b)};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);if(index<0){goog.array.insertAt(array,value,-(index+1));return true}return false};goog.array.binaryRemove=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);return(index>=0)?goog.array.removeAt(array,index):false};goog.array.bucket=function(array,sorter,opt_obj){var buckets={};for(var i=0;i<array.length;i++){var value=array[i];var key=sorter.call(opt_obj,value,i,array);if(goog.isDef(key)){var bucket=buckets[key]||(buckets[key]=[]);bucket.push(value)}}return buckets};goog.array.toObject=function(arr,keyFunc,opt_obj){var ret={};goog.array.forEach(arr,function(element,index){ret[keyFunc.call(opt_obj,element,index,arr)]=element});return ret};goog.array.range=function(startOrEnd,opt_end,opt_step){var array=[];var start=0;var end=startOrEnd;var step=opt_step||1;if(opt_end!==undefined){start=startOrEnd;end=opt_end}if(step*(end-start)<0){return[]}if(step>0){for(var i=start;i<end;i+=step){array.push(i)}}else{for(var i=start;i>end;i+=step){array.push(i)}}return array};goog.array.repeat=function(value,n){var array=[];for(var i=0;i<n;i++){array[i]=value}return array};goog.array.flatten=function(var_args){var CHUNK_SIZE=8192;var result=[];for(var i=0;i<arguments.length;i++){var element=arguments[i];if(goog.isArray(element)){for(var c=0;c<element.length;c+=CHUNK_SIZE){var chunk=goog.array.slice(element,c,c+CHUNK_SIZE);var recurseResult=goog.array.flatten.apply(null,chunk);for(var r=0;r<recurseResult.length;r++){result.push(recurseResult[r])}}}else{result.push(element)}}return result};goog.array.rotate=function(array,n){goog.asserts.assert(array.length!=null);if(array.length){n%=array.length;if(n>0){goog.array.ARRAY_PROTOTYPE_.unshift.apply(array,array.splice(-n,n))}else{if(n<0){goog.array.ARRAY_PROTOTYPE_.push.apply(array,array.splice(0,-n))}}}return array};goog.array.moveItem=function(arr,fromIndex,toIndex){goog.asserts.assert(fromIndex>=0&&fromIndex<arr.length);goog.asserts.assert(toIndex>=0&&toIndex<arr.length);var removedItems=goog.array.ARRAY_PROTOTYPE_.splice.call(arr,fromIndex,1);goog.array.ARRAY_PROTOTYPE_.splice.call(arr,toIndex,0,removedItems[0])};goog.array.zip=function(var_args){if(!arguments.length){return[]}var result=[];for(var i=0;true;i++){var value=[];for(var j=0;j<arguments.length;j++){var arr=arguments[j];if(i>=arr.length){return result}value.push(arr[i])}result.push(value)}};goog.array.shuffle=function(arr,opt_randFn){var randFn=opt_randFn||Math.random;for(var i=arr.length-1;i>0;i--){var j=Math.floor(randFn()*(i+1));var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}};goog.array.copyByIndex=function(arr,index_arr){var result=[];goog.array.forEach(index_arr,function(index){result.push(arr[index])});return result};goog.provide("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.util.getNativeUserAgentString_=function(){var navigator=goog.labs.userAgent.util.getNavigator_();if(navigator){var userAgent=navigator.userAgent;if(userAgent){return userAgent}}return""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(opt_userAgent){goog.labs.userAgent.util.userAgent_=opt_userAgent||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(str){var userAgent=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(userAgent,str)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(str){var userAgent=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(userAgent,str)};goog.labs.userAgent.util.extractVersionTuples=function(userAgent){var versionRegExp=new RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g");var data=[];var match;while(match=versionRegExp.exec(userAgent)){data.push([match[1],match[2],match[3]||undefined])}return data};goog.provide("goog.object");goog.object.forEach=function(obj,f,opt_obj){for(var key in obj){f.call(opt_obj,obj[key],key,obj)}};goog.object.filter=function(obj,f,opt_obj){var res={};for(var key in obj){if(f.call(opt_obj,obj[key],key,obj)){res[key]=obj[key]}}return res};goog.object.map=function(obj,f,opt_obj){var res={};for(var key in obj){res[key]=f.call(opt_obj,obj[key],key,obj)}return res};goog.object.some=function(obj,f,opt_obj){for(var key in obj){if(f.call(opt_obj,obj[key],key,obj)){return true}}return false};goog.object.every=function(obj,f,opt_obj){for(var key in obj){if(!f.call(opt_obj,obj[key],key,obj)){return false}}return true};goog.object.getCount=function(obj){var rv=0;for(var key in obj){rv++}return rv};goog.object.getAnyKey=function(obj){for(var key in obj){return key}};goog.object.getAnyValue=function(obj){for(var key in obj){return obj[key]}};goog.object.contains=function(obj,val){return goog.object.containsValue(obj,val)};goog.object.getValues=function(obj){var res=[];var i=0;for(var key in obj){res[i++]=obj[key]}return res};goog.object.getKeys=function(obj){var res=[];var i=0;for(var key in obj){res[i++]=key}return res};goog.object.getValueByKeys=function(obj,var_args){var isArrayLike=goog.isArrayLike(var_args);var keys=isArrayLike?var_args:arguments;for(var i=isArrayLike?0:1;i<keys.length;i++){obj=obj[keys[i]];if(!goog.isDef(obj)){break}}return obj};goog.object.containsKey=function(obj,key){return key in obj};goog.object.containsValue=function(obj,val){for(var key in obj){if(obj[key]==val){return true}}return false};goog.object.findKey=function(obj,f,opt_this){for(var key in obj){if(f.call(opt_this,obj[key],key,obj)){return key}}return undefined};goog.object.findValue=function(obj,f,opt_this){var key=goog.object.findKey(obj,f,opt_this);return key&&obj[key]};goog.object.isEmpty=function(obj){for(var key in obj){return false}return true};goog.object.clear=function(obj){for(var i in obj){delete obj[i]}};goog.object.remove=function(obj,key){var rv;if((rv=key in obj)){delete obj[key]}return rv};goog.object.add=function(obj,key,val){if(key in obj){throw Error('The object already contains the key "'+key+'"')}goog.object.set(obj,key,val)};goog.object.get=function(obj,key,opt_val){if(key in obj){return obj[key]}return opt_val};goog.object.set=function(obj,key,value){obj[key]=value};goog.object.setIfUndefined=function(obj,key,value){return key in obj?obj[key]:(obj[key]=value)};goog.object.setWithReturnValueIfNotSet=function(obj,key,f){if(key in obj){return obj[key]}var val=f();obj[key]=val;return val};goog.object.equals=function(a,b){for(var k in a){if(!(k in b)||a[k]!==b[k]){return false}}for(var k in b){if(!(k in a)){return false}}return true};goog.object.clone=function(obj){var res={};for(var key in obj){res[key]=obj[key]}return res};goog.object.unsafeClone=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(obj.clone){return obj.clone()}var clone=type=="array"?[]:{};for(var key in obj){clone[key]=goog.object.unsafeClone(obj[key])}return clone}return obj};goog.object.transpose=function(obj){var transposed={};for(var key in obj){transposed[obj[key]]=key}return transposed};goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.object.extend=function(target,var_args){var key,source;for(var i=1;i<arguments.length;i++){source=arguments[i];for(key in source){target[key]=source[key]}for(var j=0;j<goog.object.PROTOTYPE_FIELDS_.length;j++){key=goog.object.PROTOTYPE_FIELDS_[j];if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}};goog.object.create=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0])){return goog.object.create.apply(null,arguments[0])}if(argLength%2){throw Error("Uneven number of arguments")}var rv={};for(var i=0;i<argLength;i+=2){rv[arguments[i]]=arguments[i+1]}return rv};goog.object.createSet=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0])){return goog.object.createSet.apply(null,arguments[0])}var rv={};for(var i=0;i<argLength;i++){rv[arguments[i]]=true}return rv};goog.object.createImmutableView=function(obj){var result=obj;if(Object.isFrozen&&!Object.isFrozen(obj)){result=Object.create(obj);Object.freeze(result)}return result};goog.object.isImmutableView=function(obj){return !!Object.isFrozen&&Object.isFrozen(obj)};goog.provide("goog.labs.userAgent.browser");goog.require("goog.array");goog.require("goog.labs.userAgent.util");goog.require("goog.object");goog.require("goog.string");goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};goog.labs.userAgent.browser.getVersion=function(){var userAgentString=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE()){return goog.labs.userAgent.browser.getIEVersion_(userAgentString)}var versionTuples=goog.labs.userAgent.util.extractVersionTuples(userAgentString);var versionMap={};goog.array.forEach(versionTuples,function(tuple){var key=tuple[0];var value=tuple[1];versionMap[key]=value});var versionMapHasKey=goog.partial(goog.object.containsKey,versionMap);function lookUpValueWithKeys(keys){var key=goog.array.find(keys,versionMapHasKey);return versionMap[key]||""}if(goog.labs.userAgent.browser.isOpera()){return lookUpValueWithKeys(["Version","Opera","OPR"])}if(goog.labs.userAgent.browser.isEdge()){return lookUpValueWithKeys(["Edge"])}if(goog.labs.userAgent.browser.isChrome()){return lookUpValueWithKeys(["Chrome","CriOS"])}var tuple=versionTuples[2];return tuple&&tuple[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(version){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),version)>=0};goog.labs.userAgent.browser.getIEVersion_=function(userAgent){var rv=/rv: *([\d\.]*)/.exec(userAgent);if(rv&&rv[1]){return rv[1]}var version="";var msie=/MSIE +([\d\.]+)/.exec(userAgent);if(msie&&msie[1]){var tridentVersion=/Trident\/(\d.\d)/.exec(userAgent);if(msie[1]=="7.0"){if(tridentVersion&&tridentVersion[1]){switch(tridentVersion[1]){case"4.0":version="8.0";break;case"5.0":version="9.0";break;case"6.0":version="10.0";break;case"7.0":version="11.0";break}}else{version="7.0"}}else{version=msie[1]}}return version};goog.provide("goog.labs.userAgent.engine");goog.require("goog.array");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.getVersion=function(){var userAgentString=goog.labs.userAgent.util.getUserAgent();if(userAgentString){var tuples=goog.labs.userAgent.util.extractVersionTuples(userAgentString);var engineTuple=goog.labs.userAgent.engine.getEngineTuple_(tuples);if(engineTuple){if(engineTuple[0]=="Gecko"){return goog.labs.userAgent.engine.getVersionForKey_(tuples,"Firefox")}return engineTuple[1]}var browserTuple=tuples[0];var info;if(browserTuple&&(info=browserTuple[2])){var match=/Trident\/([^\s;]+)/.exec(info);if(match){return match[1]}}}return""};goog.labs.userAgent.engine.getEngineTuple_=function(tuples){if(!goog.labs.userAgent.engine.isEdge()){return tuples[1]}for(var i=0;i<tuples.length;i++){var tuple=tuples[i];if(tuple[0]=="Edge"){return tuple}}};goog.labs.userAgent.engine.isVersionOrHigher=function(version){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),version)>=0};goog.labs.userAgent.engine.getVersionForKey_=function(tuples,key){var pair=goog.array.find(tuples,function(pair){return key==pair[0]});return pair&&pair[1]||""};goog.provide("goog.labs.userAgent.platform");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.getVersion=function(){var userAgentString=goog.labs.userAgent.util.getUserAgent();var version="",re;if(goog.labs.userAgent.platform.isWindows()){re=/Windows (?:NT|Phone) ([0-9.]+)/;var match=re.exec(userAgentString);if(match){version=match[1]}else{version="0.0"}}else{if(goog.labs.userAgent.platform.isIos()){re=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/;var match=re.exec(userAgentString);version=match&&match[1].replace(/_/g,".")}else{if(goog.labs.userAgent.platform.isMacintosh()){re=/Mac OS X ([0-9_.]+)/;var match=re.exec(userAgentString);version=match?match[1].replace(/_/g,"."):"10"}else{if(goog.labs.userAgent.platform.isAndroid()){re=/Android\s+([^\);]+)(\)|;)/;var match=re.exec(userAgentString);version=match&&match[1]}else{if(goog.labs.userAgent.platform.isChromeOS()){re=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/;var match=re.exec(userAgentString);version=match&&match[1]}}}}}return version||""};goog.labs.userAgent.platform.isVersionOrHigher=function(version){return goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),version)>=0};goog.provide("goog.userAgent");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.engine");goog.require("goog.labs.userAgent.platform");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.define("goog.userAgent.ASSUME_IE",false);goog.define("goog.userAgent.ASSUME_EDGE",false);goog.define("goog.userAgent.ASSUME_GECKO",false);goog.define("goog.userAgent.ASSUME_WEBKIT",false);goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",false);goog.define("goog.userAgent.ASSUME_OPERA",false);goog.define("goog.userAgent.ASSUME_ANY_VERSION",false);goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigator=function(){return goog.global.navigator||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var navigator=goog.userAgent.getNavigator();return navigator&&navigator.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.define("goog.userAgent.ASSUME_MAC",false);goog.define("goog.userAgent.ASSUME_WINDOWS",false);goog.define("goog.userAgent.ASSUME_LINUX",false);goog.define("goog.userAgent.ASSUME_X11",false);goog.define("goog.userAgent.ASSUME_ANDROID",false);goog.define("goog.userAgent.ASSUME_IPHONE",false);goog.define("goog.userAgent.ASSUME_IPAD",false);goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var navigator=goog.userAgent.getNavigator();return !!navigator&&goog.string.contains(navigator.appVersion||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global.opera){var operaVersion=goog.global.opera.version;return goog.isFunction(operaVersion)?operaVersion():operaVersion}var version="";var arr=goog.userAgent.getVersionRegexResult_();if(arr){version=arr?arr[1]:""}if(goog.userAgent.IE){var docMode=goog.userAgent.getDocumentMode_();if(docMode>parseFloat(version)){return String(docMode)}}return version};goog.userAgent.getVersionRegexResult_=function(){var userAgent=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO){return/rv\:([^\);]+)(\)|;)/.exec(userAgent)}if(goog.userAgent.EDGE){return/Edge\/([\d\.]+)/.exec(userAgent)}if(goog.userAgent.IE){return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(userAgent)}if(goog.userAgent.WEBKIT){return/WebKit\/(\S+)/.exec(userAgent)}};goog.userAgent.getDocumentMode_=function(){var doc=goog.global.document;return doc?doc.documentMode:undefined};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(v1,v2){return goog.string.compareVersions(v1,v2)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(version){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[version]||(goog.userAgent.isVersionOrHigherCache_[version]=goog.string.compareVersions(goog.userAgent.VERSION,version)>=0)};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(documentMode){return goog.userAgent.DOCUMENT_MODE>=documentMode};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=(function(){var doc=goog.global.document;var mode=goog.userAgent.getDocumentMode_();if(!doc||!goog.userAgent.IE){return undefined}return mode||(doc.compatMode=="CSS1Compat"?parseInt(goog.userAgent.VERSION,10):5)})();goog.require("goog.userAgent");goog.provide("ol");ol.ASSUME_TOUCH=false;ol.DEFAULT_MAX_ZOOM=42;ol.DEFAULT_MIN_ZOOM=0;ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK=2048;ol.DEFAULT_TILE_SIZE=256;ol.DEFAULT_WMS_VERSION="1.3.0";ol.DRAG_BOX_HYSTERESIS_PIXELS=8;ol.ENABLE_CANVAS=true;ol.ENABLE_DOM=true;ol.ENABLE_IMAGE=true;ol.ENABLE_NAMED_COLORS=false;ol.ENABLE_PROJ4JS=true;ol.ENABLE_TILE=true;ol.ENABLE_VECTOR=true;ol.ENABLE_WEBGL=true;ol.LEGACY_IE_SUPPORT=false;ol.INITIAL_ATLAS_SIZE=256;ol.IS_LEGACY_IE=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9.0")&&goog.userAgent.VERSION!=="";ol.MAX_ATLAS_SIZE=-1;ol.MOUSEWHEELZOOM_MAXDELTA=1;ol.MOUSEWHEELZOOM_TIMEOUT_DURATION=80;ol.OVERVIEWMAP_MAX_RATIO=0.75;ol.OVERVIEWMAP_MIN_RATIO=0.1;ol.SIMPLIFY_TOLERANCE=0.5;ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024;ol.WEBGL_MAX_TEXTURE_SIZE;ol.WEBGL_EXTENSIONS;ol.inherits=goog.inherits;goog.provide("goog.math");goog.require("goog.array");goog.require("goog.asserts");goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,b){return a+Math.random()*(b-a)};goog.math.clamp=function(value,min,max){return Math.min(Math.max(value,min),max)};goog.math.modulo=function(a,b){var r=a%b;return(r*b<0)?r+b:r};goog.math.lerp=function(a,b,x){return a+x*(b-a)};goog.math.nearlyEquals=function(a,b,opt_tolerance){return Math.abs(a-b)<=(opt_tolerance||0.000001)};goog.math.standardAngle=function(angle){return goog.math.modulo(angle,360)};goog.math.standardAngleInRadians=function(angle){return goog.math.modulo(angle,2*Math.PI)};goog.math.toRadians=function(angleDegrees){return angleDegrees*Math.PI/180};goog.math.toDegrees=function(angleRadians){return angleRadians*180/Math.PI};goog.math.angleDx=function(degrees,radius){return radius*Math.cos(goog.math.toRadians(degrees))};goog.math.angleDy=function(degrees,radius){return radius*Math.sin(goog.math.toRadians(degrees))};goog.math.angle=function(x1,y1,x2,y2){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(y2-y1,x2-x1)))};goog.math.angleDifference=function(startAngle,endAngle){var d=goog.math.standardAngle(endAngle)-goog.math.standardAngle(startAngle);if(d>180){d=d-360}else{if(d<=-180){d=360+d}}return d};goog.math.sign=Math.sign||function(x){if(x>0){return 1}if(x<0){return -1}return x};goog.math.longestCommonSubsequence=function(array1,array2,opt_compareFn,opt_collectorFn){var compare=opt_compareFn||function(a,b){return a==b};var collect=opt_collectorFn||function(i1,i2){return array1[i1]};var length1=array1.length;var length2=array2.length;var arr=[];for(var i=0;i<length1+1;i++){arr[i]=[];arr[i][0]=0}for(var j=0;j<length2+1;j++){arr[0][j]=0}for(i=1;i<=length1;i++){for(j=1;j<=length2;j++){if(compare(array1[i-1],array2[j-1])){arr[i][j]=arr[i-1][j-1]+1}else{arr[i][j]=Math.max(arr[i-1][j],arr[i][j-1])}}}var result=[];var i=length1,j=length2;while(i>0&&j>0){if(compare(array1[i-1],array2[j-1])){result.unshift(collect(i-1,j-1));i--;j--}else{if(arr[i-1][j]>arr[i][j-1]){i--}else{j--}}}return result};goog.math.sum=function(var_args){return(goog.array.reduce(arguments,function(sum,value){return sum+value},0))};goog.math.average=function(var_args){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(var_args){var sampleSize=arguments.length;if(sampleSize<2){return 0}var mean=goog.math.average.apply(null,arguments);var variance=goog.math.sum.apply(null,goog.array.map(arguments,function(val){return Math.pow(val-mean,2)}))/(sampleSize-1);return variance};goog.math.standardDeviation=function(var_args){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};goog.math.isInt=function(num){return isFinite(num)&&num%1==0};goog.math.isFiniteNumber=function(num){return isFinite(num)&&!isNaN(num)};goog.math.isNegativeZero=function(num){return num==0&&1/num<0};goog.math.log10Floor=function(num){if(num>0){var x=Math.round(Math.log(num)*Math.LOG10E);return x-(parseFloat("1e"+x)>num)}return num==0?-Infinity:NaN};goog.math.safeFloor=function(num,opt_epsilon){goog.asserts.assert(!goog.isDef(opt_epsilon)||opt_epsilon>0);return Math.floor(num+(opt_epsilon||2e-15))};goog.math.safeCeil=function(num,opt_epsilon){goog.asserts.assert(!goog.isDef(opt_epsilon)||opt_epsilon>0);return Math.ceil(num-(opt_epsilon||2e-15))};goog.provide("ol.CenterConstraint");goog.provide("ol.CenterConstraintType");goog.require("goog.math");ol.CenterConstraintType;ol.CenterConstraint.createExtent=function(extent){return(function(center){if(goog.isDef(center)){return[goog.math.clamp(center[0],extent[0],extent[2]),goog.math.clamp(center[1],extent[1],extent[3])]}else{return undefined}})};ol.CenterConstraint.none=function(center){return center};goog.provide("ol.array");goog.require("goog.array");goog.require("goog.asserts");ol.array.binaryFindNearest=function(arr,target){var index=goog.array.binarySearch(arr,target,function(a,b){return b-a});if(index>=0){return index}else{if(index==-1){return 0}else{if(index==-arr.length-1){return arr.length-1}else{var left=-index-2;var right=-index-1;if(arr[left]-target<target-arr[right]){return left}else{return right}}}}};ol.array.linearFindNearest=function(arr,target,direction){var n=arr.length;if(arr[0]<=target){return 0}else{if(target<=arr[n-1]){return n-1}else{var i;if(direction>0){for(i=1;i<n;++i){if(arr[i]<target){return i-1}}}else{if(direction<0){for(i=1;i<n;++i){if(arr[i]<=target){return i}}}else{for(i=1;i<n;++i){if(arr[i]==target){return i}else{if(arr[i]<target){if(arr[i-1]-target<target-arr[i]){return i-1}else{return i}}}}}}goog.asserts.fail();return n-1}}};ol.array.reverseSubArray=function(arr,begin,end){goog.asserts.assert(begin>=0,"Array begin index should be equal to or greater than 0");goog.asserts.assert(end<arr.length,"Array end index should be less than the array length");while(begin<end){var tmp=arr[begin];arr[begin]=arr[end];arr[end]=tmp;++begin;--end}};goog.provide("ol.ResolutionConstraint");goog.provide("ol.ResolutionConstraintType");goog.require("goog.math");goog.require("ol.array");ol.ResolutionConstraintType;ol.ResolutionConstraint.createSnapToResolutions=function(resolutions){return(function(resolution,delta,direction){if(goog.isDef(resolution)){var z=ol.array.linearFindNearest(resolutions,resolution,direction);z=goog.math.clamp(z+delta,0,resolutions.length-1);return resolutions[z]}else{return undefined}})};ol.ResolutionConstraint.createSnapToPower=function(power,maxResolution,opt_maxLevel){return(function(resolution,delta,direction){if(goog.isDef(resolution)){var offset;if(direction>0){offset=0}else{if(direction<0){offset=1}else{offset=0.5}}var oldLevel=Math.floor(Math.log(maxResolution/resolution)/Math.log(power)+offset);var newLevel=Math.max(oldLevel+delta,0);if(goog.isDef(opt_maxLevel)){newLevel=Math.min(newLevel,opt_maxLevel)}return maxResolution/Math.pow(power,newLevel)}else{return undefined}})};goog.provide("ol.RotationConstraint");goog.provide("ol.RotationConstraintType");goog.require("goog.math");ol.RotationConstraintType;ol.RotationConstraint.disable=function(rotation,delta){if(goog.isDef(rotation)){return 0}else{return undefined}};ol.RotationConstraint.none=function(rotation,delta){if(goog.isDef(rotation)){return rotation+delta}else{return undefined}};ol.RotationConstraint.createSnapToN=function(n){var theta=2*Math.PI/n;return(function(rotation,delta){if(goog.isDef(rotation)){rotation=Math.floor((rotation+delta)/theta+0.5)*theta;return rotation}else{return undefined}})};ol.RotationConstraint.createSnapToZero=function(opt_tolerance){var tolerance=opt_tolerance||goog.math.toRadians(5);return(function(rotation,delta){if(goog.isDef(rotation)){if(Math.abs(rotation+delta)<=tolerance){return 0}else{return rotation+delta}}else{return undefined}})};goog.provide("ol.Constraints");goog.require("ol.CenterConstraintType");goog.require("ol.ResolutionConstraintType");goog.require("ol.RotationConstraintType");ol.Constraints=function(centerConstraint,resolutionConstraint,rotationConstraint){this.center=centerConstraint;this.resolution=resolutionConstraint;this.rotation=rotationConstraint};goog.provide("goog.debug.EntryPointMonitor");goog.provide("goog.debug.entryPointRegistry");goog.require("goog.asserts");goog.debug.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor.prototype.wrap;goog.debug.EntryPointMonitor.prototype.unwrap;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=false;goog.debug.entryPointRegistry.register=function(callback){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=callback;if(goog.debug.entryPointRegistry.monitorsMayExist_){var monitors=goog.debug.entryPointRegistry.monitors_;for(var i=0;i<monitors.length;i++){callback(goog.bind(monitors[i].wrap,monitors[i]))}}};goog.debug.entryPointRegistry.monitorAll=function(monitor){goog.debug.entryPointRegistry.monitorsMayExist_=true;var transformer=goog.bind(monitor.wrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++){goog.debug.entryPointRegistry.refList_[i](transformer)}goog.debug.entryPointRegistry.monitors_.push(monitor)};goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(monitor){var monitors=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(monitor==monitors[monitors.length-1],"Only the most recent monitor can be unwrapped.");var transformer=goog.bind(monitor.unwrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++){goog.debug.entryPointRegistry.refList_[i](transformer)}monitors.length--};goog.provide("goog.events.BrowserFeature");goog.require("goog.userAgent");goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:("ontouchstart" in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart" in document.documentElement)||!!(goog.global.navigator&&goog.global.navigator["msMaxTouchPoints"]))};goog.provide("goog.disposable.IDisposable");goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod;goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod;goog.provide("goog.Disposable");goog.provide("goog.dispose");goog.provide("goog.disposeAll");goog.require("goog.disposable.IDisposable");goog.Disposable=function(){if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){if(goog.Disposable.INCLUDE_STACK_ON_CREATION){this.creationStack=new Error().stack}goog.Disposable.instances_[goog.getUid(this)]=this}this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.define("goog.Disposable.MONITORING_MODE",0);goog.define("goog.Disposable.INCLUDE_STACK_ON_CREATION",true);goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var ret=[];for(var id in goog.Disposable.instances_){if(goog.Disposable.instances_.hasOwnProperty(id)){ret.push(goog.Disposable.instances_[Number(id)])}}return ret};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=false;goog.Disposable.prototype.onDisposeCallbacks_;goog.Disposable.prototype.creationStack;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;goog.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal();if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){var uid=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(uid)){throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call")}delete goog.Disposable.instances_[uid]}}};goog.Disposable.prototype.registerDisposable=function(disposable){this.addOnDisposeCallback(goog.partial(goog.dispose,disposable))};goog.Disposable.prototype.addOnDisposeCallback=function(callback,opt_scope){if(this.disposed_){callback.call(opt_scope);return}if(!this.onDisposeCallbacks_){this.onDisposeCallbacks_=[]}this.onDisposeCallbacks_.push(goog.isDef(opt_scope)?goog.bind(callback,opt_scope):callback)};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_){while(this.onDisposeCallbacks_.length){this.onDisposeCallbacks_.shift()()}}};goog.Disposable.isDisposed=function(obj){if(obj&&typeof obj.isDisposed=="function"){return obj.isDisposed()}return false};goog.dispose=function(obj){if(obj&&typeof obj.dispose=="function"){obj.dispose()}};goog.disposeAll=function(var_args){for(var i=0,len=arguments.length;i<len;++i){var disposable=arguments[i];if(goog.isArrayLike(disposable)){goog.disposeAll.apply(null,disposable)}else{goog.dispose(disposable)}}};goog.provide("goog.events.EventId");goog.events.EventId=function(eventId){this.id=eventId};goog.events.EventId.prototype.toString=function(){return this.id};goog.provide("goog.events.Event");goog.provide("goog.events.EventLike");goog.require("goog.Disposable");goog.require("goog.events.EventId");goog.events.EventLike;goog.events.Event=function(type,opt_target){this.type=type instanceof goog.events.EventId?String(type):type;this.target=opt_target;this.currentTarget=this.target;this.propagationStopped_=false;this.defaultPrevented=false;this.returnValue_=true};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=true};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=true;this.returnValue_=false};goog.events.Event.stopPropagation=function(e){e.stopPropagation()};goog.events.Event.preventDefault=function(e){e.preventDefault()};goog.provide("goog.events.EventType");goog.require("goog.userAgent");goog.events.getVendorPrefixedName_=function(eventName){return goog.userAgent.WEBKIT?"webkit"+eventName:(goog.userAgent.OPERA?"o"+eventName.toLowerCase():eventName.toLowerCase())};goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint"};goog.provide("goog.reflect");goog.reflect.object=function(type,object){return object};goog.reflect.sinkValue=function(x){goog.reflect.sinkValue[" "](x);return x};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(obj,prop){try{goog.reflect.sinkValue(obj[prop]);return true}catch(e){}return false};goog.provide("goog.events.BrowserEvent");goog.provide("goog.events.BrowserEvent.MouseButton");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.reflect");goog.require("goog.userAgent");goog.events.BrowserEvent=function(opt_e,opt_currentTarget){goog.events.BrowserEvent.base(this,"constructor",opt_e?opt_e.type:"");this.target=null;this.currentTarget=null;this.relatedTarget=null;this.offsetX=0;this.offsetY=0;this.clientX=0;this.clientY=0;this.screenX=0;this.screenY=0;this.button=0;this.keyCode=0;this.charCode=0;this.ctrlKey=false;this.altKey=false;this.shiftKey=false;this.metaKey=false;this.state=null;this.platformModifierKey=false;this.event_=null;if(opt_e){this.init(opt_e,opt_currentTarget)}};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.init=function(e,opt_currentTarget){var type=this.type=e.type;var relevantTouch=e.changedTouches?e.changedTouches[0]:null;this.target=goog.isNull(relevantTouch)?(e.target)||e.srcElement:(relevantTouch.target);this.currentTarget=(opt_currentTarget);var relatedTarget=(e.relatedTarget);if(relatedTarget){if(goog.userAgent.GECKO){if(!goog.reflect.canAccessProperty(relatedTarget,"nodeName")){relatedTarget=null}}}else{if(type==goog.events.EventType.MOUSEOVER){relatedTarget=e.fromElement}else{if(type==goog.events.EventType.MOUSEOUT){relatedTarget=e.toElement}}}this.relatedTarget=relatedTarget;if(!goog.isNull(relevantTouch)){this.clientX=relevantTouch.clientX!==undefined?relevantTouch.clientX:relevantTouch.pageX;this.clientY=relevantTouch.clientY!==undefined?relevantTouch.clientY:relevantTouch.pageY;this.screenX=relevantTouch.screenX||0;this.screenY=relevantTouch.screenY||0}else{this.offsetX=(goog.userAgent.WEBKIT||e.offsetX!==undefined)?e.offsetX:e.layerX;this.offsetY=(goog.userAgent.WEBKIT||e.offsetY!==undefined)?e.offsetY:e.layerY;this.clientX=e.clientX!==undefined?e.clientX:e.pageX;this.clientY=e.clientY!==undefined?e.clientY:e.pageY;this.screenX=e.screenX||0;this.screenY=e.screenY||0}this.button=e.button;this.keyCode=e.keyCode||0;this.charCode=e.charCode||(type=="keypress"?e.keyCode:0);this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey;this.state=e.state;this.event_=e;if(e.defaultPrevented){this.preventDefault()}};goog.events.BrowserEvent.prototype.isButton=function(button){if(!goog.events.BrowserFeature.HAS_W3C_BUTTON){if(this.type=="click"){return button==goog.events.BrowserEvent.MouseButton.LEFT}else{return !!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[button])}}else{return this.event_.button==button}};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);if(this.event_.stopPropagation){this.event_.stopPropagation()}else{this.event_.cancelBubble=true}};goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var be=this.event_;if(!be.preventDefault){be.returnValue=false;if(goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT){try{var VK_F1=112;var VK_F12=123;if(be.ctrlKey||be.keyCode>=VK_F1&&be.keyCode<=VK_F12){be.keyCode=-1}}catch(ex){}}}else{be.preventDefault()}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.provide("goog.events.Listenable");goog.provide("goog.events.ListenableKey");goog.require("goog.events.EventId");goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+((Math.random()*1000000)|0);goog.events.Listenable.addImplementation=function(cls){cls.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=true};goog.events.Listenable.isImplementedBy=function(obj){return !!(obj&&obj[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.Listenable.prototype.listen;goog.events.Listenable.prototype.listenOnce;goog.events.Listenable.prototype.unlisten;goog.events.Listenable.prototype.unlistenByKey;goog.events.Listenable.prototype.dispatchEvent;goog.events.Listenable.prototype.removeAllListeners;goog.events.Listenable.prototype.getParentEventTarget;goog.events.Listenable.prototype.fireListeners;goog.events.Listenable.prototype.getListeners;goog.events.Listenable.prototype.getListener;goog.events.Listenable.prototype.hasListener;goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return ++goog.events.ListenableKey.counter_};goog.events.ListenableKey.prototype.src;goog.events.ListenableKey.prototype.type;goog.events.ListenableKey.prototype.listener;goog.events.ListenableKey.prototype.capture;goog.events.ListenableKey.prototype.handler;goog.events.ListenableKey.prototype.key;goog.provide("goog.events.Listener");goog.require("goog.events.ListenableKey");goog.events.Listener=function(listener,proxy,src,type,capture,opt_handler){if(goog.events.Listener.ENABLE_MONITORING){this.creationStack=new Error().stack}this.listener=listener;this.proxy=proxy;this.src=src;this.type=type;this.capture=!!capture;this.handler=opt_handler;this.key=goog.events.ListenableKey.reserveKey();this.callOnce=false;this.removed=false};goog.define("goog.events.Listener.ENABLE_MONITORING",false);goog.events.Listener.prototype.creationStack;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=true;this.listener=null;this.proxy=null;this.src=null;this.handler=null};goog.provide("goog.events.ListenerMap");goog.require("goog.array");goog.require("goog.events.Listener");goog.require("goog.object");goog.events.ListenerMap=function(src){this.src=src;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var count=0;for(var type in this.listeners){count+=this.listeners[type].length}return count};goog.events.ListenerMap.prototype.add=function(type,listener,callOnce,opt_useCapture,opt_listenerScope){var typeStr=type.toString();var listenerArray=this.listeners[typeStr];if(!listenerArray){listenerArray=this.listeners[typeStr]=[];this.typeCount_++}var listenerObj;var index=goog.events.ListenerMap.findListenerIndex_(listenerArray,listener,opt_useCapture,opt_listenerScope);if(index>-1){listenerObj=listenerArray[index];if(!callOnce){listenerObj.callOnce=false}}else{listenerObj=new goog.events.Listener(listener,null,this.src,typeStr,!!opt_useCapture,opt_listenerScope);listenerObj.callOnce=callOnce;listenerArray.push(listenerObj)}return listenerObj};goog.events.ListenerMap.prototype.remove=function(type,listener,opt_useCapture,opt_listenerScope){var typeStr=type.toString();if(!(typeStr in this.listeners)){return false}var listenerArray=this.listeners[typeStr];var index=goog.events.ListenerMap.findListenerIndex_(listenerArray,listener,opt_useCapture,opt_listenerScope);if(index>-1){var listenerObj=listenerArray[index];listenerObj.markAsRemoved();goog.array.removeAt(listenerArray,index);if(listenerArray.length==0){delete this.listeners[typeStr];this.typeCount_--}return true}return false};goog.events.ListenerMap.prototype.removeByKey=function(listener){var type=listener.type;if(!(type in this.listeners)){return false}var removed=goog.array.remove(this.listeners[type],listener);if(removed){listener.markAsRemoved();if(this.listeners[type].length==0){delete this.listeners[type];this.typeCount_--}}return removed};goog.events.ListenerMap.prototype.removeAll=function(opt_type){var typeStr=opt_type&&opt_type.toString();var count=0;for(var type in this.listeners){if(!typeStr||type==typeStr){var listenerArray=this.listeners[type];for(var i=0;i<listenerArray.length;i++){++count;listenerArray[i].markAsRemoved()}delete this.listeners[type];this.typeCount_--}}return count};goog.events.ListenerMap.prototype.getListeners=function(type,capture){var listenerArray=this.listeners[type.toString()];var rv=[];if(listenerArray){for(var i=0;i<listenerArray.length;++i){var listenerObj=listenerArray[i];if(listenerObj.capture==capture){rv.push(listenerObj)}}}return rv};goog.events.ListenerMap.prototype.getListener=function(type,listener,capture,opt_listenerScope){var listenerArray=this.listeners[type.toString()];var i=-1;if(listenerArray){i=goog.events.ListenerMap.findListenerIndex_(listenerArray,listener,capture,opt_listenerScope)}return i>-1?listenerArray[i]:null};goog.events.ListenerMap.prototype.hasListener=function(opt_type,opt_capture){var hasType=goog.isDef(opt_type);var typeStr=hasType?opt_type.toString():"";var hasCapture=goog.isDef(opt_capture);return goog.object.some(this.listeners,function(listenerArray,type){for(var i=0;i<listenerArray.length;++i){if((!hasType||listenerArray[i].type==typeStr)&&(!hasCapture||listenerArray[i].capture==opt_capture)){return true}}return false})};goog.events.ListenerMap.findListenerIndex_=function(listenerArray,listener,opt_useCapture,opt_listenerScope){for(var i=0;i<listenerArray.length;++i){var listenerObj=listenerArray[i];if(!listenerObj.removed&&listenerObj.listener==listener&&listenerObj.capture==!!opt_useCapture&&listenerObj.handler==opt_listenerScope){return i}}return -1};goog.provide("goog.events");goog.provide("goog.events.CaptureSimulationMode");goog.provide("goog.events.Key");goog.provide("goog.events.ListenableType");goog.require("goog.asserts");goog.require("goog.debug.entryPointRegistry");goog.require("goog.events.BrowserEvent");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Listenable");goog.require("goog.events.ListenerMap");goog.forwardDeclare("goog.debug.ErrorHandler");goog.forwardDeclare("goog.events.EventWrapper");goog.events.Key;goog.events.ListenableType;goog.events.LISTENER_MAP_PROP_="closure_lm_"+((Math.random()*1000000)|0);goog.events.onString_="on";goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.define("goog.events.CAPTURE_SIMULATION_MODE",2);goog.events.listenerCountEstimate_=0;goog.events.listen=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++){goog.events.listen(src,type[i],listener,opt_capt,opt_handler)}return null}listener=goog.events.wrapListener(listener);if(goog.events.Listenable.isImplementedBy(src)){return src.listen((type),listener,opt_capt,opt_handler)}else{return goog.events.listen_((src),(type),listener,false,opt_capt,opt_handler)}};goog.events.listen_=function(src,type,listener,callOnce,opt_capt,opt_handler){if(!type){throw Error("Invalid event type")}var capture=!!opt_capt;if(capture&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL){goog.asserts.fail("Can not register capture listener in IE8-.");return null}else{if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT){return null}}}var listenerMap=goog.events.getListenerMap_(src);if(!listenerMap){src[goog.events.LISTENER_MAP_PROP_]=listenerMap=new goog.events.ListenerMap(src)}var listenerObj=listenerMap.add(type,listener,callOnce,opt_capt,opt_handler);if(listenerObj.proxy){return listenerObj}var proxy=goog.events.getProxy();listenerObj.proxy=proxy;proxy.src=src;proxy.listener=listenerObj;if(src.addEventListener){src.addEventListener(type.toString(),proxy,capture)}else{if(src.attachEvent){src.attachEvent(goog.events.getOnString_(type.toString()),proxy)}else{throw Error("addEventListener and attachEvent are unavailable.")}}goog.events.listenerCountEstimate_++;return listenerObj};goog.events.getProxy=function(){var proxyCallbackFunction=goog.events.handleBrowserEvent_;var f=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(eventObject){return proxyCallbackFunction.call(f.src,f.listener,eventObject)}:function(eventObject){var v=proxyCallbackFunction.call(f.src,f.listener,eventObject);if(!v){return v}};return f};goog.events.listenOnce=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++){goog.events.listenOnce(src,type[i],listener,opt_capt,opt_handler)}return null}listener=goog.events.wrapListener(listener);if(goog.events.Listenable.isImplementedBy(src)){return src.listenOnce((type),listener,opt_capt,opt_handler)}else{return goog.events.listen_((src),(type),listener,true,opt_capt,opt_handler)}};goog.events.listenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.listen(src,listener,opt_capt,opt_handler)};goog.events.unlisten=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++){goog.events.unlisten(src,type[i],listener,opt_capt,opt_handler)}return null}listener=goog.events.wrapListener(listener);if(goog.events.Listenable.isImplementedBy(src)){return src.unlisten((type),listener,opt_capt,opt_handler)}if(!src){return false}var capture=!!opt_capt;var listenerMap=goog.events.getListenerMap_((src));if(listenerMap){var listenerObj=listenerMap.getListener((type),listener,capture,opt_handler);if(listenerObj){return goog.events.unlistenByKey(listenerObj)}}return false};goog.events.unlistenByKey=function(key){if(goog.isNumber(key)){return false}var listener=key;if(!listener||listener.removed){return false}var src=listener.src;if(goog.events.Listenable.isImplementedBy(src)){return src.unlistenByKey(listener)}var type=listener.type;var proxy=listener.proxy;if(src.removeEventListener){src.removeEventListener(type,proxy,listener.capture)}else{if(src.detachEvent){src.detachEvent(goog.events.getOnString_(type),proxy)}}goog.events.listenerCountEstimate_--;var listenerMap=goog.events.getListenerMap_((src));if(listenerMap){listenerMap.removeByKey(listener);if(listenerMap.getTypeCount()==0){listenerMap.src=null;src[goog.events.LISTENER_MAP_PROP_]=null}}else{listener.markAsRemoved()}return true};goog.events.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.unlisten(src,listener,opt_capt,opt_handler)};goog.events.removeAll=function(obj,opt_type){if(!obj){return 0}if(goog.events.Listenable.isImplementedBy(obj)){return obj.removeAllListeners(opt_type)}var listenerMap=goog.events.getListenerMap_((obj));if(!listenerMap){return 0}var count=0;var typeStr=opt_type&&opt_type.toString();for(var type in listenerMap.listeners){if(!typeStr||type==typeStr){var listeners=listenerMap.listeners[type].concat();for(var i=0;i<listeners.length;++i){if(goog.events.unlistenByKey(listeners[i])){++count}}}}return count};goog.events.getListeners=function(obj,type,capture){if(goog.events.Listenable.isImplementedBy(obj)){return obj.getListeners(type,capture)}else{if(!obj){return[]}var listenerMap=goog.events.getListenerMap_((obj));return listenerMap?listenerMap.getListeners(type,capture):[]}};goog.events.getListener=function(src,type,listener,opt_capt,opt_handler){type=(type);listener=goog.events.wrapListener(listener);var capture=!!opt_capt;if(goog.events.Listenable.isImplementedBy(src)){return src.getListener(type,listener,capture,opt_handler)}if(!src){return null}var listenerMap=goog.events.getListenerMap_((src));if(listenerMap){return listenerMap.getListener(type,listener,capture,opt_handler)}return null};goog.events.hasListener=function(obj,opt_type,opt_capture){if(goog.events.Listenable.isImplementedBy(obj)){return obj.hasListener(opt_type,opt_capture)}var listenerMap=goog.events.getListenerMap_((obj));return !!listenerMap&&listenerMap.hasListener(opt_type,opt_capture)};goog.events.expose=function(e){var str=[];for(var key in e){if(e[key]&&e[key].id){str.push(key+" = "+e[key]+" ("+e[key].id+")")}else{str.push(key+" = "+e[key])}}return str.join("\n")};goog.events.getOnString_=function(type){if(type in goog.events.onStringMap_){return goog.events.onStringMap_[type]}return goog.events.onStringMap_[type]=goog.events.onString_+type};goog.events.fireListeners=function(obj,type,capture,eventObject){if(goog.events.Listenable.isImplementedBy(obj)){return obj.fireListeners(type,capture,eventObject)}return goog.events.fireListeners_(obj,type,capture,eventObject)};goog.events.fireListeners_=function(obj,type,capture,eventObject){var retval=true;var listenerMap=goog.events.getListenerMap_((obj));if(listenerMap){var listenerArray=listenerMap.listeners[type.toString()];if(listenerArray){listenerArray=listenerArray.concat();for(var i=0;i<listenerArray.length;i++){var listener=listenerArray[i];if(listener&&listener.capture==capture&&!listener.removed){var result=goog.events.fireListener(listener,eventObject);retval=retval&&(result!==false)}}}}return retval};goog.events.fireListener=function(listener,eventObject){var listenerFn=listener.listener;var listenerHandler=listener.handler||listener.src;if(listener.callOnce){goog.events.unlistenByKey(listener)}return listenerFn.call(listenerHandler,eventObject)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};goog.events.dispatchEvent=function(src,e){goog.asserts.assert(goog.events.Listenable.isImplementedBy(src),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return src.dispatchEvent(e)};goog.events.protectBrowserEventEntryPoint=function(errorHandler){goog.events.handleBrowserEvent_=errorHandler.protectEntryPoint(goog.events.handleBrowserEvent_)};goog.events.handleBrowserEvent_=function(listener,opt_evt){if(listener.removed){return true}if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var ieEvent=opt_evt||(goog.getObjectByName("window.event"));var evt=new goog.events.BrowserEvent(ieEvent,this);var retval=true;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(ieEvent)){goog.events.markIeEvent_(ieEvent);var ancestors=[];for(var parent=evt.currentTarget;parent;parent=parent.parentNode){ancestors.push(parent)}var type=listener.type;for(var i=ancestors.length-1;!evt.propagationStopped_&&i>=0;i--){evt.currentTarget=ancestors[i];var result=goog.events.fireListeners_(ancestors[i],type,true,evt);retval=retval&&result}for(var i=0;!evt.propagationStopped_&&i<ancestors.length;i++){evt.currentTarget=ancestors[i];var result=goog.events.fireListeners_(ancestors[i],type,false,evt);retval=retval&&result}}}else{retval=goog.events.fireListener(listener,evt)}return retval}return goog.events.fireListener(listener,new goog.events.BrowserEvent(opt_evt,this))};goog.events.markIeEvent_=function(e){var useReturnValue=false;if(e.keyCode==0){try{e.keyCode=-1;return}catch(ex){useReturnValue=true}}if(useReturnValue||(e.returnValue)==undefined){e.returnValue=true}};goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||e.returnValue!=undefined};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(identifier){return identifier+"_"+goog.events.uniqueIdCounter_++};goog.events.getListenerMap_=function(src){var listenerMap=src[goog.events.LISTENER_MAP_PROP_];return listenerMap instanceof goog.events.ListenerMap?listenerMap:null};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+((Math.random()*1000000000)>>>0);goog.events.wrapListener=function(listener){goog.asserts.assert(listener,"Listener can not be null.");if(goog.isFunction(listener)){return listener}goog.asserts.assert(listener.handleEvent,"An object listener must have handleEvent method.");if(!listener[goog.events.LISTENER_WRAPPER_PROP_]){listener[goog.events.LISTENER_WRAPPER_PROP_]=function(e){return listener.handleEvent(e)}}return listener[goog.events.LISTENER_WRAPPER_PROP_]};goog.debug.entryPointRegistry.register(function(transformer){goog.events.handleBrowserEvent_=transformer(goog.events.handleBrowserEvent_)});goog.provide("goog.events.EventTarget");goog.require("goog.Disposable");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.Listenable");goog.require("goog.events.ListenerMap");goog.require("goog.object");goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1000;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};goog.events.EventTarget.prototype.setParentEventTarget=function(parent){this.parentEventTarget_=parent};goog.events.EventTarget.prototype.addEventListener=function(type,handler,opt_capture,opt_handlerScope){goog.events.listen(this,type,handler,opt_capture,opt_handlerScope)};goog.events.EventTarget.prototype.removeEventListener=function(type,handler,opt_capture,opt_handlerScope){goog.events.unlisten(this,type,handler,opt_capture,opt_handlerScope)};goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var ancestorsTree,ancestor=this.getParentEventTarget();if(ancestor){ancestorsTree=[];var ancestorCount=1;for(;ancestor;ancestor=ancestor.getParentEventTarget()){ancestorsTree.push(ancestor);goog.asserts.assert((++ancestorCount<goog.events.EventTarget.MAX_ANCESTORS_),"infinite loop")}}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,ancestorsTree)};goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(type,listener,opt_useCapture,opt_listenerScope){this.assertInitialized_();return this.eventTargetListeners_.add(String(type),listener,false,opt_useCapture,opt_listenerScope)};goog.events.EventTarget.prototype.listenOnce=function(type,listener,opt_useCapture,opt_listenerScope){return this.eventTargetListeners_.add(String(type),listener,true,opt_useCapture,opt_listenerScope)};goog.events.EventTarget.prototype.unlisten=function(type,listener,opt_useCapture,opt_listenerScope){return this.eventTargetListeners_.remove(String(type),listener,opt_useCapture,opt_listenerScope)};goog.events.EventTarget.prototype.unlistenByKey=function(key){return this.eventTargetListeners_.removeByKey(key)};goog.events.EventTarget.prototype.removeAllListeners=function(opt_type){if(!this.eventTargetListeners_){return 0}return this.eventTargetListeners_.removeAll(opt_type)};goog.events.EventTarget.prototype.fireListeners=function(type,capture,eventObject){var listenerArray=this.eventTargetListeners_.listeners[String(type)];if(!listenerArray){return true}listenerArray=listenerArray.concat();var rv=true;for(var i=0;i<listenerArray.length;++i){var listener=listenerArray[i];if(listener&&!listener.removed&&listener.capture==capture){var listenerFn=listener.listener;var listenerHandler=listener.handler||listener.src;if(listener.callOnce){this.unlistenByKey(listener)}rv=listenerFn.call(listenerHandler,eventObject)!==false&&rv}}return rv&&eventObject.returnValue_!=false};goog.events.EventTarget.prototype.getListeners=function(type,capture){return this.eventTargetListeners_.getListeners(String(type),capture)};goog.events.EventTarget.prototype.getListener=function(type,listener,capture,opt_listenerScope){return this.eventTargetListeners_.getListener(String(type),listener,capture,opt_listenerScope)};goog.events.EventTarget.prototype.hasListener=function(opt_type,opt_capture){var id=goog.isDef(opt_type)?String(opt_type):undefined;return this.eventTargetListeners_.hasListener(id,opt_capture)};goog.events.EventTarget.prototype.setTargetForTesting=function(target){this.actualEventTarget_=target};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};goog.events.EventTarget.dispatchEventInternal_=function(target,e,opt_ancestorsTree){var type=e.type||(e);if(goog.isString(e)){e=new goog.events.Event(e,target)}else{if(!(e instanceof goog.events.Event)){var oldEvent=e;e=new goog.events.Event(type,target);goog.object.extend(e,oldEvent)}else{e.target=e.target||target}}var rv=true,currentTarget;if(opt_ancestorsTree){for(var i=opt_ancestorsTree.length-1;!e.propagationStopped_&&i>=0;i--){currentTarget=e.currentTarget=opt_ancestorsTree[i];rv=currentTarget.fireListeners(type,true,e)&&rv}}if(!e.propagationStopped_){currentTarget=e.currentTarget=target;rv=currentTarget.fireListeners(type,true,e)&&rv;if(!e.propagationStopped_){rv=currentTarget.fireListeners(type,false,e)&&rv}}if(opt_ancestorsTree){for(i=0;!e.propagationStopped_&&i<opt_ancestorsTree.length;i++){currentTarget=e.currentTarget=opt_ancestorsTree[i];rv=currentTarget.fireListeners(type,false,e)&&rv}}return rv};goog.provide("ol.Observable");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");ol.Observable=function(){goog.base(this);this.revision_=0};goog.inherits(ol.Observable,goog.events.EventTarget);ol.Observable.unByKey=function(key){goog.events.unlistenByKey(key)};ol.Observable.prototype.changed=function(){++this.revision_;this.dispatchEvent(goog.events.EventType.CHANGE)};ol.Observable.prototype.getRevision=function(){return this.revision_};ol.Observable.prototype.on=function(type,listener,opt_this){return goog.events.listen(this,type,listener,false,opt_this)};ol.Observable.prototype.once=function(type,listener,opt_this){return goog.events.listenOnce(this,type,listener,false,opt_this)};ol.Observable.prototype.un=function(type,listener,opt_this){goog.events.unlisten(this,type,listener,false,opt_this)};ol.Observable.prototype.unByKey=ol.Observable.unByKey;goog.provide("ol.Object");goog.provide("ol.ObjectEvent");goog.provide("ol.ObjectEventType");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.object");goog.require("ol.Observable");ol.ObjectEventType={PROPERTYCHANGE:"propertychange"};ol.ObjectEvent=function(type,key,oldValue){goog.base(this,type);this.key=key;this.oldValue=oldValue};goog.inherits(ol.ObjectEvent,goog.events.Event);ol.Object=function(opt_values){goog.base(this);goog.getUid(this);this.values_={};if(goog.isDef(opt_values)){this.setProperties(opt_values)}};goog.inherits(ol.Object,ol.Observable);ol.Object.changeEventTypeCache_={};ol.Object.getChangeEventType=function(key){return ol.Object.changeEventTypeCache_.hasOwnProperty(key)?ol.Object.changeEventTypeCache_[key]:(ol.Object.changeEventTypeCache_[key]="change:"+key)};ol.Object.prototype.get=function(key){var value;if(this.values_.hasOwnProperty(key)){value=this.values_[key]}return value};ol.Object.prototype.getKeys=function(){return goog.object.getKeys(this.values_)};ol.Object.prototype.getProperties=function(){var properties={};var key;for(key in this.values_){properties[key]=this.values_[key]}return properties};ol.Object.prototype.notify=function(key,oldValue){var eventType;eventType=ol.Object.getChangeEventType(key);this.dispatchEvent(new ol.ObjectEvent(eventType,key,oldValue));eventType=ol.ObjectEventType.PROPERTYCHANGE;this.dispatchEvent(new ol.ObjectEvent(eventType,key,oldValue))};ol.Object.prototype.set=function(key,value){var oldValue=this.values_[key];this.values_[key]=value;this.notify(key,oldValue)};ol.Object.prototype.setProperties=function(values){var key;for(key in values){this.set(key,values[key])}};ol.Object.prototype.unset=function(key){if(key in this.values_){var oldValue=this.values_[key];delete this.values_[key];this.notify(key,oldValue)}};goog.provide("ol.Size");goog.provide("ol.size");goog.require("goog.asserts");ol.Size;ol.size.buffer=function(size,buffer,opt_size){if(!goog.isDef(opt_size)){opt_size=[0,0]}opt_size[0]=size[0]+2*buffer;opt_size[1]=size[1]+2*buffer;return opt_size};ol.size.equals=function(a,b){return a[0]==b[0]&&a[1]==b[1]};ol.size.hasArea=function(size){return size[0]>0&&size[1]>0};ol.size.scale=function(size,ratio,opt_size){if(!goog.isDef(opt_size)){opt_size=[0,0]}opt_size[0]=(size[0]*ratio+0.5)|0;opt_size[1]=(size[1]*ratio+0.5)|0;return opt_size};ol.size.toSize=function(size,opt_size){if(goog.isArray(size)){return size}else{goog.asserts.assert(goog.isNumber(size));if(!goog.isDef(opt_size)){opt_size=[size,size]}else{opt_size[0]=size;opt_size[1]=size}return opt_size}};goog.provide("ol.Coordinate");goog.provide("ol.CoordinateFormatType");goog.provide("ol.coordinate");goog.require("goog.math");goog.require("goog.string");ol.CoordinateFormatType;ol.Coordinate;ol.coordinate.add=function(coordinate,delta){coordinate[0]+=delta[0];coordinate[1]+=delta[1];return coordinate};ol.coordinate.closestOnSegment=function(coordinate,segment){var x0=coordinate[0];var y0=coordinate[1];var start=segment[0];var end=segment[1];var x1=start[0];var y1=start[1];var x2=end[0];var y2=end[1];var dx=x2-x1;var dy=y2-y1;var along=(dx===0&&dy===0)?0:((dx*(x0-x1))+(dy*(y0-y1)))/((dx*dx+dy*dy)||0);var x,y;if(along<=0){x=x1;y=y1}else{if(along>=1){x=x2;y=y2}else{x=x1+along*dx;y=y1+along*dy}}return[x,y]};ol.coordinate.createStringXY=function(opt_fractionDigits){return(function(coordinate){return ol.coordinate.toStringXY(coordinate,opt_fractionDigits)})};ol.coordinate.degreesToStringHDMS_=function(degrees,hemispheres){var normalizedDegrees=goog.math.modulo(degrees+180,360)-180;var x=Math.abs(Math.round(3600*normalizedDegrees));return Math.floor(x/3600)+"\u00b0 "+goog.string.padNumber(Math.floor((x/60)%60),2)+"\u2032 "+goog.string.padNumber(Math.floor(x%60),2)+"\u2033 "+hemispheres.charAt(normalizedDegrees<0?1:0)};ol.coordinate.format=function(coordinate,template,opt_fractionDigits){if(goog.isDef(coordinate)){return template.replace("{x}",coordinate[0].toFixed(opt_fractionDigits)).replace("{y}",coordinate[1].toFixed(opt_fractionDigits))}else{return""}};ol.coordinate.equals=function(coordinate1,coordinate2){var equals=true;for(var i=coordinate1.length-1;i>=0;--i){if(coordinate1[i]!=coordinate2[i]){equals=false;break}}return equals};ol.coordinate.rotate=function(coordinate,angle){var cosAngle=Math.cos(angle);var sinAngle=Math.sin(angle);var x=coordinate[0]*cosAngle-coordinate[1]*sinAngle;var y=coordinate[1]*cosAngle+coordinate[0]*sinAngle;coordinate[0]=x;coordinate[1]=y;return coordinate};ol.coordinate.scale=function(coordinate,scale){coordinate[0]*=scale;coordinate[1]*=scale;return coordinate};ol.coordinate.sub=function(coordinate,delta){coordinate[0]-=delta[0];coordinate[1]-=delta[1];return coordinate};ol.coordinate.squaredDistance=function(coord1,coord2){var dx=coord1[0]-coord2[0];var dy=coord1[1]-coord2[1];return dx*dx+dy*dy};ol.coordinate.squaredDistanceToSegment=function(coordinate,segment){return ol.coordinate.squaredDistance(coordinate,ol.coordinate.closestOnSegment(coordinate,segment))};ol.coordinate.toStringHDMS=function(coordinate){if(goog.isDef(coordinate)){return ol.coordinate.degreesToStringHDMS_(coordinate[1],"NS")+" "+ol.coordinate.degreesToStringHDMS_(coordinate[0],"EW")}else{return""}};ol.coordinate.toStringXY=function(coordinate,opt_fractionDigits){return ol.coordinate.format(coordinate,"{x}, {y}",opt_fractionDigits)};ol.coordinate.fromProjectedArray=function(array,axis){var firstAxis=axis.charAt(0);if(firstAxis==="n"||firstAxis==="s"){return[array[1],array[0]]}else{return array}};goog.provide("goog.vec.Float32Array");goog.vec.Float32Array=function(p0){this.length=(p0.length||p0);for(var i=0;i<this.length;i++){this[i]=p0[i]||0}};goog.vec.Float32Array.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.set=function(values,opt_offset){opt_offset=opt_offset||0;for(var i=0;i<values.length&&opt_offset+i<this.length;i++){this[opt_offset+i]=values[i]}};goog.vec.Float32Array.prototype.toString=Array.prototype.join;if(typeof Float32Array=="undefined"){goog.exportProperty(goog.vec.Float32Array,"BYTES_PER_ELEMENT",goog.vec.Float32Array.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float32Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float32Array.prototype,"set",goog.vec.Float32Array.prototype.set);goog.exportProperty(goog.vec.Float32Array.prototype,"toString",goog.vec.Float32Array.prototype.toString);goog.exportSymbol("Float32Array",goog.vec.Float32Array)}goog.provide("goog.vec.Float64Array");goog.vec.Float64Array=function(p0){this.length=(p0.length||p0);for(var i=0;i<this.length;i++){this[i]=p0[i]||0}};goog.vec.Float64Array.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.set=function(values,opt_offset){opt_offset=opt_offset||0;for(var i=0;i<values.length&&opt_offset+i<this.length;i++){this[opt_offset+i]=values[i]}};goog.vec.Float64Array.prototype.toString=Array.prototype.join;if(typeof Float64Array=="undefined"){try{goog.exportProperty(goog.vec.Float64Array,"BYTES_PER_ELEMENT",goog.vec.Float64Array.BYTES_PER_ELEMENT)}catch(float64ArrayError){}goog.exportProperty(goog.vec.Float64Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float64Array.prototype,"set",goog.vec.Float64Array.prototype.set);goog.exportProperty(goog.vec.Float64Array.prototype,"toString",goog.vec.Float64Array.prototype.toString);goog.exportSymbol("Float64Array",goog.vec.Float64Array)}goog.provide("goog.vec");goog.provide("goog.vec.AnyType");goog.provide("goog.vec.ArrayType");goog.provide("goog.vec.Float32");goog.provide("goog.vec.Float64");goog.provide("goog.vec.Number");goog.require("goog.vec.Float32Array");goog.require("goog.vec.Float64Array");goog.vec.Float32;goog.vec.Float64;goog.vec.Number;goog.vec.AnyType;goog.vec.ArrayType;goog.vec.EPSILON=0.000001;goog.provide("goog.vec.Vec3");goog.require("goog.vec");goog.vec.Vec3.Float32;goog.vec.Vec3.Float64;goog.vec.Vec3.Number;goog.vec.Vec3.AnyType;goog.vec.Vec3.Type;goog.vec.Vec3.Vec3Like;goog.vec.Vec3.createFloat32=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat64=function(){return new Float64Array(3)};goog.vec.Vec3.createNumber=function(){var a=new Array(3);goog.vec.Vec3.setFromValues(a,0,0,0);return a};goog.vec.Vec3.create=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat32FromArray=function(vec){var newVec=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromArray(newVec,vec);return newVec};goog.vec.Vec3.createFloat32FromValues=function(v0,v1,v2){var a=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromValues(a,v0,v1,v2);return a};goog.vec.Vec3.cloneFloat32=goog.vec.Vec3.createFloat32FromArray;goog.vec.Vec3.createFloat64FromArray=function(vec){var newVec=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromArray(newVec,vec);return newVec};goog.vec.Vec3.createFloat64FromValues=function(v0,v1,v2){var vec=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromValues(vec,v0,v1,v2);return vec};goog.vec.Vec3.cloneFloat64=goog.vec.Vec3.createFloat64FromArray;goog.vec.Vec3.createFromArray=function(vec){var newVec=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(newVec,vec);return newVec};goog.vec.Vec3.createFromValues=function(v0,v1,v2){var vec=goog.vec.Vec3.create();goog.vec.Vec3.setFromValues(vec,v0,v1,v2);return vec};goog.vec.Vec3.clone=function(vec){var newVec=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(newVec,vec);return newVec};goog.vec.Vec3.setFromValues=function(vec,v0,v1,v2){vec[0]=v0;vec[1]=v1;vec[2]=v2;return vec};goog.vec.Vec3.setFromArray=function(vec,values){vec[0]=values[0];vec[1]=values[1];vec[2]=values[2];return vec};goog.vec.Vec3.add=function(vec0,vec1,resultVec){resultVec[0]=vec0[0]+vec1[0];resultVec[1]=vec0[1]+vec1[1];resultVec[2]=vec0[2]+vec1[2];return resultVec};goog.vec.Vec3.subtract=function(vec0,vec1,resultVec){resultVec[0]=vec0[0]-vec1[0];resultVec[1]=vec0[1]-vec1[1];resultVec[2]=vec0[2]-vec1[2];return resultVec};goog.vec.Vec3.negate=function(vec0,resultVec){resultVec[0]=-vec0[0];resultVec[1]=-vec0[1];resultVec[2]=-vec0[2];return resultVec};goog.vec.Vec3.abs=function(vec0,resultVec){resultVec[0]=Math.abs(vec0[0]);resultVec[1]=Math.abs(vec0[1]);resultVec[2]=Math.abs(vec0[2]);return resultVec};goog.vec.Vec3.scale=function(vec0,scalar,resultVec){resultVec[0]=vec0[0]*scalar;resultVec[1]=vec0[1]*scalar;resultVec[2]=vec0[2]*scalar;return resultVec};goog.vec.Vec3.magnitudeSquared=function(vec0){var x=vec0[0],y=vec0[1],z=vec0[2];return x*x+y*y+z*z};goog.vec.Vec3.magnitude=function(vec0){var x=vec0[0],y=vec0[1],z=vec0[2];return Math.sqrt(x*x+y*y+z*z)};goog.vec.Vec3.normalize=function(vec0,resultVec){var ilen=1/goog.vec.Vec3.magnitude(vec0);resultVec[0]=vec0[0]*ilen;resultVec[1]=vec0[1]*ilen;resultVec[2]=vec0[2]*ilen;return resultVec};goog.vec.Vec3.dot=function(v0,v1){return v0[0]*v1[0]+v0[1]*v1[1]+v0[2]*v1[2]};goog.vec.Vec3.cross=function(v0,v1,resultVec){var x0=v0[0],y0=v0[1],z0=v0[2];var x1=v1[0],y1=v1[1],z1=v1[2];resultVec[0]=y0*z1-z0*y1;resultVec[1]=z0*x1-x0*z1;resultVec[2]=x0*y1-y0*x1;return resultVec};goog.vec.Vec3.distanceSquared=function(vec0,vec1){var x=vec0[0]-vec1[0];var y=vec0[1]-vec1[1];var z=vec0[2]-vec1[2];return x*x+y*y+z*z};goog.vec.Vec3.distance=function(vec0,vec1){return Math.sqrt(goog.vec.Vec3.distanceSquared(vec0,vec1))};goog.vec.Vec3.direction=function(vec0,vec1,resultVec){var x=vec1[0]-vec0[0];var y=vec1[1]-vec0[1];var z=vec1[2]-vec0[2];var d=Math.sqrt(x*x+y*y+z*z);if(d){d=1/d;resultVec[0]=x*d;resultVec[1]=y*d;resultVec[2]=z*d}else{resultVec[0]=resultVec[1]=resultVec[2]=0}return resultVec};goog.vec.Vec3.lerp=function(v0,v1,f,resultVec){var x=v0[0],y=v0[1],z=v0[2];resultVec[0]=(v1[0]-x)*f+x;resultVec[1]=(v1[1]-y)*f+y;resultVec[2]=(v1[2]-z)*f+z;return resultVec};goog.vec.Vec3.max=function(vec0,limit,resultVec){if(goog.isNumber(limit)){resultVec[0]=Math.max(vec0[0],limit);resultVec[1]=Math.max(vec0[1],limit);resultVec[2]=Math.max(vec0[2],limit)}else{resultVec[0]=Math.max(vec0[0],limit[0]);resultVec[1]=Math.max(vec0[1],limit[1]);resultVec[2]=Math.max(vec0[2],limit[2])}return resultVec};goog.vec.Vec3.min=function(vec0,limit,resultVec){if(goog.isNumber(limit)){resultVec[0]=Math.min(vec0[0],limit);resultVec[1]=Math.min(vec0[1],limit);resultVec[2]=Math.min(vec0[2],limit)}else{resultVec[0]=Math.min(vec0[0],limit[0]);resultVec[1]=Math.min(vec0[1],limit[1]);resultVec[2]=Math.min(vec0[2],limit[2])}return resultVec};goog.vec.Vec3.equals=function(v0,v1){return v0.length==v1.length&&v0[0]==v1[0]&&v0[1]==v1[1]&&v0[2]==v1[2]};goog.provide("goog.vec.Vec4");goog.require("goog.vec");goog.vec.Vec4.Float32;goog.vec.Vec4.Float64;goog.vec.Vec4.Number;goog.vec.Vec4.AnyType;goog.vec.Vec4.Type;goog.vec.Vec4.Vec4Like;goog.vec.Vec4.createFloat32=function(){return new Float32Array(4)};goog.vec.Vec4.createFloat64=function(){return new Float64Array(4)};goog.vec.Vec4.createNumber=function(){var v=new Array(4);goog.vec.Vec4.setFromValues(v,0,0,0,0);return v};goog.vec.Vec4.create=function(){return new Float32Array(4)};goog.vec.Vec4.createFromArray=function(vec){var newVec=goog.vec.Vec4.create();goog.vec.Vec4.setFromArray(newVec,vec);return newVec};goog.vec.Vec4.createFloat32FromArray=function(vec){var newVec=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromArray(newVec,vec);return newVec};goog.vec.Vec4.createFloat32FromValues=function(v0,v1,v2,v3){var vec=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromValues(vec,v0,v1,v2,v3);return vec};goog.vec.Vec4.cloneFloat32=goog.vec.Vec4.createFloat32FromArray;goog.vec.Vec4.createFloat64FromArray=function(vec){var newVec=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromArray(newVec,vec);return newVec};goog.vec.Vec4.createFloat64FromValues=function(v0,v1,v2,v3){var vec=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromValues(vec,v0,v1,v2,v3);return vec};goog.vec.Vec4.cloneFloat64=goog.vec.Vec4.createFloat64FromArray;goog.vec.Vec4.createFromValues=function(v0,v1,v2,v3){var vec=goog.vec.Vec4.create();goog.vec.Vec4.setFromValues(vec,v0,v1,v2,v3);return vec};goog.vec.Vec4.clone=goog.vec.Vec4.createFromArray;goog.vec.Vec4.setFromValues=function(vec,v0,v1,v2,v3){vec[0]=v0;vec[1]=v1;vec[2]=v2;vec[3]=v3;return vec};goog.vec.Vec4.setFromArray=function(vec,values){vec[0]=values[0];vec[1]=values[1];vec[2]=values[2];vec[3]=values[3];return vec};goog.vec.Vec4.add=function(vec0,vec1,resultVec){resultVec[0]=vec0[0]+vec1[0];resultVec[1]=vec0[1]+vec1[1];resultVec[2]=vec0[2]+vec1[2];resultVec[3]=vec0[3]+vec1[3];return resultVec};goog.vec.Vec4.subtract=function(vec0,vec1,resultVec){resultVec[0]=vec0[0]-vec1[0];resultVec[1]=vec0[1]-vec1[1];resultVec[2]=vec0[2]-vec1[2];resultVec[3]=vec0[3]-vec1[3];return resultVec};goog.vec.Vec4.negate=function(vec0,resultVec){resultVec[0]=-vec0[0];resultVec[1]=-vec0[1];resultVec[2]=-vec0[2];resultVec[3]=-vec0[3];return resultVec};goog.vec.Vec4.abs=function(vec0,resultVec){resultVec[0]=Math.abs(vec0[0]);resultVec[1]=Math.abs(vec0[1]);resultVec[2]=Math.abs(vec0[2]);resultVec[3]=Math.abs(vec0[3]);return resultVec};goog.vec.Vec4.scale=function(vec0,scalar,resultVec){resultVec[0]=vec0[0]*scalar;resultVec[1]=vec0[1]*scalar;resultVec[2]=vec0[2]*scalar;resultVec[3]=vec0[3]*scalar;return resultVec};goog.vec.Vec4.magnitudeSquared=function(vec0){var x=vec0[0],y=vec0[1],z=vec0[2],w=vec0[3];return x*x+y*y+z*z+w*w};goog.vec.Vec4.magnitude=function(vec0){var x=vec0[0],y=vec0[1],z=vec0[2],w=vec0[3];return Math.sqrt(x*x+y*y+z*z+w*w)};goog.vec.Vec4.normalize=function(vec0,resultVec){var ilen=1/goog.vec.Vec4.magnitude(vec0);resultVec[0]=vec0[0]*ilen;resultVec[1]=vec0[1]*ilen;resultVec[2]=vec0[2]*ilen;resultVec[3]=vec0[3]*ilen;return resultVec};goog.vec.Vec4.dot=function(v0,v1){return v0[0]*v1[0]+v0[1]*v1[1]+v0[2]*v1[2]+v0[3]*v1[3]};goog.vec.Vec4.lerp=function(v0,v1,f,resultVec){var x=v0[0],y=v0[1],z=v0[2],w=v0[3];resultVec[0]=(v1[0]-x)*f+x;resultVec[1]=(v1[1]-y)*f+y;resultVec[2]=(v1[2]-z)*f+z;resultVec[3]=(v1[3]-w)*f+w;return resultVec};goog.vec.Vec4.max=function(vec0,limit,resultVec){if(goog.isNumber(limit)){resultVec[0]=Math.max(vec0[0],limit);resultVec[1]=Math.max(vec0[1],limit);resultVec[2]=Math.max(vec0[2],limit);resultVec[3]=Math.max(vec0[3],limit)}else{resultVec[0]=Math.max(vec0[0],limit[0]);resultVec[1]=Math.max(vec0[1],limit[1]);resultVec[2]=Math.max(vec0[2],limit[2]);resultVec[3]=Math.max(vec0[3],limit[3])}return resultVec};goog.vec.Vec4.min=function(vec0,limit,resultVec){if(goog.isNumber(limit)){resultVec[0]=Math.min(vec0[0],limit);resultVec[1]=Math.min(vec0[1],limit);resultVec[2]=Math.min(vec0[2],limit);resultVec[3]=Math.min(vec0[3],limit)}else{resultVec[0]=Math.min(vec0[0],limit[0]);resultVec[1]=Math.min(vec0[1],limit[1]);resultVec[2]=Math.min(vec0[2],limit[2]);resultVec[3]=Math.min(vec0[3],limit[3])}return resultVec};goog.vec.Vec4.equals=function(v0,v1){return v0.length==v1.length&&v0[0]==v1[0]&&v0[1]==v1[1]&&v0[2]==v1[2]&&v0[3]==v1[3]};goog.provide("goog.vec.Mat4");goog.require("goog.vec");goog.require("goog.vec.Vec3");goog.require("goog.vec.Vec4");goog.vec.Mat4.Float32;goog.vec.Mat4.Float64;goog.vec.Mat4.Number;goog.vec.Mat4.AnyType;goog.vec.Mat4.Type;goog.vec.Mat4.Mat4Like;goog.vec.Mat4.createFloat32=function(){return new Float32Array(16)};goog.vec.Mat4.createFloat64=function(){return new Float64Array(16)};goog.vec.Mat4.createNumber=function(){var a=new Array(16);goog.vec.Mat4.setFromValues(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a};goog.vec.Mat4.create=function(){return goog.vec.Mat4.createFloat32()};goog.vec.Mat4.createFloat32Identity=function(){var mat=goog.vec.Mat4.createFloat32();mat[0]=mat[5]=mat[10]=mat[15]=1;return mat};goog.vec.Mat4.createFloat64Identity=function(){var mat=goog.vec.Mat4.createFloat64();mat[0]=mat[5]=mat[10]=mat[15]=1;return mat};goog.vec.Mat4.createNumberIdentity=function(){var a=new Array(16);goog.vec.Mat4.setFromValues(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return a};goog.vec.Mat4.createIdentity=function(){return goog.vec.Mat4.createFloat32Identity()};goog.vec.Mat4.createFloat32FromArray=function(matrix){var newMatrix=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(newMatrix,matrix);return newMatrix};goog.vec.Mat4.createFloat32FromValues=function(v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33){var newMatrix=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromValues(newMatrix,v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33);return newMatrix};goog.vec.Mat4.cloneFloat32=goog.vec.Mat4.createFloat32FromArray;goog.vec.Mat4.createFloat64FromArray=function(matrix){var newMatrix=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromArray(newMatrix,matrix);return newMatrix};goog.vec.Mat4.createFloat64FromValues=function(v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33){var newMatrix=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromValues(newMatrix,v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33);return newMatrix};goog.vec.Mat4.cloneFloat64=goog.vec.Mat4.createFloat64FromArray;goog.vec.Mat4.createFromArray=function(matrix){var newMatrix=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(newMatrix,matrix);return newMatrix};goog.vec.Mat4.createFromValues=function(v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33){return goog.vec.Mat4.createFloat32FromValues(v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33)};goog.vec.Mat4.clone=goog.vec.Mat4.createFromArray;goog.vec.Mat4.getElement=function(mat,row,column){return mat[row+column*4]};goog.vec.Mat4.setElement=function(mat,row,column,value){mat[row+column*4]=value;return mat};goog.vec.Mat4.setFromValues=function(mat,v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33){mat[0]=v00;mat[1]=v10;mat[2]=v20;mat[3]=v30;mat[4]=v01;mat[5]=v11;mat[6]=v21;mat[7]=v31;mat[8]=v02;mat[9]=v12;mat[10]=v22;mat[11]=v32;mat[12]=v03;mat[13]=v13;mat[14]=v23;mat[15]=v33;return mat};goog.vec.Mat4.setFromArray=function(mat,values){mat[0]=values[0];mat[1]=values[1];mat[2]=values[2];mat[3]=values[3];mat[4]=values[4];mat[5]=values[5];mat[6]=values[6];mat[7]=values[7];mat[8]=values[8];mat[9]=values[9];mat[10]=values[10];mat[11]=values[11];mat[12]=values[12];mat[13]=values[13];mat[14]=values[14];mat[15]=values[15];return mat};goog.vec.Mat4.setFromRowMajorArray=function(mat,values){mat[0]=values[0];mat[1]=values[4];mat[2]=values[8];mat[3]=values[12];mat[4]=values[1];mat[5]=values[5];mat[6]=values[9];mat[7]=values[13];mat[8]=values[2];mat[9]=values[6];mat[10]=values[10];mat[11]=values[14];mat[12]=values[3];mat[13]=values[7];mat[14]=values[11];mat[15]=values[15];return mat};goog.vec.Mat4.setDiagonalValues=function(mat,v00,v11,v22,v33){mat[0]=v00;mat[5]=v11;mat[10]=v22;mat[15]=v33;return mat};goog.vec.Mat4.setDiagonal=function(mat,vec){mat[0]=vec[0];mat[5]=vec[1];mat[10]=vec[2];mat[15]=vec[3];return mat};goog.vec.Mat4.getDiagonal=function(mat,vec,opt_diagonal){if(!opt_diagonal){vec[0]=mat[0];vec[1]=mat[5];vec[2]=mat[10];vec[3]=mat[15]}else{var offset=opt_diagonal>0?4*opt_diagonal:-opt_diagonal;for(var i=0;i<4-Math.abs(opt_diagonal);i++){vec[i]=mat[offset+5*i]}}return vec};goog.vec.Mat4.setColumnValues=function(mat,column,v0,v1,v2,v3){var i=column*4;mat[i]=v0;mat[i+1]=v1;mat[i+2]=v2;mat[i+3]=v3;return mat};goog.vec.Mat4.setColumn=function(mat,column,vec){var i=column*4;mat[i]=vec[0];mat[i+1]=vec[1];mat[i+2]=vec[2];mat[i+3]=vec[3];return mat};goog.vec.Mat4.getColumn=function(mat,column,vec){var i=column*4;vec[0]=mat[i];vec[1]=mat[i+1];vec[2]=mat[i+2];vec[3]=mat[i+3];return vec};goog.vec.Mat4.setColumns=function(mat,vec0,vec1,vec2,vec3){goog.vec.Mat4.setColumn(mat,0,vec0);goog.vec.Mat4.setColumn(mat,1,vec1);goog.vec.Mat4.setColumn(mat,2,vec2);goog.vec.Mat4.setColumn(mat,3,vec3);return mat};goog.vec.Mat4.getColumns=function(mat,vec0,vec1,vec2,vec3){goog.vec.Mat4.getColumn(mat,0,vec0);goog.vec.Mat4.getColumn(mat,1,vec1);goog.vec.Mat4.getColumn(mat,2,vec2);goog.vec.Mat4.getColumn(mat,3,vec3)};goog.vec.Mat4.setRowValues=function(mat,row,v0,v1,v2,v3){mat[row]=v0;mat[row+4]=v1;mat[row+8]=v2;mat[row+12]=v3;return mat};goog.vec.Mat4.setRow=function(mat,row,vec){mat[row]=vec[0];mat[row+4]=vec[1];mat[row+8]=vec[2];mat[row+12]=vec[3];return mat};goog.vec.Mat4.getRow=function(mat,row,vec){vec[0]=mat[row];vec[1]=mat[row+4];vec[2]=mat[row+8];vec[3]=mat[row+12];return vec};goog.vec.Mat4.setRows=function(mat,vec0,vec1,vec2,vec3){goog.vec.Mat4.setRow(mat,0,vec0);goog.vec.Mat4.setRow(mat,1,vec1);goog.vec.Mat4.setRow(mat,2,vec2);goog.vec.Mat4.setRow(mat,3,vec3);return mat};goog.vec.Mat4.getRows=function(mat,vec0,vec1,vec2,vec3){goog.vec.Mat4.getRow(mat,0,vec0);goog.vec.Mat4.getRow(mat,1,vec1);goog.vec.Mat4.getRow(mat,2,vec2);goog.vec.Mat4.getRow(mat,3,vec3)};goog.vec.Mat4.makeZero=function(mat){mat[0]=0;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=0;mat[5]=0;mat[6]=0;mat[7]=0;mat[8]=0;mat[9]=0;mat[10]=0;mat[11]=0;mat[12]=0;mat[13]=0;mat[14]=0;mat[15]=0;return mat};goog.vec.Mat4.makeIdentity=function(mat){mat[0]=1;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=0;mat[5]=1;mat[6]=0;mat[7]=0;mat[8]=0;mat[9]=0;mat[10]=1;mat[11]=0;mat[12]=0;mat[13]=0;mat[14]=0;mat[15]=1;return mat};goog.vec.Mat4.addMat=function(mat0,mat1,resultMat){resultMat[0]=mat0[0]+mat1[0];resultMat[1]=mat0[1]+mat1[1];resultMat[2]=mat0[2]+mat1[2];resultMat[3]=mat0[3]+mat1[3];resultMat[4]=mat0[4]+mat1[4];resultMat[5]=mat0[5]+mat1[5];resultMat[6]=mat0[6]+mat1[6];resultMat[7]=mat0[7]+mat1[7];resultMat[8]=mat0[8]+mat1[8];resultMat[9]=mat0[9]+mat1[9];resultMat[10]=mat0[10]+mat1[10];resultMat[11]=mat0[11]+mat1[11];resultMat[12]=mat0[12]+mat1[12];resultMat[13]=mat0[13]+mat1[13];resultMat[14]=mat0[14]+mat1[14];resultMat[15]=mat0[15]+mat1[15];return resultMat};goog.vec.Mat4.subMat=function(mat0,mat1,resultMat){resultMat[0]=mat0[0]-mat1[0];resultMat[1]=mat0[1]-mat1[1];resultMat[2]=mat0[2]-mat1[2];resultMat[3]=mat0[3]-mat1[3];resultMat[4]=mat0[4]-mat1[4];resultMat[5]=mat0[5]-mat1[5];resultMat[6]=mat0[6]-mat1[6];resultMat[7]=mat0[7]-mat1[7];resultMat[8]=mat0[8]-mat1[8];resultMat[9]=mat0[9]-mat1[9];resultMat[10]=mat0[10]-mat1[10];resultMat[11]=mat0[11]-mat1[11];resultMat[12]=mat0[12]-mat1[12];resultMat[13]=mat0[13]-mat1[13];resultMat[14]=mat0[14]-mat1[14];resultMat[15]=mat0[15]-mat1[15];return resultMat};goog.vec.Mat4.multScalar=function(mat,scalar,resultMat){resultMat[0]=mat[0]*scalar;resultMat[1]=mat[1]*scalar;resultMat[2]=mat[2]*scalar;resultMat[3]=mat[3]*scalar;resultMat[4]=mat[4]*scalar;resultMat[5]=mat[5]*scalar;resultMat[6]=mat[6]*scalar;resultMat[7]=mat[7]*scalar;resultMat[8]=mat[8]*scalar;resultMat[9]=mat[9]*scalar;resultMat[10]=mat[10]*scalar;resultMat[11]=mat[11]*scalar;resultMat[12]=mat[12]*scalar;resultMat[13]=mat[13]*scalar;resultMat[14]=mat[14]*scalar;resultMat[15]=mat[15]*scalar;return resultMat};goog.vec.Mat4.multMat=function(mat0,mat1,resultMat){var a00=mat0[0],a10=mat0[1],a20=mat0[2],a30=mat0[3];var a01=mat0[4],a11=mat0[5],a21=mat0[6],a31=mat0[7];var a02=mat0[8],a12=mat0[9],a22=mat0[10],a32=mat0[11];var a03=mat0[12],a13=mat0[13],a23=mat0[14],a33=mat0[15];var b00=mat1[0],b10=mat1[1],b20=mat1[2],b30=mat1[3];var b01=mat1[4],b11=mat1[5],b21=mat1[6],b31=mat1[7];var b02=mat1[8],b12=mat1[9],b22=mat1[10],b32=mat1[11];var b03=mat1[12],b13=mat1[13],b23=mat1[14],b33=mat1[15];resultMat[0]=a00*b00+a01*b10+a02*b20+a03*b30;resultMat[1]=a10*b00+a11*b10+a12*b20+a13*b30;resultMat[2]=a20*b00+a21*b10+a22*b20+a23*b30;resultMat[3]=a30*b00+a31*b10+a32*b20+a33*b30;resultMat[4]=a00*b01+a01*b11+a02*b21+a03*b31;resultMat[5]=a10*b01+a11*b11+a12*b21+a13*b31;resultMat[6]=a20*b01+a21*b11+a22*b21+a23*b31;resultMat[7]=a30*b01+a31*b11+a32*b21+a33*b31;resultMat[8]=a00*b02+a01*b12+a02*b22+a03*b32;resultMat[9]=a10*b02+a11*b12+a12*b22+a13*b32;resultMat[10]=a20*b02+a21*b12+a22*b22+a23*b32;resultMat[11]=a30*b02+a31*b12+a32*b22+a33*b32;resultMat[12]=a00*b03+a01*b13+a02*b23+a03*b33;resultMat[13]=a10*b03+a11*b13+a12*b23+a13*b33;resultMat[14]=a20*b03+a21*b13+a22*b23+a23*b33;resultMat[15]=a30*b03+a31*b13+a32*b23+a33*b33;return resultMat};goog.vec.Mat4.transpose=function(mat,resultMat){if(resultMat==mat){var a10=mat[1],a20=mat[2],a30=mat[3];var a21=mat[6],a31=mat[7];var a32=mat[11];resultMat[1]=mat[4];resultMat[2]=mat[8];resultMat[3]=mat[12];resultMat[4]=a10;resultMat[6]=mat[9];resultMat[7]=mat[13];resultMat[8]=a20;resultMat[9]=a21;resultMat[11]=mat[14];resultMat[12]=a30;resultMat[13]=a31;resultMat[14]=a32}else{resultMat[0]=mat[0];resultMat[1]=mat[4];resultMat[2]=mat[8];resultMat[3]=mat[12];resultMat[4]=mat[1];resultMat[5]=mat[5];resultMat[6]=mat[9];resultMat[7]=mat[13];resultMat[8]=mat[2];resultMat[9]=mat[6];resultMat[10]=mat[10];resultMat[11]=mat[14];resultMat[12]=mat[3];resultMat[13]=mat[7];resultMat[14]=mat[11];resultMat[15]=mat[15]}return resultMat};goog.vec.Mat4.determinant=function(mat){var m00=mat[0],m10=mat[1],m20=mat[2],m30=mat[3];var m01=mat[4],m11=mat[5],m21=mat[6],m31=mat[7];var m02=mat[8],m12=mat[9],m22=mat[10],m32=mat[11];var m03=mat[12],m13=mat[13],m23=mat[14],m33=mat[15];var a0=m00*m11-m10*m01;var a1=m00*m21-m20*m01;var a2=m00*m31-m30*m01;var a3=m10*m21-m20*m11;var a4=m10*m31-m30*m11;var a5=m20*m31-m30*m21;var b0=m02*m13-m12*m03;var b1=m02*m23-m22*m03;var b2=m02*m33-m32*m03;var b3=m12*m23-m22*m13;var b4=m12*m33-m32*m13;var b5=m22*m33-m32*m23;return a0*b5-a1*b4+a2*b3+a3*b2-a4*b1+a5*b0};goog.vec.Mat4.invert=function(mat,resultMat){var m00=mat[0],m10=mat[1],m20=mat[2],m30=mat[3];var m01=mat[4],m11=mat[5],m21=mat[6],m31=mat[7];var m02=mat[8],m12=mat[9],m22=mat[10],m32=mat[11];var m03=mat[12],m13=mat[13],m23=mat[14],m33=mat[15];var a0=m00*m11-m10*m01;var a1=m00*m21-m20*m01;var a2=m00*m31-m30*m01;var a3=m10*m21-m20*m11;var a4=m10*m31-m30*m11;var a5=m20*m31-m30*m21;var b0=m02*m13-m12*m03;var b1=m02*m23-m22*m03;var b2=m02*m33-m32*m03;var b3=m12*m23-m22*m13;var b4=m12*m33-m32*m13;var b5=m22*m33-m32*m23;var det=a0*b5-a1*b4+a2*b3+a3*b2-a4*b1+a5*b0;if(det==0){return false}var idet=1/det;resultMat[0]=(m11*b5-m21*b4+m31*b3)*idet;resultMat[1]=(-m10*b5+m20*b4-m30*b3)*idet;resultMat[2]=(m13*a5-m23*a4+m33*a3)*idet;resultMat[3]=(-m12*a5+m22*a4-m32*a3)*idet;resultMat[4]=(-m01*b5+m21*b2-m31*b1)*idet;resultMat[5]=(m00*b5-m20*b2+m30*b1)*idet;resultMat[6]=(-m03*a5+m23*a2-m33*a1)*idet;resultMat[7]=(m02*a5-m22*a2+m32*a1)*idet;resultMat[8]=(m01*b4-m11*b2+m31*b0)*idet;resultMat[9]=(-m00*b4+m10*b2-m30*b0)*idet;resultMat[10]=(m03*a4-m13*a2+m33*a0)*idet;resultMat[11]=(-m02*a4+m12*a2-m32*a0)*idet;resultMat[12]=(-m01*b3+m11*b1-m21*b0)*idet;resultMat[13]=(m00*b3-m10*b1+m20*b0)*idet;resultMat[14]=(-m03*a3+m13*a1-m23*a0)*idet;resultMat[15]=(m02*a3-m12*a1+m22*a0)*idet;return true};goog.vec.Mat4.equals=function(mat0,mat1){return mat0.length==mat1.length&&mat0[0]==mat1[0]&&mat0[1]==mat1[1]&&mat0[2]==mat1[2]&&mat0[3]==mat1[3]&&mat0[4]==mat1[4]&&mat0[5]==mat1[5]&&mat0[6]==mat1[6]&&mat0[7]==mat1[7]&&mat0[8]==mat1[8]&&mat0[9]==mat1[9]&&mat0[10]==mat1[10]&&mat0[11]==mat1[11]&&mat0[12]==mat1[12]&&mat0[13]==mat1[13]&&mat0[14]==mat1[14]&&mat0[15]==mat1[15]};goog.vec.Mat4.multVec3=function(mat,vec,resultVec){var x=vec[0],y=vec[1],z=vec[2];resultVec[0]=x*mat[0]+y*mat[4]+z*mat[8]+mat[12];resultVec[1]=x*mat[1]+y*mat[5]+z*mat[9]+mat[13];resultVec[2]=x*mat[2]+y*mat[6]+z*mat[10]+mat[14];return resultVec};goog.vec.Mat4.multVec3NoTranslate=function(mat,vec,resultVec){var x=vec[0],y=vec[1],z=vec[2];resultVec[0]=x*mat[0]+y*mat[4]+z*mat[8];resultVec[1]=x*mat[1]+y*mat[5]+z*mat[9];resultVec[2]=x*mat[2]+y*mat[6]+z*mat[10];return resultVec};goog.vec.Mat4.multVec3Projective=function(mat,vec,resultVec){var x=vec[0],y=vec[1],z=vec[2];var invw=1/(x*mat[3]+y*mat[7]+z*mat[11]+mat[15]);resultVec[0]=(x*mat[0]+y*mat[4]+z*mat[8]+mat[12])*invw;resultVec[1]=(x*mat[1]+y*mat[5]+z*mat[9]+mat[13])*invw;resultVec[2]=(x*mat[2]+y*mat[6]+z*mat[10]+mat[14])*invw;return resultVec};goog.vec.Mat4.multVec4=function(mat,vec,resultVec){var x=vec[0],y=vec[1],z=vec[2],w=vec[3];resultVec[0]=x*mat[0]+y*mat[4]+z*mat[8]+w*mat[12];resultVec[1]=x*mat[1]+y*mat[5]+z*mat[9]+w*mat[13];resultVec[2]=x*mat[2]+y*mat[6]+z*mat[10]+w*mat[14];resultVec[3]=x*mat[3]+y*mat[7]+z*mat[11]+w*mat[15];return resultVec};goog.vec.Mat4.makeTranslate=function(mat,x,y,z){goog.vec.Mat4.makeIdentity(mat);return goog.vec.Mat4.setColumnValues(mat,3,x,y,z,1)};goog.vec.Mat4.makeScale=function(mat,x,y,z){goog.vec.Mat4.makeIdentity(mat);return goog.vec.Mat4.setDiagonalValues(mat,x,y,z,1)};goog.vec.Mat4.makeRotate=function(mat,angle,ax,ay,az){var c=Math.cos(angle);var d=1-c;var s=Math.sin(angle);return goog.vec.Mat4.setFromValues(mat,ax*ax*d+c,ax*ay*d+az*s,ax*az*d-ay*s,0,ax*ay*d-az*s,ay*ay*d+c,ay*az*d+ax*s,0,ax*az*d+ay*s,ay*az*d-ax*s,az*az*d+c,0,0,0,0,1)};goog.vec.Mat4.makeRotateX=function(mat,angle){var c=Math.cos(angle);var s=Math.sin(angle);return goog.vec.Mat4.setFromValues(mat,1,0,0,0,0,c,s,0,0,-s,c,0,0,0,0,1)};goog.vec.Mat4.makeRotateY=function(mat,angle){var c=Math.cos(angle);var s=Math.sin(angle);return goog.vec.Mat4.setFromValues(mat,c,0,-s,0,0,1,0,0,s,0,c,0,0,0,0,1)};goog.vec.Mat4.makeRotateZ=function(mat,angle){var c=Math.cos(angle);var s=Math.sin(angle);return goog.vec.Mat4.setFromValues(mat,c,s,0,0,-s,c,0,0,0,0,1,0,0,0,0,1)};goog.vec.Mat4.makeFrustum=function(mat,left,right,bottom,top,near,far){var x=(2*near)/(right-left);var y=(2*near)/(top-bottom);var a=(right+left)/(right-left);var b=(top+bottom)/(top-bottom);var c=-(far+near)/(far-near);var d=-(2*far*near)/(far-near);return goog.vec.Mat4.setFromValues(mat,x,0,0,0,0,y,0,0,a,b,c,-1,0,0,d,0)};goog.vec.Mat4.makePerspective=function(mat,fovy,aspect,near,far){var angle=fovy/2;var dz=far-near;var sinAngle=Math.sin(angle);if(dz==0||sinAngle==0||aspect==0){return mat}var cot=Math.cos(angle)/sinAngle;return goog.vec.Mat4.setFromValues(mat,cot/aspect,0,0,0,0,cot,0,0,0,0,-(far+near)/dz,-1,0,0,-(2*near*far)/dz,0)};goog.vec.Mat4.makeOrtho=function(mat,left,right,bottom,top,near,far){var x=2/(right-left);var y=2/(top-bottom);var z=-2/(far-near);var a=-(right+left)/(right-left);var b=-(top+bottom)/(top-bottom);var c=-(far+near)/(far-near);return goog.vec.Mat4.setFromValues(mat,x,0,0,0,0,y,0,0,0,0,z,0,a,b,c,1)};goog.vec.Mat4.makeLookAt=function(mat,eyePt,centerPt,worldUpVec){var fwdVec=goog.vec.Mat4.tmpVec4_[0];goog.vec.Vec3.subtract(centerPt,eyePt,fwdVec);goog.vec.Vec3.normalize(fwdVec,fwdVec);fwdVec[3]=0;var sideVec=goog.vec.Mat4.tmpVec4_[1];goog.vec.Vec3.cross(fwdVec,worldUpVec,sideVec);goog.vec.Vec3.normalize(sideVec,sideVec);sideVec[3]=0;var upVec=goog.vec.Mat4.tmpVec4_[2];goog.vec.Vec3.cross(sideVec,fwdVec,upVec);goog.vec.Vec3.normalize(upVec,upVec);upVec[3]=0;goog.vec.Vec3.negate(fwdVec,fwdVec);goog.vec.Mat4.setRow(mat,0,sideVec);goog.vec.Mat4.setRow(mat,1,upVec);goog.vec.Mat4.setRow(mat,2,fwdVec);goog.vec.Mat4.setRowValues(mat,3,0,0,0,1);goog.vec.Mat4.translate(mat,-eyePt[0],-eyePt[1],-eyePt[2]);return mat};goog.vec.Mat4.toLookAt=function(mat,eyePt,fwdVec,worldUpVec){var matInverse=goog.vec.Mat4.tmpMat4_[0];if(!goog.vec.Mat4.invert(mat,matInverse)){return false}if(eyePt){eyePt[0]=matInverse[12];eyePt[1]=matInverse[13];eyePt[2]=matInverse[14]}if(fwdVec||worldUpVec){if(!fwdVec){fwdVec=goog.vec.Mat4.tmpVec3_[0]}fwdVec[0]=-mat[2];fwdVec[1]=-mat[6];fwdVec[2]=-mat[10];goog.vec.Vec3.normalize(fwdVec,fwdVec)}if(worldUpVec){var side=goog.vec.Mat4.tmpVec3_[1];side[0]=mat[0];side[1]=mat[4];side[2]=mat[8];goog.vec.Vec3.cross(side,fwdVec,worldUpVec);goog.vec.Vec3.normalize(worldUpVec,worldUpVec)}return true};goog.vec.Mat4.makeEulerZXZ=function(mat,theta1,theta2,theta3){var c1=Math.cos(theta1);var s1=Math.sin(theta1);var c2=Math.cos(theta2);var s2=Math.sin(theta2);var c3=Math.cos(theta3);var s3=Math.sin(theta3);mat[0]=c1*c3-c2*s1*s3;mat[1]=c2*c1*s3+c3*s1;mat[2]=s3*s2;mat[3]=0;mat[4]=-c1*s3-c3*c2*s1;mat[5]=c1*c2*c3-s1*s3;mat[6]=c3*s2;mat[7]=0;mat[8]=s2*s1;mat[9]=-c1*s2;mat[10]=c2;mat[11]=0;mat[12]=0;mat[13]=0;mat[14]=0;mat[15]=1;return mat};goog.vec.Mat4.toEulerZXZ=function(mat,euler,opt_theta2IsNegative){var sinTheta2=Math.sqrt(mat[2]*mat[2]+mat[6]*mat[6]);var signTheta2=opt_theta2IsNegative?-1:1;if(sinTheta2>goog.vec.EPSILON){euler[2]=Math.atan2(mat[2]*signTheta2,mat[6]*signTheta2);euler[1]=Math.atan2(sinTheta2*signTheta2,mat[10]);euler[0]=Math.atan2(mat[8]*signTheta2,-mat[9]*signTheta2)}else{euler[0]=0;euler[1]=Math.atan2(sinTheta2*signTheta2,mat[10]);euler[2]=Math.atan2(mat[1],mat[0])}euler[0]=(euler[0]+Math.PI*2)%(Math.PI*2);euler[2]=(euler[2]+Math.PI*2)%(Math.PI*2);euler[1]=((euler[1]*signTheta2+Math.PI*2)%(Math.PI*2))*signTheta2;return euler};goog.vec.Mat4.translate=function(mat,x,y,z){return goog.vec.Mat4.setColumnValues(mat,3,mat[0]*x+mat[4]*y+mat[8]*z+mat[12],mat[1]*x+mat[5]*y+mat[9]*z+mat[13],mat[2]*x+mat[6]*y+mat[10]*z+mat[14],mat[3]*x+mat[7]*y+mat[11]*z+mat[15])};goog.vec.Mat4.scale=function(mat,x,y,z){return goog.vec.Mat4.setFromValues(mat,mat[0]*x,mat[1]*x,mat[2]*x,mat[3]*x,mat[4]*y,mat[5]*y,mat[6]*y,mat[7]*y,mat[8]*z,mat[9]*z,mat[10]*z,mat[11]*z,mat[12],mat[13],mat[14],mat[15])};goog.vec.Mat4.rotate=function(mat,angle,x,y,z){var m00=mat[0],m10=mat[1],m20=mat[2],m30=mat[3];var m01=mat[4],m11=mat[5],m21=mat[6],m31=mat[7];var m02=mat[8],m12=mat[9],m22=mat[10],m32=mat[11];var m03=mat[12],m13=mat[13],m23=mat[14],m33=mat[15];var cosAngle=Math.cos(angle);var sinAngle=Math.sin(angle);var diffCosAngle=1-cosAngle;var r00=x*x*diffCosAngle+cosAngle;var r10=x*y*diffCosAngle+z*sinAngle;var r20=x*z*diffCosAngle-y*sinAngle;var r01=x*y*diffCosAngle-z*sinAngle;var r11=y*y*diffCosAngle+cosAngle;var r21=y*z*diffCosAngle+x*sinAngle;var r02=x*z*diffCosAngle+y*sinAngle;var r12=y*z*diffCosAngle-x*sinAngle;var r22=z*z*diffCosAngle+cosAngle;return goog.vec.Mat4.setFromValues(mat,m00*r00+m01*r10+m02*r20,m10*r00+m11*r10+m12*r20,m20*r00+m21*r10+m22*r20,m30*r00+m31*r10+m32*r20,m00*r01+m01*r11+m02*r21,m10*r01+m11*r11+m12*r21,m20*r01+m21*r11+m22*r21,m30*r01+m31*r11+m32*r21,m00*r02+m01*r12+m02*r22,m10*r02+m11*r12+m12*r22,m20*r02+m21*r12+m22*r22,m30*r02+m31*r12+m32*r22,m03,m13,m23,m33)};goog.vec.Mat4.rotateX=function(mat,angle){var m01=mat[4],m11=mat[5],m21=mat[6],m31=mat[7];var m02=mat[8],m12=mat[9],m22=mat[10],m32=mat[11];var c=Math.cos(angle);var s=Math.sin(angle);mat[4]=m01*c+m02*s;mat[5]=m11*c+m12*s;mat[6]=m21*c+m22*s;mat[7]=m31*c+m32*s;mat[8]=m01*-s+m02*c;mat[9]=m11*-s+m12*c;mat[10]=m21*-s+m22*c;mat[11]=m31*-s+m32*c;return mat};goog.vec.Mat4.rotateY=function(mat,angle){var m00=mat[0],m10=mat[1],m20=mat[2],m30=mat[3];var m02=mat[8],m12=mat[9],m22=mat[10],m32=mat[11];var c=Math.cos(angle);var s=Math.sin(angle);mat[0]=m00*c+m02*-s;mat[1]=m10*c+m12*-s;mat[2]=m20*c+m22*-s;mat[3]=m30*c+m32*-s;mat[8]=m00*s+m02*c;mat[9]=m10*s+m12*c;mat[10]=m20*s+m22*c;mat[11]=m30*s+m32*c;return mat};goog.vec.Mat4.rotateZ=function(mat,angle){var m00=mat[0],m10=mat[1],m20=mat[2],m30=mat[3];var m01=mat[4],m11=mat[5],m21=mat[6],m31=mat[7];var c=Math.cos(angle);var s=Math.sin(angle);mat[0]=m00*c+m01*s;mat[1]=m10*c+m11*s;mat[2]=m20*c+m21*s;mat[3]=m30*c+m31*s;mat[4]=m00*-s+m01*c;mat[5]=m10*-s+m11*c;mat[6]=m20*-s+m21*c;mat[7]=m30*-s+m31*c;return mat};goog.vec.Mat4.getTranslation=function(mat,translation){translation[0]=mat[12];translation[1]=mat[13];translation[2]=mat[14];return translation};goog.vec.Mat4.tmpVec3_=[goog.vec.Vec3.createFloat64(),goog.vec.Vec3.createFloat64()];goog.vec.Mat4.tmpVec4_=[goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64()];goog.vec.Mat4.tmpMat4_=[goog.vec.Mat4.createFloat64()];goog.provide("ol.TransformFunction");ol.TransformFunction;goog.provide("ol.Extent");goog.provide("ol.extent");goog.provide("ol.extent.Corner");goog.provide("ol.extent.Relationship");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.Coordinate");goog.require("ol.Size");goog.require("ol.TransformFunction");ol.Extent;ol.extent.Corner={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.extent.Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};ol.extent.boundingExtent=function(coordinates){var extent=ol.extent.createEmpty();for(var i=0,ii=coordinates.length;i<ii;++i){ol.extent.extendCoordinate(extent,coordinates[i])}return extent};ol.extent.boundingExtentXYs_=function(xs,ys,opt_extent){goog.asserts.assert(xs.length>0,"xs length should be larger than 0");goog.asserts.assert(ys.length>0,"ys length should be larger than 0");var minX=Math.min.apply(null,xs);var minY=Math.min.apply(null,ys);var maxX=Math.max.apply(null,xs);var maxY=Math.max.apply(null,ys);return ol.extent.createOrUpdate(minX,minY,maxX,maxY,opt_extent)};ol.extent.buffer=function(extent,value,opt_extent){if(goog.isDef(opt_extent)){opt_extent[0]=extent[0]-value;opt_extent[1]=extent[1]-value;opt_extent[2]=extent[2]+value;opt_extent[3]=extent[3]+value;return opt_extent}else{return[extent[0]-value,extent[1]-value,extent[2]+value,extent[3]+value]}};ol.extent.clone=function(extent,opt_extent){if(goog.isDef(opt_extent)){opt_extent[0]=extent[0];opt_extent[1]=extent[1];opt_extent[2]=extent[2];opt_extent[3]=extent[3];return opt_extent}else{return extent.slice()}};ol.extent.closestSquaredDistanceXY=function(extent,x,y){var dx,dy;if(x<extent[0]){dx=extent[0]-x}else{if(extent[2]<x){dx=x-extent[2]}else{dx=0}}if(y<extent[1]){dy=extent[1]-y}else{if(extent[3]<y){dy=y-extent[3]}else{dy=0}}return dx*dx+dy*dy};ol.extent.containsCoordinate=function(extent,coordinate){return ol.extent.containsXY(extent,coordinate[0],coordinate[1])};ol.extent.containsExtent=function(extent1,extent2){return extent1[0]<=extent2[0]&&extent2[2]<=extent1[2]&&extent1[1]<=extent2[1]&&extent2[3]<=extent1[3]};ol.extent.containsXY=function(extent,x,y){return extent[0]<=x&&x<=extent[2]&&extent[1]<=y&&y<=extent[3]};ol.extent.coordinateRelationship=function(extent,coordinate){var minX=extent[0];var minY=extent[1];var maxX=extent[2];var maxY=extent[3];var x=coordinate[0];var y=coordinate[1];var relationship=ol.extent.Relationship.UNKNOWN;if(x<minX){relationship=relationship|ol.extent.Relationship.LEFT}else{if(x>maxX){relationship=relationship|ol.extent.Relationship.RIGHT}}if(y<minY){relationship=relationship|ol.extent.Relationship.BELOW}else{if(y>maxY){relationship=relationship|ol.extent.Relationship.ABOVE}}if(relationship===ol.extent.Relationship.UNKNOWN){relationship=ol.extent.Relationship.INTERSECTING}return relationship};ol.extent.createEmpty=function(){return[Infinity,Infinity,-Infinity,-Infinity]};ol.extent.createOrUpdate=function(minX,minY,maxX,maxY,opt_extent){if(goog.isDef(opt_extent)){opt_extent[0]=minX;opt_extent[1]=minY;opt_extent[2]=maxX;opt_extent[3]=maxY;return opt_extent}else{return[minX,minY,maxX,maxY]}};ol.extent.createOrUpdateEmpty=function(opt_extent){return ol.extent.createOrUpdate(Infinity,Infinity,-Infinity,-Infinity,opt_extent)};ol.extent.createOrUpdateFromCoordinate=function(coordinate,opt_extent){var x=coordinate[0];var y=coordinate[1];return ol.extent.createOrUpdate(x,y,x,y,opt_extent)};ol.extent.createOrUpdateFromCoordinates=function(coordinates,opt_extent){var extent=ol.extent.createOrUpdateEmpty(opt_extent);return ol.extent.extendCoordinates(extent,coordinates)};ol.extent.createOrUpdateFromFlatCoordinates=function(flatCoordinates,offset,end,stride,opt_extent){var extent=ol.extent.createOrUpdateEmpty(opt_extent);return ol.extent.extendFlatCoordinates(extent,flatCoordinates,offset,end,stride)};ol.extent.createOrUpdateFromRings=function(rings,opt_extent){var extent=ol.extent.createOrUpdateEmpty(opt_extent);return ol.extent.extendRings(extent,rings)};ol.extent.empty=function(extent){extent[0]=extent[1]=Infinity;extent[2]=extent[3]=-Infinity;return extent};ol.extent.equals=function(extent1,extent2){return extent1[0]==extent2[0]&&extent1[2]==extent2[2]&&extent1[1]==extent2[1]&&extent1[3]==extent2[3]};ol.extent.extend=function(extent1,extent2){if(extent2[0]<extent1[0]){extent1[0]=extent2[0]}if(extent2[2]>extent1[2]){extent1[2]=extent2[2]}if(extent2[1]<extent1[1]){extent1[1]=extent2[1]}if(extent2[3]>extent1[3]){extent1[3]=extent2[3]}return extent1};ol.extent.extendCoordinate=function(extent,coordinate){if(coordinate[0]<extent[0]){extent[0]=coordinate[0]}if(coordinate[0]>extent[2]){extent[2]=coordinate[0]}if(coordinate[1]<extent[1]){extent[1]=coordinate[1]}if(coordinate[1]>extent[3]){extent[3]=coordinate[1]}};ol.extent.extendCoordinates=function(extent,coordinates){var i,ii;for(i=0,ii=coordinates.length;i<ii;++i){ol.extent.extendCoordinate(extent,coordinates[i])}return extent};ol.extent.extendFlatCoordinates=function(extent,flatCoordinates,offset,end,stride){for(;offset<end;offset+=stride){ol.extent.extendXY(extent,flatCoordinates[offset],flatCoordinates[offset+1])}return extent};ol.extent.extendRings=function(extent,rings){var i,ii;for(i=0,ii=rings.length;i<ii;++i){ol.extent.extendCoordinates(extent,rings[i])}return extent};ol.extent.extendXY=function(extent,x,y){extent[0]=Math.min(extent[0],x);extent[1]=Math.min(extent[1],y);extent[2]=Math.max(extent[2],x);extent[3]=Math.max(extent[3],y)};ol.extent.forEachCorner=function(extent,callback,opt_this){var val;val=callback.call(opt_this,ol.extent.getBottomLeft(extent));if(val){return val}val=callback.call(opt_this,ol.extent.getBottomRight(extent));if(val){return val}val=callback.call(opt_this,ol.extent.getTopRight(extent));if(val){return val}val=callback.call(opt_this,ol.extent.getTopLeft(extent));if(val){return val}return false};ol.extent.getArea=function(extent){var area=0;if(!ol.extent.isEmpty(extent)){area=ol.extent.getWidth(extent)*ol.extent.getHeight(extent)}return area};ol.extent.getBottomLeft=function(extent){return[extent[0],extent[1]]};ol.extent.getBottomRight=function(extent){return[extent[2],extent[1]]};ol.extent.getCenter=function(extent){return[(extent[0]+extent[2])/2,(extent[1]+extent[3])/2]};ol.extent.getCorner=function(extent,corner){var coordinate;if(corner===ol.extent.Corner.BOTTOM_LEFT){coordinate=ol.extent.getBottomLeft(extent)}else{if(corner===ol.extent.Corner.BOTTOM_RIGHT){coordinate=ol.extent.getBottomRight(extent)}else{if(corner===ol.extent.Corner.TOP_LEFT){coordinate=ol.extent.getTopLeft(extent)}else{if(corner===ol.extent.Corner.TOP_RIGHT){coordinate=ol.extent.getTopRight(extent)}else{goog.asserts.fail("Invalid corner: %s",corner)}}}}goog.asserts.assert(goog.isDef(coordinate),"coordinate should be defined");return coordinate};ol.extent.getEnlargedArea=function(extent1,extent2){var minX=Math.min(extent1[0],extent2[0]);var minY=Math.min(extent1[1],extent2[1]);var maxX=Math.max(extent1[2],extent2[2]);var maxY=Math.max(extent1[3],extent2[3]);return(maxX-minX)*(maxY-minY)};ol.extent.getForViewAndSize=function(center,resolution,rotation,size,opt_extent){var dx=resolution*size[0]/2;var dy=resolution*size[1]/2;var cosRotation=Math.cos(rotation);var sinRotation=Math.sin(rotation);var xs=[-dx,-dx,dx,dx];var ys=[-dy,dy,-dy,dy];var i,x,y;for(i=0;i<4;++i){x=xs[i];y=ys[i];xs[i]=center[0]+x*cosRotation-y*sinRotation;ys[i]=center[1]+x*sinRotation+y*cosRotation}return ol.extent.boundingExtentXYs_(xs,ys,opt_extent)};ol.extent.getHeight=function(extent){return extent[3]-extent[1]};ol.extent.getIntersectionArea=function(extent1,extent2){var intersection=ol.extent.getIntersection(extent1,extent2);return ol.extent.getArea(intersection)};ol.extent.getIntersection=function(extent1,extent2,opt_extent){var intersection=goog.isDef(opt_extent)?opt_extent:ol.extent.createEmpty();if(ol.extent.intersects(extent1,extent2)){if(extent1[0]>extent2[0]){intersection[0]=extent1[0]}else{intersection[0]=extent2[0]}if(extent1[1]>extent2[1]){intersection[1]=extent1[1]}else{intersection[1]=extent2[1]}if(extent1[2]<extent2[2]){intersection[2]=extent1[2]}else{intersection[2]=extent2[2]}if(extent1[3]<extent2[3]){intersection[3]=extent1[3]}else{intersection[3]=extent2[3]}}return intersection};ol.extent.getMargin=function(extent){return ol.extent.getWidth(extent)+ol.extent.getHeight(extent)};ol.extent.getSize=function(extent){return[extent[2]-extent[0],extent[3]-extent[1]]};ol.extent.getTopLeft=function(extent){return[extent[0],extent[3]]};ol.extent.getTopRight=function(extent){return[extent[2],extent[3]]};ol.extent.getWidth=function(extent){return extent[2]-extent[0]};ol.extent.intersects=function(extent1,extent2){return extent1[0]<=extent2[2]&&extent1[2]>=extent2[0]&&extent1[1]<=extent2[3]&&extent1[3]>=extent2[1]};ol.extent.isEmpty=function(extent){return extent[2]<extent[0]||extent[3]<extent[1]};ol.extent.isInfinite=function(extent){return extent[0]==-Infinity||extent[1]==-Infinity||extent[2]==Infinity||extent[3]==Infinity};ol.extent.normalize=function(extent,coordinate){return[(coordinate[0]-extent[0])/(extent[2]-extent[0]),(coordinate[1]-extent[1])/(extent[3]-extent[1])]};ol.extent.returnOrUpdate=function(extent,opt_extent){if(goog.isDef(opt_extent)){opt_extent[0]=extent[0];opt_extent[1]=extent[1];opt_extent[2]=extent[2];opt_extent[3]=extent[3];return opt_extent}else{return extent}};ol.extent.scaleFromCenter=function(extent,value){var deltaX=((extent[2]-extent[0])/2)*(value-1);var deltaY=((extent[3]-extent[1])/2)*(value-1);extent[0]-=deltaX;extent[2]+=deltaX;extent[1]-=deltaY;extent[3]+=deltaY};ol.extent.intersectsSegment=function(extent,start,end){var intersects=false;var startRel=ol.extent.coordinateRelationship(extent,start);var endRel=ol.extent.coordinateRelationship(extent,end);if(startRel===ol.extent.Relationship.INTERSECTING||endRel===ol.extent.Relationship.INTERSECTING){intersects=true}else{var minX=extent[0];var minY=extent[1];var maxX=extent[2];var maxY=extent[3];var startX=start[0];var startY=start[1];var endX=end[0];var endY=end[1];var slope=(endY-startY)/(endX-startX);var x,y;if(!!(endRel&ol.extent.Relationship.ABOVE)&&!(startRel&ol.extent.Relationship.ABOVE)){x=endX-((endY-maxY)/slope);intersects=x>=minX&&x<=maxX}if(!intersects&&!!(endRel&ol.extent.Relationship.RIGHT)&&!(startRel&ol.extent.Relationship.RIGHT)){y=endY-((endX-maxX)*slope);intersects=y>=minY&&y<=maxY}if(!intersects&&!!(endRel&ol.extent.Relationship.BELOW)&&!(startRel&ol.extent.Relationship.BELOW)){x=endX-((endY-minY)/slope);intersects=x>=minX&&x<=maxX}if(!intersects&&!!(endRel&ol.extent.Relationship.LEFT)&&!(startRel&ol.extent.Relationship.LEFT)){y=endY-((endX-minX)*slope);intersects=y>=minY&&y<=maxY}}return intersects};ol.extent.touches=function(extent1,extent2){var intersects=ol.extent.intersects(extent1,extent2);return intersects&&(extent1[0]==extent2[2]||extent1[2]==extent2[0]||extent1[1]==extent2[3]||extent1[3]==extent2[1])};ol.extent.applyTransform=function(extent,transformFn,opt_extent){var coordinates=[extent[0],extent[1],extent[0],extent[3],extent[2],extent[1],extent[2],extent[3]];transformFn(coordinates,coordinates,2);var xs=[coordinates[0],coordinates[2],coordinates[4],coordinates[6]];var ys=[coordinates[1],coordinates[3],coordinates[5],coordinates[7]];return ol.extent.boundingExtentXYs_(xs,ys,opt_extent)};ol.extent.transform2D=function(extent,transform,opt_extent){var dest=goog.isDef(opt_extent)?opt_extent:[];var m00=goog.vec.Mat4.getElement(transform,0,0);var m10=goog.vec.Mat4.getElement(transform,1,0);var m01=goog.vec.Mat4.getElement(transform,0,1);var m11=goog.vec.Mat4.getElement(transform,1,1);var m03=goog.vec.Mat4.getElement(transform,0,3);var m13=goog.vec.Mat4.getElement(transform,1,3);var xi=[0,2,0,2];var yi=[1,1,3,3];var xs=[];var ys=[];var i,x,y;for(i=0;i<4;++i){x=extent[xi[i]];y=extent[yi[i]];xs[i]=m00*x+m01*y+m03;ys[i]=m10*x+m11*y+m13}dest[0]=Math.min.apply(null,xs);dest[1]=Math.min.apply(null,ys);dest[2]=Math.max.apply(null,xs);dest[3]=Math.max.apply(null,ys);return dest};goog.provide("goog.functions");goog.functions.constant=function(retValue){return function(){return retValue}};goog.functions.FALSE=goog.functions.constant(false);goog.functions.TRUE=goog.functions.constant(true);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(opt_returnValue,var_args){return opt_returnValue};goog.functions.error=function(message){return function(){throw Error(message)}};goog.functions.fail=function(err){return function(){throw err}};goog.functions.lock=function(f,opt_numArgs){opt_numArgs=opt_numArgs||0;return function(){return f.apply(this,Array.prototype.slice.call(arguments,0,opt_numArgs))}};goog.functions.nth=function(n){return function(){return arguments[n]}};goog.functions.withReturnValue=function(f,retValue){return goog.functions.sequence(f,goog.functions.constant(retValue))};goog.functions.equalTo=function(value,opt_useLooseComparison){return function(other){return opt_useLooseComparison?(value==other):(value===other)}};goog.functions.compose=function(fn,var_args){var functions=arguments;var length=functions.length;return function(){var result;if(length){result=functions[length-1].apply(this,arguments)}for(var i=length-2;i>=0;i--){result=functions[i].call(this,result)}return result}};goog.functions.sequence=function(var_args){var functions=arguments;var length=functions.length;return function(){var result;for(var i=0;i<length;i++){result=functions[i].apply(this,arguments)}return result}};goog.functions.and=function(var_args){var functions=arguments;var length=functions.length;return function(){for(var i=0;i<length;i++){if(!functions[i].apply(this,arguments)){return false}}return true}};goog.functions.or=function(var_args){var functions=arguments;var length=functions.length;return function(){for(var i=0;i<length;i++){if(functions[i].apply(this,arguments)){return true}}return false}};goog.functions.not=function(f){return function(){return !f.apply(this,arguments)}};goog.functions.create=function(constructor,var_args){var temp=function(){};temp.prototype=constructor.prototype;var obj=new temp();constructor.apply(obj,Array.prototype.slice.call(arguments,1));return obj};goog.define("goog.functions.CACHE_RETURN_VALUE",true);goog.functions.cacheReturnValue=function(fn){var called=false;var value;return function(){if(!goog.functions.CACHE_RETURN_VALUE){return fn()}if(!called){value=fn();called=true}return value}};goog.functions.once=function(f){var inner=f;return function(){if(inner){var tmp=inner;inner=null;tmp()}}};goog.provide("ol.Sphere");goog.require("goog.math");ol.Sphere=function(radius){this.radius=radius};ol.Sphere.prototype.geodesicArea=function(coordinates){var area=0,len=coordinates.length;var x1=coordinates[len-1][0];var y1=coordinates[len-1][1];for(var i=0;i<len;i++){var x2=coordinates[i][0],y2=coordinates[i][1];area+=goog.math.toRadians(x2-x1)*(2+Math.sin(goog.math.toRadians(y1))+Math.sin(goog.math.toRadians(y2)));x1=x2;y1=y2}return area*this.radius*this.radius/2};ol.Sphere.prototype.haversineDistance=function(c1,c2){var lat1=goog.math.toRadians(c1[1]);var lat2=goog.math.toRadians(c2[1]);var deltaLatBy2=(lat2-lat1)/2;var deltaLonBy2=goog.math.toRadians(c2[0]-c1[0])/2;var a=Math.sin(deltaLatBy2)*Math.sin(deltaLatBy2)+Math.sin(deltaLonBy2)*Math.sin(deltaLonBy2)*Math.cos(lat1)*Math.cos(lat2);return 2*this.radius*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))};ol.Sphere.prototype.offset=function(c1,distance,bearing){var lat1=goog.math.toRadians(c1[1]);var lon1=goog.math.toRadians(c1[0]);var dByR=distance/this.radius;var lat=Math.asin(Math.sin(lat1)*Math.cos(dByR)+Math.cos(lat1)*Math.sin(dByR)*Math.cos(bearing));var lon=lon1+Math.atan2(Math.sin(bearing)*Math.sin(dByR)*Math.cos(lat1),Math.cos(dByR)-Math.sin(lat1)*Math.sin(lat));return[goog.math.toDegrees(lon),goog.math.toDegrees(lat)]};goog.provide("ol.sphere.NORMAL");goog.require("ol.Sphere");ol.sphere.NORMAL=new ol.Sphere(6370997);goog.provide("ol.proj");goog.provide("ol.proj.METERS_PER_UNIT");goog.provide("ol.proj.Projection");goog.provide("ol.proj.ProjectionLike");goog.provide("ol.proj.Units");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol");goog.require("ol.Extent");goog.require("ol.TransformFunction");goog.require("ol.extent");goog.require("ol.sphere.NORMAL");ol.proj.ProjectionLike;ol.proj.Units={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",USFEET:"us-ft"};ol.proj.METERS_PER_UNIT={};ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]=2*Math.PI*ol.sphere.NORMAL.radius/360;ol.proj.METERS_PER_UNIT[ol.proj.Units.FEET]=0.3048;ol.proj.METERS_PER_UNIT[ol.proj.Units.METERS]=1;ol.proj.METERS_PER_UNIT[ol.proj.Units.USFEET]=1200/3937;ol.proj.Projection=function(options){this.code_=options.code;this.units_=(options.units);this.extent_=goog.isDef(options.extent)?options.extent:null;this.worldExtent_=goog.isDef(options.worldExtent)?options.worldExtent:null;this.axisOrientation_=goog.isDef(options.axisOrientation)?options.axisOrientation:"enu";this.global_=goog.isDef(options.global)?options.global:false;this.canWrapX_=this.global_&&!goog.isNull(this.extent_);this.getPointResolutionFunc_=goog.isDef(options.getPointResolution)?options.getPointResolution:this.getPointResolution_;this.defaultTileGrid_=null;var projections=ol.proj.projections_;var code=options.code;goog.asserts.assert(goog.isDef(code),'Option "code" is required for constructing instance');if(ol.ENABLE_PROJ4JS&&typeof proj4=="function"&&!goog.isDef(projections[code])){var def=proj4.defs(code);if(goog.isDef(def)){if(goog.isDef(def.axis)&&!goog.isDef(options.axisOrientation)){this.axisOrientation_=def.axis}if(!goog.isDef(options.units)){var units=def.units;if(!goog.isDef(units)){if(goog.isDef(def.to_meter)){units=def.to_meter.toString();ol.proj.METERS_PER_UNIT[units]=def.to_meter}}this.units_=units}var currentCode,currentDef,currentProj,proj4Transform;for(currentCode in projections){currentDef=proj4.defs(currentCode);if(goog.isDef(currentDef)){currentProj=ol.proj.get(currentCode);if(currentDef===def){ol.proj.addEquivalentProjections([currentProj,this])}else{proj4Transform=proj4(currentCode,code);ol.proj.addCoordinateTransforms(currentProj,this,proj4Transform.forward,proj4Transform.inverse)}}}}}};ol.proj.Projection.prototype.canWrapX=function(){return this.canWrapX_};ol.proj.Projection.prototype.getCode=function(){return this.code_};ol.proj.Projection.prototype.getExtent=function(){return this.extent_};ol.proj.Projection.prototype.getUnits=function(){return this.units_};ol.proj.Projection.prototype.getMetersPerUnit=function(){return ol.proj.METERS_PER_UNIT[this.units_]};ol.proj.Projection.prototype.getWorldExtent=function(){return this.worldExtent_};ol.proj.Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_};ol.proj.Projection.prototype.isGlobal=function(){return this.global_};ol.proj.Projection.prototype.setGlobal=function(global){this.global_=global;this.canWrapX_=global&&!goog.isNull(this.extent_)};ol.proj.Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};ol.proj.Projection.prototype.setDefaultTileGrid=function(tileGrid){this.defaultTileGrid_=tileGrid};ol.proj.Projection.prototype.setExtent=function(extent){this.extent_=extent;this.canWrapX_=this.global_&&!goog.isNull(extent)};ol.proj.Projection.prototype.setWorldExtent=function(worldExtent){this.worldExtent_=worldExtent};ol.proj.Projection.prototype.setGetPointResolution=function(func){this.getPointResolutionFunc_=func};ol.proj.Projection.prototype.getPointResolution_=function(resolution,point){var units=this.getUnits();if(units==ol.proj.Units.DEGREES){return resolution}else{var toEPSG4326=ol.proj.getTransformFromProjections(this,ol.proj.get("EPSG:4326"));var vertices=[point[0]-resolution/2,point[1],point[0]+resolution/2,point[1],point[0],point[1]-resolution/2,point[0],point[1]+resolution/2];vertices=toEPSG4326(vertices,vertices,2);var width=ol.sphere.NORMAL.haversineDistance(vertices.slice(0,2),vertices.slice(2,4));var height=ol.sphere.NORMAL.haversineDistance(vertices.slice(4,6),vertices.slice(6,8));var pointResolution=(width+height)/2;var metersPerUnit=this.getMetersPerUnit();if(goog.isDef(metersPerUnit)){pointResolution/=metersPerUnit}return pointResolution}};ol.proj.Projection.prototype.getPointResolution=function(resolution,point){return this.getPointResolutionFunc_(resolution,point)};ol.proj.projections_={};ol.proj.transforms_={};ol.proj.addEquivalentProjections=function(projections){ol.proj.addProjections(projections);goog.array.forEach(projections,function(source){goog.array.forEach(projections,function(destination){if(source!==destination){ol.proj.addTransform(source,destination,ol.proj.cloneTransform)}})})};ol.proj.addEquivalentTransforms=function(projections1,projections2,forwardTransform,inverseTransform){goog.array.forEach(projections1,function(projection1){goog.array.forEach(projections2,function(projection2){ol.proj.addTransform(projection1,projection2,forwardTransform);ol.proj.addTransform(projection2,projection1,inverseTransform)})})};ol.proj.addProjection=function(projection){ol.proj.projections_[projection.getCode()]=projection;ol.proj.addTransform(projection,projection,ol.proj.cloneTransform)};ol.proj.addProjections=function(projections){var addedProjections=[];goog.array.forEach(projections,function(projection){addedProjections.push(ol.proj.addProjection(projection))})};ol.proj.clearAllProjections=function(){ol.proj.projections_={};ol.proj.transforms_={}};ol.proj.createProjection=function(projection,defaultCode){if(!goog.isDefAndNotNull(projection)){return ol.proj.get(defaultCode)}else{if(goog.isString(projection)){return ol.proj.get(projection)}else{goog.asserts.assertInstanceof(projection,ol.proj.Projection,"projection should be an ol.proj.Projection");return projection}}};ol.proj.addTransform=function(source,destination,transformFn){var sourceCode=source.getCode();var destinationCode=destination.getCode();var transforms=ol.proj.transforms_;if(!goog.object.containsKey(transforms,sourceCode)){transforms[sourceCode]={}}transforms[sourceCode][destinationCode]=transformFn};ol.proj.addCoordinateTransforms=function(source,destination,forward,inverse){var sourceProj=ol.proj.get(source);var destProj=ol.proj.get(destination);ol.proj.addTransform(sourceProj,destProj,ol.proj.createTransformFromCoordinateTransform(forward));ol.proj.addTransform(destProj,sourceProj,ol.proj.createTransformFromCoordinateTransform(inverse))};ol.proj.createTransformFromCoordinateTransform=function(transform){return(function(input,opt_output,opt_dimension){var length=input.length;var dimension=goog.isDef(opt_dimension)?opt_dimension:2;var output=goog.isDef(opt_output)?opt_output:new Array(length);var point,i,j;for(i=0;i<length;i+=dimension){point=transform([input[i],input[i+1]]);output[i]=point[0];output[i+1]=point[1];for(j=dimension-1;j>=2;--j){output[i+j]=input[i+j]}}return output})};ol.proj.removeTransform=function(source,destination){var sourceCode=source.getCode();var destinationCode=destination.getCode();var transforms=ol.proj.transforms_;goog.asserts.assert(sourceCode in transforms,"sourceCode should be in transforms");goog.asserts.assert(destinationCode in transforms[sourceCode],"destinationCode should be in transforms of sourceCode");var transform=transforms[sourceCode][destinationCode];delete transforms[sourceCode][destinationCode];var keys=goog.object.getKeys(transforms[sourceCode]);if(keys.length===0){delete transforms[sourceCode]}return transform};ol.proj.fromLonLat=function(coordinate,opt_projection){return ol.proj.transform(coordinate,"EPSG:4326",goog.isDef(opt_projection)?opt_projection:"EPSG:3857")};ol.proj.toLonLat=function(coordinate,opt_projection){return ol.proj.transform(coordinate,goog.isDef(opt_projection)?opt_projection:"EPSG:3857","EPSG:4326")};ol.proj.get=function(projectionLike){var projection;if(projectionLike instanceof ol.proj.Projection){projection=projectionLike}else{if(goog.isString(projectionLike)){var code=projectionLike;projection=ol.proj.projections_[code];if(ol.ENABLE_PROJ4JS&&!goog.isDef(projection)&&typeof proj4=="function"&&goog.isDef(proj4.defs(code))){projection=new ol.proj.Projection({code:code});ol.proj.addProjection(projection)}}else{projection=null}}return projection};ol.proj.equivalent=function(projection1,projection2){if(projection1===projection2){return true}else{if(projection1.getCode()===projection2.getCode()){return true}else{if(projection1.getUnits()!=projection2.getUnits()){return false}else{var transformFn=ol.proj.getTransformFromProjections(projection1,projection2);return transformFn===ol.proj.cloneTransform}}}};ol.proj.getTransform=function(source,destination){var sourceProjection=ol.proj.get(source);var destinationProjection=ol.proj.get(destination);return ol.proj.getTransformFromProjections(sourceProjection,destinationProjection)};ol.proj.getTransformFromProjections=function(sourceProjection,destinationProjection){var transforms=ol.proj.transforms_;var sourceCode=sourceProjection.getCode();var destinationCode=destinationProjection.getCode();var transform;if(goog.object.containsKey(transforms,sourceCode)&&goog.object.containsKey(transforms[sourceCode],destinationCode)){transform=transforms[sourceCode][destinationCode]}if(!goog.isDef(transform)){goog.asserts.assert(goog.isDef(transform),"transform should be defined");transform=ol.proj.identityTransform}return transform};ol.proj.identityTransform=function(input,opt_output,opt_dimension){if(goog.isDef(opt_output)&&input!==opt_output){goog.asserts.fail("This should not be used internally.");for(var i=0,ii=input.length;i<ii;++i){opt_output[i]=input[i]}input=opt_output}return input};ol.proj.cloneTransform=function(input,opt_output,opt_dimension){var output;if(goog.isDef(opt_output)){for(var i=0,ii=input.length;i<ii;++i){opt_output[i]=input[i]}output=opt_output}else{output=input.slice()}return output};ol.proj.transform=function(coordinate,source,destination){var transformFn=ol.proj.getTransform(source,destination);return transformFn(coordinate,undefined,coordinate.length)};ol.proj.transformExtent=function(extent,source,destination){var transformFn=ol.proj.getTransform(source,destination);return ol.extent.applyTransform(extent,transformFn)};ol.proj.transformWithProjections=function(point,sourceProjection,destinationProjection){var transformFn=ol.proj.getTransformFromProjections(sourceProjection,destinationProjection);return transformFn(point)};goog.provide("ol.geom.Geometry");goog.provide("ol.geom.GeometryLayout");goog.provide("ol.geom.GeometryType");goog.require("goog.functions");goog.require("ol.Object");goog.require("ol.extent");goog.require("ol.proj");ol.geom.GeometryType={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};ol.geom.GeometryLayout={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};ol.geom.Geometry=function(){goog.base(this);this.extent_=ol.extent.createEmpty();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0};goog.inherits(ol.geom.Geometry,ol.Object);ol.geom.Geometry.prototype.clone=goog.abstractMethod;ol.geom.Geometry.prototype.closestPointXY=goog.abstractMethod;ol.geom.Geometry.prototype.getClosestPoint=function(point,opt_closestPoint){var closestPoint=goog.isDef(opt_closestPoint)?opt_closestPoint:[NaN,NaN];this.closestPointXY(point[0],point[1],closestPoint,Infinity);return closestPoint};ol.geom.Geometry.prototype.containsCoordinate=function(coordinate){return this.containsXY(coordinate[0],coordinate[1])};ol.geom.Geometry.prototype.computeExtent=goog.abstractMethod;ol.geom.Geometry.prototype.containsXY=goog.functions.FALSE;ol.geom.Geometry.prototype.getExtent=function(opt_extent){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return ol.extent.returnOrUpdate(this.extent_,opt_extent)};ol.geom.Geometry.prototype.getSimplifiedGeometry=goog.abstractMethod;ol.geom.Geometry.prototype.getType=goog.abstractMethod;ol.geom.Geometry.prototype.applyTransform=goog.abstractMethod;ol.geom.Geometry.prototype.intersectsExtent=goog.abstractMethod;ol.geom.Geometry.prototype.translate=goog.abstractMethod;ol.geom.Geometry.prototype.transform=function(source,destination){this.applyTransform(ol.proj.getTransform(source,destination));return this};goog.provide("ol.geom.flat.transform");goog.require("goog.vec.Mat4");ol.geom.flat.transform.transform2D=function(flatCoordinates,offset,end,stride,transform,opt_dest){var m00=goog.vec.Mat4.getElement(transform,0,0);var m10=goog.vec.Mat4.getElement(transform,1,0);var m01=goog.vec.Mat4.getElement(transform,0,1);var m11=goog.vec.Mat4.getElement(transform,1,1);var m03=goog.vec.Mat4.getElement(transform,0,3);var m13=goog.vec.Mat4.getElement(transform,1,3);var dest=goog.isDef(opt_dest)?opt_dest:[];var i=0;var j;for(j=offset;j<end;j+=stride){var x=flatCoordinates[j];var y=flatCoordinates[j+1];dest[i++]=m00*x+m01*y+m03;dest[i++]=m10*x+m11*y+m13}if(goog.isDef(opt_dest)&&dest.length!=i){dest.length=i}return dest};ol.geom.flat.transform.translate=function(flatCoordinates,offset,end,stride,deltaX,deltaY,opt_dest){var dest=goog.isDef(opt_dest)?opt_dest:[];var i=0;var j,k;for(j=offset;j<end;j+=stride){dest[i++]=flatCoordinates[j]+deltaX;dest[i++]=flatCoordinates[j+1]+deltaY;for(k=j+2;k<j+stride;++k){dest[i++]=flatCoordinates[k]}}if(goog.isDef(opt_dest)&&dest.length!=i){dest.length=i}return dest};goog.provide("ol.geom.SimpleGeometry");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.flat.transform");ol.geom.SimpleGeometry=function(){goog.base(this);this.layout=ol.geom.GeometryLayout.XY;this.stride=2;this.flatCoordinates=null};goog.inherits(ol.geom.SimpleGeometry,ol.geom.Geometry);ol.geom.SimpleGeometry.getLayoutForStride_=function(stride){if(stride==2){return ol.geom.GeometryLayout.XY}else{if(stride==3){return ol.geom.GeometryLayout.XYZ}else{if(stride==4){return ol.geom.GeometryLayout.XYZM}else{goog.asserts.fail("unsupported stride: "+stride)}}}};ol.geom.SimpleGeometry.getStrideForLayout=function(layout){if(layout==ol.geom.GeometryLayout.XY){return 2}else{if(layout==ol.geom.GeometryLayout.XYZ){return 3}else{if(layout==ol.geom.GeometryLayout.XYM){return 3}else{if(layout==ol.geom.GeometryLayout.XYZM){return 4}else{goog.asserts.fail("unsupported layout: "+layout)}}}}};ol.geom.SimpleGeometry.prototype.containsXY=goog.functions.FALSE;ol.geom.SimpleGeometry.prototype.computeExtent=function(extent){return ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,extent)};ol.geom.SimpleGeometry.prototype.getCoordinates=goog.abstractMethod;ol.geom.SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates};ol.geom.SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};ol.geom.SimpleGeometry.prototype.getLayout=function(){return this.layout};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometry=function(squaredTolerance){if(this.simplifiedGeometryRevision!=this.getRevision()){goog.object.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(squaredTolerance<0||(this.simplifiedGeometryMaxMinSquaredTolerance!==0&&squaredTolerance<=this.simplifiedGeometryMaxMinSquaredTolerance)){return this}var key=squaredTolerance.toString();if(this.simplifiedGeometryCache.hasOwnProperty(key)){return this.simplifiedGeometryCache[key]}else{var simplifiedGeometry=this.getSimplifiedGeometryInternal(squaredTolerance);var simplifiedFlatCoordinates=simplifiedGeometry.getFlatCoordinates();if(simplifiedFlatCoordinates.length<this.flatCoordinates.length){this.simplifiedGeometryCache[key]=simplifiedGeometry;return simplifiedGeometry}else{this.simplifiedGeometryMaxMinSquaredTolerance=squaredTolerance;return this}}};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(squaredTolerance){return this};ol.geom.SimpleGeometry.prototype.getStride=function(){return this.stride};ol.geom.SimpleGeometry.prototype.setFlatCoordinatesInternal=function(layout,flatCoordinates){this.stride=ol.geom.SimpleGeometry.getStrideForLayout(layout);this.layout=layout;this.flatCoordinates=flatCoordinates};ol.geom.SimpleGeometry.prototype.setCoordinates=goog.abstractMethod;ol.geom.SimpleGeometry.prototype.setLayout=function(layout,coordinates,nesting){var stride;if(goog.isDef(layout)){stride=ol.geom.SimpleGeometry.getStrideForLayout(layout)}else{var i;for(i=0;i<nesting;++i){if(coordinates.length===0){this.layout=ol.geom.GeometryLayout.XY;this.stride=2;return}else{coordinates=(coordinates[0])}}stride=((coordinates)).length;layout=ol.geom.SimpleGeometry.getLayoutForStride_(stride)}this.layout=layout;this.stride=stride};ol.geom.SimpleGeometry.prototype.applyTransform=function(transformFn){if(!goog.isNull(this.flatCoordinates)){transformFn(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};ol.geom.SimpleGeometry.prototype.translate=function(deltaX,deltaY){var flatCoordinates=this.getFlatCoordinates();if(!goog.isNull(flatCoordinates)){var stride=this.getStride();ol.geom.flat.transform.translate(flatCoordinates,0,flatCoordinates.length,stride,deltaX,deltaY,flatCoordinates);this.changed()}};ol.geom.transformSimpleGeometry2D=function(simpleGeometry,transform,opt_dest){var flatCoordinates=simpleGeometry.getFlatCoordinates();if(goog.isNull(flatCoordinates)){return null}else{var stride=simpleGeometry.getStride();return ol.geom.flat.transform.transform2D(flatCoordinates,0,flatCoordinates.length,stride,transform,opt_dest)}};goog.provide("ol.geom.flat.area");ol.geom.flat.area.linearRing=function(flatCoordinates,offset,end,stride){var twiceArea=0;var x1=flatCoordinates[end-stride];var y1=flatCoordinates[end-stride+1];for(;offset<end;offset+=stride){var x2=flatCoordinates[offset];var y2=flatCoordinates[offset+1];twiceArea+=y1*x2-x1*y2;x1=x2;y1=y2}return twiceArea/2};ol.geom.flat.area.linearRings=function(flatCoordinates,offset,ends,stride){var area=0;var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];area+=ol.geom.flat.area.linearRing(flatCoordinates,offset,end,stride);offset=end}return area};ol.geom.flat.area.linearRingss=function(flatCoordinates,offset,endss,stride){var area=0;var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];area+=ol.geom.flat.area.linearRings(flatCoordinates,offset,ends,stride);offset=ends[ends.length-1]}return area};goog.provide("ol.math");goog.require("goog.asserts");ol.math.cosh=function(x){return(Math.exp(x)+Math.exp(-x))/2};ol.math.coth=function(x){var expMinusTwoX=Math.exp(-2*x);return(1+expMinusTwoX)/(1-expMinusTwoX)};ol.math.csch=function(x){return 2/(Math.exp(x)-Math.exp(-x))};ol.math.roundUpToPowerOfTwo=function(x){goog.asserts.assert(0<x,"x should be larger than 0");return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))};ol.math.sech=function(x){return 2/(Math.exp(x)+Math.exp(-x))};ol.math.sinh=function(x){return(Math.exp(x)-Math.exp(-x))/2};ol.math.squaredSegmentDistance=function(x,y,x1,y1,x2,y2){var dx=x2-x1;var dy=y2-y1;if(dx!==0||dy!==0){var t=((x-x1)*dx+(y-y1)*dy)/(dx*dx+dy*dy);if(t>1){x1=x2;y1=y2}else{if(t>0){x1+=dx*t;y1+=dy*t}}}return ol.math.squaredDistance(x,y,x1,y1)};ol.math.squaredDistance=function(x1,y1,x2,y2){var dx=x2-x1;var dy=y2-y1;return dx*dx+dy*dy};ol.math.tanh=function(x){var expMinusTwoX=Math.exp(-2*x);return(1-expMinusTwoX)/(1+expMinusTwoX)};goog.provide("ol.geom.flat.closest");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.math");ol.geom.flat.closest.point=function(flatCoordinates,offset1,offset2,stride,x,y,closestPoint){var x1=flatCoordinates[offset1];var y1=flatCoordinates[offset1+1];var dx=flatCoordinates[offset2]-x1;var dy=flatCoordinates[offset2+1]-y1;var i,offset;if(dx===0&&dy===0){offset=offset1}else{var t=((x-x1)*dx+(y-y1)*dy)/(dx*dx+dy*dy);if(t>1){offset=offset2}else{if(t>0){for(i=0;i<stride;++i){closestPoint[i]=goog.math.lerp(flatCoordinates[offset1+i],flatCoordinates[offset2+i],t)}closestPoint.length=stride;return}else{offset=offset1}}}for(i=0;i<stride;++i){closestPoint[i]=flatCoordinates[offset+i]}closestPoint.length=stride};ol.geom.flat.closest.getMaxSquaredDelta=function(flatCoordinates,offset,end,stride,maxSquaredDelta){var x1=flatCoordinates[offset];var y1=flatCoordinates[offset+1];for(offset+=stride;offset<end;offset+=stride){var x2=flatCoordinates[offset];var y2=flatCoordinates[offset+1];var squaredDelta=ol.math.squaredDistance(x1,y1,x2,y2);if(squaredDelta>maxSquaredDelta){maxSquaredDelta=squaredDelta}x1=x2;y1=y2}return maxSquaredDelta};ol.geom.flat.closest.getsMaxSquaredDelta=function(flatCoordinates,offset,ends,stride,maxSquaredDelta){var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];maxSquaredDelta=ol.geom.flat.closest.getMaxSquaredDelta(flatCoordinates,offset,end,stride,maxSquaredDelta);offset=end}return maxSquaredDelta};ol.geom.flat.closest.getssMaxSquaredDelta=function(flatCoordinates,offset,endss,stride,maxSquaredDelta){var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];maxSquaredDelta=ol.geom.flat.closest.getsMaxSquaredDelta(flatCoordinates,offset,ends,stride,maxSquaredDelta);offset=ends[ends.length-1]}return maxSquaredDelta};ol.geom.flat.closest.getClosestPoint=function(flatCoordinates,offset,end,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,opt_tmpPoint){if(offset==end){return minSquaredDistance}var i,squaredDistance;if(maxDelta===0){squaredDistance=ol.math.squaredDistance(x,y,flatCoordinates[offset],flatCoordinates[offset+1]);if(squaredDistance<minSquaredDistance){for(i=0;i<stride;++i){closestPoint[i]=flatCoordinates[offset+i]}closestPoint.length=stride;return squaredDistance}else{return minSquaredDistance}}goog.asserts.assert(maxDelta>0,"maxDelta should be larger than 0");var tmpPoint=goog.isDef(opt_tmpPoint)?opt_tmpPoint:[NaN,NaN];var index=offset+stride;while(index<end){ol.geom.flat.closest.point(flatCoordinates,index-stride,index,stride,x,y,tmpPoint);squaredDistance=ol.math.squaredDistance(x,y,tmpPoint[0],tmpPoint[1]);if(squaredDistance<minSquaredDistance){minSquaredDistance=squaredDistance;for(i=0;i<stride;++i){closestPoint[i]=tmpPoint[i]}closestPoint.length=stride;index+=stride}else{index+=stride*Math.max(((Math.sqrt(squaredDistance)-Math.sqrt(minSquaredDistance))/maxDelta)|0,1)}}if(isRing){ol.geom.flat.closest.point(flatCoordinates,end-stride,offset,stride,x,y,tmpPoint);squaredDistance=ol.math.squaredDistance(x,y,tmpPoint[0],tmpPoint[1]);if(squaredDistance<minSquaredDistance){minSquaredDistance=squaredDistance;for(i=0;i<stride;++i){closestPoint[i]=tmpPoint[i]}closestPoint.length=stride}}return minSquaredDistance};ol.geom.flat.closest.getsClosestPoint=function(flatCoordinates,offset,ends,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,opt_tmpPoint){var tmpPoint=goog.isDef(opt_tmpPoint)?opt_tmpPoint:[NaN,NaN];var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];minSquaredDistance=ol.geom.flat.closest.getClosestPoint(flatCoordinates,offset,end,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint);offset=end}return minSquaredDistance};ol.geom.flat.closest.getssClosestPoint=function(flatCoordinates,offset,endss,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,opt_tmpPoint){var tmpPoint=goog.isDef(opt_tmpPoint)?opt_tmpPoint:[NaN,NaN];var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];minSquaredDistance=ol.geom.flat.closest.getsClosestPoint(flatCoordinates,offset,ends,stride,maxDelta,isRing,x,y,closestPoint,minSquaredDistance,tmpPoint);offset=ends[ends.length-1]}return minSquaredDistance};goog.provide("ol.geom.flat.deflate");goog.require("goog.asserts");ol.geom.flat.deflate.coordinate=function(flatCoordinates,offset,coordinate,stride){goog.asserts.assert(coordinate.length==stride,"length of the coordinate array should match stride");var i,ii;for(i=0,ii=coordinate.length;i<ii;++i){flatCoordinates[offset++]=coordinate[i]}return offset};ol.geom.flat.deflate.coordinates=function(flatCoordinates,offset,coordinates,stride){var i,ii;for(i=0,ii=coordinates.length;i<ii;++i){var coordinate=coordinates[i];goog.asserts.assert(coordinate.length==stride,"length of coordinate array should match stride");var j;for(j=0;j<stride;++j){flatCoordinates[offset++]=coordinate[j]}}return offset};ol.geom.flat.deflate.coordinatess=function(flatCoordinates,offset,coordinatess,stride,opt_ends){var ends=goog.isDef(opt_ends)?opt_ends:[];var i=0;var j,jj;for(j=0,jj=coordinatess.length;j<jj;++j){var end=ol.geom.flat.deflate.coordinates(flatCoordinates,offset,coordinatess[j],stride);ends[i++]=end;offset=end}ends.length=i;return ends};ol.geom.flat.deflate.coordinatesss=function(flatCoordinates,offset,coordinatesss,stride,opt_endss){var endss=goog.isDef(opt_endss)?opt_endss:[];var i=0;var j,jj;for(j=0,jj=coordinatesss.length;j<jj;++j){var ends=ol.geom.flat.deflate.coordinatess(flatCoordinates,offset,coordinatesss[j],stride,endss[i]);endss[i++]=ends;offset=ends[ends.length-1]}endss.length=i;return endss};goog.provide("ol.geom.flat.inflate");ol.geom.flat.inflate.coordinates=function(flatCoordinates,offset,end,stride,opt_coordinates){var coordinates=goog.isDef(opt_coordinates)?opt_coordinates:[];var i=0;var j;for(j=offset;j<end;j+=stride){coordinates[i++]=flatCoordinates.slice(j,j+stride)}coordinates.length=i;return coordinates};ol.geom.flat.inflate.coordinatess=function(flatCoordinates,offset,ends,stride,opt_coordinatess){var coordinatess=goog.isDef(opt_coordinatess)?opt_coordinatess:[];var i=0;var j,jj;for(j=0,jj=ends.length;j<jj;++j){var end=ends[j];coordinatess[i++]=ol.geom.flat.inflate.coordinates(flatCoordinates,offset,end,stride,coordinatess[i]);offset=end}coordinatess.length=i;return coordinatess};ol.geom.flat.inflate.coordinatesss=function(flatCoordinates,offset,endss,stride,opt_coordinatesss){var coordinatesss=goog.isDef(opt_coordinatesss)?opt_coordinatesss:[];var i=0;var j,jj;for(j=0,jj=endss.length;j<jj;++j){var ends=endss[j];coordinatesss[i++]=ol.geom.flat.inflate.coordinatess(flatCoordinates,offset,ends,stride,coordinatesss[i]);offset=ends[ends.length-1]}coordinatesss.length=i;return coordinatesss};goog.provide("ol.geom.flat.simplify");goog.require("ol.math");ol.geom.flat.simplify.lineString=function(flatCoordinates,offset,end,stride,squaredTolerance,highQuality,opt_simplifiedFlatCoordinates){var simplifiedFlatCoordinates=goog.isDef(opt_simplifiedFlatCoordinates)?opt_simplifiedFlatCoordinates:[];if(!highQuality){end=ol.geom.flat.simplify.radialDistance(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,0);flatCoordinates=simplifiedFlatCoordinates;offset=0;stride=2}simplifiedFlatCoordinates.length=ol.geom.flat.simplify.douglasPeucker(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,0);return simplifiedFlatCoordinates};ol.geom.flat.simplify.douglasPeucker=function(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset){var n=(end-offset)/stride;if(n<3){for(;offset<end;offset+=stride){simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset];simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+1]}return simplifiedOffset}var markers=new Array(n);markers[0]=1;markers[n-1]=1;var stack=[offset,end-stride];var index=0;var i;while(stack.length>0){var last=stack.pop();var first=stack.pop();var maxSquaredDistance=0;var x1=flatCoordinates[first];var y1=flatCoordinates[first+1];var x2=flatCoordinates[last];var y2=flatCoordinates[last+1];for(i=first+stride;i<last;i+=stride){var x=flatCoordinates[i];var y=flatCoordinates[i+1];var squaredDistance=ol.math.squaredSegmentDistance(x,y,x1,y1,x2,y2);if(squaredDistance>maxSquaredDistance){index=i;maxSquaredDistance=squaredDistance}}if(maxSquaredDistance>squaredTolerance){markers[(index-offset)/stride]=1;if(first+stride<index){stack.push(first,index)}if(index+stride<last){stack.push(index,last)}}}for(i=0;i<n;++i){if(markers[i]){simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+i*stride];simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+i*stride+1]}}return simplifiedOffset};ol.geom.flat.simplify.douglasPeuckers=function(flatCoordinates,offset,ends,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds){var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];simplifiedOffset=ol.geom.flat.simplify.douglasPeucker(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset);simplifiedEnds.push(simplifiedOffset);offset=end}return simplifiedOffset};ol.geom.flat.simplify.douglasPeuckerss=function(flatCoordinates,offset,endss,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEndss){var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];var simplifiedEnds=[];simplifiedOffset=ol.geom.flat.simplify.douglasPeuckers(flatCoordinates,offset,ends,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds);simplifiedEndss.push(simplifiedEnds);offset=ends[ends.length-1]}return simplifiedOffset};ol.geom.flat.simplify.radialDistance=function(flatCoordinates,offset,end,stride,squaredTolerance,simplifiedFlatCoordinates,simplifiedOffset){if(end<=offset+stride){for(;offset<end;offset+=stride){simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset];simplifiedFlatCoordinates[simplifiedOffset++]=flatCoordinates[offset+1]}return simplifiedOffset}var x1=flatCoordinates[offset];var y1=flatCoordinates[offset+1];simplifiedFlatCoordinates[simplifiedOffset++]=x1;simplifiedFlatCoordinates[simplifiedOffset++]=y1;var x2=x1;var y2=y1;for(offset+=stride;offset<end;offset+=stride){x2=flatCoordinates[offset];y2=flatCoordinates[offset+1];if(ol.math.squaredDistance(x1,y1,x2,y2)>squaredTolerance){simplifiedFlatCoordinates[simplifiedOffset++]=x2;simplifiedFlatCoordinates[simplifiedOffset++]=y2;x1=x2;y1=y2}}if(x2!=x1||y2!=y1){simplifiedFlatCoordinates[simplifiedOffset++]=x2;simplifiedFlatCoordinates[simplifiedOffset++]=y2}return simplifiedOffset};ol.geom.flat.simplify.snap=function(value,tolerance){return tolerance*Math.round(value/tolerance)};ol.geom.flat.simplify.quantize=function(flatCoordinates,offset,end,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset){if(offset==end){return simplifiedOffset}var x1=ol.geom.flat.simplify.snap(flatCoordinates[offset],tolerance);var y1=ol.geom.flat.simplify.snap(flatCoordinates[offset+1],tolerance);offset+=stride;simplifiedFlatCoordinates[simplifiedOffset++]=x1;simplifiedFlatCoordinates[simplifiedOffset++]=y1;var x2,y2;do{x2=ol.geom.flat.simplify.snap(flatCoordinates[offset],tolerance);y2=ol.geom.flat.simplify.snap(flatCoordinates[offset+1],tolerance);offset+=stride;if(offset==end){simplifiedFlatCoordinates[simplifiedOffset++]=x2;simplifiedFlatCoordinates[simplifiedOffset++]=y2;return simplifiedOffset}}while(x2==x1&&y2==y1);while(offset<end){var x3,y3;x3=ol.geom.flat.simplify.snap(flatCoordinates[offset],tolerance);y3=ol.geom.flat.simplify.snap(flatCoordinates[offset+1],tolerance);offset+=stride;if(x3==x2&&y3==y2){continue}var dx1=x2-x1;var dy1=y2-y1;var dx2=x3-x1;var dy2=y3-y1;if((dx1*dy2==dy1*dx2)&&((dx1<0&&dx2<dx1)||dx1==dx2||(dx1>0&&dx2>dx1))&&((dy1<0&&dy2<dy1)||dy1==dy2||(dy1>0&&dy2>dy1))){x2=x3;y2=y3;continue}simplifiedFlatCoordinates[simplifiedOffset++]=x2;simplifiedFlatCoordinates[simplifiedOffset++]=y2;x1=x2;y1=y2;x2=x3;y2=y3}simplifiedFlatCoordinates[simplifiedOffset++]=x2;simplifiedFlatCoordinates[simplifiedOffset++]=y2;return simplifiedOffset};ol.geom.flat.simplify.quantizes=function(flatCoordinates,offset,ends,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds){var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];simplifiedOffset=ol.geom.flat.simplify.quantize(flatCoordinates,offset,end,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset);simplifiedEnds.push(simplifiedOffset);offset=end}return simplifiedOffset};ol.geom.flat.simplify.quantizess=function(flatCoordinates,offset,endss,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEndss){var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];var simplifiedEnds=[];simplifiedOffset=ol.geom.flat.simplify.quantizes(flatCoordinates,offset,ends,stride,tolerance,simplifiedFlatCoordinates,simplifiedOffset,simplifiedEnds);simplifiedEndss.push(simplifiedEnds);offset=ends[ends.length-1]}return simplifiedOffset};goog.provide("ol.geom.LinearRing");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.simplify");ol.geom.LinearRing=function(coordinates,opt_layout){goog.base(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.LinearRing,ol.geom.SimpleGeometry);ol.geom.LinearRing.prototype.clone=function(){var linearRing=new ol.geom.LinearRing(null);linearRing.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return linearRing};ol.geom.LinearRing.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,x,y,closestPoint,minSquaredDistance)};ol.geom.LinearRing.prototype.getArea=function(){return ol.geom.flat.area.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getSimplifiedGeometryInternal=function(squaredTolerance){var simplifiedFlatCoordinates=[];simplifiedFlatCoordinates.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,squaredTolerance,simplifiedFlatCoordinates,0);var simplifiedLinearRing=new ol.geom.LinearRing(null);simplifiedLinearRing.setFlatCoordinates(ol.geom.GeometryLayout.XY,simplifiedFlatCoordinates);return simplifiedLinearRing};ol.geom.LinearRing.prototype.getType=function(){return ol.geom.GeometryType.LINEAR_RING};ol.geom.LinearRing.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(opt_layout,coordinates,1);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,coordinates,this.stride);this.changed()}};ol.geom.LinearRing.prototype.setFlatCoordinates=function(layout,flatCoordinates){this.setFlatCoordinatesInternal(layout,flatCoordinates);this.changed()};goog.provide("ol.geom.Point");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.math");ol.geom.Point=function(coordinates,opt_layout){goog.base(this);this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.Point,ol.geom.SimpleGeometry);ol.geom.Point.prototype.clone=function(){var point=new ol.geom.Point(null);point.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return point};ol.geom.Point.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){var flatCoordinates=this.flatCoordinates;var squaredDistance=ol.math.squaredDistance(x,y,flatCoordinates[0],flatCoordinates[1]);if(squaredDistance<minSquaredDistance){var stride=this.stride;var i;for(i=0;i<stride;++i){closestPoint[i]=flatCoordinates[i]}closestPoint.length=stride;return squaredDistance}else{return minSquaredDistance}};ol.geom.Point.prototype.getCoordinates=function(){return goog.isNull(this.flatCoordinates)?[]:this.flatCoordinates.slice()};ol.geom.Point.prototype.computeExtent=function(extent){return ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates,extent)};ol.geom.Point.prototype.getType=function(){return ol.geom.GeometryType.POINT};ol.geom.Point.prototype.intersectsExtent=function(extent){return ol.extent.containsXY(extent,this.flatCoordinates[0],this.flatCoordinates[1])};ol.geom.Point.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(opt_layout,coordinates,0);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinate(this.flatCoordinates,0,coordinates,this.stride);this.changed()}};ol.geom.Point.prototype.setFlatCoordinates=function(layout,flatCoordinates){this.setFlatCoordinatesInternal(layout,flatCoordinates);this.changed()};goog.provide("ol.geom.flat.contains");goog.require("goog.asserts");goog.require("ol.extent");ol.geom.flat.contains.linearRingContainsExtent=function(flatCoordinates,offset,end,stride,extent){var outside=ol.extent.forEachCorner(extent,function(coordinate){return !ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,offset,end,stride,coordinate[0],coordinate[1])});return !outside};ol.geom.flat.contains.linearRingContainsXY=function(flatCoordinates,offset,end,stride,x,y){var contains=false;var x1=flatCoordinates[end-stride];var y1=flatCoordinates[end-stride+1];for(;offset<end;offset+=stride){var x2=flatCoordinates[offset];var y2=flatCoordinates[offset+1];var intersect=((y1>y)!=(y2>y))&&(x<(x2-x1)*(y-y1)/(y2-y1)+x1);if(intersect){contains=!contains}x1=x2;y1=y2}return contains};ol.geom.flat.contains.linearRingsContainsXY=function(flatCoordinates,offset,ends,stride,x,y){goog.asserts.assert(ends.length>0,"ends should not be an empty array");if(ends.length===0){return false}if(!ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,offset,ends[0],stride,x,y)){return false}var i,ii;for(i=1,ii=ends.length;i<ii;++i){if(ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,ends[i-1],ends[i],stride,x,y)){return false}}return true};ol.geom.flat.contains.linearRingssContainsXY=function(flatCoordinates,offset,endss,stride,x,y){goog.asserts.assert(endss.length>0,"endss should not be an empty array");if(endss.length===0){return false}var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];if(ol.geom.flat.contains.linearRingsContainsXY(flatCoordinates,offset,ends,stride,x,y)){return true}offset=ends[ends.length-1]}return false};goog.provide("ol.geom.flat.interiorpoint");goog.require("goog.asserts");goog.require("ol.geom.flat.contains");ol.geom.flat.interiorpoint.linearRings=function(flatCoordinates,offset,ends,stride,flatCenters,flatCentersOffset,opt_dest){var i,ii,x,x1,x2,y1,y2;var y=flatCenters[flatCentersOffset+1];var intersections=[];var end=ends[0];x1=flatCoordinates[end-stride];y1=flatCoordinates[end-stride+1];for(i=offset;i<end;i+=stride){x2=flatCoordinates[i];y2=flatCoordinates[i+1];if((y<=y1&&y2<=y)||(y1<=y&&y<=y2)){x=(y-y1)/(y2-y1)*(x2-x1)+x1;intersections.push(x)}x1=x2;y1=y2}var pointX=NaN;var maxSegmentLength=-Infinity;intersections.sort();x1=intersections[0];for(i=1,ii=intersections.length;i<ii;++i){x2=intersections[i];var segmentLength=Math.abs(x2-x1);if(segmentLength>maxSegmentLength){x=(x1+x2)/2;if(ol.geom.flat.contains.linearRingsContainsXY(flatCoordinates,offset,ends,stride,x,y)){pointX=x;maxSegmentLength=segmentLength}}x1=x2}if(isNaN(pointX)){pointX=flatCenters[flatCentersOffset]}if(goog.isDef(opt_dest)){opt_dest.push(pointX,y);return opt_dest}else{return[pointX,y]}};ol.geom.flat.interiorpoint.linearRingss=function(flatCoordinates,offset,endss,stride,flatCenters){goog.asserts.assert(2*endss.length==flatCenters.length,"endss.length times 2 should be flatCenters.length");var interiorPoints=[];var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];interiorPoints=ol.geom.flat.interiorpoint.linearRings(flatCoordinates,offset,ends,stride,flatCenters,2*i,interiorPoints);offset=ends[ends.length-1]}return interiorPoints};goog.provide("ol.geom.flat.segments");ol.geom.flat.segments.forEach=function(flatCoordinates,offset,end,stride,callback,opt_this){var point1=[flatCoordinates[offset],flatCoordinates[offset+1]];var point2=[];var ret;for(;(offset+stride)<end;offset+=stride){point2[0]=flatCoordinates[offset+stride];point2[1]=flatCoordinates[offset+stride+1];ret=callback.call(opt_this,point1,point2);if(ret){return ret}point1[0]=point2[0];point1[1]=point2[1]}return false};goog.provide("ol.geom.flat.intersectsextent");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.segments");ol.geom.flat.intersectsextent.lineString=function(flatCoordinates,offset,end,stride,extent){var coordinatesExtent=ol.extent.extendFlatCoordinates(ol.extent.createEmpty(),flatCoordinates,offset,end,stride);if(!ol.extent.intersects(extent,coordinatesExtent)){return false}if(ol.extent.containsExtent(extent,coordinatesExtent)){return true}if(coordinatesExtent[0]>=extent[0]&&coordinatesExtent[2]<=extent[2]){return true}if(coordinatesExtent[1]>=extent[1]&&coordinatesExtent[3]<=extent[3]){return true}return ol.geom.flat.segments.forEach(flatCoordinates,offset,end,stride,function(point1,point2){return ol.extent.intersectsSegment(extent,point1,point2)})};ol.geom.flat.intersectsextent.lineStrings=function(flatCoordinates,offset,ends,stride,extent){var i,ii;for(i=0,ii=ends.length;i<ii;++i){if(ol.geom.flat.intersectsextent.lineString(flatCoordinates,offset,ends[i],stride,extent)){return true}offset=ends[i]}return false};ol.geom.flat.intersectsextent.linearRing=function(flatCoordinates,offset,end,stride,extent){if(ol.geom.flat.intersectsextent.lineString(flatCoordinates,offset,end,stride,extent)){return true}if(ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,offset,end,stride,extent[0],extent[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,offset,end,stride,extent[0],extent[3])){return true}if(ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,offset,end,stride,extent[2],extent[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(flatCoordinates,offset,end,stride,extent[2],extent[3])){return true}return false};ol.geom.flat.intersectsextent.linearRings=function(flatCoordinates,offset,ends,stride,extent){goog.asserts.assert(ends.length>0,"ends should not be an empty array");if(!ol.geom.flat.intersectsextent.linearRing(flatCoordinates,offset,ends[0],stride,extent)){return false}if(ends.length===1){return true}var i,ii;for(i=1,ii=ends.length;i<ii;++i){if(ol.geom.flat.contains.linearRingContainsExtent(flatCoordinates,ends[i-1],ends[i],stride,extent)){return false}}return true};ol.geom.flat.intersectsextent.linearRingss=function(flatCoordinates,offset,endss,stride,extent){goog.asserts.assert(endss.length>0,"endss should not be an empty array");var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];if(ol.geom.flat.intersectsextent.linearRings(flatCoordinates,offset,ends,stride,extent)){return true}offset=ends[ends.length-1]}return false};goog.provide("ol.geom.flat.reverse");ol.geom.flat.reverse.coordinates=function(flatCoordinates,offset,end,stride){while(offset<end-stride){var i;for(i=0;i<stride;++i){var tmp=flatCoordinates[offset+i];flatCoordinates[offset+i]=flatCoordinates[end-stride+i];flatCoordinates[end-stride+i]=tmp}offset+=stride;end-=stride}};goog.provide("ol.geom.flat.orient");goog.require("ol.geom.flat.reverse");ol.geom.flat.orient.linearRingIsClockwise=function(flatCoordinates,offset,end,stride){var edge=0;var x1=flatCoordinates[end-stride];var y1=flatCoordinates[end-stride+1];for(;offset<end;offset+=stride){var x2=flatCoordinates[offset];var y2=flatCoordinates[offset+1];edge+=(x2-x1)*(y2+y1);x1=x2;y1=y2}return edge>0};ol.geom.flat.orient.linearRingsAreOriented=function(flatCoordinates,offset,ends,stride,opt_right){var right=goog.isDef(opt_right)?opt_right:false;var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];var isClockwise=ol.geom.flat.orient.linearRingIsClockwise(flatCoordinates,offset,end,stride);if(i===0){if((right&&isClockwise)||(!right&&!isClockwise)){return false}}else{if((right&&!isClockwise)||(!right&&isClockwise)){return false}}offset=end}return true};ol.geom.flat.orient.linearRingssAreOriented=function(flatCoordinates,offset,endss,stride,opt_right){var i,ii;for(i=0,ii=endss.length;i<ii;++i){if(!ol.geom.flat.orient.linearRingsAreOriented(flatCoordinates,offset,endss[i],stride,opt_right)){return false}}return true};ol.geom.flat.orient.orientLinearRings=function(flatCoordinates,offset,ends,stride,opt_right){var right=goog.isDef(opt_right)?opt_right:false;var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];var isClockwise=ol.geom.flat.orient.linearRingIsClockwise(flatCoordinates,offset,end,stride);var reverse=i===0?(right&&isClockwise)||(!right&&!isClockwise):(right&&!isClockwise)||(!right&&isClockwise);if(reverse){ol.geom.flat.reverse.coordinates(flatCoordinates,offset,end,stride)}offset=end}return offset};ol.geom.flat.orient.orientLinearRingss=function(flatCoordinates,offset,endss,stride,opt_right){var i,ii;for(i=0,ii=endss.length;i<ii;++i){offset=ol.geom.flat.orient.orientLinearRings(flatCoordinates,offset,endss[i],stride,opt_right)}return offset};goog.provide("ol.geom.Polygon");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LinearRing");goog.require("ol.geom.Point");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interiorpoint");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.orient");goog.require("ol.geom.flat.simplify");ol.geom.Polygon=function(coordinates,opt_layout){goog.base(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.Polygon,ol.geom.SimpleGeometry);ol.geom.Polygon.prototype.appendLinearRing=function(linearRing){goog.asserts.assert(linearRing.getLayout()==this.layout,"layout of linearRing should match layout");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=linearRing.getFlatCoordinates().slice()}else{goog.array.extend(this.flatCoordinates,linearRing.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.Polygon.prototype.clone=function(){var polygon=new ol.geom.Polygon(null);polygon.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return polygon};ol.geom.Polygon.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,x,y,closestPoint,minSquaredDistance)};ol.geom.Polygon.prototype.containsXY=function(x,y){return ol.geom.flat.contains.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,x,y)};ol.geom.Polygon.prototype.getArea=function(){return ol.geom.flat.area.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getCoordinates=function(opt_right){var flatCoordinates;if(goog.isDef(opt_right)){flatCoordinates=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRings(flatCoordinates,0,this.ends_,this.stride,opt_right)}else{flatCoordinates=this.flatCoordinates}return ol.geom.flat.inflate.coordinatess(flatCoordinates,0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getEnds=function(){return this.ends_};ol.geom.Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var flatCenter=ol.extent.getCenter(this.getExtent());this.flatInteriorPoint_=ol.geom.flat.interiorpoint.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,flatCenter,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};ol.geom.Polygon.prototype.getInteriorPoint=function(){return new ol.geom.Point(this.getFlatInteriorPoint())};ol.geom.Polygon.prototype.getLinearRingCount=function(){return this.ends_.length};ol.geom.Polygon.prototype.getLinearRing=function(index){goog.asserts.assert(0<=index&&index<this.ends_.length,"index should be in between 0 and and length of this.ends_");if(index<0||this.ends_.length<=index){return null}var linearRing=new ol.geom.LinearRing(null);linearRing.setFlatCoordinates(this.layout,this.flatCoordinates.slice(index===0?0:this.ends_[index-1],this.ends_[index]));return linearRing};ol.geom.Polygon.prototype.getLinearRings=function(){var layout=this.layout;var flatCoordinates=this.flatCoordinates;var ends=this.ends_;var linearRings=[];var offset=0;var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];var linearRing=new ol.geom.LinearRing(null);linearRing.setFlatCoordinates(layout,flatCoordinates.slice(offset,end));linearRings.push(linearRing);offset=end}return linearRings};ol.geom.Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var flatCoordinates=this.flatCoordinates;if(ol.geom.flat.orient.linearRingsAreOriented(flatCoordinates,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=flatCoordinates}else{this.orientedFlatCoordinates_=flatCoordinates.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.Polygon.prototype.getSimplifiedGeometryInternal=function(squaredTolerance){var simplifiedFlatCoordinates=[];var simplifiedEnds=[];simplifiedFlatCoordinates.length=ol.geom.flat.simplify.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(squaredTolerance),simplifiedFlatCoordinates,0,simplifiedEnds);var simplifiedPolygon=new ol.geom.Polygon(null);simplifiedPolygon.setFlatCoordinates(ol.geom.GeometryLayout.XY,simplifiedFlatCoordinates,simplifiedEnds);return simplifiedPolygon};ol.geom.Polygon.prototype.getType=function(){return ol.geom.GeometryType.POLYGON};ol.geom.Polygon.prototype.intersectsExtent=function(extent){return ol.geom.flat.intersectsextent.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,extent)};ol.geom.Polygon.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(opt_layout,coordinates,2);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var ends=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,coordinates,this.stride,this.ends_);this.flatCoordinates.length=ends.length===0?0:ends[ends.length-1];this.changed()}};ol.geom.Polygon.prototype.setFlatCoordinates=function(layout,flatCoordinates,ends){if(goog.isNull(flatCoordinates)){goog.asserts.assert(!goog.isNull(ends)&&ends.length===0,"ends cannot be null and should be an empty array")}else{if(ends.length===0){goog.asserts.assert(flatCoordinates.length===0,"flatCoordinates should be an empty array")}else{goog.asserts.assert(flatCoordinates.length==ends[ends.length-1],"the length of flatCoordinates should be the last entry of ends")}}this.setFlatCoordinatesInternal(layout,flatCoordinates);this.ends_=ends;this.changed()};ol.geom.Polygon.circular=function(sphere,center,radius,opt_n){var n=goog.isDef(opt_n)?opt_n:32;var flatCoordinates=[];var i;for(i=0;i<n;++i){goog.array.extend(flatCoordinates,sphere.offset(center,radius,2*Math.PI*i/n))}flatCoordinates.push(flatCoordinates[0],flatCoordinates[1]);var polygon=new ol.geom.Polygon(null);polygon.setFlatCoordinates(ol.geom.GeometryLayout.XY,flatCoordinates,[flatCoordinates.length]);return polygon};ol.geom.Polygon.fromExtent=function(extent){var minX=extent[0];var minY=extent[1];var maxX=extent[2];var maxY=extent[3];var flatCoordinates=[minX,minY,minX,maxY,maxX,maxY,maxX,minY,minX,minY];var polygon=new ol.geom.Polygon(null);polygon.setFlatCoordinates(ol.geom.GeometryLayout.XY,flatCoordinates,[flatCoordinates.length]);return polygon};ol.geom.Polygon.fromCircle=function(circle,opt_sides,opt_angle){var sides=goog.isDef(opt_sides)?opt_sides:32;var stride=circle.getStride();var layout=circle.getLayout();var polygon=new ol.geom.Polygon(null,layout);var flatCoordinates=goog.array.repeat(0,stride*(sides+1));var ends=[flatCoordinates.length];polygon.setFlatCoordinates(layout,flatCoordinates,ends);ol.geom.Polygon.makeRegular(polygon,circle.getCenter(),circle.getRadius(),opt_angle);return polygon};ol.geom.Polygon.makeRegular=function(polygon,center,radius,opt_angle){var flatCoordinates=polygon.getFlatCoordinates();var layout=polygon.getLayout();var stride=polygon.getStride();var ends=polygon.getEnds();goog.asserts.assert(ends.length===1,"only 1 ring is supported");var sides=flatCoordinates.length/stride-1;var startAngle=goog.isDef(opt_angle)?opt_angle:0;var angle,coord,offset;for(var i=0;i<=sides;++i){offset=i*stride;angle=startAngle+(goog.math.modulo(i,sides)*2*Math.PI/sides);flatCoordinates[offset]=center[0]+(radius*Math.cos(angle));flatCoordinates[offset+1]=center[1]+(radius*Math.sin(angle))}polygon.setFlatCoordinates(layout,flatCoordinates,ends)};goog.provide("ol.View");goog.provide("ol.ViewHint");goog.provide("ol.ViewProperty");goog.require("goog.asserts");goog.require("ol");goog.require("ol.CenterConstraint");goog.require("ol.Constraints");goog.require("ol.Object");goog.require("ol.ResolutionConstraint");goog.require("ol.RotationConstraint");goog.require("ol.RotationConstraintType");goog.require("ol.Size");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};ol.ViewHint={ANIMATING:0,INTERACTING:1};ol.View=function(opt_options){goog.base(this);var options=goog.isDef(opt_options)?opt_options:{};this.hints_=[0,0];var properties={};properties[ol.ViewProperty.CENTER]=goog.isDef(options.center)?options.center:null;this.projection_=ol.proj.createProjection(options.projection,"EPSG:3857");var resolutionConstraintInfo=ol.View.createResolutionConstraint_(options);this.maxResolution_=resolutionConstraintInfo.maxResolution;this.minResolution_=resolutionConstraintInfo.minResolution;this.minZoom_=resolutionConstraintInfo.minZoom;var centerConstraint=ol.View.createCenterConstraint_(options);var resolutionConstraint=resolutionConstraintInfo.constraint;var rotationConstraint=ol.View.createRotationConstraint_(options);this.constraints_=new ol.Constraints(centerConstraint,resolutionConstraint,rotationConstraint);if(goog.isDef(options.resolution)){properties[ol.ViewProperty.RESOLUTION]=options.resolution}else{if(goog.isDef(options.zoom)){properties[ol.ViewProperty.RESOLUTION]=this.constrainResolution(this.maxResolution_,options.zoom-this.minZoom_)}}properties[ol.ViewProperty.ROTATION]=goog.isDef(options.rotation)?options.rotation:0;this.setProperties(properties)};goog.inherits(ol.View,ol.Object);ol.View.prototype.calculateCenterRotate=function(rotation,anchor){var center;var currentCenter=this.getCenter();if(goog.isDef(currentCenter)){center=[currentCenter[0]-anchor[0],currentCenter[1]-anchor[1]];ol.coordinate.rotate(center,rotation-this.getRotation());ol.coordinate.add(center,anchor)}return center};ol.View.prototype.calculateCenterZoom=function(resolution,anchor){var center;var currentCenter=this.getCenter();var currentResolution=this.getResolution();if(goog.isDef(currentCenter)&&goog.isDef(currentResolution)){var x=anchor[0]-resolution*(anchor[0]-currentCenter[0])/currentResolution;var y=anchor[1]-resolution*(anchor[1]-currentCenter[1])/currentResolution;center=[x,y]}return center};ol.View.prototype.constrainCenter=function(center){return this.constraints_.center(center)};ol.View.prototype.constrainResolution=function(resolution,opt_delta,opt_direction){var delta=opt_delta||0;var direction=opt_direction||0;return this.constraints_.resolution(resolution,delta,direction)};ol.View.prototype.constrainRotation=function(rotation,opt_delta){var delta=opt_delta||0;return this.constraints_.rotation(rotation,delta)};ol.View.prototype.getCenter=function(){return(this.get(ol.ViewProperty.CENTER))};ol.View.prototype.getHints=function(){return this.hints_.slice()};ol.View.prototype.calculateExtent=function(size){var center=this.getCenter();goog.asserts.assert(goog.isDefAndNotNull(center),"The view center is not defined");var resolution=this.getResolution();goog.asserts.assert(goog.isDef(resolution),"The view resolution is not defined");var rotation=this.getRotation();goog.asserts.assert(goog.isDef(rotation),"The view rotation is not defined");return ol.extent.getForViewAndSize(center,resolution,rotation,size)};ol.View.prototype.getProjection=function(){return this.projection_};ol.View.prototype.getResolution=function(){return(this.get(ol.ViewProperty.RESOLUTION))};ol.View.prototype.getResolutionForExtent=function(extent,size){var xResolution=ol.extent.getWidth(extent)/size[0];var yResolution=ol.extent.getHeight(extent)/size[1];return Math.max(xResolution,yResolution)};ol.View.prototype.getResolutionForValueFunction=function(opt_power){var power=opt_power||2;var maxResolution=this.maxResolution_;var minResolution=this.minResolution_;var max=Math.log(maxResolution/minResolution)/Math.log(power);return(function(value){var resolution=maxResolution/Math.pow(power,value*max);goog.asserts.assert(resolution>=minResolution&&resolution<=maxResolution,"calculated resolution outside allowed bounds (%s <= %s <= %s)",minResolution,resolution,maxResolution);return resolution})};ol.View.prototype.getRotation=function(){return(this.get(ol.ViewProperty.ROTATION))};ol.View.prototype.getValueForResolutionFunction=function(opt_power){var power=opt_power||2;var maxResolution=this.maxResolution_;var minResolution=this.minResolution_;var max=Math.log(maxResolution/minResolution)/Math.log(power);return(function(resolution){var value=(Math.log(maxResolution/resolution)/Math.log(power))/max;goog.asserts.assert(value>=0&&value<=1,"calculated value (%s) ouside allowed range (0-1)",value);return value})};ol.View.prototype.getState=function(){goog.asserts.assert(this.isDef(),"the view was not defined (had no center and/or resolution)");var center=(this.getCenter());var projection=this.getProjection();var resolution=(this.getResolution());var rotation=this.getRotation();return({center:[Math.round(center[0]/resolution)*resolution,Math.round(center[1]/resolution)*resolution],projection:goog.isDef(projection)?projection:null,resolution:resolution,rotation:rotation})};ol.View.prototype.getZoom=function(){var offset;var resolution=this.getResolution();if(goog.isDef(resolution)){var res,z=0;do{res=this.constrainResolution(this.maxResolution_,z);if(res==resolution){offset=z;break}++z}while(res>this.minResolution_)}return goog.isDef(offset)?this.minZoom_+offset:offset};ol.View.prototype.fit=function(geometry,size,opt_options){if(!(geometry instanceof ol.geom.SimpleGeometry)){goog.asserts.assert(goog.isArray(geometry),"invalid extent or geometry");goog.asserts.assert(!ol.extent.isEmpty(geometry),"cannot fit empty extent");geometry=ol.geom.Polygon.fromExtent(geometry)}var options=goog.isDef(opt_options)?opt_options:{};var padding=goog.isDef(options.padding)?options.padding:[0,0,0,0];var constrainResolution=goog.isDef(options.constrainResolution)?options.constrainResolution:true;var nearest=goog.isDef(options.nearest)?options.nearest:false;var minResolution;if(goog.isDef(options.minResolution)){minResolution=options.minResolution}else{if(goog.isDef(options.maxZoom)){minResolution=this.constrainResolution(this.maxResolution_,options.maxZoom-this.minZoom_,0)}else{minResolution=0}}var coords=geometry.getFlatCoordinates();var rotation=this.getRotation();goog.asserts.assert(goog.isDef(rotation),"rotation was not defined");var cosAngle=Math.cos(-rotation);var sinAngle=Math.sin(-rotation);var minRotX=+Infinity;var minRotY=+Infinity;var maxRotX=-Infinity;var maxRotY=-Infinity;var stride=geometry.getStride();for(var i=0,ii=coords.length;i<ii;i+=stride){var rotX=coords[i]*cosAngle-coords[i+1]*sinAngle;var rotY=coords[i]*sinAngle+coords[i+1]*cosAngle;minRotX=Math.min(minRotX,rotX);minRotY=Math.min(minRotY,rotY);maxRotX=Math.max(maxRotX,rotX);maxRotY=Math.max(maxRotY,rotY)}var resolution=this.getResolutionForExtent([minRotX,minRotY,maxRotX,maxRotY],[size[0]-padding[1]-padding[3],size[1]-padding[0]-padding[2]]);resolution=isNaN(resolution)?minResolution:Math.max(resolution,minResolution);if(constrainResolution){var constrainedResolution=this.constrainResolution(resolution,0,0);if(!nearest&&constrainedResolution<resolution){constrainedResolution=this.constrainResolution(constrainedResolution,-1,0)}resolution=constrainedResolution}this.setResolution(resolution);sinAngle=-sinAngle;var centerRotX=(minRotX+maxRotX)/2;var centerRotY=(minRotY+maxRotY)/2;centerRotX+=(padding[1]-padding[3])/2*resolution;centerRotY+=(padding[0]-padding[2])/2*resolution;var centerX=centerRotX*cosAngle-centerRotY*sinAngle;var centerY=centerRotY*cosAngle+centerRotX*sinAngle;this.setCenter([centerX,centerY])};ol.View.prototype.centerOn=function(coordinate,size,position){var rotation=this.getRotation();var cosAngle=Math.cos(-rotation);var sinAngle=Math.sin(-rotation);var rotX=coordinate[0]*cosAngle-coordinate[1]*sinAngle;var rotY=coordinate[1]*cosAngle+coordinate[0]*sinAngle;var resolution=this.getResolution();rotX+=(size[0]/2-position[0])*resolution;rotY+=(position[1]-size[1]/2)*resolution;sinAngle=-sinAngle;var centerX=rotX*cosAngle-rotY*sinAngle;var centerY=rotY*cosAngle+rotX*sinAngle;this.setCenter([centerX,centerY])};ol.View.prototype.isDef=function(){return goog.isDefAndNotNull(this.getCenter())&&goog.isDef(this.getResolution())};ol.View.prototype.rotate=function(rotation,opt_anchor){if(goog.isDef(opt_anchor)){var center=this.calculateCenterRotate(rotation,opt_anchor);this.setCenter(center)}this.setRotation(rotation)};ol.View.prototype.setCenter=function(center){this.set(ol.ViewProperty.CENTER,center)};ol.View.prototype.setHint=function(hint,delta){goog.asserts.assert(0<=hint&&hint<this.hints_.length,"illegal hint (%s), must be between 0 and %s",hint,this.hints_.length);this.hints_[hint]+=delta;goog.asserts.assert(this.hints_[hint]>=0,"Hint at %s must be positive, was %s",hint,this.hints_[hint]);return this.hints_[hint]};ol.View.prototype.setResolution=function(resolution){this.set(ol.ViewProperty.RESOLUTION,resolution)};ol.View.prototype.setRotation=function(rotation){this.set(ol.ViewProperty.ROTATION,rotation)};ol.View.prototype.setZoom=function(zoom){var resolution=this.constrainResolution(this.maxResolution_,zoom-this.minZoom_,0);this.setResolution(resolution)};ol.View.createCenterConstraint_=function(options){if(goog.isDef(options.extent)){return ol.CenterConstraint.createExtent(options.extent)}else{return ol.CenterConstraint.none}};ol.View.createResolutionConstraint_=function(options){var resolutionConstraint;var maxResolution;var minResolution;var defaultMaxZoom=28;var defaultZoomFactor=2;var minZoom=goog.isDef(options.minZoom)?options.minZoom:ol.DEFAULT_MIN_ZOOM;var maxZoom=goog.isDef(options.maxZoom)?options.maxZoom:defaultMaxZoom;var zoomFactor=goog.isDef(options.zoomFactor)?options.zoomFactor:defaultZoomFactor;if(goog.isDef(options.resolutions)){var resolutions=options.resolutions;maxResolution=resolutions[0];minResolution=resolutions[resolutions.length-1];resolutionConstraint=ol.ResolutionConstraint.createSnapToResolutions(resolutions)}else{var projection=ol.proj.createProjection(options.projection,"EPSG:3857");var extent=projection.getExtent();var size=goog.isNull(extent)?360*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/ol.proj.METERS_PER_UNIT[projection.getUnits()]:Math.max(ol.extent.getWidth(extent),ol.extent.getHeight(extent));var defaultMaxResolution=size/ol.DEFAULT_TILE_SIZE/Math.pow(defaultZoomFactor,ol.DEFAULT_MIN_ZOOM);var defaultMinResolution=defaultMaxResolution/Math.pow(defaultZoomFactor,defaultMaxZoom-ol.DEFAULT_MIN_ZOOM);maxResolution=options.maxResolution;if(goog.isDef(maxResolution)){minZoom=0}else{maxResolution=defaultMaxResolution/Math.pow(zoomFactor,minZoom)}minResolution=options.minResolution;if(!goog.isDef(minResolution)){if(goog.isDef(options.maxZoom)){if(goog.isDef(options.maxResolution)){minResolution=maxResolution/Math.pow(zoomFactor,maxZoom)}else{minResolution=defaultMaxResolution/Math.pow(zoomFactor,maxZoom)}}else{minResolution=defaultMinResolution}}maxZoom=minZoom+Math.floor(Math.log(maxResolution/minResolution)/Math.log(zoomFactor));minResolution=maxResolution/Math.pow(zoomFactor,maxZoom-minZoom);resolutionConstraint=ol.ResolutionConstraint.createSnapToPower(zoomFactor,maxResolution,maxZoom-minZoom)}return{constraint:resolutionConstraint,maxResolution:maxResolution,minResolution:minResolution,minZoom:minZoom}};ol.View.createRotationConstraint_=function(options){var enableRotation=goog.isDef(options.enableRotation)?options.enableRotation:true;if(enableRotation){var constrainRotation=options.constrainRotation;if(!goog.isDef(constrainRotation)||constrainRotation===true){return ol.RotationConstraint.createSnapToZero()}else{if(constrainRotation===false){return ol.RotationConstraint.none}else{if(goog.isNumber(constrainRotation)){return ol.RotationConstraint.createSnapToN(constrainRotation)}else{goog.asserts.fail("illegal option for constrainRotation (%s)",constrainRotation);return ol.RotationConstraint.none}}}}else{return ol.RotationConstraint.disable}};goog.provide("goog.fx.easing");goog.fx.easing.easeIn=function(t){return goog.fx.easing.easeInInternal_(t,3)};goog.fx.easing.easeInInternal_=function(t,exp){return Math.pow(t,exp)};goog.fx.easing.easeOut=function(t){return goog.fx.easing.easeOutInternal_(t,3)};goog.fx.easing.easeOutInternal_=function(t,exp){return 1-goog.fx.easing.easeInInternal_(1-t,exp)};goog.fx.easing.easeOutLong=function(t){return goog.fx.easing.easeOutInternal_(t,4)};goog.fx.easing.inAndOut=function(t){return 3*t*t-2*t*t*t};goog.provide("ol.easing");goog.require("goog.fx.easing");ol.easing.easeIn=goog.fx.easing.easeIn;ol.easing.easeOut=goog.fx.easing.easeOut;ol.easing.inAndOut=goog.fx.easing.inAndOut;ol.easing.linear=function(t){return t};ol.easing.upAndDown=function(t){if(t<0.5){return ol.easing.inAndOut(2*t)}else{return 1-ol.easing.inAndOut(2*(t-0.5))}};goog.provide("ol.animation");goog.require("ol.PreRenderFunction");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.easing");ol.animation.bounce=function(options){var resolution=options.resolution;var start=goog.isDef(options.start)?options.start:goog.now();var duration=goog.isDef(options.duration)?options.duration:1000;var easing=goog.isDef(options.easing)?options.easing:ol.easing.upAndDown;return(function(map,frameState){if(frameState.time<start){frameState.animate=true;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{if(frameState.time<start+duration){var delta=easing((frameState.time-start)/duration);var deltaResolution=resolution-frameState.viewState.resolution;frameState.animate=true;frameState.viewState.resolution+=delta*deltaResolution;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}})};ol.animation.pan=function(options){var source=options.source;var start=goog.isDef(options.start)?options.start:goog.now();var sourceX=source[0];var sourceY=source[1];var duration=goog.isDef(options.duration)?options.duration:1000;var easing=goog.isDef(options.easing)?options.easing:ol.easing.inAndOut;return(function(map,frameState){if(frameState.time<start){frameState.animate=true;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{if(frameState.time<start+duration){var delta=1-easing((frameState.time-start)/duration);var deltaX=sourceX-frameState.viewState.center[0];var deltaY=sourceY-frameState.viewState.center[1];frameState.animate=true;frameState.viewState.center[0]+=delta*deltaX;frameState.viewState.center[1]+=delta*deltaY;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}})};ol.animation.rotate=function(options){var sourceRotation=goog.isDef(options.rotation)?options.rotation:0;var start=goog.isDef(options.start)?options.start:goog.now();var duration=goog.isDef(options.duration)?options.duration:1000;var easing=goog.isDef(options.easing)?options.easing:ol.easing.inAndOut;var anchor=goog.isDef(options.anchor)?options.anchor:null;return(function(map,frameState){if(frameState.time<start){frameState.animate=true;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{if(frameState.time<start+duration){var delta=1-easing((frameState.time-start)/duration);var deltaRotation=(sourceRotation-frameState.viewState.rotation)*delta;frameState.animate=true;frameState.viewState.rotation+=deltaRotation;if(!goog.isNull(anchor)){var center=frameState.viewState.center;ol.coordinate.sub(center,anchor);ol.coordinate.rotate(center,deltaRotation);ol.coordinate.add(center,anchor)}frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}})};ol.animation.zoom=function(options){var sourceResolution=options.resolution;var start=goog.isDef(options.start)?options.start:goog.now();var duration=goog.isDef(options.duration)?options.duration:1000;var easing=goog.isDef(options.easing)?options.easing:ol.easing.inAndOut;return(function(map,frameState){if(frameState.time<start){frameState.animate=true;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{if(frameState.time<start+duration){var delta=1-easing((frameState.time-start)/duration);var deltaResolution=sourceResolution-frameState.viewState.resolution;frameState.animate=true;frameState.viewState.resolution+=delta*deltaResolution;frameState.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}})};goog.provide("ol.TileCoord");goog.provide("ol.tilecoord");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");ol.TileCoord;ol.QuadKeyCharCode={ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0)};ol.tilecoord.createFromString=function(str){var v=str.split("/");goog.asserts.assert(v.length===3,'must provide a string in "z/x/y" format, got "%s"',str);v=goog.array.map(v,function(e,i,a){return parseInt(e,10)});return v};ol.tilecoord.createOrUpdate=function(z,x,y,opt_tileCoord){if(goog.isDef(opt_tileCoord)){opt_tileCoord[0]=z;opt_tileCoord[1]=x;opt_tileCoord[2]=y;return opt_tileCoord}else{return[z,x,y]}};ol.tilecoord.getKeyZXY=function(z,x,y){return z+"/"+x+"/"+y};ol.tilecoord.hash=function(tileCoord){return(tileCoord[1]<<tileCoord[0])+tileCoord[2]};ol.tilecoord.quadKey=function(tileCoord){var z=tileCoord[0];var digits=new Array(z);var mask=1<<(z-1);var i,charCode;for(i=0;i<z;++i){charCode=ol.QuadKeyCharCode.ZERO;if(tileCoord[1]&mask){charCode+=1}if(tileCoord[2]&mask){charCode+=2}digits[i]=String.fromCharCode(charCode);mask>>=1}return digits.join("")};ol.tilecoord.toString=function(tileCoord){return ol.tilecoord.getKeyZXY(tileCoord[0],tileCoord[1],tileCoord[2])};ol.tilecoord.wrapX=function(tileCoord,tileGrid,projection){var z=tileCoord[0];var center=tileGrid.getTileCoordCenter(tileCoord);var projectionExtent=ol.tilegrid.extentFromProjection(projection);if(!ol.extent.containsCoordinate(projectionExtent,center)){var worldWidth=ol.extent.getWidth(projectionExtent);var worldsAway=Math.ceil((projectionExtent[0]-center[0])/worldWidth);center[0]+=worldWidth*worldsAway;return tileGrid.getTileCoordForCoordAndZ(center,z)}else{return tileCoord}};ol.tilecoord.withinExtentAndZ=function(tileCoord,tileGrid){var z=tileCoord[0];var x=tileCoord[1];var y=tileCoord[2];if(tileGrid.getMinZoom()>z||z>tileGrid.getMaxZoom()){return false}var extent=tileGrid.getExtent();var tileRange;if(goog.isNull(extent)){tileRange=tileGrid.getFullTileRange(z)}else{tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z)}if(goog.isNull(tileRange)){return true}else{return tileRange.containsXY(x,y)}};goog.provide("ol.TileRange");goog.require("goog.asserts");goog.require("ol.Size");goog.require("ol.TileCoord");ol.TileRange=function(minX,maxX,minY,maxY){this.minX=minX;this.maxX=maxX;this.minY=minY;this.maxY=maxY};ol.TileRange.boundingTileRange=function(var_args){var tileCoord0=(arguments[0]);var tileCoord0Z=tileCoord0[0];var tileCoord0X=tileCoord0[1];var tileCoord0Y=tileCoord0[2];var tileRange=new ol.TileRange(tileCoord0X,tileCoord0X,tileCoord0Y,tileCoord0Y);var i,ii,tileCoord,tileCoordX,tileCoordY,tileCoordZ;for(i=1,ii=arguments.length;i<ii;++i){tileCoord=(arguments[i]);tileCoordZ=tileCoord[0];tileCoordX=tileCoord[1];tileCoordY=tileCoord[2];goog.asserts.assert(tileCoordZ==tileCoord0Z,"passed tilecoords all have the same Z-value");tileRange.minX=Math.min(tileRange.minX,tileCoordX);tileRange.maxX=Math.max(tileRange.maxX,tileCoordX);tileRange.minY=Math.min(tileRange.minY,tileCoordY);tileRange.maxY=Math.max(tileRange.maxY,tileCoordY)}return tileRange};ol.TileRange.createOrUpdate=function(minX,maxX,minY,maxY,tileRange){if(goog.isDef(tileRange)){tileRange.minX=minX;tileRange.maxX=maxX;tileRange.minY=minY;tileRange.maxY=maxY;return tileRange}else{return new ol.TileRange(minX,maxX,minY,maxY)}};ol.TileRange.prototype.contains=function(tileCoord){return this.containsXY(tileCoord[1],tileCoord[2])};ol.TileRange.prototype.containsTileRange=function(tileRange){return this.minX<=tileRange.minX&&tileRange.maxX<=this.maxX&&this.minY<=tileRange.minY&&tileRange.maxY<=this.maxY};ol.TileRange.prototype.containsXY=function(x,y){return this.minX<=x&&x<=this.maxX&&this.minY<=y&&y<=this.maxY};ol.TileRange.prototype.equals=function(tileRange){return this.minX==tileRange.minX&&this.minY==tileRange.minY&&this.maxX==tileRange.maxX&&this.maxY==tileRange.maxY};ol.TileRange.prototype.extend=function(tileRange){if(tileRange.minX<this.minX){this.minX=tileRange.minX}if(tileRange.maxX>this.maxX){this.maxX=tileRange.maxX}if(tileRange.minY<this.minY){this.minY=tileRange.minY}if(tileRange.maxY>this.maxY){this.maxY=tileRange.maxY}};ol.TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1};ol.TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]};ol.TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1};ol.TileRange.prototype.intersects=function(tileRange){return this.minX<=tileRange.maxX&&this.maxX>=tileRange.minX&&this.minY<=tileRange.maxY&&this.maxY>=tileRange.minY};goog.provide("ol.Attribution");goog.require("goog.math");goog.require("ol.TileRange");ol.Attribution=function(options){this.html_=options.html;this.tileRanges_=goog.isDef(options.tileRanges)?options.tileRanges:null};ol.Attribution.prototype.getHTML=function(){return this.html_};ol.Attribution.prototype.intersectsAnyTileRange=function(tileRanges,tileGrid,projection){if(goog.isNull(this.tileRanges_)){return true}var i,ii,tileRange,zKey;for(zKey in tileRanges){if(!(zKey in this.tileRanges_)){continue}tileRange=tileRanges[zKey];var testTileRange;for(i=0,ii=this.tileRanges_[zKey].length;i<ii;++i){testTileRange=this.tileRanges_[zKey][i];if(testTileRange.intersects(tileRange)){return true}var extentTileRange=tileGrid.getTileRangeForExtentAndZ(projection.getExtent(),parseInt(zKey,10));var width=extentTileRange.getWidth();if(tileRange.minX<extentTileRange.minX||tileRange.maxX>extentTileRange.maxX){if(testTileRange.intersects(new ol.TileRange(goog.math.modulo(tileRange.minX,width),goog.math.modulo(tileRange.maxX,width),tileRange.minY,tileRange.maxY))){return true}if(tileRange.getWidth()>width&&testTileRange.intersects(extentTileRange)){return true}}}}return false};goog.provide("ol.CanvasFunctionType");ol.CanvasFunctionType;goog.provide("ol.Collection");goog.provide("ol.CollectionEvent");goog.provide("ol.CollectionEventType");goog.require("goog.array");goog.require("goog.events.Event");goog.require("ol.Object");ol.CollectionEventType={ADD:"add",REMOVE:"remove"};ol.CollectionEvent=function(type,opt_element,opt_target){goog.base(this,type,opt_target);this.element=opt_element};goog.inherits(ol.CollectionEvent,goog.events.Event);ol.CollectionProperty={LENGTH:"length"};ol.Collection=function(opt_array){goog.base(this);this.array_=goog.isDef(opt_array)?opt_array:[];this.updateLength_()};goog.inherits(ol.Collection,ol.Object);ol.Collection.prototype.clear=function(){while(this.getLength()>0){this.pop()}};ol.Collection.prototype.extend=function(arr){var i,ii;for(i=0,ii=arr.length;i<ii;++i){this.push(arr[i])}return this};ol.Collection.prototype.forEach=function(f,opt_this){goog.array.forEach(this.array_,f,opt_this)};ol.Collection.prototype.getArray=function(){return this.array_};ol.Collection.prototype.item=function(index){return this.array_[index]};ol.Collection.prototype.getLength=function(){return(this.get(ol.CollectionProperty.LENGTH))};ol.Collection.prototype.insertAt=function(index,elem){goog.array.insertAt(this.array_,elem,index);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,elem,this))};ol.Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)};ol.Collection.prototype.push=function(elem){var n=this.array_.length;this.insertAt(n,elem);return n};ol.Collection.prototype.remove=function(elem){var arr=this.array_;var i,ii;for(i=0,ii=arr.length;i<ii;++i){if(arr[i]===elem){return this.removeAt(i)}}return undefined};ol.Collection.prototype.removeAt=function(index){var prev=this.array_[index];goog.array.removeAt(this.array_,index);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,prev,this));return prev};ol.Collection.prototype.setAt=function(index,elem){var n=this.getLength();if(index<n){var prev=this.array_[index];this.array_[index]=elem;this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,prev,this));this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,elem,this))}else{var j;for(j=n;j<index;++j){this.insertAt(j,undefined)}this.insertAt(index,elem)}};ol.Collection.prototype.updateLength_=function(){this.set(ol.CollectionProperty.LENGTH,this.array_.length)};goog.provide("goog.color.names");goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.provide("goog.color");goog.provide("goog.color.Hsl");goog.provide("goog.color.Hsv");goog.provide("goog.color.Rgb");goog.require("goog.color.names");goog.require("goog.math");goog.color.Rgb;goog.color.Hsv;goog.color.Hsl;goog.color.parse=function(str){var result={};str=String(str);var maybeHex=goog.color.prependHashIfNecessaryHelper(str);if(goog.color.isValidHexColor_(maybeHex)){result.hex=goog.color.normalizeHex(maybeHex);result.type="hex";return result}else{var rgb=goog.color.isValidRgbColor_(str);if(rgb.length){result.hex=goog.color.rgbArrayToHex(rgb);result.type="rgb";return result}else{if(goog.color.names){var hex=goog.color.names[str.toLowerCase()];if(hex){result.hex=hex;result.type="named";return result}}}}throw Error(str+" is not a valid color string")};goog.color.isValidColor=function(str){var maybeHex=goog.color.prependHashIfNecessaryHelper(str);return !!(goog.color.isValidHexColor_(maybeHex)||goog.color.isValidRgbColor_(str).length||goog.color.names&&goog.color.names[str.toLowerCase()])};goog.color.parseRgb=function(str){var rgb=goog.color.isValidRgbColor_(str);if(!rgb.length){throw Error(str+" is not a valid RGB color")}return rgb};goog.color.hexToRgbStyle=function(hexColor){return goog.color.rgbStyle_(goog.color.hexToRgb(hexColor))};goog.color.hexTripletRe_=/#(.)(.)(.)/;goog.color.normalizeHex=function(hexColor){if(!goog.color.isValidHexColor_(hexColor)){throw Error("'"+hexColor+"' is not a valid hex color")}if(hexColor.length==4){hexColor=hexColor.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")}return hexColor.toLowerCase()};goog.color.hexToRgb=function(hexColor){hexColor=goog.color.normalizeHex(hexColor);var r=parseInt(hexColor.substr(1,2),16);var g=parseInt(hexColor.substr(3,2),16);var b=parseInt(hexColor.substr(5,2),16);return[r,g,b]};goog.color.rgbToHex=function(r,g,b){r=Number(r);g=Number(g);b=Number(b);if(isNaN(r)||r<0||r>255||isNaN(g)||g<0||g>255||isNaN(b)||b<0||b>255){throw Error('"('+r+","+g+","+b+'") is not a valid RGB color')}var hexR=goog.color.prependZeroIfNecessaryHelper(r.toString(16));var hexG=goog.color.prependZeroIfNecessaryHelper(g.toString(16));var hexB=goog.color.prependZeroIfNecessaryHelper(b.toString(16));return"#"+hexR+hexG+hexB};goog.color.rgbArrayToHex=function(rgb){return goog.color.rgbToHex(rgb[0],rgb[1],rgb[2])};goog.color.rgbToHsl=function(r,g,b){var normR=r/255;var normG=g/255;var normB=b/255;var max=Math.max(normR,normG,normB);var min=Math.min(normR,normG,normB);var h=0;var s=0;var l=0.5*(max+min);if(max!=min){if(max==normR){h=60*(normG-normB)/(max-min)}else{if(max==normG){h=60*(normB-normR)/(max-min)+120}else{if(max==normB){h=60*(normR-normG)/(max-min)+240}}}if(0<l&&l<=0.5){s=(max-min)/(2*l)}else{s=(max-min)/(2-2*l)}}return[Math.round(h+360)%360,s,l]};goog.color.rgbArrayToHsl=function(rgb){return goog.color.rgbToHsl(rgb[0],rgb[1],rgb[2])};goog.color.hueToRgb_=function(v1,v2,vH){if(vH<0){vH+=1}else{if(vH>1){vH-=1}}if((6*vH)<1){return(v1+(v2-v1)*6*vH)}else{if(2*vH<1){return v2}else{if(3*vH<2){return(v1+(v2-v1)*((2/3)-vH)*6)}}}return v1};goog.color.hslToRgb=function(h,s,l){var r=0;var g=0;var b=0;var normH=h/360;if(s==0){r=g=b=l*255}else{var temp1=0;var temp2=0;if(l<0.5){temp2=l*(1+s)}else{temp2=l+s-(s*l)}temp1=2*l-temp2;r=255*goog.color.hueToRgb_(temp1,temp2,normH+(1/3));g=255*goog.color.hueToRgb_(temp1,temp2,normH);b=255*goog.color.hueToRgb_(temp1,temp2,normH-(1/3))}return[Math.round(r),Math.round(g),Math.round(b)]};goog.color.hslArrayToRgb=function(hsl){return goog.color.hslToRgb(hsl[0],hsl[1],hsl[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(str){return goog.color.validHexColorRe_.test(str)};goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(str){return goog.color.normalizedHexColorRe_.test(str)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(str){var regExpResultArray=str.match(goog.color.rgbColorRe_);if(regExpResultArray){var r=Number(regExpResultArray[1]);var g=Number(regExpResultArray[2]);var b=Number(regExpResultArray[3]);if(r>=0&&r<=255&&g>=0&&g<=255&&b>=0&&b<=255){return[r,g,b]}}return[]};goog.color.prependZeroIfNecessaryHelper=function(hex){return hex.length==1?"0"+hex:hex};goog.color.prependHashIfNecessaryHelper=function(str){return str.charAt(0)=="#"?str:"#"+str};goog.color.rgbStyle_=function(rgb){return"rgb("+rgb.join(",")+")"};goog.color.hsvToRgb=function(h,s,brightness){var red=0;var green=0;var blue=0;if(s==0){red=brightness;green=brightness;blue=brightness}else{var sextant=Math.floor(h/60);var remainder=(h/60)-sextant;var val1=brightness*(1-s);var val2=brightness*(1-(s*remainder));var val3=brightness*(1-(s*(1-remainder)));switch(sextant){case 1:red=val2;green=brightness;blue=val1;break;case 2:red=val1;green=brightness;blue=val3;break;case 3:red=val1;green=val2;blue=brightness;break;case 4:red=val3;green=val1;blue=brightness;break;case 5:red=brightness;green=val1;blue=val2;break;case 6:case 0:red=brightness;green=val3;blue=val1;break}}return[Math.floor(red),Math.floor(green),Math.floor(blue)]};goog.color.rgbToHsv=function(red,green,blue){var max=Math.max(Math.max(red,green),blue);var min=Math.min(Math.min(red,green),blue);var hue;var saturation;var value=max;if(min==max){hue=0;saturation=0}else{var delta=(max-min);saturation=delta/max;if(red==max){hue=(green-blue)/delta}else{if(green==max){hue=2+((blue-red)/delta)}else{hue=4+((red-green)/delta)}}hue*=60;if(hue<0){hue+=360}if(hue>360){hue-=360}}return[hue,saturation,value]};goog.color.rgbArrayToHsv=function(rgb){return goog.color.rgbToHsv(rgb[0],rgb[1],rgb[2])};goog.color.hsvArrayToRgb=function(hsv){return goog.color.hsvToRgb(hsv[0],hsv[1],hsv[2])};goog.color.hexToHsl=function(hex){var rgb=goog.color.hexToRgb(hex);return goog.color.rgbToHsl(rgb[0],rgb[1],rgb[2])};goog.color.hslToHex=function(h,s,l){return goog.color.rgbArrayToHex(goog.color.hslToRgb(h,s,l))};goog.color.hslArrayToHex=function(hsl){return goog.color.rgbArrayToHex(goog.color.hslToRgb(hsl[0],hsl[1],hsl[2]))};goog.color.hexToHsv=function(hex){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(hex))};goog.color.hsvToHex=function(h,s,v){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(h,s,v))};goog.color.hsvArrayToHex=function(hsv){return goog.color.hsvToHex(hsv[0],hsv[1],hsv[2])};goog.color.hslDistance=function(hsl1,hsl2){var sl1,sl2;if(hsl1[2]<=0.5){sl1=hsl1[1]*hsl1[2]}else{sl1=hsl1[1]*(1-hsl1[2])}if(hsl2[2]<=0.5){sl2=hsl2[1]*hsl2[2]}else{sl2=hsl2[1]*(1-hsl2[2])}var h1=hsl1[0]/360;var h2=hsl2[0]/360;var dh=(h1-h2)*2*Math.PI;return(hsl1[2]-hsl2[2])*(hsl1[2]-hsl2[2])+sl1*sl1+sl2*sl2-2*sl1*sl2*Math.cos(dh)};goog.color.blend=function(rgb1,rgb2,factor){factor=goog.math.clamp(factor,0,1);return[Math.round(factor*rgb1[0]+(1-factor)*rgb2[0]),Math.round(factor*rgb1[1]+(1-factor)*rgb2[1]),Math.round(factor*rgb1[2]+(1-factor)*rgb2[2])]};goog.color.darken=function(rgb,factor){var black=[0,0,0];return goog.color.blend(black,rgb,factor)};goog.color.lighten=function(rgb,factor){var white=[255,255,255];return goog.color.blend(white,rgb,factor)};goog.color.highContrast=function(prime,suggestions){var suggestionsWithDiff=[];for(var i=0;i<suggestions.length;i++){suggestionsWithDiff.push({color:suggestions[i],diff:goog.color.yiqBrightnessDiff_(suggestions[i],prime)+goog.color.colorDiff_(suggestions[i],prime)})}suggestionsWithDiff.sort(function(a,b){return b.diff-a.diff});return suggestionsWithDiff[0].color};goog.color.yiqBrightness_=function(rgb){return Math.round((rgb[0]*299+rgb[1]*587+rgb[2]*114)/1000)};goog.color.yiqBrightnessDiff_=function(rgb1,rgb2){return Math.abs(goog.color.yiqBrightness_(rgb1)-goog.color.yiqBrightness_(rgb2))};goog.color.colorDiff_=function(rgb1,rgb2){return Math.abs(rgb1[0]-rgb2[0])+Math.abs(rgb1[1]-rgb2[1])+Math.abs(rgb1[2]-rgb2[2])};goog.provide("ol.Color");goog.provide("ol.color");goog.require("goog.asserts");goog.require("goog.color");goog.require("goog.color.names");goog.require("goog.math");goog.require("goog.vec.Mat4");goog.require("ol");ol.Color;ol.color.hexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;ol.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;ol.color.rgbaColorRe_=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;ol.color.blend=function(dst,src,opt_color){var out=goog.isDef(opt_color)?opt_color:[];var dstA=dst[3];var srcA=src[3];if(dstA==1){out[0]=(src[0]*srcA+dst[0]*(1-srcA)+0.5)|0;out[1]=(src[1]*srcA+dst[1]*(1-srcA)+0.5)|0;out[2]=(src[2]*srcA+dst[2]*(1-srcA)+0.5)|0;out[3]=1}else{if(srcA===0){out[0]=dst[0];out[1]=dst[1];out[2]=dst[2];out[3]=dstA}else{var outA=srcA+dstA*(1-srcA);if(outA===0){out[0]=0;out[1]=0;out[2]=0;out[3]=0}else{out[0]=((src[0]*srcA+dst[0]*dstA*(1-srcA))/outA+0.5)|0;out[1]=((src[1]*srcA+dst[1]*dstA*(1-srcA))/outA+0.5)|0;out[2]=((src[2]*srcA+dst[2]*dstA*(1-srcA))/outA+0.5)|0;out[3]=outA}}}goog.asserts.assert(ol.color.isValid(out),"Output color of blend should be a valid color");return out};ol.color.asArray=function(color){if(goog.isArray(color)){return color}else{goog.asserts.assert(goog.isString(color),"Color should be a string");return ol.color.fromString(color)}};ol.color.asString=function(color){if(goog.isString(color)){return color}else{goog.asserts.assert(goog.isArray(color),"Color should be an array");return ol.color.toString(color)}};ol.color.equals=function(color1,color2){return color1===color2||(color1[0]==color2[0]&&color1[1]==color2[1]&&color1[2]==color2[2]&&color1[3]==color2[3])};ol.color.fromString=(function(){var MAX_CACHE_SIZE=1024;var cache={};var cacheSize=0;return(function(s){var color;if(cache.hasOwnProperty(s)){color=cache[s]}else{if(cacheSize>=MAX_CACHE_SIZE){var i=0;var key;for(key in cache){if((i++&3)===0){delete cache[key];--cacheSize}}}color=ol.color.fromStringInternal_(s);cache[s]=color;++cacheSize}return color})})();ol.color.fromStringInternal_=function(s){var isHex=false;if(ol.ENABLE_NAMED_COLORS&&goog.color.names.hasOwnProperty(s)){s=(goog.color.names[s]);isHex=true}var r,g,b,a,color,match;if(isHex||(match=ol.color.hexColorRe_.exec(s))){var n=s.length-1;goog.asserts.assert(n==3||n==6,"Color string length should be 3 or 6");var d=n==3?1:2;r=parseInt(s.substr(1+0*d,d),16);g=parseInt(s.substr(1+1*d,d),16);b=parseInt(s.substr(1+2*d,d),16);if(d==1){r=(r<<4)+r;g=(g<<4)+g;b=(b<<4)+b}a=1;color=[r,g,b,a];goog.asserts.assert(ol.color.isValid(color),"Color should be a valid color");return color}else{if((match=ol.color.rgbaColorRe_.exec(s))){r=Number(match[1]);g=Number(match[2]);b=Number(match[3]);a=Number(match[4]);color=[r,g,b,a];return ol.color.normalize(color,color)}else{if((match=ol.color.rgbColorRe_.exec(s))){r=Number(match[1]);g=Number(match[2]);b=Number(match[3]);color=[r,g,b,1];return ol.color.normalize(color,color)}else{goog.asserts.fail(s+" is not a valid color")}}}};ol.color.isValid=function(color){return 0<=color[0]&&color[0]<256&&0<=color[1]&&color[1]<256&&0<=color[2]&&color[2]<256&&0<=color[3]&&color[3]<=1};ol.color.normalize=function(color,opt_color){var result=goog.isDef(opt_color)?opt_color:[];result[0]=goog.math.clamp((color[0]+0.5)|0,0,255);result[1]=goog.math.clamp((color[1]+0.5)|0,0,255);result[2]=goog.math.clamp((color[2]+0.5)|0,0,255);result[3]=goog.math.clamp(color[3],0,1);return result};ol.color.toString=function(color){var r=color[0];if(r!=(r|0)){r=(r+0.5)|0}var g=color[1];if(g!=(g|0)){g=(g+0.5)|0}var b=color[2];if(b!=(b|0)){b=(b+0.5)|0}var a=color[3];return"rgba("+r+","+g+","+b+","+a+")"};ol.color.transform=function(color,transform,opt_color){var result=goog.isDef(opt_color)?opt_color:[];result=goog.vec.Mat4.multVec3(transform,color,result);goog.asserts.assert(goog.isArray(result),"result should be an array");result[3]=color[3];return ol.color.normalize(result,result)};ol.color.stringOrColorEquals=function(color1,color2){if(color1===color2||color1==color2){return true}if(goog.isString(color1)){color1=ol.color.fromString(color1)}if(goog.isString(color2)){color2=ol.color.fromString(color2)}return ol.color.equals(color1,color2)};goog.provide("ol.color.Matrix");goog.require("goog.vec.Mat4");ol.color.Matrix=function(){this.colorMatrix_=goog.vec.Mat4.createNumber();this.brightness_=undefined;this.brightnessMatrix_=goog.vec.Mat4.createNumber();this.contrast_=undefined;this.contrastMatrix_=goog.vec.Mat4.createNumber();this.hue_=undefined;this.hueMatrix_=goog.vec.Mat4.createNumber();this.saturation_=undefined;this.saturationMatrix_=goog.vec.Mat4.createNumber()};ol.color.Matrix.makeBrightness=function(matrix,value){goog.vec.Mat4.makeTranslate(matrix,value,value,value);return matrix};ol.color.Matrix.makeContrast=function(matrix,value){goog.vec.Mat4.makeScale(matrix,value,value,value);var translateValue=(-0.5*value+0.5);goog.vec.Mat4.setColumnValues(matrix,3,translateValue,translateValue,translateValue,1);return matrix};ol.color.Matrix.makeHue=function(matrix,value){var cosHue=Math.cos(value);var sinHue=Math.sin(value);var v00=0.213+cosHue*0.787-sinHue*0.213;var v01=0.715-cosHue*0.715-sinHue*0.715;var v02=0.072-cosHue*0.072+sinHue*0.928;var v03=0;var v10=0.213-cosHue*0.213+sinHue*0.143;var v11=0.715+cosHue*0.285+sinHue*0.14;var v12=0.072-cosHue*0.072-sinHue*0.283;var v13=0;var v20=0.213-cosHue*0.213-sinHue*0.787;var v21=0.715-cosHue*0.715+sinHue*0.715;var v22=0.072+cosHue*0.928+sinHue*0.072;var v23=0;var v30=0;var v31=0;var v32=0;var v33=1;goog.vec.Mat4.setFromValues(matrix,v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33);return matrix};ol.color.Matrix.makeSaturation=function(matrix,value){var v00=0.213+0.787*value;var v01=0.715-0.715*value;var v02=0.072-0.072*value;var v03=0;var v10=0.213-0.213*value;var v11=0.715+0.285*value;var v12=0.072-0.072*value;var v13=0;var v20=0.213-0.213*value;var v21=0.715-0.715*value;var v22=0.072+0.928*value;var v23=0;var v30=0;var v31=0;var v32=0;var v33=1;goog.vec.Mat4.setFromValues(matrix,v00,v10,v20,v30,v01,v11,v21,v31,v02,v12,v22,v32,v03,v13,v23,v33);return matrix};ol.color.Matrix.prototype.getMatrix=function(brightness,contrast,hue,saturation){var colorMatrixDirty=false;if(goog.isDef(brightness)&&brightness!==this.brightness_){ol.color.Matrix.makeBrightness(this.brightnessMatrix_,brightness);this.brightness_=brightness;colorMatrixDirty=true}if(goog.isDef(contrast)&&contrast!==this.contrast_){ol.color.Matrix.makeContrast(this.contrastMatrix_,contrast);this.contrast_=contrast;colorMatrixDirty=true}if(goog.isDef(hue)&&hue!==this.hue_){ol.color.Matrix.makeHue(this.hueMatrix_,hue);this.hue_=hue;colorMatrixDirty=true}if(goog.isDef(saturation)&&saturation!==this.saturation_){ol.color.Matrix.makeSaturation(this.saturationMatrix_,saturation);this.saturation_=saturation;colorMatrixDirty=true}if(colorMatrixDirty){var colorMatrix=this.colorMatrix_;goog.vec.Mat4.makeIdentity(colorMatrix);if(goog.isDef(contrast)){goog.vec.Mat4.multMat(colorMatrix,this.contrastMatrix_,colorMatrix)}if(goog.isDef(brightness)){goog.vec.Mat4.multMat(colorMatrix,this.brightnessMatrix_,colorMatrix)}if(goog.isDef(saturation)){goog.vec.Mat4.multMat(colorMatrix,this.saturationMatrix_,colorMatrix)}if(goog.isDef(hue)){goog.vec.Mat4.multMat(colorMatrix,this.hueMatrix_,colorMatrix)}}return this.colorMatrix_};goog.provide("goog.dom.BrowserFeature");goog.require("goog.userAgent");goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)};goog.provide("goog.dom.TagName");goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.provide("goog.dom.tags");goog.require("goog.object");goog.dom.tags.VOID_TAGS_=goog.object.createSet("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr");goog.dom.tags.isVoidTag=function(tagName){return goog.dom.tags.VOID_TAGS_[tagName]===true};goog.provide("goog.string.TypedString");goog.string.TypedString=function(){};goog.string.TypedString.prototype.implementsGoogStringTypedString;goog.string.TypedString.prototype.getTypedStringValue;goog.provide("goog.string.Const");goog.require("goog.asserts");goog.require("goog.string.TypedString");goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=true;goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"};goog.string.Const.unwrap=function(stringConst){if(stringConst instanceof goog.string.Const&&stringConst.constructor===goog.string.Const&&stringConst.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_){return stringConst.stringConstValueWithSecurityContract__googStringSecurityPrivate_}else{goog.asserts.fail("expected object of type Const, got '"+stringConst+"'");return"type_error:Const"}};goog.string.Const.from=function(s){return goog.string.Const.create__googStringSecurityPrivate_(s)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.create__googStringSecurityPrivate_=function(s){var stringConst=new goog.string.Const();stringConst.stringConstValueWithSecurityContract__googStringSecurityPrivate_=s;return stringConst};goog.provide("goog.html.SafeStyle");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=true;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyle.fromConstant=function(style){var styleString=goog.string.Const.unwrap(style);if(styleString.length===0){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(styleString);goog.asserts.assert(goog.string.endsWith(styleString,";"),"Last character of style string is not ';': "+styleString);goog.asserts.assert(goog.string.contains(styleString,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+styleString);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(styleString)};goog.html.SafeStyle.checkStyle_=function(style){goog.asserts.assert(!/[<>]/.test(style),"Forbidden characters in style string: "+style)};goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};if(goog.DEBUG){goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}}goog.html.SafeStyle.unwrap=function(safeStyle){if(safeStyle instanceof goog.html.SafeStyle&&safeStyle.constructor===goog.html.SafeStyle&&safeStyle.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return safeStyle.privateDoNotAccessOrElseSafeStyleWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyle, got '"+safeStyle+"'");return"type_error:SafeStyle"}};goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(style){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(style)};goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(style){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=style;return this};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";goog.html.SafeStyle.PropertyMap;goog.html.SafeStyle.create=function(map){var style="";for(var name in map){if(!/^[-_a-zA-Z0-9]+$/.test(name)){throw Error("Name allows only [-_a-zA-Z0-9], got: "+name)}var value=map[name];if(value==null){continue}if(value instanceof goog.string.Const){value=goog.string.Const.unwrap(value);goog.asserts.assert(!/[{;}]/.test(value),"Value does not allow [{;}].")}else{if(!goog.html.SafeStyle.VALUE_RE_.test(value)){goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], got: "+value);value=goog.html.SafeStyle.INNOCUOUS_STRING}else{if(!goog.html.SafeStyle.hasBalancedQuotes_(value)){goog.asserts.fail("String value requires balanced quotes, got: "+value);value=goog.html.SafeStyle.INNOCUOUS_STRING}}}style+=name+":"+value+";"}if(!style){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(style);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(style)};goog.html.SafeStyle.hasBalancedQuotes_=function(value){var outsideSingle=true;var outsideDouble=true;for(var i=0;i<value.length;i++){var c=value.charAt(i);if(c=="'"&&outsideDouble){outsideSingle=!outsideSingle}else{if(c=='"'&&outsideSingle){outsideDouble=!outsideDouble}}}return outsideSingle&&outsideDouble};goog.html.SafeStyle.VALUE_RE_=/^[-,."'%_!# a-zA-Z0-9]+$/;goog.html.SafeStyle.concat=function(var_args){var style="";var addArgument=function(argument){if(goog.isArray(argument)){goog.array.forEach(argument,addArgument)}else{style+=goog.html.SafeStyle.unwrap(argument)}};goog.array.forEach(arguments,addArgument);if(!style){return goog.html.SafeStyle.EMPTY}return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(style)};goog.provide("goog.html.SafeStyleSheet");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=true;goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyleSheet.concat=function(var_args){var result="";var addArgument=function(argument){if(goog.isArray(argument)){goog.array.forEach(argument,addArgument)}else{result+=goog.html.SafeStyleSheet.unwrap(argument)}};goog.array.forEach(arguments,addArgument);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(result)};goog.html.SafeStyleSheet.fromConstant=function(styleSheet){var styleSheetString=goog.string.Const.unwrap(styleSheet);if(styleSheetString.length===0){return goog.html.SafeStyleSheet.EMPTY}goog.asserts.assert(!goog.string.contains(styleSheetString,"<"),"Forbidden '<' character in style sheet string: "+styleSheetString);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheetString)};goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_};if(goog.DEBUG){goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}}goog.html.SafeStyleSheet.unwrap=function(safeStyleSheet){if(safeStyleSheet instanceof goog.html.SafeStyleSheet&&safeStyleSheet.constructor===goog.html.SafeStyleSheet&&safeStyleSheet.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return safeStyleSheet.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyleSheet, got '"+safeStyleSheet+"'");return"type_error:SafeStyleSheet"}};goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(styleSheet){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(styleSheet)};goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(styleSheet){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=styleSheet;return this};goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse("");goog.provide("goog.fs.url");goog.fs.url.createObjectUrl=function(blob){return goog.fs.url.getUrlObject_().createObjectURL(blob)};goog.fs.url.revokeObjectUrl=function(url){goog.fs.url.getUrlObject_().revokeObjectURL(url)};goog.fs.url.UrlObject_;goog.fs.url.getUrlObject_=function(){var urlObject=goog.fs.url.findUrlObject_();if(urlObject!=null){return urlObject}else{throw Error("This browser doesn't seem to support blob URLs")}};goog.fs.url.findUrlObject_=function(){if(goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)){return(goog.global.URL)}else{if(goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)){return(goog.global.webkitURL)}else{if(goog.isDef(goog.global.createObjectURL)){return(goog.global)}else{return null}}}};goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null};goog.provide("goog.i18n.bidi");goog.provide("goog.i18n.bidi.Dir");goog.provide("goog.i18n.bidi.DirectionalString");goog.provide("goog.i18n.bidi.Format");goog.define("goog.i18n.bidi.FORCE_RTL",false);goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||((goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_"))||(goog.LOCALE.length>=3&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_"));goog.i18n.bidi.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;goog.i18n.bidi.toDir=function(givenDir,opt_noNeutral){if(typeof givenDir=="number"){return givenDir>0?goog.i18n.bidi.Dir.LTR:givenDir<0?goog.i18n.bidi.Dir.RTL:opt_noNeutral?null:goog.i18n.bidi.Dir.NEUTRAL}else{if(givenDir==null){return null}else{return givenDir?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}}};goog.i18n.bidi.ltrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";goog.i18n.bidi.rtlChars_="\u0591-\u06EF\u06FA-\u07FF\u200F\uFB1D-\uFDFF\uFE70-\uFEFC";goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;goog.i18n.bidi.stripHtmlIfNeeded_=function(str,opt_isStripNeeded){return opt_isStripNeeded?str.replace(goog.i18n.bidi.htmlSkipReg_,""):str};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(str,opt_isHtml){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;goog.i18n.bidi.hasAnyLtr=function(str,opt_isHtml){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(str){return goog.i18n.bidi.rtlRe_.test(str)};goog.i18n.bidi.isLtrChar=function(str){return goog.i18n.bidi.ltrRe_.test(str)};goog.i18n.bidi.isNeutralChar=function(str){return !goog.i18n.bidi.isLtrChar(str)&&!goog.i18n.bidi.isRtlChar(str)};goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(str,opt_isHtml){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;goog.i18n.bidi.startsWithLtr=function(str,opt_isHtml){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(str,opt_isHtml){str=goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml);return goog.i18n.bidi.isRequiredLtrRe_.test(str)||!goog.i18n.bidi.hasAnyLtr(str)&&!goog.i18n.bidi.hasAnyRtl(str)};goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(str,opt_isHtml){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;goog.i18n.bidi.endsWithRtl=function(str,opt_isHtml){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i");goog.i18n.bidi.isRtlLanguage=function(lang){return goog.i18n.bidi.rtlLocalesRe_.test(lang)};goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g;goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;goog.i18n.bidi.guardBracketInHtml=function(s,opt_isRtlContext){var useRtl=opt_isRtlContext===undefined?goog.i18n.bidi.hasAnyRtl(s):opt_isRtlContext;if(useRtl){return s.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>")}return s.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")};goog.i18n.bidi.guardBracketInText=function(s,opt_isRtlContext){var useRtl=opt_isRtlContext===undefined?goog.i18n.bidi.hasAnyRtl(s):opt_isRtlContext;var mark=useRtl?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return s.replace(goog.i18n.bidi.bracketGuardTextRe_,mark+"$&"+mark)};goog.i18n.bidi.enforceRtlInHtml=function(html){if(html.charAt(0)=="<"){return html.replace(/<\w+/,"$& dir=rtl")}return"\n<span dir=rtl>"+html+"</span>"};goog.i18n.bidi.enforceRtlInText=function(text){return goog.i18n.bidi.Format.RLE+text+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.enforceLtrInHtml=function(html){if(html.charAt(0)=="<"){return html.replace(/<\w+/,"$& dir=ltr")}return"\n<span dir=ltr>"+html+"</span>"};goog.i18n.bidi.enforceLtrInText=function(text){return goog.i18n.bidi.Format.LRE+text+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;goog.i18n.bidi.mirrorCSS=function(cssStr){return cssStr.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;goog.i18n.bidi.normalizeHebrewQuote=function(str){return str.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05f3")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/;goog.i18n.bidi.rtlDetectionThreshold_=0.4;goog.i18n.bidi.estimateDirection=function(str,opt_isHtml){var rtlCount=0;var totalCount=0;var hasWeaklyLtr=false;var tokens=goog.i18n.bidi.stripHtmlIfNeeded_(str,opt_isHtml).split(goog.i18n.bidi.wordSeparatorRe_);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(goog.i18n.bidi.startsWithRtl(token)){rtlCount++;totalCount++}else{if(goog.i18n.bidi.isRequiredLtrRe_.test(token)){hasWeaklyLtr=true}else{if(goog.i18n.bidi.hasAnyLtr(token)){totalCount++}else{if(goog.i18n.bidi.hasNumeralsRe_.test(token)){hasWeaklyLtr=true}}}}}return totalCount==0?(hasWeaklyLtr?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL):(rtlCount/totalCount>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR)};goog.i18n.bidi.detectRtlDirectionality=function(str,opt_isHtml){return goog.i18n.bidi.estimateDirection(str,opt_isHtml)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(element,dir){if(element){dir=goog.i18n.bidi.toDir(dir);if(dir){element.style.textAlign=dir==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;element.dir=dir==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"}}};goog.i18n.bidi.setElementDirByTextDirectionality=function(element,text){switch(goog.i18n.bidi.estimateDirection(text)){case (goog.i18n.bidi.Dir.LTR):element.dir="ltr";break;case (goog.i18n.bidi.Dir.RTL):element.dir="rtl";break;default:element.removeAttribute("dir")}};goog.i18n.bidi.DirectionalString=function(){};goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString;goog.i18n.bidi.DirectionalString.prototype.getDirection;goog.provide("goog.html.SafeUrl");goog.require("goog.asserts");goog.require("goog.fs.url");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=true;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};if(goog.DEBUG){goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}}goog.html.SafeUrl.unwrap=function(safeUrl){if(safeUrl instanceof goog.html.SafeUrl&&safeUrl.constructor===goog.html.SafeUrl&&safeUrl.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return safeUrl.privateDoNotAccessOrElseSafeHtmlWrappedValue_}else{goog.asserts.fail("expected object of type SafeUrl, got '"+safeUrl+"'");return"type_error:SafeUrl"}};goog.html.SafeUrl.fromConstant=function(url){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(url))};goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm))$/i;goog.html.SafeUrl.fromBlob=function(blob){var url=goog.html.SAFE_MIME_TYPE_PATTERN_.test(blob.type)?goog.fs.url.createObjectUrl(blob):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url)};goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i;goog.html.SafeUrl.fromDataUrl=function(dataUrl){var match=dataUrl.match(goog.html.DATA_URL_PATTERN_);var valid=match&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(match[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(valid?dataUrl:goog.html.SafeUrl.INNOCUOUS_STRING)};goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i;goog.html.SafeUrl.sanitize=function(url){if(url instanceof goog.html.SafeUrl){return url}else{if(url.implementsGoogStringTypedString){url=url.getTypedStringValue()}else{url=String(url)}}if(!goog.html.SAFE_URL_PATTERN_.test(url)){url=goog.html.SafeUrl.INNOCUOUS_STRING}return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url)};goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(url){var safeUrl=new goog.html.SafeUrl();safeUrl.privateDoNotAccessOrElseSafeHtmlWrappedValue_=url;return safeUrl};goog.provide("goog.html.TrustedResourceUrl");goog.require("goog.asserts");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="";this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=true;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_};goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};if(goog.DEBUG){goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}}goog.html.TrustedResourceUrl.unwrap=function(trustedResourceUrl){if(trustedResourceUrl instanceof goog.html.TrustedResourceUrl&&trustedResourceUrl.constructor===goog.html.TrustedResourceUrl&&trustedResourceUrl.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return trustedResourceUrl.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_}else{goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+trustedResourceUrl+"'");return"type_error:TrustedResourceUrl"}};goog.html.TrustedResourceUrl.fromConstant=function(url){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(url))};goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(url){var trustedResourceUrl=new goog.html.TrustedResourceUrl();trustedResourceUrl.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=url;return trustedResourceUrl};goog.provide("goog.html.SafeHtml");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.TagName");goog.require("goog.dom.tags");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.object");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;this.dir_=null};goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_};goog.html.SafeHtml.prototype.implementsGoogStringTypedString=true;goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};if(goog.DEBUG){goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}}goog.html.SafeHtml.unwrap=function(safeHtml){if(safeHtml instanceof goog.html.SafeHtml&&safeHtml.constructor===goog.html.SafeHtml&&safeHtml.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return safeHtml.privateDoNotAccessOrElseSafeHtmlWrappedValue_}else{goog.asserts.fail("expected object of type SafeHtml, got '"+safeHtml+"'");return"type_error:SafeHtml"}};goog.html.SafeHtml.TextOrHtml_;goog.html.SafeHtml.htmlEscape=function(textOrHtml){if(textOrHtml instanceof goog.html.SafeHtml){return textOrHtml}var dir=null;if(textOrHtml.implementsGoogI18nBidiDirectionalString){dir=textOrHtml.getDirection()}var textAsString;if(textOrHtml.implementsGoogStringTypedString){textAsString=textOrHtml.getTypedStringValue()}else{textAsString=String(textOrHtml)}return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(textAsString),dir)};goog.html.SafeHtml.htmlEscapePreservingNewlines=function(textOrHtml){if(textOrHtml instanceof goog.html.SafeHtml){return textOrHtml}var html=goog.html.SafeHtml.htmlEscape(textOrHtml);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(html)),html.getDirection())};goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(textOrHtml){if(textOrHtml instanceof goog.html.SafeHtml){return textOrHtml}var html=goog.html.SafeHtml.htmlEscape(textOrHtml);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(html)),html.getDirection())};goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape;goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/;goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src");goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.TEMPLATE);goog.html.SafeHtml.AttributeValue_;goog.html.SafeHtml.create=function(tagName,opt_attributes,opt_content){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(tagName)){throw Error("Invalid tag name <"+tagName+">.")}if(tagName.toUpperCase() in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_){throw Error("Tag name <"+tagName+"> is not allowed for SafeHtml.")}return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(tagName,opt_attributes,opt_content)};goog.html.SafeHtml.createIframe=function(opt_src,opt_srcdoc,opt_attributes,opt_content){var fixedAttributes={};fixedAttributes.src=opt_src||null;fixedAttributes.srcdoc=opt_srcdoc||null;var defaultAttributes={sandbox:""};var attributes=goog.html.SafeHtml.combineAttributes(fixedAttributes,defaultAttributes,opt_attributes);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",attributes,opt_content)};goog.html.SafeHtml.createStyle=function(styleSheet,opt_attributes){var fixedAttributes={type:"text/css"};var defaultAttributes={};var attributes=goog.html.SafeHtml.combineAttributes(fixedAttributes,defaultAttributes,opt_attributes);var content="";styleSheet=goog.array.concat(styleSheet);for(var i=0;i<styleSheet.length;i++){content+=goog.html.SafeStyleSheet.unwrap(styleSheet[i])}var htmlContent=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(content,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",attributes,htmlContent)};goog.html.SafeHtml.getAttrNameAndValue_=function(tagName,name,value){if(value instanceof goog.string.Const){value=goog.string.Const.unwrap(value)}else{if(name.toLowerCase()=="style"){value=goog.html.SafeHtml.getStyleValue_(value)}else{if(/^on/i.test(name)){throw Error('Attribute "'+name+'" requires goog.string.Const value, "'+value+'" given.')}else{if(name.toLowerCase() in goog.html.SafeHtml.URL_ATTRIBUTES_){if(value instanceof goog.html.TrustedResourceUrl){value=goog.html.TrustedResourceUrl.unwrap(value)}else{if(value instanceof goog.html.SafeUrl){value=goog.html.SafeUrl.unwrap(value)}else{if(goog.isString(value)){value=goog.html.SafeUrl.sanitize(value).getTypedStringValue()}else{throw Error('Attribute "'+name+'" on tag "'+tagName+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+value+'" given.')}}}}}}}if(value.implementsGoogStringTypedString){value=value.getTypedStringValue()}goog.asserts.assert(goog.isString(value)||goog.isNumber(value),"String or number value expected, got "+(typeof value)+" with value: "+value);return name+'="'+goog.string.htmlEscape(String(value))+'"'};goog.html.SafeHtml.getStyleValue_=function(value){if(!goog.isObject(value)){throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+(typeof value)+" given: "+value)}if(!(value instanceof goog.html.SafeStyle)){value=goog.html.SafeStyle.create(value)}return goog.html.SafeStyle.unwrap(value)};goog.html.SafeHtml.createWithDir=function(dir,tagName,opt_attributes,opt_content){var html=goog.html.SafeHtml.create(tagName,opt_attributes,opt_content);html.dir_=dir;return html};goog.html.SafeHtml.concat=function(var_args){var dir=goog.i18n.bidi.Dir.NEUTRAL;var content="";var addArgument=function(argument){if(goog.isArray(argument)){goog.array.forEach(argument,addArgument)}else{var html=goog.html.SafeHtml.htmlEscape(argument);content+=goog.html.SafeHtml.unwrap(html);var htmlDir=html.getDirection();if(dir==goog.i18n.bidi.Dir.NEUTRAL){dir=htmlDir}else{if(htmlDir!=goog.i18n.bidi.Dir.NEUTRAL&&dir!=htmlDir){dir=null}}}};goog.array.forEach(arguments,addArgument);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(content,dir)};goog.html.SafeHtml.concatWithDir=function(dir,var_args){var html=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));html.dir_=dir;return html};goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(html,dir){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(html,dir)};goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(html,dir){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=html;this.dir_=dir;return this};goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(tagName,opt_attributes,opt_content){var dir=null;var result="<"+tagName;if(opt_attributes){for(var name in opt_attributes){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(name)){throw Error('Invalid attribute name "'+name+'".')}var value=opt_attributes[name];if(!goog.isDefAndNotNull(value)){continue}result+=" "+goog.html.SafeHtml.getAttrNameAndValue_(tagName,name,value)}}var content=opt_content;if(!goog.isDefAndNotNull(content)){content=[]}else{if(!goog.isArray(content)){content=[content]}}if(goog.dom.tags.isVoidTag(tagName.toLowerCase())){goog.asserts.assert(!content.length,"Void tag <"+tagName+"> does not allow content.");result+=">"}else{var html=goog.html.SafeHtml.concat(content);result+=">"+goog.html.SafeHtml.unwrap(html)+"</"+tagName+">";dir=html.getDirection()}var dirAttribute=opt_attributes&&opt_attributes.dir;if(dirAttribute){if(/^(ltr|rtl|auto)$/i.test(dirAttribute)){dir=goog.i18n.bidi.Dir.NEUTRAL}else{dir=null}}return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(result,dir)};goog.html.SafeHtml.combineAttributes=function(fixedAttributes,defaultAttributes,opt_attributes){var combinedAttributes={};var name;for(name in fixedAttributes){goog.asserts.assert(name.toLowerCase()==name,"Must be lower case");combinedAttributes[name]=fixedAttributes[name]}for(name in defaultAttributes){goog.asserts.assert(name.toLowerCase()==name,"Must be lower case");combinedAttributes[name]=defaultAttributes[name]}for(name in opt_attributes){var nameLower=name.toLowerCase();if(nameLower in fixedAttributes){throw Error('Cannot override "'+nameLower+'" attribute, got "'+name+'" with value "'+opt_attributes[name]+'"')}if(nameLower in defaultAttributes){delete combinedAttributes[nameLower]}combinedAttributes[name]=opt_attributes[name]}return combinedAttributes};goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL);goog.provide("goog.dom.safe");goog.provide("goog.dom.safe.InsertAdjacentHtmlPosition");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(node,position,html){node.insertAdjacentHTML(position,goog.html.SafeHtml.unwrap(html))};goog.dom.safe.setInnerHtml=function(elem,html){elem.innerHTML=goog.html.SafeHtml.unwrap(html)};goog.dom.safe.setOuterHtml=function(elem,html){elem.outerHTML=goog.html.SafeHtml.unwrap(html)};goog.dom.safe.documentWrite=function(doc,html){doc.write(goog.html.SafeHtml.unwrap(html))};goog.dom.safe.setAnchorHref=function(anchor,url){var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}anchor.href=goog.html.SafeUrl.unwrap(safeUrl)};goog.dom.safe.setEmbedSrc=function(embed,url){embed.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setFrameSrc=function(frame,url){frame.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setIframeSrc=function(iframe,url){iframe.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setLinkHrefAndRel=function(link,url,rel){link.rel=rel;if(goog.string.caseInsensitiveContains(rel,"stylesheet")){goog.asserts.assert(url instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"');link.href=goog.html.TrustedResourceUrl.unwrap(url)}else{if(url instanceof goog.html.TrustedResourceUrl){link.href=goog.html.TrustedResourceUrl.unwrap(url)}else{if(url instanceof goog.html.SafeUrl){link.href=goog.html.SafeUrl.unwrap(url)}else{link.href=goog.html.SafeUrl.sanitize(url).getTypedStringValue()}}}};goog.dom.safe.setObjectData=function(object,url){object.data=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setScriptSrc=function(script,url){script.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setLocationHref=function(loc,url){var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}loc.href=goog.html.SafeUrl.unwrap(safeUrl)};goog.dom.safe.openInWindow=function(url,opt_openerWin,opt_name,opt_specs,opt_replace){var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}var win=opt_openerWin||window;return win.open(goog.html.SafeUrl.unwrap(safeUrl),opt_name?goog.string.Const.unwrap(opt_name):"",opt_specs,opt_replace)};goog.provide("goog.math.Coordinate");goog.require("goog.math");goog.math.Coordinate=function(opt_x,opt_y){this.x=goog.isDef(opt_x)?opt_x:0;this.y=goog.isDef(opt_y)?opt_y:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};if(goog.DEBUG){goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}goog.math.Coordinate.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.x==b.x&&a.y==b.y};goog.math.Coordinate.distance=function(a,b){var dx=a.x-b.x;var dy=a.y-b.y;return Math.sqrt(dx*dx+dy*dy)};goog.math.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};goog.math.Coordinate.azimuth=function(a){return goog.math.angle(0,0,a.x,a.y)};goog.math.Coordinate.squaredDistance=function(a,b){var dx=a.x-b.x;var dy=a.y-b.y;return dx*dx+dy*dy};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(tx,opt_ty){if(tx instanceof goog.math.Coordinate){this.x+=tx.x;this.y+=tx.y}else{this.x+=tx;if(goog.isNumber(opt_ty)){this.y+=opt_ty}}return this};goog.math.Coordinate.prototype.scale=function(sx,opt_sy){var sy=goog.isNumber(opt_sy)?opt_sy:sx;this.x*=sx;this.y*=sy;return this};goog.math.Coordinate.prototype.rotateRadians=function(radians,opt_center){var center=opt_center||new goog.math.Coordinate(0,0);var x=this.x;var y=this.y;var cos=Math.cos(radians);var sin=Math.sin(radians);this.x=(x-center.x)*cos-(y-center.y)*sin+center.x;this.y=(x-center.x)*sin+(y-center.y)*cos+center.y};goog.math.Coordinate.prototype.rotateDegrees=function(degrees,opt_center){this.rotateRadians(goog.math.toRadians(degrees),opt_center)};goog.provide("goog.math.Size");goog.math.Size=function(width,height){this.width=width;this.height=height};goog.math.Size.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.width==b.width&&a.height==b.height};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};if(goog.DEBUG){goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}}goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return(this.width+this.height)*2};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return !this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Size.prototype.fitsInside=function(target){return this.width<=target.width&&this.height<=target.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(sx,opt_sy){var sy=goog.isNumber(opt_sy)?opt_sy:sx;this.width*=sx;this.height*=sy;return this};goog.math.Size.prototype.scaleToCover=function(target){var s=this.aspectRatio()<=target.aspectRatio()?target.width/this.width:target.height/this.height;return this.scale(s)};goog.math.Size.prototype.scaleToFit=function(target){var s=this.aspectRatio()>target.aspectRatio()?target.width/this.width:target.height/this.height;return this.scale(s)};goog.provide("goog.dom");goog.provide("goog.dom.Appendable");goog.provide("goog.dom.DomHelper");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.BrowserFeature");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.safe");goog.require("goog.html.SafeHtml");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.string");goog.require("goog.string.Unicode");goog.require("goog.userAgent");goog.define("goog.dom.ASSUME_QUIRKS_MODE",false);goog.define("goog.dom.ASSUME_STANDARDS_MODE",false);goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(opt_element){return opt_element?new goog.dom.DomHelper(goog.dom.getOwnerDocument(opt_element)):(goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper()))};goog.dom.defaultDomHelper_;goog.dom.getDocument=function(){return document};goog.dom.getElement=function(element){return goog.dom.getElementHelper_(document,element)};goog.dom.getElementHelper_=function(doc,element){return goog.isString(element)?doc.getElementById(element):element};goog.dom.getRequiredElement=function(id){return goog.dom.getRequiredElementHelper_(document,id)};goog.dom.getRequiredElementHelper_=function(doc,id){goog.asserts.assertString(id);var element=goog.dom.getElementHelper_(doc,id);element=goog.asserts.assertElement(element,"No element found with id: "+id);return element};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(opt_tag,opt_class,opt_el){return goog.dom.getElementsByTagNameAndClass_(document,opt_tag,opt_class,opt_el)};goog.dom.getElementsByClass=function(className,opt_el){var parent=opt_el||document;if(goog.dom.canUseQuerySelector_(parent)){return parent.querySelectorAll("."+className)}return goog.dom.getElementsByTagNameAndClass_(document,"*",className,opt_el)};goog.dom.getElementByClass=function(className,opt_el){var parent=opt_el||document;var retVal=null;if(parent.getElementsByClassName){retVal=parent.getElementsByClassName(className)[0]}else{if(goog.dom.canUseQuerySelector_(parent)){retVal=parent.querySelector("."+className)}else{retVal=goog.dom.getElementsByTagNameAndClass_(document,"*",className,opt_el)[0]}}return retVal||null};goog.dom.getRequiredElementByClass=function(className,opt_root){var retValue=goog.dom.getElementByClass(className,opt_root);return goog.asserts.assert(retValue,"No element found with className: "+className)};goog.dom.canUseQuerySelector_=function(parent){return !!(parent.querySelectorAll&&parent.querySelector)};goog.dom.getElementsByTagNameAndClass_=function(doc,opt_tag,opt_class,opt_el){var parent=opt_el||doc;var tagName=(opt_tag&&opt_tag!="*")?opt_tag.toUpperCase():"";if(goog.dom.canUseQuerySelector_(parent)&&(tagName||opt_class)){var query=tagName+(opt_class?"."+opt_class:"");return parent.querySelectorAll(query)}if(opt_class&&parent.getElementsByClassName){var els=parent.getElementsByClassName(opt_class);if(tagName){var arrayLike={};var len=0;for(var i=0,el;el=els[i];i++){if(tagName==el.nodeName){arrayLike[len++]=el}}arrayLike.length=len;return arrayLike}else{return els}}var els=parent.getElementsByTagName(tagName||"*");if(opt_class){var arrayLike={};var len=0;for(var i=0,el;el=els[i];i++){var className=el.className;if(typeof className.split=="function"&&goog.array.contains(className.split(/\s+/),opt_class)){arrayLike[len++]=el}}arrayLike.length=len;return arrayLike}else{return els}};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(element,properties){goog.object.forEach(properties,function(val,key){if(key=="style"){element.style.cssText=val}else{if(key=="class"){element.className=val}else{if(key=="for"){element.htmlFor=val}else{if(goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(key)){element.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[key],val)}else{if(goog.string.startsWith(key,"aria-")||goog.string.startsWith(key,"data-")){element.setAttribute(key,val)}else{element[key]=val}}}}}})};goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(opt_window){return goog.dom.getViewportSize_(opt_window||window)};goog.dom.getViewportSize_=function(win){var doc=win.document;var el=goog.dom.isCss1CompatMode_(doc)?doc.documentElement:doc.body;return new goog.math.Size(el.clientWidth,el.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(win){var doc=win.document;var height=0;if(doc){var body=doc.body;var docEl=(doc.documentElement);if(!(docEl&&body)){return 0}var vh=goog.dom.getViewportSize_(win).height;if(goog.dom.isCss1CompatMode_(doc)&&docEl.scrollHeight){height=docEl.scrollHeight!=vh?docEl.scrollHeight:docEl.offsetHeight}else{var sh=docEl.scrollHeight;var oh=docEl.offsetHeight;if(docEl.clientHeight!=oh){sh=body.scrollHeight;oh=body.offsetHeight}if(sh>vh){height=sh>oh?sh:oh}else{height=sh<oh?sh:oh}}}return height};goog.dom.getPageScroll=function(opt_window){var win=opt_window||goog.global||window;return goog.dom.getDomHelper(win.document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(doc){var el=goog.dom.getDocumentScrollElement_(doc);var win=goog.dom.getWindow_(doc);if(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&win.pageYOffset!=el.scrollTop){return new goog.math.Coordinate(el.scrollLeft,el.scrollTop)}return new goog.math.Coordinate(win.pageXOffset||el.scrollLeft,win.pageYOffset||el.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};goog.dom.getDocumentScrollElement_=function(doc){if(doc.scrollingElement){return doc.scrollingElement}if(!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(doc)){return doc.documentElement}return doc.body||doc.documentElement};goog.dom.getWindow=function(opt_doc){return opt_doc?goog.dom.getWindow_(opt_doc):window};goog.dom.getWindow_=function(doc){return doc.parentWindow||doc.defaultView};goog.dom.createDom=function(tagName,opt_attributes,var_args){return goog.dom.createDom_(document,arguments)};goog.dom.createDom_=function(doc,args){var tagName=args[0];var attributes=args[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&attributes&&(attributes.name||attributes.type)){var tagNameArr=["<",tagName];if(attributes.name){tagNameArr.push(' name="',goog.string.htmlEscape(attributes.name),'"')}if(attributes.type){tagNameArr.push(' type="',goog.string.htmlEscape(attributes.type),'"');var clone={};goog.object.extend(clone,attributes);delete clone.type;attributes=clone}tagNameArr.push(">");tagName=tagNameArr.join("")}var element=doc.createElement(tagName);if(attributes){if(goog.isString(attributes)){element.className=attributes}else{if(goog.isArray(attributes)){element.className=attributes.join(" ")}else{goog.dom.setProperties(element,attributes)}}}if(args.length>2){goog.dom.append_(doc,element,args,2)}return element};goog.dom.append_=function(doc,parent,args,startIndex){function childHandler(child){if(child){parent.appendChild(goog.isString(child)?doc.createTextNode(child):child)}}for(var i=startIndex;i<args.length;i++){var arg=args[i];if(goog.isArrayLike(arg)&&!goog.dom.isNodeLike(arg)){goog.array.forEach(goog.dom.isNodeList(arg)?goog.array.toArray(arg):arg,childHandler)}else{childHandler(arg)}}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(name){return document.createElement(name)};goog.dom.createTextNode=function(content){return document.createTextNode(String(content))};goog.dom.createTable=function(rows,columns,opt_fillWithNbsp){return goog.dom.createTable_(document,rows,columns,!!opt_fillWithNbsp)};goog.dom.createTable_=function(doc,rows,columns,fillWithNbsp){var table=(doc.createElement(goog.dom.TagName.TABLE));var tbody=table.appendChild(doc.createElement(goog.dom.TagName.TBODY));for(var i=0;i<rows;i++){var tr=doc.createElement(goog.dom.TagName.TR);for(var j=0;j<columns;j++){var td=doc.createElement(goog.dom.TagName.TD);if(fillWithNbsp){goog.dom.setTextContent(td,goog.string.Unicode.NBSP)}tr.appendChild(td)}tbody.appendChild(tr)}return table};goog.dom.safeHtmlToNode=function(html){return goog.dom.safeHtmlToNode_(document,html)};goog.dom.safeHtmlToNode_=function(doc,html){var tempDiv=doc.createElement(goog.dom.TagName.DIV);if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){goog.dom.safe.setInnerHtml(tempDiv,goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),html));tempDiv.removeChild(tempDiv.firstChild)}else{goog.dom.safe.setInnerHtml(tempDiv,html)}return goog.dom.childrenToNode_(doc,tempDiv)};goog.dom.htmlToDocumentFragment=function(htmlString){return goog.dom.htmlToDocumentFragment_(document,htmlString)};goog.dom.htmlToDocumentFragment_=function(doc,htmlString){var tempDiv=doc.createElement(goog.dom.TagName.DIV);if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){tempDiv.innerHTML="<br>"+htmlString;tempDiv.removeChild(tempDiv.firstChild)}else{tempDiv.innerHTML=htmlString}return goog.dom.childrenToNode_(doc,tempDiv)};goog.dom.childrenToNode_=function(doc,tempDiv){if(tempDiv.childNodes.length==1){return tempDiv.removeChild(tempDiv.firstChild)}else{var fragment=doc.createDocumentFragment();while(tempDiv.firstChild){fragment.appendChild(tempDiv.firstChild)}return fragment}};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(doc){if(goog.dom.COMPAT_MODE_KNOWN_){return goog.dom.ASSUME_STANDARDS_MODE}return doc.compatMode=="CSS1Compat"};goog.dom.canHaveChildren=function(node){if(node.nodeType!=goog.dom.NodeType.ELEMENT){return false}switch((node).tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return false}return true};goog.dom.appendChild=function(parent,child){parent.appendChild(child)};goog.dom.append=function(parent,var_args){goog.dom.append_(goog.dom.getOwnerDocument(parent),parent,arguments,1)};goog.dom.removeChildren=function(node){var child;while((child=node.firstChild)){node.removeChild(child)}};goog.dom.insertSiblingBefore=function(newNode,refNode){if(refNode.parentNode){refNode.parentNode.insertBefore(newNode,refNode)}};goog.dom.insertSiblingAfter=function(newNode,refNode){if(refNode.parentNode){refNode.parentNode.insertBefore(newNode,refNode.nextSibling)}};goog.dom.insertChildAt=function(parent,child,index){parent.insertBefore(child,parent.childNodes[index]||null)};goog.dom.removeNode=function(node){return node&&node.parentNode?node.parentNode.removeChild(node):null};goog.dom.replaceNode=function(newNode,oldNode){var parent=oldNode.parentNode;if(parent){parent.replaceChild(newNode,oldNode)}};goog.dom.flattenElement=function(element){var child,parent=element.parentNode;if(parent&&parent.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(element.removeNode){return(element.removeNode(false))}else{while((child=element.firstChild)){parent.insertBefore(child,element)}return(goog.dom.removeNode(element))}}};goog.dom.getChildren=function(element){if(goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&element.children!=undefined){return element.children}return goog.array.filter(element.childNodes,function(node){return node.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(node){if(goog.isDef(node.firstElementChild)){return(node).firstElementChild}return goog.dom.getNextElementNode_(node.firstChild,true)};goog.dom.getLastElementChild=function(node){if(goog.isDef(node.lastElementChild)){return(node).lastElementChild}return goog.dom.getNextElementNode_(node.lastChild,false)};goog.dom.getNextElementSibling=function(node){if(goog.isDef(node.nextElementSibling)){return(node).nextElementSibling}return goog.dom.getNextElementNode_(node.nextSibling,true)};goog.dom.getPreviousElementSibling=function(node){if(goog.isDef(node.previousElementSibling)){return(node).previousElementSibling}return goog.dom.getNextElementNode_(node.previousSibling,false)};goog.dom.getNextElementNode_=function(node,forward){while(node&&node.nodeType!=goog.dom.NodeType.ELEMENT){node=forward?node.nextSibling:node.previousSibling}return(node)};goog.dom.getNextNode=function(node){if(!node){return null}if(node.firstChild){return node.firstChild}while(node&&!node.nextSibling){node=node.parentNode}return node?node.nextSibling:null};goog.dom.getPreviousNode=function(node){if(!node){return null}if(!node.previousSibling){return node.parentNode}node=node.previousSibling;while(node&&node.lastChild){node=node.lastChild}return node};goog.dom.isNodeLike=function(obj){return goog.isObject(obj)&&obj.nodeType>0};goog.dom.isElement=function(obj){return goog.isObject(obj)&&obj.nodeType==goog.dom.NodeType.ELEMENT};goog.dom.isWindow=function(obj){return goog.isObject(obj)&&obj.window==obj};goog.dom.getParentElement=function(element){var parent;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY){var isIe9=goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10");if(!(isIe9&&goog.global.SVGElement&&element instanceof goog.global.SVGElement)){parent=element.parentElement;if(parent){return parent}}}parent=element.parentNode;return goog.dom.isElement(parent)?(parent):null};goog.dom.contains=function(parent,descendant){if(parent.contains&&descendant.nodeType==goog.dom.NodeType.ELEMENT){return parent==descendant||parent.contains(descendant)}if(typeof parent.compareDocumentPosition!="undefined"){return parent==descendant||Boolean(parent.compareDocumentPosition(descendant)&16)}while(descendant&&parent!=descendant){descendant=descendant.parentNode}return descendant==parent};goog.dom.compareNodeOrder=function(node1,node2){if(node1==node2){return 0}if(node1.compareDocumentPosition){return node1.compareDocumentPosition(node2)&2?1:-1}if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(node1.nodeType==goog.dom.NodeType.DOCUMENT){return -1}if(node2.nodeType==goog.dom.NodeType.DOCUMENT){return 1}}if("sourceIndex" in node1||(node1.parentNode&&"sourceIndex" in node1.parentNode)){var isElement1=node1.nodeType==goog.dom.NodeType.ELEMENT;var isElement2=node2.nodeType==goog.dom.NodeType.ELEMENT;if(isElement1&&isElement2){return node1.sourceIndex-node2.sourceIndex}else{var parent1=node1.parentNode;var parent2=node2.parentNode;if(parent1==parent2){return goog.dom.compareSiblingOrder_(node1,node2)}if(!isElement1&&goog.dom.contains(parent1,node2)){return -1*goog.dom.compareParentsDescendantNodeIe_(node1,node2)}if(!isElement2&&goog.dom.contains(parent2,node1)){return goog.dom.compareParentsDescendantNodeIe_(node2,node1)}return(isElement1?node1.sourceIndex:parent1.sourceIndex)-(isElement2?node2.sourceIndex:parent2.sourceIndex)}}var doc=goog.dom.getOwnerDocument(node1);var range1,range2;range1=doc.createRange();range1.selectNode(node1);range1.collapse(true);range2=doc.createRange();range2.selectNode(node2);range2.collapse(true);return range1.compareBoundaryPoints(goog.global.Range.START_TO_END,range2)};goog.dom.compareParentsDescendantNodeIe_=function(textNode,node){var parent=textNode.parentNode;if(parent==node){return -1}var sibling=node;while(sibling.parentNode!=parent){sibling=sibling.parentNode}return goog.dom.compareSiblingOrder_(sibling,textNode)};goog.dom.compareSiblingOrder_=function(node1,node2){var s=node2;while((s=s.previousSibling)){if(s==node1){return -1}}return 1};goog.dom.findCommonAncestor=function(var_args){var i,count=arguments.length;if(!count){return null}else{if(count==1){return arguments[0]}}var paths=[];var minLength=Infinity;for(i=0;i<count;i++){var ancestors=[];var node=arguments[i];while(node){ancestors.unshift(node);node=node.parentNode}paths.push(ancestors);minLength=Math.min(minLength,ancestors.length)}var output=null;for(i=0;i<minLength;i++){var first=paths[0][i];for(var j=1;j<count;j++){if(first!=paths[j][i]){return output}}output=first}return output};goog.dom.getOwnerDocument=function(node){goog.asserts.assert(node,"Node cannot be null or undefined.");return(node.nodeType==goog.dom.NodeType.DOCUMENT?node:node.ownerDocument||node.document)};goog.dom.getFrameContentDocument=function(frame){var doc=frame.contentDocument||frame.contentWindow.document;return doc};goog.dom.getFrameContentWindow=function(frame){return frame.contentWindow||goog.dom.getWindow(goog.dom.getFrameContentDocument(frame))};goog.dom.setTextContent=function(node,text){goog.asserts.assert(node!=null,"goog.dom.setTextContent expects a non-null value for node");if("textContent" in node){node.textContent=text}else{if(node.nodeType==goog.dom.NodeType.TEXT){node.data=text}else{if(node.firstChild&&node.firstChild.nodeType==goog.dom.NodeType.TEXT){while(node.lastChild!=node.firstChild){node.removeChild(node.lastChild)}node.firstChild.data=text}else{goog.dom.removeChildren(node);var doc=goog.dom.getOwnerDocument(node);node.appendChild(doc.createTextNode(String(text)))}}}};goog.dom.getOuterHtml=function(element){if("outerHTML" in element){return element.outerHTML}else{var doc=goog.dom.getOwnerDocument(element);var div=doc.createElement(goog.dom.TagName.DIV);div.appendChild(element.cloneNode(true));return div.innerHTML}};goog.dom.findNode=function(root,p){var rv=[];var found=goog.dom.findNodes_(root,p,rv,true);return found?rv[0]:undefined};goog.dom.findNodes=function(root,p){var rv=[];goog.dom.findNodes_(root,p,rv,false);return rv};goog.dom.findNodes_=function(root,p,rv,findOne){if(root!=null){var child=root.firstChild;while(child){if(p(child)){rv.push(child);if(findOne){return true}}if(goog.dom.findNodes_(child,p,rv,findOne)){return true}child=child.nextSibling}}return false};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(element){return goog.dom.hasSpecifiedTabIndex_(element)&&goog.dom.isTabIndexFocusable_(element)};goog.dom.setFocusableTabIndex=function(element,enable){if(enable){element.tabIndex=0}else{element.tabIndex=-1;element.removeAttribute("tabIndex")}};goog.dom.isFocusable=function(element){var focusable;if(goog.dom.nativelySupportsFocus_(element)){focusable=!element.disabled&&(!goog.dom.hasSpecifiedTabIndex_(element)||goog.dom.isTabIndexFocusable_(element))}else{focusable=goog.dom.isFocusableTabIndex(element)}return focusable&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(element):focusable};goog.dom.hasSpecifiedTabIndex_=function(element){var attrNode=element.getAttributeNode("tabindex");return goog.isDefAndNotNull(attrNode)&&attrNode.specified};goog.dom.isTabIndexFocusable_=function(element){var index=element.tabIndex;return goog.isNumber(index)&&index>=0&&index<32768};goog.dom.nativelySupportsFocus_=function(element){return element.tagName==goog.dom.TagName.A||element.tagName==goog.dom.TagName.INPUT||element.tagName==goog.dom.TagName.TEXTAREA||element.tagName==goog.dom.TagName.SELECT||element.tagName==goog.dom.TagName.BUTTON};goog.dom.hasNonZeroBoundingRect_=function(element){var rect=goog.isFunction(element.getBoundingClientRect)?element.getBoundingClientRect():{height:element.offsetHeight,width:element.offsetWidth};return goog.isDefAndNotNull(rect)&&rect.height>0&&rect.width>0};goog.dom.getTextContent=function(node){var textContent;if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&("innerText" in node)){textContent=goog.string.canonicalizeNewlines(node.innerText)}else{var buf=[];goog.dom.getTextContent_(node,buf,true);textContent=buf.join("")}textContent=textContent.replace(/ \xAD /g," ").replace(/\xAD/g,"");textContent=textContent.replace(/\u200B/g,"");if(!goog.dom.BrowserFeature.CAN_USE_INNER_TEXT){textContent=textContent.replace(/ +/g," ")}if(textContent!=" "){textContent=textContent.replace(/^\s*/,"")}return textContent};goog.dom.getRawTextContent=function(node){var buf=[];goog.dom.getTextContent_(node,buf,false);return buf.join("")};goog.dom.getTextContent_=function(node,buf,normalizeWhitespace){if(node.nodeName in goog.dom.TAGS_TO_IGNORE_){}else{if(node.nodeType==goog.dom.NodeType.TEXT){if(normalizeWhitespace){buf.push(String(node.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{buf.push(node.nodeValue)}}else{if(node.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){buf.push(goog.dom.PREDEFINED_TAG_VALUES_[node.nodeName])}else{var child=node.firstChild;while(child){goog.dom.getTextContent_(child,buf,normalizeWhitespace);child=child.nextSibling}}}}};goog.dom.getNodeTextLength=function(node){return goog.dom.getTextContent(node).length};goog.dom.getNodeTextOffset=function(node,opt_offsetParent){var root=opt_offsetParent||goog.dom.getOwnerDocument(node).body;var buf=[];while(node&&node!=root){var cur=node;while((cur=cur.previousSibling)){buf.unshift(goog.dom.getTextContent(cur))}node=node.parentNode}return goog.string.trimLeft(buf.join("")).replace(/ +/g," ").length};goog.dom.getNodeAtOffset=function(parent,offset,opt_result){var stack=[parent],pos=0,cur=null;while(stack.length>0&&pos<offset){cur=stack.pop();if(cur.nodeName in goog.dom.TAGS_TO_IGNORE_){}else{if(cur.nodeType==goog.dom.NodeType.TEXT){var text=cur.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");pos+=text.length}else{if(cur.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){pos+=goog.dom.PREDEFINED_TAG_VALUES_[cur.nodeName].length}else{for(var i=cur.childNodes.length-1;i>=0;i--){stack.push(cur.childNodes[i])}}}}}if(goog.isObject(opt_result)){opt_result.remainder=cur?cur.nodeValue.length+offset-pos-1:0;opt_result.node=cur}return cur};goog.dom.isNodeList=function(val){if(val&&typeof val.length=="number"){if(goog.isObject(val)){return typeof val.item=="function"||typeof val.item=="string"}else{if(goog.isFunction(val)){return typeof val.item=="function"}}}return false};goog.dom.getAncestorByTagNameAndClass=function(element,opt_tag,opt_class,opt_maxSearchSteps){if(!opt_tag&&!opt_class){return null}var tagName=opt_tag?opt_tag.toUpperCase():null;return(goog.dom.getAncestor(element,function(node){return(!tagName||node.nodeName==tagName)&&(!opt_class||goog.isString(node.className)&&goog.array.contains(node.className.split(/\s+/),opt_class))},true,opt_maxSearchSteps))};goog.dom.getAncestorByClass=function(element,className,opt_maxSearchSteps){return goog.dom.getAncestorByTagNameAndClass(element,null,className,opt_maxSearchSteps)};goog.dom.getAncestor=function(element,matcher,opt_includeNode,opt_maxSearchSteps){if(!opt_includeNode){element=element.parentNode}var ignoreSearchSteps=opt_maxSearchSteps==null;var steps=0;while(element&&(ignoreSearchSteps||steps<=opt_maxSearchSteps)){goog.asserts.assert(element.name!="parentNode");if(matcher(element)){return element}element=element.parentNode;steps++}return null};goog.dom.getActiveElement=function(doc){try{return doc&&doc.activeElement}catch(e){}return null};goog.dom.getPixelRatio=function(){var win=goog.dom.getWindow();if(goog.isDef(win.devicePixelRatio)){return win.devicePixelRatio}else{if(win.matchMedia){return goog.dom.matchesPixelRatio_(0.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1}}return 1};goog.dom.matchesPixelRatio_=function(pixelRatio){var win=goog.dom.getWindow();var query=("(-webkit-min-device-pixel-ratio: "+pixelRatio+"),(min--moz-device-pixel-ratio: "+pixelRatio+"),(min-resolution: "+pixelRatio+"dppx)");return win.matchMedia(query).matches?pixelRatio:0};goog.dom.DomHelper=function(opt_document){this.document_=opt_document||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(document){this.document_=document};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(element){return goog.dom.getElementHelper_(this.document_,element)};goog.dom.DomHelper.prototype.getRequiredElement=function(id){return goog.dom.getRequiredElementHelper_(this.document_,id)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(opt_tag,opt_class,opt_el){return goog.dom.getElementsByTagNameAndClass_(this.document_,opt_tag,opt_class,opt_el)};goog.dom.DomHelper.prototype.getElementsByClass=function(className,opt_el){var doc=opt_el||this.document_;return goog.dom.getElementsByClass(className,doc)};goog.dom.DomHelper.prototype.getElementByClass=function(className,opt_el){var doc=opt_el||this.document_;return goog.dom.getElementByClass(className,doc)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(className,opt_root){var root=opt_root||this.document_;return goog.dom.getRequiredElementByClass(className,root)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(opt_window){return goog.dom.getViewportSize(opt_window||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.Appendable;goog.dom.DomHelper.prototype.createDom=function(tagName,opt_attributes,var_args){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(name){return this.document_.createElement(name)};goog.dom.DomHelper.prototype.createTextNode=function(content){return this.document_.createTextNode(String(content))};goog.dom.DomHelper.prototype.createTable=function(rows,columns,opt_fillWithNbsp){return goog.dom.createTable_(this.document_,rows,columns,!!opt_fillWithNbsp)};goog.dom.DomHelper.prototype.safeHtmlToNode=function(html){return goog.dom.safeHtmlToNode_(this.document_,html)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(htmlString){return goog.dom.htmlToDocumentFragment_(this.document_,htmlString)};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(opt_doc){return goog.dom.getActiveElement(opt_doc||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.provide("goog.dom.classlist");goog.require("goog.array");goog.define("goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST",false);goog.dom.classlist.get=function(element){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||element.classList){return element.classList}var className=element.className;return goog.isString(className)&&className.match(/\S+/g)||[]};goog.dom.classlist.set=function(element,className){element.className=className};goog.dom.classlist.contains=function(element,className){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||element.classList){return element.classList.contains(className)}return goog.array.contains(goog.dom.classlist.get(element),className)};goog.dom.classlist.add=function(element,className){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||element.classList){element.classList.add(className);return}if(!goog.dom.classlist.contains(element,className)){element.className+=element.className.length>0?(" "+className):className}};goog.dom.classlist.addAll=function(element,classesToAdd){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||element.classList){goog.array.forEach(classesToAdd,function(className){goog.dom.classlist.add(element,className)});return}var classMap={};goog.array.forEach(goog.dom.classlist.get(element),function(className){classMap[className]=true});goog.array.forEach(classesToAdd,function(className){classMap[className]=true});element.className="";for(var className in classMap){element.className+=element.className.length>0?(" "+className):className}};goog.dom.classlist.remove=function(element,className){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||element.classList){element.classList.remove(className);return}if(goog.dom.classlist.contains(element,className)){element.className=goog.array.filter(goog.dom.classlist.get(element),function(c){return c!=className}).join(" ")}};goog.dom.classlist.removeAll=function(element,classesToRemove){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||element.classList){goog.array.forEach(classesToRemove,function(className){goog.dom.classlist.remove(element,className)});return}element.className=goog.array.filter(goog.dom.classlist.get(element),function(className){return !goog.array.contains(classesToRemove,className)}).join(" ")};goog.dom.classlist.enable=function(element,className,enabled){if(enabled){goog.dom.classlist.add(element,className)}else{goog.dom.classlist.remove(element,className)}};goog.dom.classlist.enableAll=function(element,classesToEnable,enabled){var f=enabled?goog.dom.classlist.addAll:goog.dom.classlist.removeAll;f(element,classesToEnable)};goog.dom.classlist.swap=function(element,fromClass,toClass){if(goog.dom.classlist.contains(element,fromClass)){goog.dom.classlist.remove(element,fromClass);goog.dom.classlist.add(element,toClass);return true}return false};goog.dom.classlist.toggle=function(element,className){var add=!goog.dom.classlist.contains(element,className);goog.dom.classlist.enable(element,className,add);return add};goog.dom.classlist.addRemove=function(element,classToRemove,classToAdd){goog.dom.classlist.remove(element,classToRemove);goog.dom.classlist.add(element,classToAdd)};goog.provide("goog.dom.vendor");goog.require("goog.string");goog.require("goog.userAgent");goog.dom.vendor.getVendorJsPrefix=function(){if(goog.userAgent.WEBKIT){return"Webkit"}else{if(goog.userAgent.GECKO){return"Moz"}else{if(goog.userAgent.IE){return"ms"}else{if(goog.userAgent.OPERA){return"O"}}}}return null};goog.dom.vendor.getVendorPrefix=function(){if(goog.userAgent.WEBKIT){return"-webkit"}else{if(goog.userAgent.GECKO){return"-moz"}else{if(goog.userAgent.IE){return"-ms"}else{if(goog.userAgent.OPERA){return"-o"}}}}return null};goog.dom.vendor.getPrefixedPropertyName=function(propertyName,opt_object){if(opt_object&&propertyName in opt_object){return propertyName}var prefix=goog.dom.vendor.getVendorJsPrefix();if(prefix){prefix=prefix.toLowerCase();var prefixedPropertyName=prefix+goog.string.toTitleCase(propertyName);return(!goog.isDef(opt_object)||prefixedPropertyName in opt_object)?prefixedPropertyName:null}return null};goog.dom.vendor.getPrefixedEventType=function(eventType){var prefix=goog.dom.vendor.getVendorJsPrefix()||"";return(prefix+eventType).toLowerCase()};goog.provide("goog.math.Box");goog.require("goog.math.Coordinate");goog.math.Box=function(top,right,bottom,left){this.top=top;this.right=right;this.bottom=bottom;this.left=left};goog.math.Box.boundingBox=function(var_args){var box=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x);for(var i=1;i<arguments.length;i++){box.expandToIncludeCoordinate(arguments[i])}return box};goog.math.Box.prototype.getWidth=function(){return this.right-this.left};goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};if(goog.DEBUG){goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}}goog.math.Box.prototype.contains=function(other){return goog.math.Box.contains(this,other)};goog.math.Box.prototype.expand=function(top,opt_right,opt_bottom,opt_left){if(goog.isObject(top)){this.top-=top.top;this.right+=top.right;this.bottom+=top.bottom;this.left-=top.left}else{this.top-=top;this.right+=opt_right;this.bottom+=opt_bottom;this.left-=opt_left}return this};goog.math.Box.prototype.expandToInclude=function(box){this.left=Math.min(this.left,box.left);this.top=Math.min(this.top,box.top);this.right=Math.max(this.right,box.right);this.bottom=Math.max(this.bottom,box.bottom)};goog.math.Box.prototype.expandToIncludeCoordinate=function(coord){this.top=Math.min(this.top,coord.y);this.right=Math.max(this.right,coord.x);this.bottom=Math.max(this.bottom,coord.y);this.left=Math.min(this.left,coord.x)};goog.math.Box.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left};goog.math.Box.contains=function(box,other){if(!box||!other){return false}if(other instanceof goog.math.Box){return other.left>=box.left&&other.right<=box.right&&other.top>=box.top&&other.bottom<=box.bottom}return other.x>=box.left&&other.x<=box.right&&other.y>=box.top&&other.y<=box.bottom};goog.math.Box.relativePositionX=function(box,coord){if(coord.x<box.left){return coord.x-box.left}else{if(coord.x>box.right){return coord.x-box.right}}return 0};goog.math.Box.relativePositionY=function(box,coord){if(coord.y<box.top){return coord.y-box.top}else{if(coord.y>box.bottom){return coord.y-box.bottom}}return 0};goog.math.Box.distance=function(box,coord){var x=goog.math.Box.relativePositionX(box,coord);var y=goog.math.Box.relativePositionY(box,coord);return Math.sqrt(x*x+y*y)};goog.math.Box.intersects=function(a,b){return(a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom)};goog.math.Box.intersectsWithPadding=function(a,b,padding){return(a.left<=b.right+padding&&b.left<=a.right+padding&&a.top<=b.bottom+padding&&b.top<=a.bottom+padding)};goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(tx,opt_ty){if(tx instanceof goog.math.Coordinate){this.left+=tx.x;this.right+=tx.x;this.top+=tx.y;this.bottom+=tx.y}else{this.left+=tx;this.right+=tx;if(goog.isNumber(opt_ty)){this.top+=opt_ty;this.bottom+=opt_ty}}return this};goog.math.Box.prototype.scale=function(sx,opt_sy){var sy=goog.isNumber(opt_sy)?opt_sy:sx;this.left*=sx;this.right*=sx;this.top*=sy;this.bottom*=sy;return this};goog.provide("goog.math.Rect");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.math.Rect=function(x,y,w,h){this.left=x;this.top=y;this.width=w;this.height=h};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){var right=this.left+this.width;var bottom=this.top+this.height;return new goog.math.Box(this.top,right,bottom,this.left)};goog.math.Rect.createFromPositionAndSize=function(position,size){return new goog.math.Rect(position.x,position.y,size.width,size.height)};goog.math.Rect.createFromBox=function(box){return new goog.math.Rect(box.left,box.top,box.right-box.left,box.bottom-box.top)};if(goog.DEBUG){goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}}goog.math.Rect.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height};goog.math.Rect.prototype.intersection=function(rect){var x0=Math.max(this.left,rect.left);var x1=Math.min(this.left+this.width,rect.left+rect.width);if(x0<=x1){var y0=Math.max(this.top,rect.top);var y1=Math.min(this.top+this.height,rect.top+rect.height);if(y0<=y1){this.left=x0;this.top=y0;this.width=x1-x0;this.height=y1-y0;return true}}return false};goog.math.Rect.intersection=function(a,b){var x0=Math.max(a.left,b.left);var x1=Math.min(a.left+a.width,b.left+b.width);if(x0<=x1){var y0=Math.max(a.top,b.top);var y1=Math.min(a.top+a.height,b.top+b.height);if(y0<=y1){return new goog.math.Rect(x0,y0,x1-x0,y1-y0)}}return null};goog.math.Rect.intersects=function(a,b){return(a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height)};goog.math.Rect.prototype.intersects=function(rect){return goog.math.Rect.intersects(this,rect)};goog.math.Rect.difference=function(a,b){var intersection=goog.math.Rect.intersection(a,b);if(!intersection||!intersection.height||!intersection.width){return[a.clone()]}var result=[];var top=a.top;var height=a.height;var ar=a.left+a.width;var ab=a.top+a.height;var br=b.left+b.width;var bb=b.top+b.height;if(b.top>a.top){result.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top));top=b.top;height-=b.top-a.top}if(bb<ab){result.push(new goog.math.Rect(a.left,bb,a.width,ab-bb));height=bb-top}if(b.left>a.left){result.push(new goog.math.Rect(a.left,top,b.left-a.left,height))}if(br<ar){result.push(new goog.math.Rect(br,top,ar-br,height))}return result};goog.math.Rect.prototype.difference=function(rect){return goog.math.Rect.difference(this,rect)};goog.math.Rect.prototype.boundingRect=function(rect){var right=Math.max(this.left+this.width,rect.left+rect.width);var bottom=Math.max(this.top+this.height,rect.top+rect.height);this.left=Math.min(this.left,rect.left);this.top=Math.min(this.top,rect.top);this.width=right-this.left;this.height=bottom-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b){return null}var clone=a.clone();clone.boundingRect(b);return clone};goog.math.Rect.prototype.contains=function(another){if(another instanceof goog.math.Rect){return this.left<=another.left&&this.left+this.width>=another.left+another.width&&this.top<=another.top&&this.top+this.height>=another.top+another.height}else{return another.x>=this.left&&another.x<=this.left+this.width&&another.y>=this.top&&another.y<=this.top+this.height}};goog.math.Rect.prototype.squaredDistance=function(point){var dx=point.x<this.left?this.left-point.x:Math.max(point.x-(this.left+this.width),0);var dy=point.y<this.top?this.top-point.y:Math.max(point.y-(this.top+this.height),0);return dx*dx+dy*dy};goog.math.Rect.prototype.distance=function(point){return Math.sqrt(this.squaredDistance(point))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(tx,opt_ty){if(tx instanceof goog.math.Coordinate){this.left+=tx.x;this.top+=tx.y}else{this.left+=tx;if(goog.isNumber(opt_ty)){this.top+=opt_ty}}return this};goog.math.Rect.prototype.scale=function(sx,opt_sy){var sy=goog.isNumber(opt_sy)?opt_sy:sx;this.left*=sx;this.width*=sx;this.top*=sy;this.height*=sy;return this};goog.provide("goog.style");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.vendor");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.string");goog.require("goog.userAgent");goog.forwardDeclare("goog.events.BrowserEvent");goog.forwardDeclare("goog.events.Event");goog.style.setStyle=function(element,style,opt_value){if(goog.isString(style)){goog.style.setStyle_(element,opt_value,style)}else{for(var key in style){goog.style.setStyle_(element,style[key],key)}}};goog.style.setStyle_=function(element,value,style){var propertyName=goog.style.getVendorJsStyleName_(element,style);if(propertyName){element.style[propertyName]=value}};goog.style.styleNameCache_={};goog.style.getVendorJsStyleName_=function(element,style){var propertyName=goog.style.styleNameCache_[style];if(!propertyName){var camelStyle=goog.string.toCamelCase(style);propertyName=camelStyle;if(element.style[camelStyle]===undefined){var prefixedStyle=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(camelStyle);if(element.style[prefixedStyle]!==undefined){propertyName=prefixedStyle}}goog.style.styleNameCache_[style]=propertyName}return propertyName};goog.style.getVendorStyleName_=function(element,style){var camelStyle=goog.string.toCamelCase(style);if(element.style[camelStyle]===undefined){var prefixedStyle=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(camelStyle);if(element.style[prefixedStyle]!==undefined){return goog.dom.vendor.getVendorPrefix()+"-"+style}}return style};goog.style.getStyle=function(element,property){var styleValue=element.style[goog.string.toCamelCase(property)];if(typeof(styleValue)!=="undefined"){return styleValue}return element.style[goog.style.getVendorJsStyleName_(element,property)]||""};goog.style.getComputedStyle=function(element,property){var doc=goog.dom.getOwnerDocument(element);if(doc.defaultView&&doc.defaultView.getComputedStyle){var styles=doc.defaultView.getComputedStyle(element,null);if(styles){return styles[property]||styles.getPropertyValue(property)||""}}return""};goog.style.getCascadedStyle=function(element,style){return element.currentStyle?element.currentStyle[style]:null};goog.style.getStyle_=function(element,style){return goog.style.getComputedStyle(element,style)||goog.style.getCascadedStyle(element,style)||(element.style&&element.style[style])};goog.style.getComputedBoxSizing=function(element){return goog.style.getStyle_(element,"boxSizing")||goog.style.getStyle_(element,"MozBoxSizing")||goog.style.getStyle_(element,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(element){return goog.style.getStyle_(element,"position")};goog.style.getBackgroundColor=function(element){return goog.style.getStyle_(element,"backgroundColor")};goog.style.getComputedOverflowX=function(element){return goog.style.getStyle_(element,"overflowX")};goog.style.getComputedOverflowY=function(element){return goog.style.getStyle_(element,"overflowY")};goog.style.getComputedZIndex=function(element){return goog.style.getStyle_(element,"zIndex")};goog.style.getComputedTextAlign=function(element){return goog.style.getStyle_(element,"textAlign")};goog.style.getComputedCursor=function(element){return goog.style.getStyle_(element,"cursor")};goog.style.getComputedTransform=function(element){var property=goog.style.getVendorStyleName_(element,"transform");return goog.style.getStyle_(element,property)||goog.style.getStyle_(element,"transform")};goog.style.setPosition=function(el,arg1,opt_arg2){var x,y;if(arg1 instanceof goog.math.Coordinate){x=arg1.x;y=arg1.y}else{x=arg1;y=opt_arg2}el.style.left=goog.style.getPixelStyleValue_((x),false);el.style.top=goog.style.getPixelStyleValue_((y),false)};goog.style.getPosition=function(element){return new goog.math.Coordinate((element).offsetLeft,(element).offsetTop)};goog.style.getClientViewportElement=function(opt_node){var doc;if(opt_node){doc=goog.dom.getOwnerDocument(opt_node)}else{doc=goog.dom.getDocument()}if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!goog.dom.getDomHelper(doc).isCss1CompatMode()){return doc.body}return doc.documentElement};goog.style.getViewportPageOffset=function(doc){var body=doc.body;var documentElement=doc.documentElement;var scrollLeft=body.scrollLeft||documentElement.scrollLeft;var scrollTop=body.scrollTop||documentElement.scrollTop;return new goog.math.Coordinate(scrollLeft,scrollTop)};goog.style.getBoundingClientRect_=function(el){var rect;try{rect=el.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}if(goog.userAgent.IE&&el.ownerDocument.body){var doc=el.ownerDocument;rect.left-=doc.documentElement.clientLeft+doc.body.clientLeft;rect.top-=doc.documentElement.clientTop+doc.body.clientTop}return rect};goog.style.getOffsetParent=function(element){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8)){return element.offsetParent}var doc=goog.dom.getOwnerDocument(element);var positionStyle=goog.style.getStyle_(element,"position");var skipStatic=positionStyle=="fixed"||positionStyle=="absolute";for(var parent=element.parentNode;parent&&parent!=doc;parent=parent.parentNode){if(parent.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&parent.host){parent=parent.host}positionStyle=goog.style.getStyle_((parent),"position");skipStatic=skipStatic&&positionStyle=="static"&&parent!=doc.documentElement&&parent!=doc.body;if(!skipStatic&&(parent.scrollWidth>parent.clientWidth||parent.scrollHeight>parent.clientHeight||positionStyle=="fixed"||positionStyle=="absolute"||positionStyle=="relative")){return(parent)}}return null};goog.style.getVisibleRectForElement=function(element){var visibleRect=new goog.math.Box(0,Infinity,Infinity,0);var dom=goog.dom.getDomHelper(element);var body=dom.getDocument().body;var documentElement=dom.getDocument().documentElement;var scrollEl=dom.getDocumentScrollElement();for(var el=element;el=goog.style.getOffsetParent(el);){if((!goog.userAgent.IE||el.clientWidth!=0)&&(!goog.userAgent.WEBKIT||el.clientHeight!=0||el!=body)&&(el!=body&&el!=documentElement&&goog.style.getStyle_(el,"overflow")!="visible")){var pos=goog.style.getPageOffset(el);var client=goog.style.getClientLeftTop(el);pos.x+=client.x;pos.y+=client.y;visibleRect.top=Math.max(visibleRect.top,pos.y);visibleRect.right=Math.min(visibleRect.right,pos.x+el.clientWidth);visibleRect.bottom=Math.min(visibleRect.bottom,pos.y+el.clientHeight);visibleRect.left=Math.max(visibleRect.left,pos.x)}}var scrollX=scrollEl.scrollLeft,scrollY=scrollEl.scrollTop;visibleRect.left=Math.max(visibleRect.left,scrollX);visibleRect.top=Math.max(visibleRect.top,scrollY);var winSize=dom.getViewportSize();visibleRect.right=Math.min(visibleRect.right,scrollX+winSize.width);visibleRect.bottom=Math.min(visibleRect.bottom,scrollY+winSize.height);return visibleRect.top>=0&&visibleRect.left>=0&&visibleRect.bottom>visibleRect.top&&visibleRect.right>visibleRect.left?visibleRect:null};goog.style.getContainerOffsetToScrollInto=function(element,container,opt_center){var elementPos=goog.style.getPageOffset(element);var containerPos=goog.style.getPageOffset(container);var containerBorder=goog.style.getBorderBox(container);var relX=elementPos.x-containerPos.x-containerBorder.left;var relY=elementPos.y-containerPos.y-containerBorder.top;var spaceX=container.clientWidth-(element).offsetWidth;var spaceY=container.clientHeight-(element).offsetHeight;var scrollLeft=container.scrollLeft;var scrollTop=container.scrollTop;if(container==goog.dom.getDocument().body||container==goog.dom.getDocument().documentElement){scrollLeft=containerPos.x+containerBorder.left;scrollTop=containerPos.y+containerBorder.top;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)){scrollLeft+=containerBorder.left;scrollTop+=containerBorder.top}}if(opt_center){scrollLeft+=relX-spaceX/2;scrollTop+=relY-spaceY/2}else{scrollLeft+=Math.min(relX,Math.max(relX-spaceX,0));scrollTop+=Math.min(relY,Math.max(relY-spaceY,0))}return new goog.math.Coordinate(scrollLeft,scrollTop)};goog.style.scrollIntoContainerView=function(element,container,opt_center){var offset=goog.style.getContainerOffsetToScrollInto(element,container,opt_center);container.scrollLeft=offset.x;container.scrollTop=offset.y};goog.style.getClientLeftTop=function(el){return new goog.math.Coordinate(el.clientLeft,el.clientTop)};goog.style.getPageOffset=function(el){var doc=goog.dom.getOwnerDocument(el);goog.asserts.assertObject(el,"Parameter is required");var pos=new goog.math.Coordinate(0,0);var viewportElement=goog.style.getClientViewportElement(doc);if(el==viewportElement){return pos}var box=goog.style.getBoundingClientRect_(el);var scrollCoord=goog.dom.getDomHelper(doc).getDocumentScroll();pos.x=box.left+scrollCoord.x;pos.y=box.top+scrollCoord.y;return pos};goog.style.getPageOffsetLeft=function(el){return goog.style.getPageOffset(el).x};goog.style.getPageOffsetTop=function(el){return goog.style.getPageOffset(el).y};goog.style.getFramedPageOffset=function(el,relativeWin){var position=new goog.math.Coordinate(0,0);var currentWin=goog.dom.getWindow(goog.dom.getOwnerDocument(el));var currentEl=el;do{var offset=currentWin==relativeWin?goog.style.getPageOffset(currentEl):goog.style.getClientPositionForElement_(goog.asserts.assert(currentEl));position.x+=offset.x;position.y+=offset.y}while(currentWin&&currentWin!=relativeWin&&currentWin!=currentWin.parent&&(currentEl=currentWin.frameElement)&&(currentWin=currentWin.parent));return position};goog.style.translateRectForAnotherFrame=function(rect,origBase,newBase){if(origBase.getDocument()!=newBase.getDocument()){var body=origBase.getDocument().body;var pos=goog.style.getFramedPageOffset(body,newBase.getWindow());pos=goog.math.Coordinate.difference(pos,goog.style.getPageOffset(body));if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!origBase.isCss1CompatMode()){pos=goog.math.Coordinate.difference(pos,origBase.getDocumentScroll())}rect.left+=pos.x;rect.top+=pos.y}};goog.style.getRelativePosition=function(a,b){var ap=goog.style.getClientPosition(a);var bp=goog.style.getClientPosition(b);return new goog.math.Coordinate(ap.x-bp.x,ap.y-bp.y)};goog.style.getClientPositionForElement_=function(el){var box=goog.style.getBoundingClientRect_(el);return new goog.math.Coordinate(box.left,box.top)};goog.style.getClientPosition=function(el){goog.asserts.assert(el);if(el.nodeType==goog.dom.NodeType.ELEMENT){return goog.style.getClientPositionForElement_((el))}else{var targetEvent=el.changedTouches?el.changedTouches[0]:el;return new goog.math.Coordinate(targetEvent.clientX,targetEvent.clientY)}};goog.style.setPageOffset=function(el,x,opt_y){var cur=goog.style.getPageOffset(el);if(x instanceof goog.math.Coordinate){opt_y=x.y;x=x.x}var dx=x-cur.x;var dy=opt_y-cur.y;goog.style.setPosition(el,(el).offsetLeft+dx,(el).offsetTop+dy)};goog.style.setSize=function(element,w,opt_h){var h;if(w instanceof goog.math.Size){h=w.height;w=w.width}else{if(opt_h==undefined){throw Error("missing height argument")}h=opt_h}goog.style.setWidth(element,(w));goog.style.setHeight(element,h)};goog.style.getPixelStyleValue_=function(value,round){if(typeof value=="number"){value=(round?Math.round(value):value)+"px"}return value};goog.style.setHeight=function(element,height){element.style.height=goog.style.getPixelStyleValue_(height,true)};goog.style.setWidth=function(element,width){element.style.width=goog.style.getPixelStyleValue_(width,true)};goog.style.getSize=function(element){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,(element))};goog.style.evaluateWithTemporaryDisplay_=function(fn,element){if(goog.style.getStyle_(element,"display")!="none"){return fn(element)}var style=element.style;var originalDisplay=style.display;var originalVisibility=style.visibility;var originalPosition=style.position;style.visibility="hidden";style.position="absolute";style.display="inline";var retVal=fn(element);style.display=originalDisplay;style.position=originalPosition;style.visibility=originalVisibility;return retVal};goog.style.getSizeWithDisplay_=function(element){var offsetWidth=(element).offsetWidth;var offsetHeight=(element).offsetHeight;var webkitOffsetsZero=goog.userAgent.WEBKIT&&!offsetWidth&&!offsetHeight;if((!goog.isDef(offsetWidth)||webkitOffsetsZero)&&element.getBoundingClientRect){var clientRect=goog.style.getBoundingClientRect_(element);return new goog.math.Size(clientRect.right-clientRect.left,clientRect.bottom-clientRect.top)}return new goog.math.Size(offsetWidth,offsetHeight)};goog.style.getTransformedSize=function(element){if(!element.getBoundingClientRect){return null}var clientRect=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,element);return new goog.math.Size(clientRect.right-clientRect.left,clientRect.bottom-clientRect.top)};goog.style.getBounds=function(element){var o=goog.style.getPageOffset(element);var s=goog.style.getSize(element);return new goog.math.Rect(o.x,o.y,s.width,s.height)};goog.style.toCamelCase=function(selector){return goog.string.toCamelCase(String(selector))};goog.style.toSelectorCase=function(selector){return goog.string.toSelectorCase(selector)};goog.style.getOpacity=function(el){var style=el.style;var result="";if("opacity" in style){result=style.opacity}else{if("MozOpacity" in style){result=style.MozOpacity}else{if("filter" in style){var match=style.filter.match(/alpha\(opacity=([\d.]+)\)/);if(match){result=String(match[1]/100)}}}}return result==""?result:Number(result)};goog.style.setOpacity=function(el,alpha){var style=el.style;if("opacity" in style){style.opacity=alpha}else{if("MozOpacity" in style){style.MozOpacity=alpha}else{if("filter" in style){if(alpha===""){style.filter=""}else{style.filter="alpha(opacity="+alpha*100+")"}}}}};goog.style.setTransparentBackgroundImage=function(el,src){var style=el.style;if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+src+'", sizingMethod="crop")'}else{style.backgroundImage="url("+src+")";style.backgroundPosition="top left";style.backgroundRepeat="no-repeat"}};goog.style.clearTransparentBackgroundImage=function(el){var style=el.style;if("filter" in style){style.filter=""}else{style.backgroundImage="none"}};goog.style.showElement=function(el,display){goog.style.setElementShown(el,display)};goog.style.setElementShown=function(el,isShown){el.style.display=isShown?"":"none"};goog.style.isElementShown=function(el){return el.style.display!="none"};goog.style.installStyles=function(stylesString,opt_node){var dh=goog.dom.getDomHelper(opt_node);var styleSheet=null;var doc=dh.getDocument();if(goog.userAgent.IE&&doc.createStyleSheet){styleSheet=doc.createStyleSheet();goog.style.setStyles(styleSheet,stylesString)}else{var head=dh.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0];if(!head){var body=dh.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0];head=dh.createDom(goog.dom.TagName.HEAD);body.parentNode.insertBefore(head,body)}styleSheet=dh.createDom(goog.dom.TagName.STYLE);goog.style.setStyles(styleSheet,stylesString);dh.appendChild(head,styleSheet)}return styleSheet};goog.style.uninstallStyles=function(styleSheet){var node=styleSheet.ownerNode||styleSheet.owningElement||(styleSheet);goog.dom.removeNode(node)};goog.style.setStyles=function(element,stylesString){if(goog.userAgent.IE&&goog.isDef(element.cssText)){element.cssText=stylesString}else{element.innerHTML=stylesString}};goog.style.setPreWrap=function(el){var style=el.style;if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){style.whiteSpace="pre";style.wordWrap="break-word"}else{if(goog.userAgent.GECKO){style.whiteSpace="-moz-pre-wrap"}else{style.whiteSpace="pre-wrap"}}};goog.style.setInlineBlock=function(el){var style=el.style;style.position="relative";if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){style.zoom="1";style.display="inline"}else{style.display="inline-block"}};goog.style.isRightToLeft=function(el){return"rtl"==goog.style.getStyle_(el,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;goog.style.isUnselectable=function(el){if(goog.style.unselectableStyle_){return el.style[goog.style.unselectableStyle_].toLowerCase()=="none"}else{if(goog.userAgent.IE||goog.userAgent.OPERA){return el.getAttribute("unselectable")=="on"}}return false};goog.style.setUnselectable=function(el,unselectable,opt_noRecurse){var descendants=!opt_noRecurse?el.getElementsByTagName("*"):null;var name=goog.style.unselectableStyle_;if(name){var value=unselectable?"none":"";if(el.style){el.style[name]=value}if(descendants){for(var i=0,descendant;descendant=descendants[i];i++){if(descendant.style){descendant.style[name]=value}}}}else{if(goog.userAgent.IE||goog.userAgent.OPERA){var value=unselectable?"on":"";el.setAttribute("unselectable",value);if(descendants){for(var i=0,descendant;descendant=descendants[i];i++){descendant.setAttribute("unselectable",value)}}}}};goog.style.getBorderBoxSize=function(element){return new goog.math.Size((element).offsetWidth,(element).offsetHeight)};goog.style.setBorderBoxSize=function(element,size){var doc=goog.dom.getOwnerDocument(element);var isCss1CompatMode=goog.dom.getDomHelper(doc).isCss1CompatMode();if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(!isCss1CompatMode||!goog.userAgent.isVersionOrHigher("8"))){var style=element.style;if(isCss1CompatMode){var paddingBox=goog.style.getPaddingBox(element);var borderBox=goog.style.getBorderBox(element);style.pixelWidth=size.width-borderBox.left-paddingBox.left-paddingBox.right-borderBox.right;style.pixelHeight=size.height-borderBox.top-paddingBox.top-paddingBox.bottom-borderBox.bottom}else{style.pixelWidth=size.width;style.pixelHeight=size.height}}else{goog.style.setBoxSizingSize_(element,size,"border-box")}};goog.style.getContentBoxSize=function(element){var doc=goog.dom.getOwnerDocument(element);var ieCurrentStyle=goog.userAgent.IE&&element.currentStyle;if(ieCurrentStyle&&goog.dom.getDomHelper(doc).isCss1CompatMode()&&ieCurrentStyle.width!="auto"&&ieCurrentStyle.height!="auto"&&!ieCurrentStyle.boxSizing){var width=goog.style.getIePixelValue_(element,ieCurrentStyle.width,"width","pixelWidth");var height=goog.style.getIePixelValue_(element,ieCurrentStyle.height,"height","pixelHeight");return new goog.math.Size(width,height)}else{var borderBoxSize=goog.style.getBorderBoxSize(element);var paddingBox=goog.style.getPaddingBox(element);var borderBox=goog.style.getBorderBox(element);return new goog.math.Size(borderBoxSize.width-borderBox.left-paddingBox.left-paddingBox.right-borderBox.right,borderBoxSize.height-borderBox.top-paddingBox.top-paddingBox.bottom-borderBox.bottom)}};goog.style.setContentBoxSize=function(element,size){var doc=goog.dom.getOwnerDocument(element);var isCss1CompatMode=goog.dom.getDomHelper(doc).isCss1CompatMode();if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(!isCss1CompatMode||!goog.userAgent.isVersionOrHigher("8"))){var style=element.style;if(isCss1CompatMode){style.pixelWidth=size.width;style.pixelHeight=size.height}else{var paddingBox=goog.style.getPaddingBox(element);var borderBox=goog.style.getBorderBox(element);style.pixelWidth=size.width+borderBox.left+paddingBox.left+paddingBox.right+borderBox.right;style.pixelHeight=size.height+borderBox.top+paddingBox.top+paddingBox.bottom+borderBox.bottom}}else{goog.style.setBoxSizingSize_(element,size,"content-box")}};goog.style.setBoxSizingSize_=function(element,size,boxSizing){var style=element.style;if(goog.userAgent.GECKO){style.MozBoxSizing=boxSizing}else{if(goog.userAgent.WEBKIT){style.WebkitBoxSizing=boxSizing}else{style.boxSizing=boxSizing}}style.width=Math.max(size.width,0)+"px";style.height=Math.max(size.height,0)+"px"};goog.style.getIePixelValue_=function(element,value,name,pixelName){if(/^\d+px?$/.test(value)){return parseInt(value,10)}else{var oldStyleValue=element.style[name];var oldRuntimeValue=element.runtimeStyle[name];element.runtimeStyle[name]=element.currentStyle[name];element.style[name]=value;var pixelValue=element.style[pixelName];element.style[name]=oldStyleValue;element.runtimeStyle[name]=oldRuntimeValue;return pixelValue}};goog.style.getIePixelDistance_=function(element,propName){var value=goog.style.getCascadedStyle(element,propName);return value?goog.style.getIePixelValue_(element,value,"left","pixelLeft"):0};goog.style.getBox_=function(element,stylePrefix){if(goog.userAgent.IE){var left=goog.style.getIePixelDistance_(element,stylePrefix+"Left");var right=goog.style.getIePixelDistance_(element,stylePrefix+"Right");var top=goog.style.getIePixelDistance_(element,stylePrefix+"Top");var bottom=goog.style.getIePixelDistance_(element,stylePrefix+"Bottom");return new goog.math.Box(top,right,bottom,left)}else{var left=goog.style.getComputedStyle(element,stylePrefix+"Left");var right=goog.style.getComputedStyle(element,stylePrefix+"Right");var top=goog.style.getComputedStyle(element,stylePrefix+"Top");var bottom=goog.style.getComputedStyle(element,stylePrefix+"Bottom");return new goog.math.Box(parseFloat(top),parseFloat(right),parseFloat(bottom),parseFloat(left))}};goog.style.getPaddingBox=function(element){return goog.style.getBox_(element,"padding")};goog.style.getMarginBox=function(element){return goog.style.getBox_(element,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(element,prop){if(goog.style.getCascadedStyle(element,prop+"Style")=="none"){return 0}var width=goog.style.getCascadedStyle(element,prop+"Width");if(width in goog.style.ieBorderWidthKeywords_){return goog.style.ieBorderWidthKeywords_[width]}return goog.style.getIePixelValue_(element,width,"left","pixelLeft")};goog.style.getBorderBox=function(element){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var left=goog.style.getIePixelBorder_(element,"borderLeft");var right=goog.style.getIePixelBorder_(element,"borderRight");var top=goog.style.getIePixelBorder_(element,"borderTop");var bottom=goog.style.getIePixelBorder_(element,"borderBottom");return new goog.math.Box(top,right,bottom,left)}else{var left=goog.style.getComputedStyle(element,"borderLeftWidth");var right=goog.style.getComputedStyle(element,"borderRightWidth");var top=goog.style.getComputedStyle(element,"borderTopWidth");var bottom=goog.style.getComputedStyle(element,"borderBottomWidth");return new goog.math.Box(parseFloat(top),parseFloat(right),parseFloat(bottom),parseFloat(left))}};goog.style.getFontFamily=function(el){var doc=goog.dom.getOwnerDocument(el);var font="";if(doc.body.createTextRange&&goog.dom.contains(doc,el)){var range=doc.body.createTextRange();range.moveToElementText(el);try{font=range.queryCommandValue("FontName")}catch(e){font=""}}if(!font){font=goog.style.getStyle_(el,"fontFamily")}var fontsArray=font.split(",");if(fontsArray.length>1){font=fontsArray[0]}return goog.string.stripQuotes(font,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;goog.style.getLengthUnits=function(value){var units=value.match(goog.style.lengthUnitRegex_);return units&&units[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};goog.style.getFontSize=function(el){var fontSize=goog.style.getStyle_(el,"fontSize");var sizeUnits=goog.style.getLengthUnits(fontSize);if(fontSize&&"px"==sizeUnits){return parseInt(fontSize,10)}if(goog.userAgent.IE){if(sizeUnits in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_){return goog.style.getIePixelValue_(el,fontSize,"left","pixelLeft")}else{if(el.parentNode&&el.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&sizeUnits in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_){var parentElement=(el.parentNode);var parentSize=goog.style.getStyle_(parentElement,"fontSize");return goog.style.getIePixelValue_(parentElement,fontSize==parentSize?"1em":fontSize,"left","pixelLeft")}}}var sizeElement=goog.dom.createDom(goog.dom.TagName.SPAN,{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(el,sizeElement);fontSize=sizeElement.offsetHeight;goog.dom.removeNode(sizeElement);return fontSize};goog.style.parseStyleAttribute=function(value){var result={};goog.array.forEach(value.split(/\s*;\s*/),function(pair){var keyValue=pair.split(/\s*:\s*/);if(keyValue.length==2){result[goog.string.toCamelCase(keyValue[0].toLowerCase())]=keyValue[1]}});return result};goog.style.toStyleAttribute=function(obj){var buffer=[];goog.object.forEach(obj,function(value,key){buffer.push(goog.string.toSelectorCase(key),":",value,";")});return buffer.join("")};goog.style.setFloat=function(el,value){el.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=value};goog.style.getFloat=function(el){return el.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};goog.style.getScrollbarWidth=function(opt_className){var outerDiv=goog.dom.createElement(goog.dom.TagName.DIV);if(opt_className){outerDiv.className=opt_className}outerDiv.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";var innerDiv=goog.dom.createElement(goog.dom.TagName.DIV);goog.style.setSize(innerDiv,"200px","200px");outerDiv.appendChild(innerDiv);goog.dom.appendChild(goog.dom.getDocument().body,outerDiv);var width=outerDiv.offsetWidth-outerDiv.clientWidth;goog.dom.removeNode(outerDiv);return width};goog.style.MATRIX_TRANSLATION_REGEX_=new RegExp("matrix\\([0-9\\.\\-]+, [0-9\\.\\-]+, [0-9\\.\\-]+, [0-9\\.\\-]+, ([0-9\\.\\-]+)p?x?, ([0-9\\.\\-]+)p?x?\\)");goog.style.getCssTranslation=function(element){var transform=goog.style.getComputedTransform(element);if(!transform){return new goog.math.Coordinate(0,0)}var matches=transform.match(goog.style.MATRIX_TRANSLATION_REGEX_);if(!matches){return new goog.math.Coordinate(0,0)}return new goog.math.Coordinate(parseFloat(matches[1]),parseFloat(matches[2]))};goog.provide("ol.MapEvent");goog.provide("ol.MapEventType");goog.require("goog.events.Event");ol.MapEventType={POSTRENDER:"postrender",MOVEEND:"moveend"};ol.MapEvent=function(type,map,opt_frameState){goog.base(this,type);this.map=map;this.frameState=goog.isDef(opt_frameState)?opt_frameState:null};goog.inherits(ol.MapEvent,goog.events.Event);goog.provide("ol.control.Control");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events");goog.require("ol.MapEventType");goog.require("ol.Object");ol.control.Control=function(options){goog.base(this);this.element=goog.isDef(options.element)?options.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=goog.isDef(options.render)?options.render:goog.nullFunction;if(goog.isDef(options.target)){this.setTarget(options.target)}};goog.inherits(ol.control.Control,ol.Object);ol.control.Control.prototype.disposeInternal=function(){goog.dom.removeNode(this.element);goog.base(this,"disposeInternal")};ol.control.Control.prototype.getMap=function(){return this.map_};ol.control.Control.prototype.setMap=function(map){if(!goog.isNull(this.map_)){goog.dom.removeNode(this.element)}if(!goog.array.isEmpty(this.listenerKeys)){goog.array.forEach(this.listenerKeys,goog.events.unlistenByKey);this.listenerKeys.length=0}this.map_=map;if(!goog.isNull(this.map_)){var target=!goog.isNull(this.target_)?this.target_:map.getOverlayContainerStopEvent();goog.dom.appendChild(target,this.element);if(this.render!==goog.nullFunction){this.listenerKeys.push(goog.events.listen(map,ol.MapEventType.POSTRENDER,this.render,false,this))}map.render()}};ol.control.Control.prototype.setTarget=function(target){this.target_=goog.dom.getElement(target)};goog.provide("ol.css");ol.css.CLASS_HIDDEN="ol-hidden";ol.css.CLASS_UNSELECTABLE="ol-unselectable";ol.css.CLASS_UNSUPPORTED="ol-unsupported";ol.css.CLASS_CONTROL="ol-control";goog.provide("ol.structs.LRUCache");goog.require("goog.asserts");goog.require("goog.object");ol.structs.LRUCache=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.structs.LRUCache.prototype.assertValid=function(){if(this.count_===0){goog.asserts.assert(goog.object.isEmpty(this.entries_),"entries must be an empty object (count = 0)");goog.asserts.assert(goog.isNull(this.oldest_),"oldest must be null (count = 0)");goog.asserts.assert(goog.isNull(this.newest_),"newest must be null (count = 0)")}else{goog.asserts.assert(goog.object.getCount(this.entries_)==this.count_,"number of entries matches count");goog.asserts.assert(!goog.isNull(this.oldest_),"we have an oldest entry");goog.asserts.assert(goog.isNull(this.oldest_.older),"no entry is older than oldest");goog.asserts.assert(!goog.isNull(this.newest_),"we have a newest entry");goog.asserts.assert(goog.isNull(this.newest_.newer),"no entry is newer than newest");var i,entry;var older=null;i=0;for(entry=this.oldest_;!goog.isNull(entry);entry=entry.newer){goog.asserts.assert(entry.older===older,"entry.older links to correct older");older=entry;++i}goog.asserts.assert(i==this.count_,"iterated correct amount of times");var newer=null;i=0;for(entry=this.newest_;!goog.isNull(entry);entry=entry.older){goog.asserts.assert(entry.newer===newer,"entry.newer links to correct newer");newer=entry;++i}goog.asserts.assert(i==this.count_,"iterated correct amount of times")}};ol.structs.LRUCache.prototype.clear=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.structs.LRUCache.prototype.containsKey=function(key){return this.entries_.hasOwnProperty(key)};ol.structs.LRUCache.prototype.forEach=function(f,opt_this){var entry=this.oldest_;while(!goog.isNull(entry)){f.call(opt_this,entry.value_,entry.key_,this);entry=entry.newer}};ol.structs.LRUCache.prototype.get=function(key){var entry=this.entries_[key];goog.asserts.assert(goog.isDef(entry),"an entry exists for key %s",key);if(entry===this.newest_){return entry.value_}else{if(entry===this.oldest_){this.oldest_=this.oldest_.newer;this.oldest_.older=null}else{entry.newer.older=entry.older;entry.older.newer=entry.newer}}entry.newer=null;entry.older=this.newest_;this.newest_.newer=entry;this.newest_=entry;return entry.value_};ol.structs.LRUCache.prototype.getCount=function(){return this.count_};ol.structs.LRUCache.prototype.getKeys=function(){var keys=new Array(this.count_);var i=0;var entry;for(entry=this.newest_;!goog.isNull(entry);entry=entry.older){keys[i++]=entry.key_}goog.asserts.assert(i==this.count_,"iterated correct number of times");return keys};ol.structs.LRUCache.prototype.getValues=function(){var values=new Array(this.count_);var i=0;var entry;for(entry=this.newest_;!goog.isNull(entry);entry=entry.older){values[i++]=entry.value_}goog.asserts.assert(i==this.count_,"iterated correct number of times");return values};ol.structs.LRUCache.prototype.peekLast=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");return this.oldest_.value_};ol.structs.LRUCache.prototype.peekLastKey=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");return this.oldest_.key_};ol.structs.LRUCache.prototype.pop=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");goog.asserts.assert(!goog.isNull(this.newest_),"newest must not be null");var entry=this.oldest_;goog.asserts.assert(entry.key_ in this.entries_,"oldest is indexed in entries");delete this.entries_[entry.key_];if(!goog.isNull(entry.newer)){entry.newer.older=null}this.oldest_=entry.newer;if(goog.isNull(this.oldest_)){this.newest_=null}--this.count_;return entry.value_};ol.structs.LRUCache.prototype.set=function(key,value){goog.asserts.assert(!(key in {}),'key is not a standard property of objects (e.g. "__proto__")');goog.asserts.assert(!(key in this.entries_),"key is not used already");var entry={key_:key,newer:null,older:this.newest_,value_:value};if(goog.isNull(this.newest_)){this.oldest_=entry}else{this.newest_.newer=entry}this.newest_=entry;this.entries_[key]=entry;++this.count_};ol.structs.LRUCacheEntry;goog.provide("ol.TileCache");goog.require("ol");goog.require("ol.TileRange");goog.require("ol.structs.LRUCache");goog.require("ol.tilecoord");ol.TileCache=function(opt_highWaterMark){goog.base(this);this.highWaterMark_=goog.isDef(opt_highWaterMark)?opt_highWaterMark:ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK};goog.inherits(ol.TileCache,ol.structs.LRUCache);ol.TileCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark_};ol.TileCache.prototype.expireCache=function(usedTiles){var tile,zKey;while(this.canExpireCache()){tile=this.peekLast();zKey=tile.tileCoord[0].toString();if(zKey in usedTiles&&usedTiles[zKey].contains(tile.tileCoord)){break}else{this.pop().dispose()}}};ol.TileCache.prototype.pruneTileRange=function(tileRange){var i=this.getCount(),key;while(i--){key=this.peekLastKey();if(tileRange.contains(ol.tilecoord.createFromString(key))){this.pop().dispose()}else{this.get(key)}}};goog.provide("ol.Tile");goog.provide("ol.TileState");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("ol.TileCoord");ol.TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};ol.Tile=function(tileCoord,state){goog.base(this);this.tileCoord=tileCoord;this.state=state};goog.inherits(ol.Tile,goog.events.EventTarget);ol.Tile.prototype.changed=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.Tile.prototype.getImage=goog.abstractMethod;ol.Tile.prototype.getKey=function(){return goog.getUid(this).toString()};ol.Tile.prototype.getTileCoord=function(){return this.tileCoord};ol.Tile.prototype.getState=function(){return this.state};ol.Tile.prototype.load=goog.abstractMethod;goog.provide("ol.source.Source");goog.provide("ol.source.State");goog.require("ol.Attribution");goog.require("ol.Object");goog.require("ol.proj");ol.source.State={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};ol.source.SourceOptions;ol.source.Source=function(options){goog.base(this);this.projection_=ol.proj.get(options.projection);this.attributions_=goog.isDef(options.attributions)?options.attributions:null;this.logo_=options.logo;this.state_=goog.isDef(options.state)?options.state:ol.source.State.READY;this.wrapX_=goog.isDef(options.wrapX)?options.wrapX:false};goog.inherits(ol.source.Source,ol.Object);ol.source.Source.prototype.forEachFeatureAtCoordinate=goog.nullFunction;ol.source.Source.prototype.getAttributions=function(){return this.attributions_};ol.source.Source.prototype.getLogo=function(){return this.logo_};ol.source.Source.prototype.getProjection=function(){return this.projection_};ol.source.Source.prototype.getResolutions=goog.abstractMethod;ol.source.Source.prototype.getState=function(){return this.state_};ol.source.Source.prototype.getWrapX=function(){return this.wrapX_};ol.source.Source.prototype.setAttributions=function(attributions){this.attributions_=attributions;this.changed()};ol.source.Source.prototype.setLogo=function(logo){this.logo_=logo};ol.source.Source.prototype.setState=function(state){this.state_=state;this.changed()};ol.source.Source.prototype.setProjection=function(projection){this.projection_=projection};goog.provide("ol.tilegrid.TileGrid");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.TileCoord");goog.require("ol.TileRange");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.extent.Corner");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");goog.require("ol.size");goog.require("ol.tilecoord");ol.tilegrid.TileGrid=function(options){this.minZoom=goog.isDef(options.minZoom)?options.minZoom:0;this.resolutions_=options.resolutions;goog.asserts.assert(goog.array.isSorted(this.resolutions_,function(a,b){return b-a},true),"resolutions must be sorted in descending order");this.maxZoom=this.resolutions_.length-1;this.origin_=goog.isDef(options.origin)?options.origin:null;this.origins_=null;if(goog.isDef(options.origins)){this.origins_=options.origins;goog.asserts.assert(this.origins_.length==this.resolutions_.length,"number of origins and resolutions must be equal")}var extent=options.extent;if(goog.isDef(extent)&&goog.isNull(this.origin_)&&goog.isNull(this.origins_)){this.origin_=ol.extent.getTopLeft(extent)}goog.asserts.assert((goog.isNull(this.origin_)&&!goog.isNull(this.origins_))||(!goog.isNull(this.origin_)&&goog.isNull(this.origins_)),"either origin or origins must be configured, never both");this.tileSizes_=null;if(goog.isDef(options.tileSizes)){this.tileSizes_=options.tileSizes;goog.asserts.assert(this.tileSizes_.length==this.resolutions_.length,"number of tileSizes and resolutions must be equal")}this.tileSize_=goog.isDef(options.tileSize)?options.tileSize:goog.isNull(this.tileSizes_)?ol.DEFAULT_TILE_SIZE:null;goog.asserts.assert((goog.isNull(this.tileSize_)&&!goog.isNull(this.tileSizes_))||(!goog.isNull(this.tileSize_)&&goog.isNull(this.tileSizes_)),"either tileSize or tileSizes must be configured, never both");this.extent_=goog.isDef(extent)?extent:null;this.fullTileRanges_=null;if(goog.isDef(options.sizes)){goog.asserts.assert(options.sizes.length==this.resolutions_.length,"number of sizes and resolutions must be equal");this.fullTileRanges_=goog.array.map(options.sizes,function(size,z){goog.asserts.assert(size[0]!==0,"width must not be 0");goog.asserts.assert(size[1]!==0,"height must not be 0");var tileRange=new ol.TileRange(Math.min(0,size[0]),Math.max(size[0]-1,-1),Math.min(0,size[1]),Math.max(size[1]-1,-1));if(this.minZoom<=z&&z<=this.maxZoom&&goog.isDef(extent)){goog.asserts.assert(tileRange.containsTileRange(this.getTileRangeForExtentAndZ(extent,z)),"extent tile range must not exceed tilegrid width and height")}return tileRange},this)}else{if(goog.isDefAndNotNull(extent)){this.calculateTileRanges_(extent)}}this.tmpSize_=[0,0]};ol.tilegrid.TileGrid.tmpTileCoord_=[0,0,0];ol.tilegrid.TileGrid.prototype.forEachTileCoordParentTileRange=function(tileCoord,callback,opt_this,opt_tileRange,opt_extent){var tileCoordExtent=this.getTileCoordExtent(tileCoord,opt_extent);var z=tileCoord[0]-1;while(z>=this.minZoom){if(callback.call(opt_this,z,this.getTileRangeForExtentAndZ(tileCoordExtent,z,opt_tileRange))){return true}--z}return false};ol.tilegrid.TileGrid.prototype.getExtent=function(){return this.extent_};ol.tilegrid.TileGrid.prototype.getMaxZoom=function(){return this.maxZoom};ol.tilegrid.TileGrid.prototype.getMinZoom=function(){return this.minZoom};ol.tilegrid.TileGrid.prototype.getOrigin=function(z){if(!goog.isNull(this.origin_)){return this.origin_}else{goog.asserts.assert(!goog.isNull(this.origins_),"origins cannot be null if origin is null");goog.asserts.assert(this.minZoom<=z&&z<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,z,this.maxZoom);return this.origins_[z]}};ol.tilegrid.TileGrid.prototype.getResolution=function(z){goog.asserts.assert(this.minZoom<=z&&z<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,z,this.maxZoom);return this.resolutions_[z]};ol.tilegrid.TileGrid.prototype.getResolutions=function(){return this.resolutions_};ol.tilegrid.TileGrid.prototype.getTileCoordChildTileRange=function(tileCoord,opt_tileRange,opt_extent){if(tileCoord[0]<this.maxZoom){var tileCoordExtent=this.getTileCoordExtent(tileCoord,opt_extent);return this.getTileRangeForExtentAndZ(tileCoordExtent,tileCoord[0]+1,opt_tileRange)}else{return null}};ol.tilegrid.TileGrid.prototype.getTileRangeExtent=function(z,tileRange,opt_extent){var origin=this.getOrigin(z);var resolution=this.getResolution(z);var tileSize=ol.size.toSize(this.getTileSize(z),this.tmpSize_);var minX=origin[0]+tileRange.minX*tileSize[0]*resolution;var maxX=origin[0]+(tileRange.maxX+1)*tileSize[0]*resolution;var minY=origin[1]+tileRange.minY*tileSize[1]*resolution;var maxY=origin[1]+(tileRange.maxY+1)*tileSize[1]*resolution;return ol.extent.createOrUpdate(minX,minY,maxX,maxY,opt_extent)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndResolution=function(extent,resolution,opt_tileRange){var tileCoord=ol.tilegrid.TileGrid.tmpTileCoord_;this.getTileCoordForXYAndResolution_(extent[0],extent[1],resolution,false,tileCoord);var minX=tileCoord[1];var minY=tileCoord[2];this.getTileCoordForXYAndResolution_(extent[2],extent[3],resolution,true,tileCoord);return ol.TileRange.createOrUpdate(minX,tileCoord[1],minY,tileCoord[2],opt_tileRange)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndZ=function(extent,z,opt_tileRange){var resolution=this.getResolution(z);return this.getTileRangeForExtentAndResolution(extent,resolution,opt_tileRange)};ol.tilegrid.TileGrid.prototype.getTileCoordCenter=function(tileCoord){var origin=this.getOrigin(tileCoord[0]);var resolution=this.getResolution(tileCoord[0]);var tileSize=ol.size.toSize(this.getTileSize(tileCoord[0]),this.tmpSize_);return[origin[0]+(tileCoord[1]+0.5)*tileSize[0]*resolution,origin[1]+(tileCoord[2]+0.5)*tileSize[1]*resolution]};ol.tilegrid.TileGrid.prototype.getTileCoordExtent=function(tileCoord,opt_extent){var origin=this.getOrigin(tileCoord[0]);var resolution=this.getResolution(tileCoord[0]);var tileSize=ol.size.toSize(this.getTileSize(tileCoord[0]),this.tmpSize_);var minX=origin[0]+tileCoord[1]*tileSize[0]*resolution;var minY=origin[1]+tileCoord[2]*tileSize[1]*resolution;var maxX=minX+tileSize[0]*resolution;var maxY=minY+tileSize[1]*resolution;return ol.extent.createOrUpdate(minX,minY,maxX,maxY,opt_extent)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution=function(coordinate,resolution,opt_tileCoord){return this.getTileCoordForXYAndResolution_(coordinate[0],coordinate[1],resolution,false,opt_tileCoord)};ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndResolution_=function(x,y,resolution,reverseIntersectionPolicy,opt_tileCoord){var z=this.getZForResolution(resolution);var scale=resolution/this.getResolution(z);var origin=this.getOrigin(z);var tileSize=ol.size.toSize(this.getTileSize(z),this.tmpSize_);var adjustX=reverseIntersectionPolicy?0.5:0;var adjustY=reverseIntersectionPolicy?0:0.5;var xFromOrigin=Math.floor((x-origin[0])/resolution+adjustX);var yFromOrigin=Math.floor((y-origin[1])/resolution+adjustY);var tileCoordX=scale*xFromOrigin/tileSize[0];var tileCoordY=scale*yFromOrigin/tileSize[1];if(reverseIntersectionPolicy){tileCoordX=Math.ceil(tileCoordX)-1;tileCoordY=Math.ceil(tileCoordY)-1}else{tileCoordX=Math.floor(tileCoordX);tileCoordY=Math.floor(tileCoordY)}return ol.tilecoord.createOrUpdate(z,tileCoordX,tileCoordY,opt_tileCoord)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ=function(coordinate,z,opt_tileCoord){var resolution=this.getResolution(z);return this.getTileCoordForXYAndResolution_(coordinate[0],coordinate[1],resolution,false,opt_tileCoord)};ol.tilegrid.TileGrid.prototype.getTileCoordResolution=function(tileCoord){goog.asserts.assert(this.minZoom<=tileCoord[0]&&tileCoord[0]<=this.maxZoom,"z of given tilecoord is not in allowed range (%s <= %s <= %s",this.minZoom,tileCoord[0],this.maxZoom);return this.resolutions_[tileCoord[0]]};ol.tilegrid.TileGrid.prototype.getTileSize=function(z){if(!goog.isNull(this.tileSize_)){return this.tileSize_}else{goog.asserts.assert(!goog.isNull(this.tileSizes_),"tileSizes cannot be null if tileSize is null");goog.asserts.assert(this.minZoom<=z&&z<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,z,this.maxZoom);return this.tileSizes_[z]}};ol.tilegrid.TileGrid.prototype.getFullTileRange=function(z){if(goog.isNull(this.fullTileRanges_)){return null}else{goog.asserts.assert(this.minZoom<=z&&z<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,z,this.maxZoom);return this.fullTileRanges_[z]}};ol.tilegrid.TileGrid.prototype.getZForResolution=function(resolution){var z=ol.array.linearFindNearest(this.resolutions_,resolution,0);return goog.math.clamp(z,this.minZoom,this.maxZoom)};ol.tilegrid.TileGrid.prototype.calculateTileRanges_=function(extent){var length=this.resolutions_.length;var fullTileRanges=new Array(length);for(var z=this.minZoom;z<length;++z){fullTileRanges[z]=this.getTileRangeForExtentAndZ(extent,z)}this.fullTileRanges_=fullTileRanges};ol.tilegrid.getForProjection=function(projection){var tileGrid=projection.getDefaultTileGrid();if(goog.isNull(tileGrid)){tileGrid=ol.tilegrid.createForProjection(projection);projection.setDefaultTileGrid(tileGrid)}return tileGrid};ol.tilegrid.createForExtent=function(extent,opt_maxZoom,opt_tileSize,opt_corner){var corner=goog.isDef(opt_corner)?opt_corner:ol.extent.Corner.TOP_LEFT;var resolutions=ol.tilegrid.resolutionsFromExtent(extent,opt_maxZoom,opt_tileSize);return new ol.tilegrid.TileGrid({extent:extent,origin:ol.extent.getCorner(extent,corner),resolutions:resolutions,tileSize:opt_tileSize})};ol.tilegrid.createXYZ=function(opt_options){var options=({});goog.object.extend(options,goog.isDef(opt_options)?opt_options:({}));if(!goog.isDef(options.extent)){options.extent=ol.proj.get("EPSG:3857").getExtent()}options.resolutions=ol.tilegrid.resolutionsFromExtent(options.extent,options.maxZoom,options.tileSize);delete options.maxZoom;return new ol.tilegrid.TileGrid(options)};ol.tilegrid.resolutionsFromExtent=function(extent,opt_maxZoom,opt_tileSize){var maxZoom=goog.isDef(opt_maxZoom)?opt_maxZoom:ol.DEFAULT_MAX_ZOOM;var height=ol.extent.getHeight(extent);var width=ol.extent.getWidth(extent);var tileSize=ol.size.toSize(goog.isDef(opt_tileSize)?opt_tileSize:ol.DEFAULT_TILE_SIZE);var maxResolution=Math.max(width/tileSize[0],height/tileSize[1]);var length=maxZoom+1;var resolutions=new Array(length);for(var z=0;z<length;++z){resolutions[z]=maxResolution/Math.pow(2,z)}return resolutions};ol.tilegrid.createForProjection=function(projection,opt_maxZoom,opt_tileSize,opt_corner){var extent=ol.tilegrid.extentFromProjection(projection);return ol.tilegrid.createForExtent(extent,opt_maxZoom,opt_tileSize,opt_corner)};ol.tilegrid.extentFromProjection=function(projection){projection=ol.proj.get(projection);var extent=projection.getExtent();if(goog.isNull(extent)){var half=180*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/projection.getMetersPerUnit();extent=ol.extent.createOrUpdate(-half,-half,half,half)}return extent};goog.provide("ol.source.Tile");goog.provide("ol.source.TileEvent");goog.provide("ol.source.TileOptions");goog.require("goog.asserts");goog.require("goog.events.Event");goog.require("ol.Attribution");goog.require("ol.Extent");goog.require("ol.TileCache");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.size");goog.require("ol.source.Source");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");ol.source.TileOptions;ol.source.Tile=function(options){goog.base(this,{attributions:options.attributions,extent:options.extent,logo:options.logo,projection:options.projection,state:options.state,wrapX:options.wrapX});this.opaque_=goog.isDef(options.opaque)?options.opaque:false;this.tilePixelRatio_=goog.isDef(options.tilePixelRatio)?options.tilePixelRatio:1;this.tileGrid=goog.isDef(options.tileGrid)?options.tileGrid:null;this.tileCache=new ol.TileCache();this.tmpSize=[0,0]};goog.inherits(ol.source.Tile,ol.source.Source);ol.source.Tile.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};ol.source.Tile.prototype.expireCache=function(usedTiles){this.tileCache.expireCache(usedTiles)};ol.source.Tile.prototype.forEachLoadedTile=function(z,tileRange,callback){var covered=true;var tile,tileCoordKey,loaded;for(var x=tileRange.minX;x<=tileRange.maxX;++x){for(var y=tileRange.minY;y<=tileRange.maxY;++y){tileCoordKey=this.getKeyZXY(z,x,y);loaded=false;if(this.tileCache.containsKey(tileCoordKey)){tile=(this.tileCache.get(tileCoordKey));loaded=tile.getState()===ol.TileState.LOADED;if(loaded){loaded=(callback(tile)!==false)}}if(!loaded){covered=false}}}return covered};ol.source.Tile.prototype.getGutter=function(){return 0};ol.source.Tile.prototype.getKeyZXY=ol.tilecoord.getKeyZXY;ol.source.Tile.prototype.getOpaque=function(){return this.opaque_};ol.source.Tile.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};ol.source.Tile.prototype.getTile=goog.abstractMethod;ol.source.Tile.prototype.getTileGrid=function(){return this.tileGrid};ol.source.Tile.prototype.getTileGridForProjection=function(projection){if(goog.isNull(this.tileGrid)){return ol.tilegrid.getForProjection(projection)}else{return this.tileGrid}};ol.source.Tile.prototype.getTilePixelSize=function(z,pixelRatio,projection){var tileGrid=this.getTileGridForProjection(projection);return ol.size.scale(ol.size.toSize(tileGrid.getTileSize(z),this.tmpSize),this.tilePixelRatio_,this.tmpSize)};ol.source.Tile.prototype.getTileCoordForTileUrlFunction=function(tileCoord,opt_projection){var projection=goog.isDef(opt_projection)?opt_projection:this.getProjection();var tileGrid=this.getTileGridForProjection(projection);goog.asserts.assert(!goog.isNull(tileGrid),"tile grid needed");if(this.getWrapX()&&projection.isGlobal()){tileCoord=ol.tilecoord.wrapX(tileCoord,tileGrid,projection)}return ol.tilecoord.withinExtentAndZ(tileCoord,tileGrid)?tileCoord:null};ol.source.Tile.prototype.useTile=goog.nullFunction;ol.source.TileEvent=function(type,tile){goog.base(this,type);this.tile=tile};goog.inherits(ol.source.TileEvent,goog.events.Event);ol.source.TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};goog.provide("ol.control.Attribution");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("goog.style");goog.require("ol.Attribution");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.source.Tile");ol.control.Attribution=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.ulElement_=goog.dom.createElement(goog.dom.TagName.UL);this.logoLi_=goog.dom.createElement(goog.dom.TagName.LI);goog.dom.appendChild(this.ulElement_,this.logoLi_);goog.style.setElementShown(this.logoLi_,false);this.collapsed_=goog.isDef(options.collapsed)?options.collapsed:true;this.collapsible_=goog.isDef(options.collapsible)?options.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var className=goog.isDef(options.className)?options.className:"ol-attribution";var tipLabel=goog.isDef(options.tipLabel)?options.tipLabel:"Attributions";var collapseLabel=goog.isDef(options.collapseLabel)?options.collapseLabel:"\u00BB";this.collapseLabel_=(goog.isString(collapseLabel)?goog.dom.createDom(goog.dom.TagName.SPAN,{},collapseLabel):collapseLabel);var label=goog.isDef(options.label)?options.label:"i";this.label_=(goog.isString(label)?goog.dom.createDom(goog.dom.TagName.SPAN,{},label):label);var activeLabel=(this.collapsible_&&!this.collapsed_)?this.collapseLabel_:this.label_;var button=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:tipLabel},activeLabel);goog.events.listen(button,goog.events.EventType.CLICK,this.handleClick_,false,this);goog.events.listen(button,[goog.events.EventType.MOUSEOUT,goog.events.EventType.FOCUSOUT],function(){this.blur()},false);var cssClasses=className+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible");var element=goog.dom.createDom(goog.dom.TagName.DIV,cssClasses,this.ulElement_,button);var render=goog.isDef(options.render)?options.render:ol.control.Attribution.render;goog.base(this,{element:element,render:render,target:options.target});this.renderedVisible_=true;this.attributionElements_={};this.attributionElementRenderedVisible_={};this.logoElements_={}};goog.inherits(ol.control.Attribution,ol.control.Control);ol.control.Attribution.prototype.getSourceAttributions=function(frameState){var i,ii,j,jj,tileRanges,source,sourceAttribution,sourceAttributionKey,sourceAttributions,sourceKey;var intersectsTileRange;var layerStatesArray=frameState.layerStatesArray;var attributions=goog.object.clone(frameState.attributions);var hiddenAttributions={};var projection=frameState.viewState.projection;goog.asserts.assert(!goog.isNull(projection),"projection cannot be null");for(i=0,ii=layerStatesArray.length;i<ii;i++){source=layerStatesArray[i].layer.getSource();if(goog.isNull(source)){continue}sourceKey=goog.getUid(source).toString();sourceAttributions=source.getAttributions();if(goog.isNull(sourceAttributions)){continue}for(j=0,jj=sourceAttributions.length;j<jj;j++){sourceAttribution=sourceAttributions[j];sourceAttributionKey=goog.getUid(sourceAttribution).toString();if(sourceAttributionKey in attributions){continue}tileRanges=frameState.usedTiles[sourceKey];if(goog.isDef(tileRanges)){goog.asserts.assertInstanceof(source,ol.source.Tile,"source should be an ol.source.Tile");var tileGrid=source.getTileGridForProjection(projection);goog.asserts.assert(!goog.isNull(tileGrid),"tileGrid cannot be null");intersectsTileRange=sourceAttribution.intersectsAnyTileRange(tileRanges,tileGrid,projection)}else{intersectsTileRange=false}if(intersectsTileRange){if(sourceAttributionKey in hiddenAttributions){delete hiddenAttributions[sourceAttributionKey]}attributions[sourceAttributionKey]=sourceAttribution}else{hiddenAttributions[sourceAttributionKey]=sourceAttribution}}}return[attributions,hiddenAttributions]};ol.control.Attribution.render=function(mapEvent){this.updateElement_(mapEvent.frameState)};ol.control.Attribution.prototype.updateElement_=function(frameState){if(goog.isNull(frameState)){if(this.renderedVisible_){goog.style.setElementShown(this.element,false);this.renderedVisible_=false}return}var attributions=this.getSourceAttributions(frameState);var visibleAttributions=attributions[0];var hiddenAttributions=attributions[1];var attributionElement,attributionKey;for(attributionKey in this.attributionElements_){if(attributionKey in visibleAttributions){if(!this.attributionElementRenderedVisible_[attributionKey]){goog.style.setElementShown(this.attributionElements_[attributionKey],true);this.attributionElementRenderedVisible_[attributionKey]=true}delete visibleAttributions[attributionKey]}else{if(attributionKey in hiddenAttributions){if(this.attributionElementRenderedVisible_[attributionKey]){goog.style.setElementShown(this.attributionElements_[attributionKey],false);delete this.attributionElementRenderedVisible_[attributionKey]}delete hiddenAttributions[attributionKey]}else{goog.dom.removeNode(this.attributionElements_[attributionKey]);delete this.attributionElements_[attributionKey];delete this.attributionElementRenderedVisible_[attributionKey]}}}for(attributionKey in visibleAttributions){attributionElement=goog.dom.createElement(goog.dom.TagName.LI);attributionElement.innerHTML=visibleAttributions[attributionKey].getHTML();goog.dom.appendChild(this.ulElement_,attributionElement);this.attributionElements_[attributionKey]=attributionElement;this.attributionElementRenderedVisible_[attributionKey]=true}for(attributionKey in hiddenAttributions){attributionElement=goog.dom.createElement(goog.dom.TagName.LI);attributionElement.innerHTML=hiddenAttributions[attributionKey].getHTML();goog.style.setElementShown(attributionElement,false);goog.dom.appendChild(this.ulElement_,attributionElement);this.attributionElements_[attributionKey]=attributionElement}var renderVisible=!goog.object.isEmpty(this.attributionElementRenderedVisible_)||!goog.object.isEmpty(frameState.logos);if(this.renderedVisible_!=renderVisible){goog.style.setElementShown(this.element,renderVisible);this.renderedVisible_=renderVisible}if(renderVisible&&goog.object.isEmpty(this.attributionElementRenderedVisible_)){goog.dom.classlist.add(this.element,"ol-logo-only")}else{goog.dom.classlist.remove(this.element,"ol-logo-only")}this.insertLogos_(frameState)};ol.control.Attribution.prototype.insertLogos_=function(frameState){var logo;var logos=frameState.logos;var logoElements=this.logoElements_;for(logo in logoElements){if(!(logo in logos)){goog.dom.removeNode(logoElements[logo]);delete logoElements[logo]}}var image,logoElement,logoKey;for(logoKey in logos){if(!(logoKey in logoElements)){image=new Image();image.src=logoKey;var logoValue=logos[logoKey];if(logoValue===""){logoElement=image}else{logoElement=goog.dom.createDom(goog.dom.TagName.A,{href:logoValue});logoElement.appendChild(image)}goog.dom.appendChild(this.logoLi_,logoElement);logoElements[logoKey]=logoElement}}goog.style.setElementShown(this.logoLi_,!goog.object.isEmpty(logos))};ol.control.Attribution.prototype.handleClick_=function(event){event.preventDefault();this.handleToggle_()};ol.control.Attribution.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");if(this.collapsed_){goog.dom.replaceNode(this.collapseLabel_,this.label_)}else{goog.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};ol.control.Attribution.prototype.getCollapsible=function(){return this.collapsible_};ol.control.Attribution.prototype.setCollapsible=function(collapsible){if(this.collapsible_===collapsible){return}this.collapsible_=collapsible;goog.dom.classlist.toggle(this.element,"ol-uncollapsible");if(!collapsible&&this.collapsed_){this.handleToggle_()}};ol.control.Attribution.prototype.setCollapsed=function(collapsed){if(!this.collapsible_||this.collapsed_===collapsed){return}this.handleToggle_()};ol.control.Attribution.prototype.getCollapsed=function(){return this.collapsed_};goog.provide("ol.control.Rotate");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.Rotate=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var className=goog.isDef(options.className)?options.className:"ol-rotate";var label=goog.isDef(options.label)?options.label:"\u21E7";this.label_=null;if(goog.isString(label)){this.label_=goog.dom.createDom(goog.dom.TagName.SPAN,"ol-compass",label)}else{this.label_=label;goog.dom.classlist.add(this.label_,"ol-compass")}var tipLabel=goog.isDef(options.tipLabel)?options.tipLabel:"Reset rotation";var button=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":className+"-reset",type:"button",title:tipLabel},this.label_);goog.events.listen(button,goog.events.EventType.CLICK,ol.control.Rotate.prototype.handleClick_,false,this);var cssClasses=className+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var element=goog.dom.createDom(goog.dom.TagName.DIV,cssClasses,button);var render=goog.isDef(options.render)?options.render:ol.control.Rotate.render;goog.base(this,{element:element,render:render,target:options.target});this.duration_=goog.isDef(options.duration)?options.duration:250;this.autoHide_=goog.isDef(options.autoHide)?options.autoHide:true;this.rotation_=undefined;if(this.autoHide_){goog.dom.classlist.add(this.element,ol.css.CLASS_HIDDEN)}};goog.inherits(ol.control.Rotate,ol.control.Control);ol.control.Rotate.prototype.handleClick_=function(event){event.preventDefault();this.resetNorth_()};ol.control.Rotate.prototype.resetNorth_=function(){var map=this.getMap();var view=map.getView();if(goog.isNull(view)){return}var currentRotation=view.getRotation();while(currentRotation<-Math.PI){currentRotation+=2*Math.PI}while(currentRotation>Math.PI){currentRotation-=2*Math.PI}if(goog.isDef(currentRotation)){if(this.duration_>0){map.beforeRender(ol.animation.rotate({rotation:currentRotation,duration:this.duration_,easing:ol.easing.easeOut}))}view.setRotation(0)}};ol.control.Rotate.render=function(mapEvent){var frameState=mapEvent.frameState;if(goog.isNull(frameState)){return}var rotation=frameState.viewState.rotation;if(rotation!=this.rotation_){var transform="rotate("+goog.math.toDegrees(rotation)+"deg)";if(this.autoHide_){goog.dom.classlist.enable(this.element,ol.css.CLASS_HIDDEN,rotation===0)}this.label_.style.msTransform=transform;this.label_.style.webkitTransform=transform;this.label_.style.transform=transform}this.rotation_=rotation};goog.provide("ol.control.Zoom");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.Zoom=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var className=goog.isDef(options.className)?options.className:"ol-zoom";var delta=goog.isDef(options.delta)?options.delta:1;var zoomInLabel=goog.isDef(options.zoomInLabel)?options.zoomInLabel:"+";var zoomOutLabel=goog.isDef(options.zoomOutLabel)?options.zoomOutLabel:"\u2212";var zoomInTipLabel=goog.isDef(options.zoomInTipLabel)?options.zoomInTipLabel:"Zoom in";var zoomOutTipLabel=goog.isDef(options.zoomOutTipLabel)?options.zoomOutTipLabel:"Zoom out";var inElement=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":className+"-in",type:"button",title:zoomInTipLabel},zoomInLabel);goog.events.listen(inElement,goog.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,delta),false,this);var outElement=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":className+"-out",type:"button",title:zoomOutTipLabel},zoomOutLabel);goog.events.listen(outElement,goog.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,-delta),false,this);goog.events.listen(outElement,[goog.events.EventType.MOUSEOUT,goog.events.EventType.FOCUSOUT],function(){this.blur()},false);var cssClasses=className+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var element=goog.dom.createDom(goog.dom.TagName.DIV,cssClasses,inElement,outElement);goog.base(this,{element:element,target:options.target});this.duration_=goog.isDef(options.duration)?options.duration:250};goog.inherits(ol.control.Zoom,ol.control.Control);ol.control.Zoom.prototype.handleClick_=function(delta,event){event.preventDefault();this.zoomByDelta_(delta)};ol.control.Zoom.prototype.zoomByDelta_=function(delta){var map=this.getMap();var view=map.getView();if(goog.isNull(view)){return}var currentResolution=view.getResolution();if(goog.isDef(currentResolution)){if(this.duration_>0){map.beforeRender(ol.animation.zoom({resolution:currentResolution,duration:this.duration_,easing:ol.easing.easeOut}))}var newResolution=view.constrainResolution(currentResolution,delta);view.setResolution(newResolution)}};goog.provide("ol.control");goog.require("ol.Collection");goog.require("ol.control.Attribution");goog.require("ol.control.Rotate");goog.require("ol.control.Zoom");ol.control.defaults=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var controls=new ol.Collection();var zoomControl=goog.isDef(options.zoom)?options.zoom:true;if(zoomControl){controls.push(new ol.control.Zoom(options.zoomOptions))}var rotateControl=goog.isDef(options.rotate)?options.rotate:true;if(rotateControl){controls.push(new ol.control.Rotate(options.rotateOptions))}var attributionControl=goog.isDef(options.attribution)?options.attribution:true;if(attributionControl){controls.push(new ol.control.Attribution(options.attributionOptions))}return controls};goog.provide("goog.dom.fullscreen");goog.provide("goog.dom.fullscreen.EventType");goog.require("goog.dom");goog.require("goog.userAgent");goog.dom.fullscreen.EventType={CHANGE:(function(){if(goog.userAgent.WEBKIT){return"webkitfullscreenchange"}if(goog.userAgent.GECKO){return"mozfullscreenchange"}if(goog.userAgent.IE){return"MSFullscreenChange"}return"fullscreenchange"})()};goog.dom.fullscreen.isSupported=function(opt_domHelper){var doc=goog.dom.fullscreen.getDocument_(opt_domHelper);var body=doc.body;return !!(body.webkitRequestFullscreen||(body.mozRequestFullScreen&&doc.mozFullScreenEnabled)||(body.msRequestFullscreen&&doc.msFullscreenEnabled)||(body.requestFullscreen&&doc.fullscreenEnabled))};goog.dom.fullscreen.requestFullScreen=function(element){if(element.webkitRequestFullscreen){element.webkitRequestFullscreen()}else{if(element.mozRequestFullScreen){element.mozRequestFullScreen()}else{if(element.msRequestFullscreen){element.msRequestFullscreen()}else{if(element.requestFullscreen){element.requestFullscreen()}}}}};goog.dom.fullscreen.requestFullScreenWithKeys=function(element){if(element.mozRequestFullScreenWithKeys){element.mozRequestFullScreenWithKeys()}else{if(element.webkitRequestFullscreen){element.webkitRequestFullscreen()}else{goog.dom.fullscreen.requestFullScreen(element)}}};goog.dom.fullscreen.exitFullScreen=function(opt_domHelper){var doc=goog.dom.fullscreen.getDocument_(opt_domHelper);if(doc.webkitCancelFullScreen){doc.webkitCancelFullScreen()}else{if(doc.mozCancelFullScreen){doc.mozCancelFullScreen()}else{if(doc.msExitFullscreen){doc.msExitFullscreen()}else{if(doc.exitFullscreen){doc.exitFullscreen()}}}}};goog.dom.fullscreen.isFullScreen=function(opt_domHelper){var doc=goog.dom.fullscreen.getDocument_(opt_domHelper);return !!(doc.webkitIsFullScreen||doc.mozFullScreen||doc.msFullscreenElement||doc.fullscreenElement)};goog.dom.fullscreen.getFullScreenElement=function(opt_domHelper){var doc=goog.dom.fullscreen.getDocument_(opt_domHelper);var element_list=[doc.webkitFullscreenElement,doc.mozFullScreenElement,doc.msFullscreenElement,doc.fullscreenElement];for(var i=0;i<element_list.length;i++){if(element_list[i]!=null){return element_list[i]}}return null};goog.dom.fullscreen.getDocument_=function(opt_domHelper){return opt_domHelper?opt_domHelper.getDocument():goog.dom.getDomHelper().getDocument()};goog.provide("ol.control.FullScreen");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.dom.fullscreen");goog.require("goog.dom.fullscreen.EventType");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.control.Control");goog.require("ol.css");ol.control.FullScreen=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.cssClassName_=goog.isDef(options.className)?options.className:"ol-full-screen";var label=goog.isDef(options.label)?options.label:"\u2194";this.labelNode_=(goog.isString(label)?goog.dom.createTextNode(label):label);var labelActive=goog.isDef(options.labelActive)?options.labelActive:"\u00d7";this.labelActiveNode_=(goog.isString(labelActive)?goog.dom.createTextNode(labelActive):labelActive);var tipLabel=goog.isDef(options.tipLabel)?options.tipLabel:"Toggle full-screen";var button=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":this.cssClassName_+"-"+goog.dom.fullscreen.isFullScreen(),type:"button",title:tipLabel},this.labelNode_);goog.events.listen(button,goog.events.EventType.CLICK,this.handleClick_,false,this);goog.events.listen(goog.global.document,goog.dom.fullscreen.EventType.CHANGE,this.handleFullScreenChange_,false,this);var cssClasses=this.cssClassName_+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+" "+(!goog.dom.fullscreen.isSupported()?ol.css.CLASS_UNSUPPORTED:"");var element=goog.dom.createDom(goog.dom.TagName.DIV,cssClasses,button);goog.base(this,{element:element,target:options.target});this.keys_=goog.isDef(options.keys)?options.keys:false};goog.inherits(ol.control.FullScreen,ol.control.Control);ol.control.FullScreen.prototype.handleClick_=function(event){event.preventDefault();this.handleFullScreen_()};ol.control.FullScreen.prototype.handleFullScreen_=function(){if(!goog.dom.fullscreen.isSupported()){return}var map=this.getMap();if(goog.isNull(map)){return}if(goog.dom.fullscreen.isFullScreen()){goog.dom.fullscreen.exitFullScreen()}else{var target=map.getTarget();goog.asserts.assert(goog.isDefAndNotNull(target),"target should be defined");var element=goog.dom.getElement(target);goog.asserts.assert(goog.isDefAndNotNull(element),"element should be defined");if(this.keys_){goog.dom.fullscreen.requestFullScreenWithKeys(element)}else{goog.dom.fullscreen.requestFullScreen(element)}}};ol.control.FullScreen.prototype.handleFullScreenChange_=function(){var opened=this.cssClassName_+"-true";var closed=this.cssClassName_+"-false";var button=goog.dom.getFirstElementChild(this.element);var map=this.getMap();if(goog.dom.fullscreen.isFullScreen()){goog.dom.classlist.swap(button,closed,opened);goog.dom.replaceNode(this.labelActiveNode_,this.labelNode_)}else{goog.dom.classlist.swap(button,opened,closed);goog.dom.replaceNode(this.labelNode_,this.labelActiveNode_)}if(!goog.isNull(map)){map.updateSize()}};goog.provide("ol.Pixel");ol.Pixel;goog.provide("ol.control.MousePosition");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.CoordinateFormatType");goog.require("ol.Object");goog.require("ol.Pixel");goog.require("ol.TransformFunction");goog.require("ol.control.Control");goog.require("ol.proj");goog.require("ol.proj.Projection");ol.control.MousePositionProperty={PROJECTION:"projection",COORDINATE_FORMAT:"coordinateFormat"};ol.control.MousePosition=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var className=goog.isDef(options.className)?options.className:"ol-mouse-position";var element=goog.dom.createDom(goog.dom.TagName.DIV,className);var render=goog.isDef(options.render)?options.render:ol.control.MousePosition.render;goog.base(this,{element:element,render:render,target:options.target});goog.events.listen(this,ol.Object.getChangeEventType(ol.control.MousePositionProperty.PROJECTION),this.handleProjectionChanged_,false,this);if(goog.isDef(options.coordinateFormat)){this.setCoordinateFormat(options.coordinateFormat)}if(goog.isDef(options.projection)){this.setProjection(ol.proj.get(options.projection))}this.undefinedHTML_=goog.isDef(options.undefinedHTML)?options.undefinedHTML:"";this.renderedHTML_=element.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null};goog.inherits(ol.control.MousePosition,ol.control.Control);ol.control.MousePosition.render=function(mapEvent){var frameState=mapEvent.frameState;if(goog.isNull(frameState)){this.mapProjection_=null}else{if(this.mapProjection_!=frameState.viewState.projection){this.mapProjection_=frameState.viewState.projection;this.transform_=null}}this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleProjectionChanged_=function(){this.transform_=null};ol.control.MousePosition.prototype.getCoordinateFormat=function(){return(this.get(ol.control.MousePositionProperty.COORDINATE_FORMAT))};ol.control.MousePosition.prototype.getProjection=function(){return(this.get(ol.control.MousePositionProperty.PROJECTION))};ol.control.MousePosition.prototype.handleMouseMove=function(browserEvent){var map=this.getMap();this.lastMouseMovePixel_=map.getEventPixel(browserEvent.getBrowserEvent());this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleMouseOut=function(browserEvent){this.updateHTML_(null);this.lastMouseMovePixel_=null};ol.control.MousePosition.prototype.setMap=function(map){goog.base(this,"setMap",map);if(!goog.isNull(map)){var viewport=map.getViewport();this.listenerKeys.push(goog.events.listen(viewport,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,false,this),goog.events.listen(viewport,goog.events.EventType.MOUSEOUT,this.handleMouseOut,false,this))}};ol.control.MousePosition.prototype.setCoordinateFormat=function(format){this.set(ol.control.MousePositionProperty.COORDINATE_FORMAT,format)};ol.control.MousePosition.prototype.setProjection=function(projection){this.set(ol.control.MousePositionProperty.PROJECTION,projection)};ol.control.MousePosition.prototype.updateHTML_=function(pixel){var html=this.undefinedHTML_;if(!goog.isNull(pixel)&&!goog.isNull(this.mapProjection_)){if(goog.isNull(this.transform_)){var projection=this.getProjection();if(goog.isDef(projection)){this.transform_=ol.proj.getTransformFromProjections(this.mapProjection_,projection)}else{this.transform_=ol.proj.identityTransform}}var map=this.getMap();var coordinate=map.getCoordinateFromPixel(pixel);if(!goog.isNull(coordinate)){this.transform_(coordinate,coordinate);var coordinateFormat=this.getCoordinateFormat();if(goog.isDef(coordinateFormat)){html=coordinateFormat(coordinate)}else{html=coordinate.toString()}}}if(!goog.isDef(this.renderedHTML_)||html!=this.renderedHTML_){this.element.innerHTML=html;this.renderedHTML_=html}};goog.provide("goog.async.AnimationDelay");goog.require("goog.Disposable");goog.require("goog.events");goog.require("goog.functions");goog.async.AnimationDelay=function(listener,opt_window,opt_handler){goog.async.AnimationDelay.base(this,"constructor");this.id_=null;this.usingListeners_=false;this.listener_=listener;this.handler_=opt_handler;this.win_=opt_window||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=false;var raf=this.getRaf_();var cancelRaf=this.getCancelRaf_();if(raf&&!cancelRaf&&this.win_.mozRequestAnimationFrame){this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_);this.win_.mozRequestAnimationFrame(null);this.usingListeners_=true}else{if(raf&&cancelRaf){this.id_=raf.call(this.win_,this.callback_)}else{this.id_=this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)}}};goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var raf=this.getRaf_();var cancelRaf=this.getCancelRaf_();if(raf&&!cancelRaf&&this.win_.mozRequestAnimationFrame){goog.events.unlistenByKey(this.id_)}else{if(raf&&cancelRaf){cancelRaf.call(this.win_,(this.id_))}else{this.win_.clearTimeout((this.id_))}}}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.AnimationDelay.prototype.fireIfActive=function(){if(this.isActive()){this.fire()}};goog.async.AnimationDelay.prototype.isActive=function(){return this.id_!=null};goog.async.AnimationDelay.prototype.doAction_=function(){if(this.usingListeners_&&this.id_){goog.events.unlistenByKey(this.id_)}this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.base(this,"disposeInternal")};goog.async.AnimationDelay.prototype.getRaf_=function(){var win=this.win_;return win.requestAnimationFrame||win.webkitRequestAnimationFrame||win.mozRequestAnimationFrame||win.oRequestAnimationFrame||win.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var win=this.win_;return win.cancelAnimationFrame||win.cancelRequestAnimationFrame||win.webkitCancelRequestAnimationFrame||win.mozCancelRequestAnimationFrame||win.oCancelRequestAnimationFrame||win.msCancelRequestAnimationFrame||null};goog.provide("goog.async.nextTick");goog.provide("goog.async.throwException");goog.require("goog.debug.entryPointRegistry");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.engine");goog.async.throwException=function(exception){goog.global.setTimeout(function(){throw exception},0)};goog.async.nextTick=function(callback,opt_context,opt_useSetImmediate){var cb=callback;if(opt_context){cb=goog.bind(callback,opt_context)}cb=goog.async.nextTick.wrapCallback_(cb);if(goog.isFunction(goog.global.setImmediate)&&(opt_useSetImmediate||!goog.global.Window||!goog.global.Window.prototype||goog.global.Window.prototype.setImmediate!=goog.global.setImmediate)){goog.global.setImmediate(cb);return}if(!goog.async.nextTick.setImmediate_){goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()}goog.async.nextTick.setImmediate_(cb)};goog.async.nextTick.setImmediate_;goog.async.nextTick.getSetImmediateEmulator_=function(){var Channel=goog.global.MessageChannel;if(typeof Channel==="undefined"&&typeof window!=="undefined"&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()){Channel=function(){var iframe=document.createElement(goog.dom.TagName.IFRAME);iframe.style.display="none";iframe.src="";document.documentElement.appendChild(iframe);var win=iframe.contentWindow;var doc=win.document;doc.open();doc.write("");doc.close();var message="callImmediate"+Math.random();var origin=win.location.protocol=="file:"?"*":win.location.protocol+"//"+win.location.host;var onmessage=goog.bind(function(e){if((origin!="*"&&e.origin!=origin)||e.data!=message){return}this["port1"].onmessage()},this);win.addEventListener("message",onmessage,false);this["port1"]={};this["port2"]={postMessage:function(){win.postMessage(message,origin)}}}}if(typeof Channel!=="undefined"&&(!goog.labs.userAgent.browser.isIE())){var channel=new Channel();var head={};var tail=head;channel.port1.onmessage=function(){if(goog.isDef(head.next)){head=head.next;var cb=head.cb;head.cb=null;cb()}};return function(cb){tail.next={cb:cb};tail=tail.next;channel.port2.postMessage(0)}}if(typeof document!=="undefined"&&"onreadystatechange" in document.createElement(goog.dom.TagName.SCRIPT)){return function(cb){var script=document.createElement(goog.dom.TagName.SCRIPT);script.onreadystatechange=function(){script.onreadystatechange=null;script.parentNode.removeChild(script);script=null;cb();cb=null};document.documentElement.appendChild(script)}}return function(cb){goog.global.setTimeout(cb,0)}};goog.async.nextTick.wrapCallback_=goog.functions.identity;goog.debug.entryPointRegistry.register(function(transformer){goog.async.nextTick.wrapCallback_=transformer});goog.provide("goog.html.SafeScript");goog.require("goog.asserts");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeScript.prototype.implementsGoogStringTypedString=true;goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeScript.fromConstant=function(script){var scriptString=goog.string.Const.unwrap(script);if(scriptString.length===0){return goog.html.SafeScript.EMPTY}return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(scriptString)};goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_};if(goog.DEBUG){goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}}goog.html.SafeScript.unwrap=function(safeScript){if(safeScript instanceof goog.html.SafeScript&&safeScript.constructor===goog.html.SafeScript&&safeScript.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return safeScript.privateDoNotAccessOrElseSafeScriptWrappedValue_}else{goog.asserts.fail("expected object of type SafeScript, got '"+safeScript+"'");return"type_error:SafeScript"}};goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(script){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(script)};goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(script){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=script;return this};goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("");goog.provide("goog.html.uncheckedconversions");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeScript");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(justification,html,opt_dir){goog.asserts.assertString(goog.string.Const.unwrap(justification),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),"must provide non-empty justification");return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(html,opt_dir||null)};goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(justification,script){goog.asserts.assertString(goog.string.Const.unwrap(justification),"must provide justification");goog.asserts.assert(!goog.string.isEmpty(goog.string.Const.unwrap(justification)),"must provide non-empty justification");return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(script)};goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(justification,style){goog.asserts.assertString(goog.string.Const.unwrap(justification),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),"must provide non-empty justification");return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(style)};goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(justification,styleSheet){goog.asserts.assertString(goog.string.Const.unwrap(justification),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),"must provide non-empty justification");return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet)};goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(justification,url){goog.asserts.assertString(goog.string.Const.unwrap(justification),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),"must provide non-empty justification");return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url)};goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(justification,url){goog.asserts.assertString(goog.string.Const.unwrap(justification),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),"must provide non-empty justification");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(url)};goog.provide("goog.structs");goog.require("goog.array");goog.require("goog.object");goog.structs.getCount=function(col){if(typeof col.getCount=="function"){return col.getCount()}if(goog.isArrayLike(col)||goog.isString(col)){return col.length}return goog.object.getCount(col)};goog.structs.getValues=function(col){if(typeof col.getValues=="function"){return col.getValues()}if(goog.isString(col)){return col.split("")}if(goog.isArrayLike(col)){var rv=[];var l=col.length;for(var i=0;i<l;i++){rv.push(col[i])}return rv}return goog.object.getValues(col)};goog.structs.getKeys=function(col){if(typeof col.getKeys=="function"){return col.getKeys()}if(typeof col.getValues=="function"){return undefined}if(goog.isArrayLike(col)||goog.isString(col)){var rv=[];var l=col.length;for(var i=0;i<l;i++){rv.push(i)}return rv}return goog.object.getKeys(col)};goog.structs.contains=function(col,val){if(typeof col.contains=="function"){return col.contains(val)}if(typeof col.containsValue=="function"){return col.containsValue(val)}if(goog.isArrayLike(col)||goog.isString(col)){return goog.array.contains((col),val)}return goog.object.containsValue(col,val)};goog.structs.isEmpty=function(col){if(typeof col.isEmpty=="function"){return col.isEmpty()}if(goog.isArrayLike(col)||goog.isString(col)){return goog.array.isEmpty((col))}return goog.object.isEmpty(col)};goog.structs.clear=function(col){if(typeof col.clear=="function"){col.clear()}else{if(goog.isArrayLike(col)){goog.array.clear((col))}else{goog.object.clear(col)}}};goog.structs.forEach=function(col,f,opt_obj){if(typeof col.forEach=="function"){col.forEach(f,opt_obj)}else{if(goog.isArrayLike(col)||goog.isString(col)){goog.array.forEach((col),f,opt_obj)}else{var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++){f.call(opt_obj,values[i],keys&&keys[i],col)}}}};goog.structs.filter=function(col,f,opt_obj){if(typeof col.filter=="function"){return col.filter(f,opt_obj)}if(goog.isArrayLike(col)||goog.isString(col)){return goog.array.filter((col),f,opt_obj)}var rv;var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;if(keys){rv={};for(var i=0;i<l;i++){if(f.call(opt_obj,values[i],keys[i],col)){rv[keys[i]]=values[i]}}}else{rv=[];for(var i=0;i<l;i++){if(f.call(opt_obj,values[i],undefined,col)){rv.push(values[i])}}}return rv};goog.structs.map=function(col,f,opt_obj){if(typeof col.map=="function"){return col.map(f,opt_obj)}if(goog.isArrayLike(col)||goog.isString(col)){return goog.array.map((col),f,opt_obj)}var rv;var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;if(keys){rv={};for(var i=0;i<l;i++){rv[keys[i]]=f.call(opt_obj,values[i],keys[i],col)}}else{rv=[];for(var i=0;i<l;i++){rv[i]=f.call(opt_obj,values[i],undefined,col)}}return rv};goog.structs.some=function(col,f,opt_obj){if(typeof col.some=="function"){return col.some(f,opt_obj)}if(goog.isArrayLike(col)||goog.isString(col)){return goog.array.some((col),f,opt_obj)}var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++){if(f.call(opt_obj,values[i],keys&&keys[i],col)){return true}}return false};goog.structs.every=function(col,f,opt_obj){if(typeof col.every=="function"){return col.every(f,opt_obj)}if(goog.isArrayLike(col)||goog.isString(col)){return goog.array.every((col),f,opt_obj)}var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++){if(!f.call(opt_obj,values[i],keys&&keys[i],col)){return false}}return true};goog.provide("goog.structs.Collection");goog.structs.Collection=function(){};goog.structs.Collection.prototype.add;goog.structs.Collection.prototype.remove;goog.structs.Collection.prototype.contains;goog.structs.Collection.prototype.getCount;goog.provide("goog.iter");goog.provide("goog.iter.Iterable");goog.provide("goog.iter.Iterator");goog.provide("goog.iter.StopIteration");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.math");goog.iter.Iterable;goog.iter.StopIteration=("StopIteration" in goog.global)?goog.global.StopIteration:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration};goog.iter.Iterator.prototype.__iterator__=function(opt_keys){return this};goog.iter.toIterator=function(iterable){if(iterable instanceof goog.iter.Iterator){return iterable}if(typeof iterable.__iterator__=="function"){return iterable.__iterator__(false)}if(goog.isArrayLike(iterable)){var i=0;var newIter=new goog.iter.Iterator;newIter.next=function(){while(true){if(i>=iterable.length){throw goog.iter.StopIteration}if(!(i in iterable)){i++;continue}return iterable[i++]}};return newIter}throw Error("Not implemented")};goog.iter.forEach=function(iterable,f,opt_obj){if(goog.isArrayLike(iterable)){try{goog.array.forEach((iterable),f,opt_obj)}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}}else{iterable=goog.iter.toIterator(iterable);try{while(true){f.call(opt_obj,iterable.next(),undefined,iterable)}}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}}};goog.iter.filter=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;newIter.next=function(){while(true){var val=iterator.next();if(f.call(opt_obj,val,undefined,iterator)){return val}}};return newIter};goog.iter.filterFalse=function(iterable,f,opt_obj){return goog.iter.filter(iterable,goog.functions.not(f),opt_obj)};goog.iter.range=function(startOrStop,opt_stop,opt_step){var start=0;var stop=startOrStop;var step=opt_step||1;if(arguments.length>1){start=startOrStop;stop=opt_stop}if(step==0){throw Error("Range step argument must not be zero")}var newIter=new goog.iter.Iterator;newIter.next=function(){if(step>0&&start>=stop||step<0&&start<=stop){throw goog.iter.StopIteration}var rv=start;start+=step;return rv};return newIter};goog.iter.join=function(iterable,deliminator){return goog.iter.toArray(iterable).join(deliminator)};goog.iter.map=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;newIter.next=function(){var val=iterator.next();return f.call(opt_obj,val,undefined,iterator)};return newIter};goog.iter.reduce=function(iterable,f,val,opt_obj){var rval=val;goog.iter.forEach(iterable,function(val){rval=f.call(opt_obj,rval,val)});return rval};goog.iter.some=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);try{while(true){if(f.call(opt_obj,iterable.next(),undefined,iterable)){return true}}}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}return false};goog.iter.every=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);try{while(true){if(!f.call(opt_obj,iterable.next(),undefined,iterable)){return false}}}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}return true};goog.iter.chain=function(var_args){return goog.iter.chainFromIterable(arguments)};goog.iter.chainFromIterable=function(iterable){var iterator=goog.iter.toIterator(iterable);var iter=new goog.iter.Iterator();var current=null;iter.next=function(){while(true){if(current==null){var it=iterator.next();current=goog.iter.toIterator(it)}try{return current.next()}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}current=null}}};return iter};goog.iter.dropWhile=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;var dropping=true;newIter.next=function(){while(true){var val=iterator.next();if(dropping&&f.call(opt_obj,val,undefined,iterator)){continue}else{dropping=false}return val}};return newIter};goog.iter.takeWhile=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable);var iter=new goog.iter.Iterator();iter.next=function(){var val=iterator.next();if(f.call(opt_obj,val,undefined,iterator)){return val}throw goog.iter.StopIteration};return iter};goog.iter.toArray=function(iterable){if(goog.isArrayLike(iterable)){return goog.array.toArray((iterable))}iterable=goog.iter.toIterator(iterable);var array=[];goog.iter.forEach(iterable,function(val){array.push(val)});return array};goog.iter.equals=function(iterable1,iterable2,opt_equalsFn){var fillValue={};var pairs=goog.iter.zipLongest(fillValue,iterable1,iterable2);var equalsFn=opt_equalsFn||goog.array.defaultCompareEquality;return goog.iter.every(pairs,function(pair){return equalsFn(pair[0],pair[1])})};goog.iter.nextOrValue=function(iterable,defaultValue){try{return goog.iter.toIterator(iterable).next()}catch(e){if(e!=goog.iter.StopIteration){throw e}return defaultValue}};goog.iter.product=function(var_args){var someArrayEmpty=goog.array.some(arguments,function(arr){return !arr.length});if(someArrayEmpty||!arguments.length){return new goog.iter.Iterator()}var iter=new goog.iter.Iterator();var arrays=arguments;var indicies=goog.array.repeat(0,arrays.length);iter.next=function(){if(indicies){var retVal=goog.array.map(indicies,function(valueIndex,arrayIndex){return arrays[arrayIndex][valueIndex]});for(var i=indicies.length-1;i>=0;i--){goog.asserts.assert(indicies);if(indicies[i]<arrays[i].length-1){indicies[i]++;break}if(i==0){indicies=null;break}indicies[i]=0}return retVal}throw goog.iter.StopIteration};return iter};goog.iter.cycle=function(iterable){var baseIterator=goog.iter.toIterator(iterable);var cache=[];var cacheIndex=0;var iter=new goog.iter.Iterator();var useCache=false;iter.next=function(){var returnElement=null;if(!useCache){try{returnElement=baseIterator.next();cache.push(returnElement);return returnElement}catch(e){if(e!=goog.iter.StopIteration||goog.array.isEmpty(cache)){throw e}useCache=true}}returnElement=cache[cacheIndex];cacheIndex=(cacheIndex+1)%cache.length;return returnElement};return iter};goog.iter.count=function(opt_start,opt_step){var counter=opt_start||0;var step=goog.isDef(opt_step)?opt_step:1;var iter=new goog.iter.Iterator();iter.next=function(){var returnValue=counter;counter+=step;return returnValue};return iter};goog.iter.repeat=function(value){var iter=new goog.iter.Iterator();iter.next=goog.functions.constant(value);return iter};goog.iter.accumulate=function(iterable){var iterator=goog.iter.toIterator(iterable);var total=0;var iter=new goog.iter.Iterator();iter.next=function(){total+=iterator.next();return total};return iter};goog.iter.zip=function(var_args){var args=arguments;var iter=new goog.iter.Iterator();if(args.length>0){var iterators=goog.array.map(args,goog.iter.toIterator);iter.next=function(){var arr=goog.array.map(iterators,function(it){return it.next()});return arr}}return iter};goog.iter.zipLongest=function(fillValue,var_args){var args=goog.array.slice(arguments,1);var iter=new goog.iter.Iterator();if(args.length>0){var iterators=goog.array.map(args,goog.iter.toIterator);iter.next=function(){var iteratorsHaveValues=false;var arr=goog.array.map(iterators,function(it){var returnValue;try{returnValue=it.next();iteratorsHaveValues=true}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}returnValue=fillValue}return returnValue});if(!iteratorsHaveValues){throw goog.iter.StopIteration}return arr}}return iter};goog.iter.compress=function(iterable,selectors){var selectorIterator=goog.iter.toIterator(selectors);return goog.iter.filter(iterable,function(){return !!selectorIterator.next()})};goog.iter.GroupByIterator_=function(iterable,opt_keyFunc){this.iterator=goog.iter.toIterator(iterable);this.keyFunc=opt_keyFunc||goog.functions.identity;this.targetKey;this.currentKey;this.currentValue};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){while(this.currentKey==this.targetKey){this.currentValue=this.iterator.next();this.currentKey=this.keyFunc(this.currentValue)}this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};goog.iter.GroupByIterator_.prototype.groupItems_=function(targetKey){var arr=[];while(this.currentKey==targetKey){arr.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}break}this.currentKey=this.keyFunc(this.currentValue)}return arr};goog.iter.groupBy=function(iterable,opt_keyFunc){return new goog.iter.GroupByIterator_(iterable,opt_keyFunc)};goog.iter.starMap=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable);var iter=new goog.iter.Iterator();iter.next=function(){var args=goog.iter.toArray(iterator.next());return f.apply(opt_obj,goog.array.concat(args,undefined,iterator))};return iter};goog.iter.tee=function(iterable,opt_num){var iterator=goog.iter.toIterator(iterable);var num=goog.isNumber(opt_num)?opt_num:2;var buffers=goog.array.map(goog.array.range(num),function(){return[]});var addNextIteratorValueToBuffers=function(){var val=iterator.next();goog.array.forEach(buffers,function(buffer){buffer.push(val)})};var createIterator=function(buffer){var iter=new goog.iter.Iterator();iter.next=function(){if(goog.array.isEmpty(buffer)){addNextIteratorValueToBuffers()}goog.asserts.assert(!goog.array.isEmpty(buffer));return buffer.shift()};return iter};return goog.array.map(buffers,createIterator)};goog.iter.enumerate=function(iterable,opt_start){return goog.iter.zip(goog.iter.count(opt_start),iterable)};goog.iter.limit=function(iterable,limitSize){goog.asserts.assert(goog.math.isInt(limitSize)&&limitSize>=0);var iterator=goog.iter.toIterator(iterable);var iter=new goog.iter.Iterator();var remaining=limitSize;iter.next=function(){if(remaining-->0){return iterator.next()}throw goog.iter.StopIteration};return iter};goog.iter.consume=function(iterable,count){goog.asserts.assert(goog.math.isInt(count)&&count>=0);var iterator=goog.iter.toIterator(iterable);while(count-->0){goog.iter.nextOrValue(iterator,null)}return iterator};goog.iter.slice=function(iterable,start,opt_end){goog.asserts.assert(goog.math.isInt(start)&&start>=0);var iterator=goog.iter.consume(iterable,start);if(goog.isNumber(opt_end)){goog.asserts.assert(goog.math.isInt(opt_end)&&opt_end>=start);iterator=goog.iter.limit(iterator,opt_end-start)}return iterator};goog.iter.hasDuplicates_=function(arr){var deduped=[];goog.array.removeDuplicates(arr,deduped);return arr.length!=deduped.length};goog.iter.permutations=function(iterable,opt_length){var elements=goog.iter.toArray(iterable);var length=goog.isNumber(opt_length)?opt_length:elements.length;var sets=goog.array.repeat(elements,length);var product=goog.iter.product.apply(undefined,sets);return goog.iter.filter(product,function(arr){return !goog.iter.hasDuplicates_(arr)})};goog.iter.combinations=function(iterable,length){var elements=goog.iter.toArray(iterable);var indexes=goog.iter.range(elements.length);var indexIterator=goog.iter.permutations(indexes,length);var sortedIndexIterator=goog.iter.filter(indexIterator,function(arr){return goog.array.isSorted(arr)});var iter=new goog.iter.Iterator();function getIndexFromElements(index){return elements[index]}iter.next=function(){return goog.array.map(sortedIndexIterator.next(),getIndexFromElements)};return iter};goog.iter.combinationsWithReplacement=function(iterable,length){var elements=goog.iter.toArray(iterable);var indexes=goog.array.range(elements.length);var sets=goog.array.repeat(indexes,length);var indexIterator=goog.iter.product.apply(undefined,sets);var sortedIndexIterator=goog.iter.filter(indexIterator,function(arr){return goog.array.isSorted(arr)});var iter=new goog.iter.Iterator();function getIndexFromElements(index){return elements[index]}iter.next=function(){return goog.array.map((sortedIndexIterator.next()),getIndexFromElements)};return iter};goog.provide("goog.structs.Map");goog.require("goog.iter.Iterator");goog.require("goog.iter.StopIteration");goog.require("goog.object");goog.structs.Map=function(opt_map,var_args){this.map_={};this.keys_=[];this.count_=0;this.version_=0;var argLength=arguments.length;if(argLength>1){if(argLength%2){throw Error("Uneven number of arguments")}for(var i=0;i<argLength;i+=2){this.set(arguments[i],arguments[i+1])}}else{if(opt_map){this.addAll((opt_map))}}};goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();var rv=[];for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];rv.push(this.map_[key])}return rv};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return(this.keys_.concat())};goog.structs.Map.prototype.containsKey=function(key){return goog.structs.Map.hasKey_(this.map_,key)};goog.structs.Map.prototype.containsValue=function(val){for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];if(goog.structs.Map.hasKey_(this.map_,key)&&this.map_[key]==val){return true}}return false};goog.structs.Map.prototype.equals=function(otherMap,opt_equalityFn){if(this===otherMap){return true}if(this.count_!=otherMap.getCount()){return false}var equalityFn=opt_equalityFn||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var key,i=0;key=this.keys_[i];i++){if(!equalityFn(this.get(key),otherMap.get(key))){return false}}return true};goog.structs.Map.defaultEquals=function(a,b){return a===b};goog.structs.Map.prototype.isEmpty=function(){return this.count_==0};goog.structs.Map.prototype.clear=function(){this.map_={};this.keys_.length=0;this.count_=0;this.version_=0};goog.structs.Map.prototype.remove=function(key){if(goog.structs.Map.hasKey_(this.map_,key)){delete this.map_[key];this.count_--;this.version_++;if(this.keys_.length>2*this.count_){this.cleanupKeysArray_()}return true}return false};goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){var srcIndex=0;var destIndex=0;while(srcIndex<this.keys_.length){var key=this.keys_[srcIndex];if(goog.structs.Map.hasKey_(this.map_,key)){this.keys_[destIndex++]=key}srcIndex++}this.keys_.length=destIndex}if(this.count_!=this.keys_.length){var seen={};var srcIndex=0;var destIndex=0;while(srcIndex<this.keys_.length){var key=this.keys_[srcIndex];if(!(goog.structs.Map.hasKey_(seen,key))){this.keys_[destIndex++]=key;seen[key]=1}srcIndex++}this.keys_.length=destIndex}};goog.structs.Map.prototype.get=function(key,opt_val){if(goog.structs.Map.hasKey_(this.map_,key)){return this.map_[key]}return opt_val};goog.structs.Map.prototype.set=function(key,value){if(!(goog.structs.Map.hasKey_(this.map_,key))){this.count_++;this.keys_.push(key);this.version_++}this.map_[key]=value};goog.structs.Map.prototype.addAll=function(map){var keys,values;if(map instanceof goog.structs.Map){keys=map.getKeys();values=map.getValues()}else{keys=goog.object.getKeys(map);values=goog.object.getValues(map)}for(var i=0;i<keys.length;i++){this.set(keys[i],values[i])}};goog.structs.Map.prototype.forEach=function(f,opt_obj){var keys=this.getKeys();for(var i=0;i<keys.length;i++){var key=keys[i];var value=this.get(key);f.call(opt_obj,value,key,this)}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){var transposed=new goog.structs.Map();for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];var value=this.map_[key];transposed.set(value,key)}return transposed};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();var obj={};for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];obj[key]=this.map_[key]}return obj};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(true)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(false)};goog.structs.Map.prototype.__iterator__=function(opt_keys){this.cleanupKeysArray_();var i=0;var version=this.version_;var selfObj=this;var newIter=new goog.iter.Iterator;newIter.next=function(){if(version!=selfObj.version_){throw Error("The map has changed since the iterator was created")}if(i>=selfObj.keys_.length){throw goog.iter.StopIteration}var key=selfObj.keys_[i++];return opt_keys?key:selfObj.map_[key]};return newIter};goog.structs.Map.hasKey_=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)};goog.provide("goog.structs.Set");goog.require("goog.structs");goog.require("goog.structs.Collection");goog.require("goog.structs.Map");goog.structs.Set=function(opt_values){this.map_=new goog.structs.Map;if(opt_values){this.addAll(opt_values)}};goog.structs.Set.getKey_=function(val){var type=typeof val;if(type=="object"&&val||type=="function"){return"o"+goog.getUid((val))}else{return type.substr(0,1)+val}};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(element){this.map_.set(goog.structs.Set.getKey_(element),element)};goog.structs.Set.prototype.addAll=function(col){var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++){this.add(values[i])}};goog.structs.Set.prototype.removeAll=function(col){var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++){this.remove(values[i])}};goog.structs.Set.prototype.remove=function(element){return this.map_.remove(goog.structs.Set.getKey_(element))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(element){return this.map_.containsKey(goog.structs.Set.getKey_(element))};goog.structs.Set.prototype.containsAll=function(col){return goog.structs.every(col,this.contains,this)};goog.structs.Set.prototype.intersection=function(col){var result=new goog.structs.Set();var values=goog.structs.getValues(col);for(var i=0;i<values.length;i++){var value=values[i];if(this.contains(value)){result.add(value)}}return result};goog.structs.Set.prototype.difference=function(col){var result=this.clone();result.removeAll(col);return result};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(col){return this.getCount()==goog.structs.getCount(col)&&this.isSubsetOf(col)};goog.structs.Set.prototype.isSubsetOf=function(col){var colCount=goog.structs.getCount(col);if(this.getCount()>colCount){return false}if(!(col instanceof goog.structs.Set)&&colCount>5){col=new goog.structs.Set(col)}return goog.structs.every(this,function(value){return goog.structs.contains(col,value)})};goog.structs.Set.prototype.__iterator__=function(opt_keys){return this.map_.__iterator__(false)};goog.provide("goog.debug");goog.require("goog.array");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeUrl");goog.require("goog.html.uncheckedconversions");goog.require("goog.string.Const");goog.require("goog.structs.Set");goog.require("goog.userAgent");goog.define("goog.debug.LOGGING_ENABLED",goog.DEBUG);goog.debug.catchErrors=function(logFunc,opt_cancel,opt_target){var target=opt_target||goog.global;var oldErrorHandler=target.onerror;var retVal=!!opt_cancel;if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")){retVal=!retVal}target.onerror=function(message,url,line,opt_col,opt_error){if(oldErrorHandler){oldErrorHandler(message,url,line,opt_col,opt_error)}logFunc({message:message,fileName:url,line:line,col:opt_col,error:opt_error});return retVal}};goog.debug.expose=function(obj,opt_showFn){if(typeof obj=="undefined"){return"undefined"}if(obj==null){return"NULL"}var str=[];for(var x in obj){if(!opt_showFn&&goog.isFunction(obj[x])){continue}var s=x+" = ";try{s+=obj[x]}catch(e){s+="*** "+e+" ***"}str.push(s)}return str.join("\n")};goog.debug.deepExpose=function(obj,opt_showFn){var str=[];var helper=function(obj,space,parentSeen){var nestspace=space+"  ";var seen=new goog.structs.Set(parentSeen);var indentMultiline=function(str){return str.replace(/\n/g,"\n"+space)};try{if(!goog.isDef(obj)){str.push("undefined")}else{if(goog.isNull(obj)){str.push("NULL")}else{if(goog.isString(obj)){str.push('"'+indentMultiline(obj)+'"')}else{if(goog.isFunction(obj)){str.push(indentMultiline(String(obj)))}else{if(goog.isObject(obj)){if(seen.contains(obj)){str.push("*** reference loop detected ***")}else{seen.add(obj);str.push("{");for(var x in obj){if(!opt_showFn&&goog.isFunction(obj[x])){continue}str.push("\n");str.push(nestspace);str.push(x+" = ");helper(obj[x],nestspace,seen)}str.push("\n"+space+"}")}}else{str.push(obj)}}}}}}catch(e){str.push("*** "+e+" ***")}};helper(obj,"",new goog.structs.Set());return str.join("")};goog.debug.exposeArray=function(arr){var str=[];for(var i=0;i<arr.length;i++){if(goog.isArray(arr[i])){str.push(goog.debug.exposeArray(arr[i]))}else{str.push(arr[i])}}return"[ "+str.join(", ")+" ]"};goog.debug.exposeException=function(err,opt_fn){var html=goog.debug.exposeExceptionAsHtml(err,opt_fn);return goog.html.SafeHtml.unwrap(html)};goog.debug.exposeExceptionAsHtml=function(err,opt_fn){try{var e=goog.debug.normalizeErrorObject(err);var viewSourceUrl=goog.debug.createViewSourceUrl_(e.fileName);var error=goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: "+e.message+"\nUrl: "),goog.html.SafeHtml.create("a",{href:viewSourceUrl,target:"_new"},e.fileName),goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: "+e.lineNumber+"\n\nBrowser stack:\n"+e.stack+"-> [end]\n\nJS stack traversal:\n"+goog.debug.getStacktrace(opt_fn)+"-> "));return error}catch(e2){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. "+e2)}};goog.debug.createViewSourceUrl_=function(opt_fileName){if(!goog.isDefAndNotNull(opt_fileName)){opt_fileName=""}if(!/^https?:\/\//i.test(opt_fileName)){return goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"))}var sanitizedFileName=goog.html.SafeUrl.sanitize(opt_fileName);return goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"),"view-source:"+goog.html.SafeUrl.unwrap(sanitizedFileName))};goog.debug.normalizeErrorObject=function(err){var href=goog.getObjectByName("window.location.href");if(goog.isString(err)){return{message:err,name:"Unknown error",lineNumber:"Not available",fileName:href,stack:"Not available"}}var lineNumber,fileName;var threwError=false;try{lineNumber=err.lineNumber||err.line||"Not available"}catch(e){lineNumber="Not available";threwError=true}try{fileName=err.fileName||err.filename||err.sourceURL||goog.global["$googDebugFname"]||href}catch(e){fileName="Not available";threwError=true}if(threwError||!err.lineNumber||!err.fileName||!err.stack||!err.message||!err.name){return{message:err.message||"Not available",name:err.name||"UnknownError",lineNumber:lineNumber,fileName:fileName,stack:err.stack||"Not available"}}return err};goog.debug.enhanceError=function(err,opt_message){var error;if(typeof err=="string"){error=Error(err);if(Error.captureStackTrace){Error.captureStackTrace(error,goog.debug.enhanceError)}}else{error=err}if(!error.stack){error.stack=goog.debug.getStacktrace(goog.debug.enhanceError)}if(opt_message){var x=0;while(error["message"+x]){++x}error["message"+x]=String(opt_message)}return error};goog.debug.getStacktraceSimple=function(opt_depth){if(goog.STRICT_MODE_COMPATIBLE){var stack=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(stack){return stack}}var sb=[];var fn=arguments.callee.caller;var depth=0;while(fn&&(!opt_depth||depth<opt_depth)){sb.push(goog.debug.getFunctionName(fn));sb.push("()\n");try{fn=fn.caller}catch(e){sb.push("[exception trying to get caller]\n");break}depth++;if(depth>=goog.debug.MAX_STACK_DEPTH){sb.push("[...long stack...]");break}}if(opt_depth&&depth>=opt_depth){sb.push("[...reached max depth limit...]")}else{sb.push("[end]")}return sb.join("")};goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(fn){var tempErr=new Error();if(Error.captureStackTrace){Error.captureStackTrace(tempErr,fn);return String(tempErr.stack)}else{try{throw tempErr}catch(e){tempErr=e}var stack=tempErr.stack;if(stack){return String(stack)}}return null};goog.debug.getStacktrace=function(opt_fn){var stack;if(goog.STRICT_MODE_COMPATIBLE){var contextFn=opt_fn||goog.debug.getStacktrace;stack=goog.debug.getNativeStackTrace_(contextFn)}if(!stack){stack=goog.debug.getStacktraceHelper_(opt_fn||arguments.callee.caller,[])}return stack};goog.debug.getStacktraceHelper_=function(fn,visited){var sb=[];if(goog.array.contains(visited,fn)){sb.push("[...circular reference...]")}else{if(fn&&visited.length<goog.debug.MAX_STACK_DEPTH){sb.push(goog.debug.getFunctionName(fn)+"(");var args=fn.arguments;for(var i=0;args&&i<args.length;i++){if(i>0){sb.push(", ")}var argDesc;var arg=args[i];switch(typeof arg){case"object":argDesc=arg?"object":"null";break;case"string":argDesc=arg;break;case"number":argDesc=String(arg);break;case"boolean":argDesc=arg?"true":"false";break;case"function":argDesc=goog.debug.getFunctionName(arg);argDesc=argDesc?argDesc:"[fn]";break;case"undefined":default:argDesc=typeof arg;break}if(argDesc.length>40){argDesc=argDesc.substr(0,40)+"..."}sb.push(argDesc)}visited.push(fn);sb.push(")\n");try{sb.push(goog.debug.getStacktraceHelper_(fn.caller,visited))}catch(e){sb.push("[exception trying to get caller]\n")}}else{if(fn){sb.push("[...long stack...]")}else{sb.push("[end]")}}}return sb.join("")};goog.debug.setFunctionResolver=function(resolver){goog.debug.fnNameResolver_=resolver};goog.debug.getFunctionName=function(fn){if(goog.debug.fnNameCache_[fn]){return goog.debug.fnNameCache_[fn]}if(goog.debug.fnNameResolver_){var name=goog.debug.fnNameResolver_(fn);if(name){goog.debug.fnNameCache_[fn]=name;return name}}var functionSource=String(fn);if(!goog.debug.fnNameCache_[functionSource]){var matches=/function ([^\(]+)/.exec(functionSource);if(matches){var method=matches[1];goog.debug.fnNameCache_[functionSource]=method}else{goog.debug.fnNameCache_[functionSource]="[Anonymous]"}}return goog.debug.fnNameCache_[functionSource]};goog.debug.makeWhitespaceVisible=function(string){return string.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.runtimeType=function(value){if(value instanceof Function){return value.displayName||value.name||"unknown type name"}else{if(value instanceof Object){return value.constructor.displayName||value.constructor.name||Object.prototype.toString.call(value)}else{return value===null?"null":typeof value}}};goog.debug.fnNameCache_={};goog.debug.fnNameResolver_;goog.provide("goog.debug.LogRecord");goog.debug.LogRecord=function(level,msg,loggerName,opt_time,opt_sequenceNumber){this.reset(level,msg,loggerName,opt_time,opt_sequenceNumber)};goog.debug.LogRecord.prototype.time_;goog.debug.LogRecord.prototype.level_;goog.debug.LogRecord.prototype.msg_;goog.debug.LogRecord.prototype.loggerName_;goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.define("goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS",true);goog.debug.LogRecord.nextSequenceNumber_=0;goog.debug.LogRecord.prototype.reset=function(level,msg,loggerName,opt_time,opt_sequenceNumber){if(goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS){this.sequenceNumber_=typeof opt_sequenceNumber=="number"?opt_sequenceNumber:goog.debug.LogRecord.nextSequenceNumber_++}this.time_=opt_time||goog.now();this.level_=level;this.msg_=msg;this.loggerName_=loggerName;delete this.exception_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};goog.debug.LogRecord.prototype.setException=function(exception){this.exception_=exception};goog.debug.LogRecord.prototype.setLoggerName=function(loggerName){this.loggerName_=loggerName};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(level){this.level_=level};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(msg){this.msg_=msg};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(time){this.time_=time};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.provide("goog.debug.LogBuffer");goog.require("goog.asserts");goog.require("goog.debug.LogRecord");goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){if(!goog.debug.LogBuffer.instance_){goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer()}return goog.debug.LogBuffer.instance_};goog.define("goog.debug.LogBuffer.CAPACITY",0);goog.debug.LogBuffer.prototype.buffer_;goog.debug.LogBuffer.prototype.curIndex_;goog.debug.LogBuffer.prototype.isFull_;goog.debug.LogBuffer.prototype.addRecord=function(level,msg,loggerName){var curIndex=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=curIndex;if(this.isFull_){var ret=this.buffer_[curIndex];ret.reset(level,msg,loggerName);return ret}this.isFull_=curIndex==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[curIndex]=new goog.debug.LogRecord(level,msg,loggerName)};goog.debug.LogBuffer.isBufferingEnabled=function(){return goog.debug.LogBuffer.CAPACITY>0};goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=new Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=false};goog.debug.LogBuffer.prototype.forEachRecord=function(func){var buffer=this.buffer_;if(!buffer[0]){return}var curIndex=this.curIndex_;var i=this.isFull_?curIndex:-1;do{i=(i+1)%goog.debug.LogBuffer.CAPACITY;func((buffer[i]))}while(i!=curIndex)};goog.provide("goog.debug.LogManager");goog.provide("goog.debug.Loggable");goog.provide("goog.debug.Logger");goog.provide("goog.debug.Logger.Level");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.debug");goog.require("goog.debug.LogBuffer");goog.require("goog.debug.LogRecord");goog.debug.Loggable;goog.debug.Logger=function(name){this.name_=name;this.parent_=null;this.level_=null;this.children_=null;this.handlers_=null};goog.debug.Logger.ROOT_LOGGER_NAME="";goog.define("goog.debug.Logger.ENABLE_HIERARCHY",true);if(!goog.debug.Logger.ENABLE_HIERARCHY){goog.debug.Logger.rootHandlers_=[];goog.debug.Logger.rootLevel_}goog.debug.Logger.Level=function(name,value){this.name=name;this.value=value};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1000);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var i=0,level;level=goog.debug.Logger.Level.PREDEFINED_LEVELS[i];i++){goog.debug.Logger.Level.predefinedLevelsCache_[level.value]=level;goog.debug.Logger.Level.predefinedLevelsCache_[level.name]=level}};goog.debug.Logger.Level.getPredefinedLevel=function(name){if(!goog.debug.Logger.Level.predefinedLevelsCache_){goog.debug.Logger.Level.createPredefinedLevelsCache_()}return goog.debug.Logger.Level.predefinedLevelsCache_[name]||null};goog.debug.Logger.Level.getPredefinedLevelByValue=function(value){if(!goog.debug.Logger.Level.predefinedLevelsCache_){goog.debug.Logger.Level.createPredefinedLevelsCache_()}if(value in goog.debug.Logger.Level.predefinedLevelsCache_){return goog.debug.Logger.Level.predefinedLevelsCache_[value]}for(var i=0;i<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++i){var level=goog.debug.Logger.Level.PREDEFINED_LEVELS[i];if(level.value<=value){return level}}return null};goog.debug.Logger.getLogger=function(name){return goog.debug.LogManager.getLogger(name)};goog.debug.Logger.logToProfilers=function(msg){if(goog.global.console){if(goog.global.console["timeStamp"]){goog.global.console["timeStamp"](msg)}else{if(goog.global.console["markTimeline"]){goog.global.console["markTimeline"](msg)}}}if(goog.global.msWriteProfilerMark){goog.global.msWriteProfilerMark(msg)}};goog.debug.Logger.prototype.getName=function(){return this.name_};goog.debug.Logger.prototype.addHandler=function(handler){if(goog.debug.LOGGING_ENABLED){if(goog.debug.Logger.ENABLE_HIERARCHY){if(!this.handlers_){this.handlers_=[]}this.handlers_.push(handler)}else{goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootHandlers_.push(handler)}}};goog.debug.Logger.prototype.removeHandler=function(handler){if(goog.debug.LOGGING_ENABLED){var handlers=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return !!handlers&&goog.array.remove(handlers,handler)}else{return false}};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){if(!this.children_){this.children_={}}return this.children_};goog.debug.Logger.prototype.setLevel=function(level){if(goog.debug.LOGGING_ENABLED){if(goog.debug.Logger.ENABLE_HIERARCHY){this.level_=level}else{goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootLevel_=level}}};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED){return goog.debug.Logger.Level.OFF}if(!goog.debug.Logger.ENABLE_HIERARCHY){return goog.debug.Logger.rootLevel_}if(this.level_){return this.level_}if(this.parent_){return this.parent_.getEffectiveLevel()}goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(level){return goog.debug.LOGGING_ENABLED&&level.value>=this.getEffectiveLevel().value};goog.debug.Logger.prototype.log=function(level,msg,opt_exception){if(goog.debug.LOGGING_ENABLED&&this.isLoggable(level)){if(goog.isFunction(msg)){msg=msg()}this.doLogRecord_(this.getLogRecord(level,msg,opt_exception))}};goog.debug.Logger.prototype.getLogRecord=function(level,msg,opt_exception){if(goog.debug.LogBuffer.isBufferingEnabled()){var logRecord=goog.debug.LogBuffer.getInstance().addRecord(level,msg,this.name_)}else{logRecord=new goog.debug.LogRecord(level,String(msg),this.name_)}if(opt_exception){logRecord.setException(opt_exception)}return logRecord};goog.debug.Logger.prototype.shout=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.SHOUT,msg,opt_exception)}};goog.debug.Logger.prototype.severe=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.SEVERE,msg,opt_exception)}};goog.debug.Logger.prototype.warning=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.WARNING,msg,opt_exception)}};goog.debug.Logger.prototype.info=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.INFO,msg,opt_exception)}};goog.debug.Logger.prototype.config=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.CONFIG,msg,opt_exception)}};goog.debug.Logger.prototype.fine=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINE,msg,opt_exception)}};goog.debug.Logger.prototype.finer=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINER,msg,opt_exception)}};goog.debug.Logger.prototype.finest=function(msg,opt_exception){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINEST,msg,opt_exception)}};goog.debug.Logger.prototype.logRecord=function(logRecord){if(goog.debug.LOGGING_ENABLED&&this.isLoggable(logRecord.getLevel())){this.doLogRecord_(logRecord)}};goog.debug.Logger.prototype.doLogRecord_=function(logRecord){goog.debug.Logger.logToProfilers("log:"+logRecord.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY){var target=this;while(target){target.callPublish_(logRecord);target=target.getParent()}}else{for(var i=0,handler;handler=goog.debug.Logger.rootHandlers_[i++];){handler(logRecord)}}};goog.debug.Logger.prototype.callPublish_=function(logRecord){if(this.handlers_){for(var i=0,handler;handler=this.handlers_[i];i++){handler(logRecord)}}};goog.debug.Logger.prototype.setParent_=function(parent){this.parent_=parent};goog.debug.Logger.prototype.addChild_=function(name,logger){this.getChildren()[name]=logger};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){if(!goog.debug.LogManager.rootLogger_){goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME);goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_;goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG)}};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return(goog.debug.LogManager.rootLogger_)};goog.debug.LogManager.getLogger=function(name){goog.debug.LogManager.initialize();var ret=goog.debug.LogManager.loggers_[name];return ret||goog.debug.LogManager.createLogger_(name)};goog.debug.LogManager.createFunctionForCatchErrors=function(opt_logger){return function(info){var logger=opt_logger||goog.debug.LogManager.getRoot();logger.severe("Error: "+info.message+" ("+info.fileName+" @ Line: "+info.line+")")}};goog.debug.LogManager.createLogger_=function(name){var logger=new goog.debug.Logger(name);if(goog.debug.Logger.ENABLE_HIERARCHY){var lastDotIndex=name.lastIndexOf(".");var parentName=name.substr(0,lastDotIndex);var leafName=name.substr(lastDotIndex+1);var parentLogger=goog.debug.LogManager.getLogger(parentName);parentLogger.addChild_(leafName,logger);logger.setParent_(parentLogger)}goog.debug.LogManager.loggers_[name]=logger;return logger};goog.provide("goog.debug.RelativeTimeProvider");goog.debug.RelativeTimeProvider=function(){this.relativeTimeStart_=goog.now()};goog.debug.RelativeTimeProvider.defaultInstance_=new goog.debug.RelativeTimeProvider();goog.debug.RelativeTimeProvider.prototype.set=function(timeStamp){this.relativeTimeStart_=timeStamp};goog.debug.RelativeTimeProvider.prototype.reset=function(){this.set(goog.now())};goog.debug.RelativeTimeProvider.prototype.get=function(){return this.relativeTimeStart_};goog.debug.RelativeTimeProvider.getDefaultInstance=function(){return goog.debug.RelativeTimeProvider.defaultInstance_};goog.provide("goog.debug.Formatter");goog.provide("goog.debug.HtmlFormatter");goog.provide("goog.debug.TextFormatter");goog.require("goog.debug");goog.require("goog.debug.Logger");goog.require("goog.debug.RelativeTimeProvider");goog.require("goog.html.SafeHtml");goog.debug.Formatter=function(opt_prefix){this.prefix_=opt_prefix||"";this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()};goog.debug.Formatter.prototype.appendNewline=true;goog.debug.Formatter.prototype.showAbsoluteTime=true;goog.debug.Formatter.prototype.showRelativeTime=true;goog.debug.Formatter.prototype.showLoggerName=true;goog.debug.Formatter.prototype.showExceptionText=false;goog.debug.Formatter.prototype.showSeverityLevel=false;goog.debug.Formatter.prototype.formatRecord=goog.abstractMethod;goog.debug.Formatter.prototype.formatRecordAsHtml=goog.abstractMethod;goog.debug.Formatter.prototype.setStartTimeProvider=function(provider){this.startTimeProvider_=provider};goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_};goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()};goog.debug.Formatter.getDateTimeStamp_=function(logRecord){var time=new Date(logRecord.getMillis());return goog.debug.Formatter.getTwoDigitString_((time.getFullYear()-2000))+goog.debug.Formatter.getTwoDigitString_((time.getMonth()+1))+goog.debug.Formatter.getTwoDigitString_(time.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(time.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(time.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(time.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(time.getMilliseconds()/10))};goog.debug.Formatter.getTwoDigitString_=function(n){if(n<10){return"0"+n}return String(n)};goog.debug.Formatter.getRelativeTime_=function(logRecord,relativeTimeStart){var ms=logRecord.getMillis()-relativeTimeStart;var sec=ms/1000;var str=sec.toFixed(3);var spacesToPrepend=0;if(sec<1){spacesToPrepend=2}else{while(sec<100){spacesToPrepend++;sec*=10}}while(spacesToPrepend-->0){str=" "+str}return str};goog.debug.HtmlFormatter=function(opt_prefix){goog.debug.Formatter.call(this,opt_prefix)};goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter);goog.debug.HtmlFormatter.prototype.showExceptionText=true;goog.debug.HtmlFormatter.prototype.formatRecord=function(logRecord){if(!logRecord){return""}return this.formatRecordAsHtml(logRecord).getTypedStringValue()};goog.debug.HtmlFormatter.prototype.formatRecordAsHtml=function(logRecord){if(!logRecord){return goog.html.SafeHtml.EMPTY}var className;switch(logRecord.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:className="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:className="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:className="dbg-w";break;case goog.debug.Logger.Level.INFO.value:className="dbg-i";break;case goog.debug.Logger.Level.FINE.value:default:className="dbg-f";break}var sb=[];sb.push(this.prefix_," ");if(this.showAbsoluteTime){sb.push("[",goog.debug.Formatter.getDateTimeStamp_(logRecord),"] ")}if(this.showRelativeTime){sb.push("[",goog.debug.Formatter.getRelativeTime_(logRecord,this.startTimeProvider_.get()),"s] ")}if(this.showLoggerName){sb.push("[",logRecord.getLoggerName(),"] ")}if(this.showSeverityLevel){sb.push("[",logRecord.getLevel().name,"] ")}var fullPrefixHtml=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(sb.join(""));var exceptionHtml=goog.html.SafeHtml.EMPTY;if(this.showExceptionText&&logRecord.getException()){exceptionHtml=goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),goog.debug.exposeExceptionAsHtml(logRecord.getException()))}var logRecordHtml=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(logRecord.getMessage());var recordAndExceptionHtml=goog.html.SafeHtml.create("span",{"class":className},goog.html.SafeHtml.concat(logRecordHtml,exceptionHtml));var html;if(this.appendNewline){html=goog.html.SafeHtml.concat(fullPrefixHtml,recordAndExceptionHtml,goog.html.SafeHtml.create("br"))}else{html=goog.html.SafeHtml.concat(fullPrefixHtml,recordAndExceptionHtml)}return html};goog.debug.TextFormatter=function(opt_prefix){goog.debug.Formatter.call(this,opt_prefix)};goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter);goog.debug.TextFormatter.prototype.formatRecord=function(logRecord){var sb=[];sb.push(this.prefix_," ");if(this.showAbsoluteTime){sb.push("[",goog.debug.Formatter.getDateTimeStamp_(logRecord),"] ")}if(this.showRelativeTime){sb.push("[",goog.debug.Formatter.getRelativeTime_(logRecord,this.startTimeProvider_.get()),"s] ")}if(this.showLoggerName){sb.push("[",logRecord.getLoggerName(),"] ")}if(this.showSeverityLevel){sb.push("[",logRecord.getLevel().name,"] ")}sb.push(logRecord.getMessage());if(this.showExceptionText){var exception=logRecord.getException();if(exception){var exceptionText=exception instanceof Error?exception.message:exception.toString();sb.push("\n",exceptionText)}}if(this.appendNewline){sb.push("\n")}return sb.join("")};goog.debug.TextFormatter.prototype.formatRecordAsHtml=function(logRecord){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(goog.debug.TextFormatter.prototype.formatRecord(logRecord))};goog.provide("goog.debug.Console");goog.require("goog.debug.LogManager");goog.require("goog.debug.Logger");goog.require("goog.debug.TextFormatter");goog.debug.Console=function(){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.TextFormatter();this.formatter_.showAbsoluteTime=false;this.formatter_.showExceptionText=false;this.formatter_.appendNewline=false;this.isCapturing_=false;this.logBuffer_="";this.filteredLoggers_={}};goog.debug.Console.prototype.getFormatter=function(){return this.formatter_};goog.debug.Console.prototype.setCapturing=function(capturing){if(capturing==this.isCapturing_){return}var rootLogger=goog.debug.LogManager.getRoot();if(capturing){rootLogger.addHandler(this.publishHandler_)}else{rootLogger.removeHandler(this.publishHandler_);this.logBuffer=""}this.isCapturing_=capturing};goog.debug.Console.prototype.addLogRecord=function(logRecord){if(this.filteredLoggers_[logRecord.getLoggerName()]){return}var record=this.formatter_.formatRecord(logRecord);var console=goog.debug.Console.console_;if(console){switch(logRecord.getLevel()){case goog.debug.Logger.Level.SHOUT:goog.debug.Console.logToConsole_(console,"info",record);break;case goog.debug.Logger.Level.SEVERE:goog.debug.Console.logToConsole_(console,"error",record);break;case goog.debug.Logger.Level.WARNING:goog.debug.Console.logToConsole_(console,"warn",record);break;default:goog.debug.Console.logToConsole_(console,"debug",record);break}}else{this.logBuffer_+=record}};goog.debug.Console.prototype.addFilter=function(loggerName){this.filteredLoggers_[loggerName]=true};goog.debug.Console.prototype.removeFilter=function(loggerName){delete this.filteredLoggers_[loggerName]};goog.debug.Console.instance=null;goog.debug.Console.console_=goog.global.console;goog.debug.Console.setConsole=function(console){goog.debug.Console.console_=console};goog.debug.Console.autoInstall=function(){if(!goog.debug.Console.instance){goog.debug.Console.instance=new goog.debug.Console()}if(goog.global.location&&goog.global.location.href.indexOf("Debug=true")!=-1){goog.debug.Console.instance.setCapturing(true)}};goog.debug.Console.show=function(){alert(goog.debug.Console.instance.logBuffer_)};goog.debug.Console.logToConsole_=function(console,fnName,record){if(console[fnName]){console[fnName](record)}else{console.log(record)}};goog.provide("goog.dom.ViewportSizeMonitor");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.math.Size");goog.dom.ViewportSizeMonitor=function(opt_window){goog.dom.ViewportSizeMonitor.base(this,"constructor");this.window_=opt_window||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,false,this);this.size_=goog.dom.getViewportSize(this.window_)};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(opt_window){var currentWindow=opt_window||window;var uid=goog.getUid(currentWindow);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]||new goog.dom.ViewportSizeMonitor(currentWindow)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(opt_window){var uid=goog.getUid(opt_window||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]};goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);if(this.listenerKey_){goog.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}this.window_=null;this.size_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(event){var size=goog.dom.getViewportSize(this.window_);if(!goog.math.Size.equals(size,this.size_)){this.size_=size;this.dispatchEvent(goog.events.EventType.RESIZE)}};goog.provide("goog.events.KeyCodes");goog.require("goog.userAgent");goog.forwardDeclare("goog.events.BrowserEvent");goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};goog.events.KeyCodes.isTextModifyingKeyEvent=function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||e.keyCode>=goog.events.KeyCodes.F1&&e.keyCode<=goog.events.KeyCodes.F12){return false}switch(e.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return false;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return !goog.userAgent.GECKO;default:return e.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||e.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};goog.events.KeyCodes.firesKeyPressEvent=function(keyCode,opt_heldKeyCode,opt_shiftKey,opt_ctrlKey,opt_altKey){if(!goog.userAgent.IE&&!goog.userAgent.EDGE&&!(goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525"))){return true}if(goog.userAgent.MAC&&opt_altKey){return goog.events.KeyCodes.isCharacterKey(keyCode)}if(opt_altKey&&!opt_ctrlKey){return false}if(goog.isNumber(opt_heldKeyCode)){opt_heldKeyCode=goog.events.KeyCodes.normalizeKeyCode(opt_heldKeyCode)}if(!opt_shiftKey&&(opt_heldKeyCode==goog.events.KeyCodes.CTRL||opt_heldKeyCode==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&opt_heldKeyCode==goog.events.KeyCodes.META)){return false}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&opt_ctrlKey&&opt_shiftKey){switch(keyCode){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return false}}if(goog.userAgent.IE&&opt_ctrlKey&&opt_heldKeyCode==keyCode){return false}switch(keyCode){case goog.events.KeyCodes.ENTER:return true;case goog.events.KeyCodes.ESC:return !(goog.userAgent.WEBKIT||goog.userAgent.EDGE)}return goog.events.KeyCodes.isCharacterKey(keyCode)};goog.events.KeyCodes.isCharacterKey=function(keyCode){if(keyCode>=goog.events.KeyCodes.ZERO&&keyCode<=goog.events.KeyCodes.NINE){return true}if(keyCode>=goog.events.KeyCodes.NUM_ZERO&&keyCode<=goog.events.KeyCodes.NUM_MULTIPLY){return true}if(keyCode>=goog.events.KeyCodes.A&&keyCode<=goog.events.KeyCodes.Z){return true}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&keyCode==0){return true}switch(keyCode){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return true;default:return false}};goog.events.KeyCodes.normalizeKeyCode=function(keyCode){if(goog.userAgent.GECKO){return goog.events.KeyCodes.normalizeGeckoKeyCode(keyCode)}else{if(goog.userAgent.MAC&&goog.userAgent.WEBKIT){return goog.events.KeyCodes.normalizeMacWebKitKeyCode(keyCode)}else{return keyCode}}};goog.events.KeyCodes.normalizeGeckoKeyCode=function(keyCode){switch(keyCode){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return keyCode}};goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(keyCode){switch(keyCode){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return keyCode}};goog.provide("goog.events.KeyEvent");goog.provide("goog.events.KeyHandler");goog.provide("goog.events.KeyHandler.EventType");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.events.KeyCodes");goog.require("goog.userAgent");goog.events.KeyHandler=function(opt_element,opt_capture){goog.events.EventTarget.call(this);if(opt_element){this.attach(opt_element,opt_capture)}};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=false;goog.events.KeyHandler.EventType={KEY:"key"};goog.events.KeyHandler.safariKey_={"3":goog.events.KeyCodes.ENTER,"12":goog.events.KeyCodes.NUMLOCK,"63232":goog.events.KeyCodes.UP,"63233":goog.events.KeyCodes.DOWN,"63234":goog.events.KeyCodes.LEFT,"63235":goog.events.KeyCodes.RIGHT,"63236":goog.events.KeyCodes.F1,"63237":goog.events.KeyCodes.F2,"63238":goog.events.KeyCodes.F3,"63239":goog.events.KeyCodes.F4,"63240":goog.events.KeyCodes.F5,"63241":goog.events.KeyCodes.F6,"63242":goog.events.KeyCodes.F7,"63243":goog.events.KeyCodes.F8,"63244":goog.events.KeyCodes.F9,"63245":goog.events.KeyCodes.F10,"63246":goog.events.KeyCodes.F11,"63247":goog.events.KeyCodes.F12,"63248":goog.events.KeyCodes.PRINT_SCREEN,"63272":goog.events.KeyCodes.DELETE,"63273":goog.events.KeyCodes.HOME,"63275":goog.events.KeyCodes.END,"63276":goog.events.KeyCodes.PAGE_UP,"63277":goog.events.KeyCodes.PAGE_DOWN,"63289":goog.events.KeyCodes.NUMLOCK,"63302":goog.events.KeyCodes.INSERT};goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;goog.events.KeyHandler.prototype.handleKeyDown_=function(e){if(goog.userAgent.WEBKIT||goog.userAgent.EDGE){if(this.lastKey_==goog.events.KeyCodes.CTRL&&!e.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!e.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!e.metaKey){this.resetState()}}if(this.lastKey_==-1){if(e.ctrlKey&&e.keyCode!=goog.events.KeyCodes.CTRL){this.lastKey_=goog.events.KeyCodes.CTRL}else{if(e.altKey&&e.keyCode!=goog.events.KeyCodes.ALT){this.lastKey_=goog.events.KeyCodes.ALT}else{if(e.metaKey&&e.keyCode!=goog.events.KeyCodes.META){this.lastKey_=goog.events.KeyCodes.META}}}}if(goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(e.keyCode,this.lastKey_,e.shiftKey,e.ctrlKey,e.altKey)){this.handleEvent(e)}else{this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(e.keyCode);if(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_){this.altKey_=e.altKey}}};goog.events.KeyHandler.prototype.resetState=function(){this.lastKey_=-1;this.keyCode_=-1};goog.events.KeyHandler.prototype.handleKeyup_=function(e){this.resetState();this.altKey_=e.altKey};goog.events.KeyHandler.prototype.handleEvent=function(e){var be=e.getBrowserEvent();var keyCode,charCode;var altKey=be.altKey;if(goog.userAgent.IE&&e.type==goog.events.EventType.KEYPRESS){keyCode=this.keyCode_;charCode=keyCode!=goog.events.KeyCodes.ENTER&&keyCode!=goog.events.KeyCodes.ESC?be.keyCode:0}else{if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&e.type==goog.events.EventType.KEYPRESS){keyCode=this.keyCode_;charCode=be.charCode>=0&&be.charCode<63232&&goog.events.KeyCodes.isCharacterKey(keyCode)?be.charCode:0}else{if(goog.userAgent.OPERA&&!goog.userAgent.WEBKIT){keyCode=this.keyCode_;charCode=goog.events.KeyCodes.isCharacterKey(keyCode)?be.keyCode:0}else{keyCode=be.keyCode||this.keyCode_;charCode=be.charCode||0;if(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_){altKey=this.altKey_}if(goog.userAgent.MAC&&charCode==goog.events.KeyCodes.QUESTION_MARK&&keyCode==goog.events.KeyCodes.WIN_KEY){keyCode=goog.events.KeyCodes.SLASH}}}}keyCode=goog.events.KeyCodes.normalizeKeyCode(keyCode);var key=keyCode;var keyIdentifier=be.keyIdentifier;if(keyCode){if(keyCode>=63232&&keyCode in goog.events.KeyHandler.safariKey_){key=goog.events.KeyHandler.safariKey_[keyCode]}else{if(keyCode==25&&e.shiftKey){key=9}}}else{if(keyIdentifier&&keyIdentifier in goog.events.KeyHandler.keyIdentifier_){key=goog.events.KeyHandler.keyIdentifier_[keyIdentifier]}}var repeat=key==this.lastKey_;this.lastKey_=key;var event=new goog.events.KeyEvent(key,charCode,repeat,be);event.altKey=altKey;this.dispatchEvent(event)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};goog.events.KeyHandler.prototype.attach=function(element,opt_capture){if(this.keyUpKey_){this.detach()}this.element_=element;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,opt_capture);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,opt_capture,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,opt_capture,this)};goog.events.KeyHandler.prototype.detach=function(){if(this.keyPressKey_){goog.events.unlistenByKey(this.keyPressKey_);goog.events.unlistenByKey(this.keyDownKey_);goog.events.unlistenByKey(this.keyUpKey_);this.keyPressKey_=null;this.keyDownKey_=null;this.keyUpKey_=null}this.element_=null;this.lastKey_=-1;this.keyCode_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};goog.events.KeyEvent=function(keyCode,charCode,repeat,browserEvent){goog.events.BrowserEvent.call(this,browserEvent);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=keyCode;this.charCode=charCode;this.repeat=repeat};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.provide("goog.events.MouseWheelEvent");goog.provide("goog.events.MouseWheelHandler");goog.provide("goog.events.MouseWheelHandler.EventType");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.math");goog.require("goog.style");goog.require("goog.userAgent");goog.events.MouseWheelHandler=function(element,opt_capture){goog.events.EventTarget.call(this);this.element_=element;var rtlElement=goog.dom.isElement(this.element_)?(this.element_):(this.element_?(this.element_).body:null);this.isRtl_=!!rtlElement&&goog.style.isRightToLeft(rtlElement);var type=goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel";this.listenKey_=goog.events.listen(this.element_,type,this,opt_capture)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};goog.events.MouseWheelHandler.prototype.maxDeltaX_;goog.events.MouseWheelHandler.prototype.maxDeltaY_;goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(maxDeltaX){this.maxDeltaX_=maxDeltaX};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(maxDeltaY){this.maxDeltaY_=maxDeltaY};goog.events.MouseWheelHandler.prototype.handleEvent=function(e){var deltaX=0;var deltaY=0;var detail=0;var be=e.getBrowserEvent();if(be.type=="mousewheel"){var wheelDeltaScaleFactor=1;if(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersionOrHigher("532.0"))){wheelDeltaScaleFactor=40}detail=goog.events.MouseWheelHandler.smartScale_(-be.wheelDelta,wheelDeltaScaleFactor);if(goog.isDef(be.wheelDeltaX)){deltaX=goog.events.MouseWheelHandler.smartScale_(-be.wheelDeltaX,wheelDeltaScaleFactor);deltaY=goog.events.MouseWheelHandler.smartScale_(-be.wheelDeltaY,wheelDeltaScaleFactor)}else{deltaY=detail}}else{detail=be.detail;if(detail>100){detail=3}else{if(detail<-100){detail=-3}}if(goog.isDef(be.axis)&&be.axis===be.HORIZONTAL_AXIS){deltaX=detail}else{deltaY=detail}}if(goog.isNumber(this.maxDeltaX_)){deltaX=goog.math.clamp(deltaX,-this.maxDeltaX_,this.maxDeltaX_)}if(goog.isNumber(this.maxDeltaY_)){deltaY=goog.math.clamp(deltaY,-this.maxDeltaY_,this.maxDeltaY_)}if(this.isRtl_){deltaX=-deltaX}var newEvent=new goog.events.MouseWheelEvent(detail,be,deltaX,deltaY);this.dispatchEvent(newEvent)};goog.events.MouseWheelHandler.smartScale_=function(mouseWheelDelta,scaleFactor){if(goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&(mouseWheelDelta%scaleFactor)!=0){return mouseWheelDelta}else{return mouseWheelDelta/scaleFactor}};goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);this.listenKey_=null};goog.events.MouseWheelEvent=function(detail,browserEvent,deltaX,deltaY){goog.events.BrowserEvent.call(this,browserEvent);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=detail;this.deltaX=deltaX;this.deltaY=deltaY};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.provide("goog.log");goog.provide("goog.log.Level");goog.provide("goog.log.LogRecord");goog.provide("goog.log.Logger");goog.require("goog.debug");goog.require("goog.debug.LogManager");goog.require("goog.debug.LogRecord");goog.require("goog.debug.Logger");goog.define("goog.log.ENABLED",goog.debug.LOGGING_ENABLED);goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(name,opt_level){if(goog.log.ENABLED){var logger=goog.debug.LogManager.getLogger(name);if(opt_level&&logger){logger.setLevel(opt_level)}return logger}else{return null}};goog.log.addHandler=function(logger,handler){if(goog.log.ENABLED&&logger){logger.addHandler(handler)}};goog.log.removeHandler=function(logger,handler){if(goog.log.ENABLED&&logger){return logger.removeHandler(handler)}else{return false}};goog.log.log=function(logger,level,msg,opt_exception){if(goog.log.ENABLED&&logger){logger.log(level,msg,opt_exception)}};goog.log.error=function(logger,msg,opt_exception){if(goog.log.ENABLED&&logger){logger.severe(msg,opt_exception)}};goog.log.warning=function(logger,msg,opt_exception){if(goog.log.ENABLED&&logger){logger.warning(msg,opt_exception)}};goog.log.info=function(logger,msg,opt_exception){if(goog.log.ENABLED&&logger){logger.info(msg,opt_exception)}};goog.log.fine=function(logger,msg,opt_exception){if(goog.log.ENABLED&&logger){logger.fine(msg,opt_exception)}};goog.provide("ol.pointer.PointerEvent");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.object");ol.pointer.PointerEvent=function(type,browserEvent,opt_eventDict){goog.base(this,type);this.browserEvent=browserEvent;var eventDict=goog.isDef(opt_eventDict)?opt_eventDict:{};this.buttons=this.getButtons_(eventDict);this.pressure=this.getPressure_(eventDict,this.buttons);this.bubbles=goog.object.get(eventDict,"bubbles",false);this.cancelable=goog.object.get(eventDict,"cancelable",false);this.view=goog.object.get(eventDict,"view",null);this.detail=goog.object.get(eventDict,"detail",null);this.screenX=goog.object.get(eventDict,"screenX",0);this.screenY=goog.object.get(eventDict,"screenY",0);this.clientX=goog.object.get(eventDict,"clientX",0);this.clientY=goog.object.get(eventDict,"clientY",0);this.ctrlKey=goog.object.get(eventDict,"ctrlKey",false);this.altKey=goog.object.get(eventDict,"altKey",false);this.shiftKey=goog.object.get(eventDict,"shiftKey",false);this.metaKey=goog.object.get(eventDict,"metaKey",false);this.button=goog.object.get(eventDict,"button",0);this.relatedTarget=goog.object.get(eventDict,"relatedTarget",null);this.pointerId=goog.object.get(eventDict,"pointerId",0);this.width=goog.object.get(eventDict,"width",0);this.height=goog.object.get(eventDict,"height",0);this.tiltX=goog.object.get(eventDict,"tiltX",0);this.tiltY=goog.object.get(eventDict,"tiltY",0);this.pointerType=goog.object.get(eventDict,"pointerType","");this.hwTimestamp=goog.object.get(eventDict,"hwTimestamp",0);this.isPrimary=goog.object.get(eventDict,"isPrimary",false);if(browserEvent.preventDefault){this.preventDefault=function(){browserEvent.preventDefault()}}};goog.inherits(ol.pointer.PointerEvent,goog.events.Event);ol.pointer.PointerEvent.prototype.getButtons_=function(eventDict){var buttons;if(eventDict.buttons||ol.pointer.PointerEvent.HAS_BUTTONS){buttons=eventDict.buttons}else{switch(eventDict.which){case 1:buttons=1;break;case 2:buttons=4;break;case 3:buttons=2;break;default:buttons=0}}return buttons};ol.pointer.PointerEvent.prototype.getPressure_=function(eventDict,buttons){var pressure=0;if(eventDict.pressure){pressure=eventDict.pressure}else{pressure=buttons?0.5:0}return pressure};ol.pointer.PointerEvent.HAS_BUTTONS=false;(function(){try{var ev=new MouseEvent("click",{buttons:1});ol.pointer.PointerEvent.HAS_BUTTONS=ev.buttons===1}catch(e){}})();goog.provide("ol.dom");goog.provide("ol.dom.BrowserFeature");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.userAgent");goog.require("goog.vec.Mat4");goog.require("ol");ol.dom.createCanvasContext2D=function(opt_width,opt_height){var canvas=goog.dom.createElement(goog.dom.TagName.CANVAS);if(goog.isDef(opt_width)){canvas.width=opt_width}if(goog.isDef(opt_height)){canvas.height=opt_height}return canvas.getContext("2d")};ol.dom.BrowserFeature={USE_MS_MATRIX_TRANSFORM:ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE,USE_MS_ALPHA_FILTER:ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE};ol.dom.canUseCssTransform=(function(){var canUseCssTransform;return function(){if(!goog.isDef(canUseCssTransform)){goog.asserts.assert(!goog.isNull(document.body),"document.body should not be null");if(!goog.global.getComputedStyle){canUseCssTransform=false}else{var el=goog.dom.createElement(goog.dom.TagName.P),has2d,transforms={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};goog.dom.appendChild(document.body,el);for(var t in transforms){if(t in el.style){el.style[t]="translate(1px,1px)";has2d=goog.global.getComputedStyle(el).getPropertyValue(transforms[t])}}goog.dom.removeNode(el);canUseCssTransform=(has2d&&has2d!=="none")}}return canUseCssTransform}}());ol.dom.canUseCssTransform3D=(function(){var canUseCssTransform3D;return function(){if(!goog.isDef(canUseCssTransform3D)){goog.asserts.assert(!goog.isNull(document.body),"document.body should not be null");if(!goog.global.getComputedStyle){canUseCssTransform3D=false}else{var el=goog.dom.createElement(goog.dom.TagName.P),has3d,transforms={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};goog.dom.appendChild(document.body,el);for(var t in transforms){if(t in el.style){el.style[t]="translate3d(1px,1px,1px)";has3d=goog.global.getComputedStyle(el).getPropertyValue(transforms[t])}}goog.dom.removeNode(el);canUseCssTransform3D=(has3d&&has3d!=="none")}}return canUseCssTransform3D}}());ol.dom.setTransform=function(element,value){var style=element.style;style.WebkitTransform=value;style.MozTransform=value;style.OTransform=value;style.msTransform=value;style.transform=value;if(goog.userAgent.IE&&!ol.IS_LEGACY_IE){element.style.transformOrigin="0 0"}};ol.dom.setOpacity=function(element,value){if(ol.dom.BrowserFeature.USE_MS_ALPHA_FILTER){var filter=element.currentStyle.filter;var regex;var alpha;if(goog.userAgent.VERSION=="8.0"){regex=/progid:DXImageTransform\.Microsoft\.Alpha\(.*?\)/i;alpha="progid:DXImageTransform.Microsoft.Alpha(Opacity="+(value*100)+")"}else{regex=/alpha\(.*?\)/i;alpha="alpha(opacity="+(value*100)+")"}var newFilter=filter.replace(regex,alpha);if(newFilter===filter){newFilter+=" "+alpha}element.style.filter=newFilter;if(element.currentStyle.zIndex==="auto"){element.style.zIndex=0}}else{element.style.opacity=value}};ol.dom.setIEMatrix_=function(element,value){var filter=element.currentStyle.filter;var newFilter=filter.replace(/progid:DXImageTransform.Microsoft.Matrix\(.*?\)/i,value);if(newFilter===filter){newFilter=" "+value}element.style.filter=newFilter;if(element.currentStyle.zIndex==="auto"){element.style.zIndex=0}};ol.dom.transformElement2D=function(element,transform,opt_precision,opt_translationElement){var i;if(ol.dom.canUseCssTransform3D()){var value3D;if(goog.isDef(opt_precision)){var strings3D=new Array(16);for(i=0;i<16;++i){strings3D[i]=transform[i].toFixed(opt_precision)}value3D=strings3D.join(",")}else{value3D=transform.join(",")}ol.dom.setTransform(element,"matrix3d("+value3D+")")}else{if(ol.dom.canUseCssTransform()){var transform2D=[goog.vec.Mat4.getElement(transform,0,0),goog.vec.Mat4.getElement(transform,1,0),goog.vec.Mat4.getElement(transform,0,1),goog.vec.Mat4.getElement(transform,1,1),goog.vec.Mat4.getElement(transform,0,3),goog.vec.Mat4.getElement(transform,1,3)];var value2D;if(goog.isDef(opt_precision)){var strings2D=new Array(6);for(i=0;i<6;++i){strings2D[i]=transform2D[i].toFixed(opt_precision)}value2D=strings2D.join(",")}else{value2D=transform2D.join(",")}ol.dom.setTransform(element,"matrix("+value2D+")")}else{if(ol.dom.BrowserFeature.USE_MS_MATRIX_TRANSFORM){var m11=goog.vec.Mat4.getElement(transform,0,0),m12=goog.vec.Mat4.getElement(transform,0,1),m21=goog.vec.Mat4.getElement(transform,1,0),m22=goog.vec.Mat4.getElement(transform,1,1),dx=goog.vec.Mat4.getElement(transform,0,3),dy=goog.vec.Mat4.getElement(transform,1,3);var s="progid:DXImageTransform.Microsoft.Matrix(";s+='sizingMethod="auto expand"';s+=",M11="+m11.toFixed(opt_precision||20);s+=",M12="+m12.toFixed(opt_precision||20);s+=",M21="+m21.toFixed(opt_precision||20);s+=",M22="+m22.toFixed(opt_precision||20);s+=")";ol.dom.setIEMatrix_(element,s);dx/=m11;dy/=m22;opt_translationElement.style.left=Math.round(dx)+"px";opt_translationElement.style.top=Math.round(dy)+"px"}else{element.style.left=Math.round(goog.vec.Mat4.getElement(transform,0,3))+"px";element.style.top=Math.round(goog.vec.Mat4.getElement(transform,1,3))+"px"}}}};ol.dom.outerWidth=function(element){var width=element.offsetWidth;var style=element.currentStyle||window.getComputedStyle(element);width+=parseInt(style.marginLeft,10)+parseInt(style.marginRight,10);return width};ol.dom.outerHeight=function(element){var height=element.offsetHeight;var style=element.currentStyle||window.getComputedStyle(element);height+=parseInt(style.marginTop,10)+parseInt(style.marginBottom,10);return height};goog.provide("ol.webgl");goog.provide("ol.webgl.WebGLContextEventType");ol.webgl.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"];ol.webgl.WebGLContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};ol.webgl.getContext=function(canvas,opt_attributes){var context,i,ii=ol.webgl.CONTEXT_IDS_.length;for(i=0;i<ii;++i){try{context=canvas.getContext(ol.webgl.CONTEXT_IDS_[i],opt_attributes);if(!goog.isNull(context)){return(context)}}catch(e){}}return null};goog.provide("ol.has");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("ol");goog.require("ol.dom");goog.require("ol.webgl");ol.has.DEVICE_PIXEL_RATIO=goog.global.devicePixelRatio||1;ol.has.CANVAS_LINE_DASH=false;ol.has.CANVAS=ol.ENABLE_CANVAS&&(function(){if(!("HTMLCanvasElement" in goog.global)){return false}try{var context=ol.dom.createCanvasContext2D();if(goog.isNull(context)){return false}else{if(goog.isDef(context.setLineDash)){ol.has.CANVAS_LINE_DASH=true}return true}}catch(e){return false}})();ol.has.DEVICE_ORIENTATION="DeviceOrientationEvent" in goog.global;ol.has.DOM=ol.ENABLE_DOM;ol.has.GEOLOCATION="geolocation" in goog.global.navigator;ol.has.TOUCH=ol.ASSUME_TOUCH||"ontouchstart" in goog.global;ol.has.POINTER="PointerEvent" in goog.global;ol.has.MSPOINTER=!!(goog.global.navigator.msPointerEnabled);ol.has.WEBGL;(function(){if(ol.ENABLE_WEBGL){var hasWebGL=false;var textureSize;var extensions=[];if("WebGLRenderingContext" in goog.global){try{var canvas=(goog.dom.createElement(goog.dom.TagName.CANVAS));var gl=ol.webgl.getContext(canvas,{failIfMajorPerformanceCaveat:true});if(!goog.isNull(gl)){hasWebGL=true;textureSize=(gl.getParameter(gl.MAX_TEXTURE_SIZE));extensions=gl.getSupportedExtensions()}}catch(e){}}ol.has.WEBGL=hasWebGL;ol.WEBGL_EXTENSIONS=extensions;ol.WEBGL_MAX_TEXTURE_SIZE=textureSize}})();goog.provide("ol.pointer.EventSource");goog.require("goog.events.BrowserEvent");goog.require("goog.object");ol.pointer.EventSource=function(dispatcher,mapping){this.dispatcher=dispatcher;this.mapping_=mapping};ol.pointer.EventSource.prototype.getEvents=function(){return goog.object.getKeys(this.mapping_)};ol.pointer.EventSource.prototype.getMapping=function(){return this.mapping_};ol.pointer.EventSource.prototype.getHandlerForEvent=function(eventType){return this.mapping_[eventType]};goog.provide("ol.pointer.MouseSource");goog.require("goog.object");goog.require("ol.pointer.EventSource");ol.pointer.MouseSource=function(dispatcher){var mapping={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};goog.base(this,dispatcher,mapping);this.pointerMap=dispatcher.pointerMap;this.lastTouches=[]};goog.inherits(ol.pointer.MouseSource,ol.pointer.EventSource);ol.pointer.MouseSource.POINTER_ID=1;ol.pointer.MouseSource.POINTER_TYPE="mouse";ol.pointer.MouseSource.DEDUP_DIST=25;ol.pointer.MouseSource.prototype.isEventSimulatedFromTouch_=function(inEvent){var lts=this.lastTouches;var x=inEvent.clientX,y=inEvent.clientY;for(var i=0,l=lts.length,t;i<l&&(t=lts[i]);i++){var dx=Math.abs(x-t[0]),dy=Math.abs(y-t[1]);if(dx<=ol.pointer.MouseSource.DEDUP_DIST&&dy<=ol.pointer.MouseSource.DEDUP_DIST){return true}}return false};ol.pointer.MouseSource.prepareEvent=function(inEvent,dispatcher){var e=dispatcher.cloneEvent(inEvent,inEvent.getBrowserEvent());var pd=e.preventDefault;e.preventDefault=function(){inEvent.preventDefault();pd()};e.pointerId=ol.pointer.MouseSource.POINTER_ID;e.isPrimary=true;e.pointerType=ol.pointer.MouseSource.POINTER_TYPE;return e};ol.pointer.MouseSource.prototype.mousedown=function(inEvent){if(!this.isEventSimulatedFromTouch_(inEvent)){var p=goog.object.containsKey(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString());if(p){this.cancel(inEvent)}var e=ol.pointer.MouseSource.prepareEvent(inEvent,this.dispatcher);this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]=inEvent;this.dispatcher.down(e,inEvent)}};ol.pointer.MouseSource.prototype.mousemove=function(inEvent){if(!this.isEventSimulatedFromTouch_(inEvent)){var e=ol.pointer.MouseSource.prepareEvent(inEvent,this.dispatcher);this.dispatcher.move(e,inEvent)}};ol.pointer.MouseSource.prototype.mouseup=function(inEvent){if(!this.isEventSimulatedFromTouch_(inEvent)){var p=this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()];if(p&&p.button===inEvent.button){var e=ol.pointer.MouseSource.prepareEvent(inEvent,this.dispatcher);this.dispatcher.up(e,inEvent);this.cleanupMouse()}}};ol.pointer.MouseSource.prototype.mouseover=function(inEvent){if(!this.isEventSimulatedFromTouch_(inEvent)){var e=ol.pointer.MouseSource.prepareEvent(inEvent,this.dispatcher);this.dispatcher.enterOver(e,inEvent)}};ol.pointer.MouseSource.prototype.mouseout=function(inEvent){if(!this.isEventSimulatedFromTouch_(inEvent)){var e=ol.pointer.MouseSource.prepareEvent(inEvent,this.dispatcher);this.dispatcher.leaveOut(e,inEvent)}};ol.pointer.MouseSource.prototype.cancel=function(inEvent){var e=ol.pointer.MouseSource.prepareEvent(inEvent,this.dispatcher);this.dispatcher.cancel(e,inEvent);this.cleanupMouse()};ol.pointer.MouseSource.prototype.cleanupMouse=function(){goog.object.remove(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString())};goog.provide("ol.pointer.MsSource");goog.require("goog.object");goog.require("ol.pointer.EventSource");ol.pointer.MsSource=function(dispatcher){var mapping={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};goog.base(this,dispatcher,mapping);this.pointerMap=dispatcher.pointerMap;this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};goog.inherits(ol.pointer.MsSource,ol.pointer.EventSource);ol.pointer.MsSource.prototype.prepareEvent_=function(inEvent){var e=inEvent;if(goog.isNumber(inEvent.getBrowserEvent().pointerType)){e=this.dispatcher.cloneEvent(inEvent,inEvent.getBrowserEvent());e.pointerType=this.POINTER_TYPES[inEvent.getBrowserEvent().pointerType]}return e};ol.pointer.MsSource.prototype.cleanup=function(pointerId){goog.object.remove(this.pointerMap,pointerId)};ol.pointer.MsSource.prototype.msPointerDown=function(inEvent){this.pointerMap[inEvent.getBrowserEvent().pointerId]=inEvent;var e=this.prepareEvent_(inEvent);this.dispatcher.down(e,inEvent)};ol.pointer.MsSource.prototype.msPointerMove=function(inEvent){var e=this.prepareEvent_(inEvent);this.dispatcher.move(e,inEvent)};ol.pointer.MsSource.prototype.msPointerUp=function(inEvent){var e=this.prepareEvent_(inEvent);this.dispatcher.up(e,inEvent);this.cleanup(inEvent.getBrowserEvent().pointerId)};ol.pointer.MsSource.prototype.msPointerOut=function(inEvent){var e=this.prepareEvent_(inEvent);this.dispatcher.leaveOut(e,inEvent)};ol.pointer.MsSource.prototype.msPointerOver=function(inEvent){var e=this.prepareEvent_(inEvent);this.dispatcher.enterOver(e,inEvent)};ol.pointer.MsSource.prototype.msPointerCancel=function(inEvent){var e=this.prepareEvent_(inEvent);this.dispatcher.cancel(e,inEvent);this.cleanup(inEvent.getBrowserEvent().pointerId)};ol.pointer.MsSource.prototype.msLostPointerCapture=function(inEvent){var e=this.dispatcher.makeEvent("lostpointercapture",inEvent.getBrowserEvent(),inEvent);this.dispatcher.dispatchEvent(e)};ol.pointer.MsSource.prototype.msGotPointerCapture=function(inEvent){var e=this.dispatcher.makeEvent("gotpointercapture",inEvent.getBrowserEvent(),inEvent);this.dispatcher.dispatchEvent(e)};goog.provide("ol.pointer.NativeSource");goog.require("ol.pointer.EventSource");ol.pointer.NativeSource=function(dispatcher){var mapping={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};goog.base(this,dispatcher,mapping)};goog.inherits(ol.pointer.NativeSource,ol.pointer.EventSource);ol.pointer.NativeSource.prototype.pointerDown=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.pointerMove=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.pointerUp=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.pointerOut=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.pointerOver=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.pointerCancel=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.lostPointerCapture=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};ol.pointer.NativeSource.prototype.gotPointerCapture=function(inEvent){this.dispatcher.fireNativeEvent(inEvent)};goog.provide("ol.pointer.TouchSource");goog.require("goog.array");goog.require("goog.object");goog.require("ol.pointer.EventSource");goog.require("ol.pointer.MouseSource");ol.pointer.TouchSource=function(dispatcher,mouseSource){var mapping={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};goog.base(this,dispatcher,mapping);this.pointerMap=dispatcher.pointerMap;this.mouseSource=mouseSource;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_=undefined};goog.inherits(ol.pointer.TouchSource,ol.pointer.EventSource);ol.pointer.TouchSource.DEDUP_TIMEOUT=2500;ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT=200;ol.pointer.TouchSource.POINTER_TYPE="touch";ol.pointer.TouchSource.prototype.isPrimaryTouch_=function(inTouch){return this.firstTouchId_===inTouch.identifier};ol.pointer.TouchSource.prototype.setPrimaryTouch_=function(inTouch){var count=goog.object.getCount(this.pointerMap);if(count===0||(count===1&&goog.object.containsKey(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString()))){this.firstTouchId_=inTouch.identifier;this.cancelResetClickCount_()}};ol.pointer.TouchSource.prototype.removePrimaryPointer_=function(inPointer){if(inPointer.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};ol.pointer.TouchSource.prototype.resetClickCount_=function(){this.resetId_=goog.global.setTimeout(goog.bind(this.resetClickCountHandler_,this),ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT)};ol.pointer.TouchSource.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=undefined};ol.pointer.TouchSource.prototype.cancelResetClickCount_=function(){if(goog.isDef(this.resetId_)){goog.global.clearTimeout(this.resetId_)}};ol.pointer.TouchSource.prototype.touchToPointer_=function(browserEvent,inTouch){var e=this.dispatcher.cloneEvent(browserEvent,inTouch);e.pointerId=inTouch.identifier+2;e.bubbles=true;e.cancelable=true;e.detail=this.clickCount_;e.button=0;e.buttons=1;e.width=inTouch.webkitRadiusX||inTouch.radiusX||0;e.height=inTouch.webkitRadiusY||inTouch.radiusY||0;e.pressure=inTouch.webkitForce||inTouch.force||0.5;e.isPrimary=this.isPrimaryTouch_(inTouch);e.pointerType=ol.pointer.TouchSource.POINTER_TYPE;e.clientX=inTouch.clientX;e.clientY=inTouch.clientY;e.screenX=inTouch.screenX;e.screenY=inTouch.screenY;return e};ol.pointer.TouchSource.prototype.processTouches_=function(inEvent,inFunction){var touches=Array.prototype.slice.call(inEvent.getBrowserEvent().changedTouches);var count=touches.length;function preventDefault(){inEvent.preventDefault()}var i,pointer;for(i=0;i<count;++i){pointer=this.touchToPointer_(inEvent,touches[i]);pointer.preventDefault=preventDefault;inFunction.call(this,inEvent,pointer)}};ol.pointer.TouchSource.prototype.findTouch_=function(touchList,searchId){var l=touchList.length;var touch;for(var i=0;i<l;i++){touch=touchList[i];if(touch.identifier===searchId){return true}}return false};ol.pointer.TouchSource.prototype.vacuumTouches_=function(inEvent){var touchList=inEvent.getBrowserEvent().touches;var keys=goog.object.getKeys(this.pointerMap);var count=keys.length;if(count>=touchList.length){var d=[];var i,key,value;for(i=0;i<count;++i){key=keys[i];value=this.pointerMap[key];if(key!=ol.pointer.MouseSource.POINTER_ID&&!this.findTouch_(touchList,key-2)){d.push(value.out)}}for(i=0;i<d.length;++i){this.cancelOut_(inEvent,d[i])}}};ol.pointer.TouchSource.prototype.touchstart=function(inEvent){this.vacuumTouches_(inEvent);this.setPrimaryTouch_(inEvent.getBrowserEvent().changedTouches[0]);this.dedupSynthMouse_(inEvent);this.clickCount_++;this.processTouches_(inEvent,this.overDown_)};ol.pointer.TouchSource.prototype.overDown_=function(browserEvent,inPointer){this.pointerMap[inPointer.pointerId]={target:inPointer.target,out:inPointer,outTarget:inPointer.target};this.dispatcher.over(inPointer,browserEvent);this.dispatcher.enter(inPointer,browserEvent);this.dispatcher.down(inPointer,browserEvent)};ol.pointer.TouchSource.prototype.touchmove=function(inEvent){inEvent.preventDefault();this.processTouches_(inEvent,this.moveOverOut_)};ol.pointer.TouchSource.prototype.moveOverOut_=function(browserEvent,inPointer){var event=inPointer;var pointer=this.pointerMap[event.pointerId];if(!pointer){return}var outEvent=pointer.out;var outTarget=pointer.outTarget;this.dispatcher.move(event,browserEvent);if(outEvent&&outTarget!==event.target){outEvent.relatedTarget=event.target;event.relatedTarget=outTarget;outEvent.target=outTarget;if(event.target){this.dispatcher.leaveOut(outEvent,browserEvent);this.dispatcher.enterOver(event,browserEvent)}else{event.target=outTarget;event.relatedTarget=null;this.cancelOut_(browserEvent,event)}}pointer.out=event;pointer.outTarget=event.target};ol.pointer.TouchSource.prototype.touchend=function(inEvent){this.dedupSynthMouse_(inEvent);this.processTouches_(inEvent,this.upOut_)};ol.pointer.TouchSource.prototype.upOut_=function(browserEvent,inPointer){this.dispatcher.up(inPointer,browserEvent);this.dispatcher.out(inPointer,browserEvent);this.dispatcher.leave(inPointer,browserEvent);this.cleanUpPointer_(inPointer)};ol.pointer.TouchSource.prototype.touchcancel=function(inEvent){this.processTouches_(inEvent,this.cancelOut_)};ol.pointer.TouchSource.prototype.cancelOut_=function(browserEvent,inPointer){this.dispatcher.cancel(inPointer,browserEvent);this.dispatcher.out(inPointer,browserEvent);this.dispatcher.leave(inPointer,browserEvent);this.cleanUpPointer_(inPointer)};ol.pointer.TouchSource.prototype.cleanUpPointer_=function(inPointer){goog.object.remove(this.pointerMap,inPointer.pointerId);this.removePrimaryPointer_(inPointer)};ol.pointer.TouchSource.prototype.dedupSynthMouse_=function(inEvent){var lts=this.mouseSource.lastTouches;var t=inEvent.getBrowserEvent().changedTouches[0];if(this.isPrimaryTouch_(t)){var lt=([t.clientX,t.clientY]);lts.push(lt);goog.global.setTimeout(function(){goog.array.remove(lts,lt)},ol.pointer.TouchSource.DEDUP_TIMEOUT)}};goog.provide("ol.pointer.PointerEventHandler");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("ol.has");goog.require("ol.pointer.MouseSource");goog.require("ol.pointer.MsSource");goog.require("ol.pointer.NativeSource");goog.require("ol.pointer.PointerEvent");goog.require("ol.pointer.TouchSource");ol.pointer.PointerEventHandler=function(element){goog.base(this);this.element_=element;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};goog.inherits(ol.pointer.PointerEventHandler,goog.events.EventTarget);ol.pointer.PointerEventHandler.prototype.registerSources=function(){if(ol.has.POINTER){this.registerSource("native",new ol.pointer.NativeSource(this))}else{if(ol.has.MSPOINTER){this.registerSource("ms",new ol.pointer.MsSource(this))}else{var mouseSource=new ol.pointer.MouseSource(this);this.registerSource("mouse",mouseSource);if(ol.has.TOUCH){this.registerSource("touch",new ol.pointer.TouchSource(this,mouseSource))}}}this.register_()};ol.pointer.PointerEventHandler.prototype.registerSource=function(name,source){var s=source;var newEvents=s.getEvents();if(newEvents){goog.array.forEach(newEvents,function(e){var handler=s.getHandlerForEvent(e);if(handler){this.eventMap_[e]=goog.bind(handler,s)}},this);this.eventSourceList_.push(s)}};ol.pointer.PointerEventHandler.prototype.register_=function(){var l=this.eventSourceList_.length;var eventSource;for(var i=0;i<l;i++){eventSource=this.eventSourceList_[i];this.addEvents_(eventSource.getEvents())}};ol.pointer.PointerEventHandler.prototype.unregister_=function(){var l=this.eventSourceList_.length;var eventSource;for(var i=0;i<l;i++){eventSource=this.eventSourceList_[i];this.removeEvents_(eventSource.getEvents())}};ol.pointer.PointerEventHandler.prototype.eventHandler_=function(inEvent){var type=inEvent.type;var handler=this.eventMap_[type];if(handler){handler(inEvent)}};ol.pointer.PointerEventHandler.prototype.addEvents_=function(events){goog.array.forEach(events,function(eventName){goog.events.listen(this.element_,eventName,this.eventHandler_,false,this)},this)};ol.pointer.PointerEventHandler.prototype.removeEvents_=function(events){goog.array.forEach(events,function(e){goog.events.unlisten(this.element_,e,this.eventHandler_,false,this)},this)};ol.pointer.PointerEventHandler.prototype.cloneEvent=function(browserEvent,inEvent){var eventCopy={},p;for(var i=0,ii=ol.pointer.CLONE_PROPS.length;i<ii;i++){p=ol.pointer.CLONE_PROPS[i][0];eventCopy[p]=browserEvent[p]||inEvent[p]||ol.pointer.CLONE_PROPS[i][1]}return eventCopy};ol.pointer.PointerEventHandler.prototype.down=function(pointerEventData,browserEvent){this.fireEvent(ol.pointer.EventType.POINTERDOWN,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.move=function(pointerEventData,browserEvent){this.fireEvent(ol.pointer.EventType.POINTERMOVE,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.up=function(pointerEventData,browserEvent){this.fireEvent(ol.pointer.EventType.POINTERUP,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.enter=function(pointerEventData,browserEvent){pointerEventData.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERENTER,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.leave=function(pointerEventData,browserEvent){pointerEventData.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERLEAVE,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.over=function(pointerEventData,browserEvent){pointerEventData.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROVER,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.out=function(pointerEventData,browserEvent){pointerEventData.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROUT,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.cancel=function(pointerEventData,browserEvent){this.fireEvent(ol.pointer.EventType.POINTERCANCEL,pointerEventData,browserEvent)};ol.pointer.PointerEventHandler.prototype.leaveOut=function(pointerEventData,browserEvent){this.out(pointerEventData,browserEvent);if(!this.contains_(pointerEventData.target,pointerEventData.relatedTarget)){this.leave(pointerEventData,browserEvent)}};ol.pointer.PointerEventHandler.prototype.enterOver=function(pointerEventData,browserEvent){this.over(pointerEventData,browserEvent);if(!this.contains_(pointerEventData.target,pointerEventData.relatedTarget)){this.enter(pointerEventData,browserEvent)}};ol.pointer.PointerEventHandler.prototype.contains_=function(container,contained){if(goog.isNull(contained)){return false}return goog.dom.contains(container,contained)};ol.pointer.PointerEventHandler.prototype.makeEvent=function(inType,pointerEventData,browserEvent){return new ol.pointer.PointerEvent(inType,browserEvent,pointerEventData)};ol.pointer.PointerEventHandler.prototype.fireEvent=function(inType,pointerEventData,browserEvent){var e=this.makeEvent(inType,pointerEventData,browserEvent);this.dispatchEvent(e)};ol.pointer.PointerEventHandler.prototype.fireNativeEvent=function(nativeEvent){var e=this.makeEvent(nativeEvent.type,nativeEvent.getBrowserEvent(),nativeEvent);this.dispatchEvent(e)};ol.pointer.PointerEventHandler.prototype.wrapMouseEvent=function(eventType,browserEvent){var pointerEvent=this.makeEvent(eventType,ol.pointer.MouseSource.prepareEvent(browserEvent,this),browserEvent);return pointerEvent};ol.pointer.PointerEventHandler.prototype.disposeInternal=function(){this.unregister_();goog.base(this,"disposeInternal")};ol.pointer.EventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};ol.pointer.CLONE_PROPS=[["bubbles",false],["cancelable",false],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",false],["altKey",false],["shiftKey",false],["metaKey",false],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",false],["type",""],["target",null],["currentTarget",null],["which",0]];goog.provide("ol.MapBrowserEvent");goog.provide("ol.MapBrowserEvent.EventType");goog.provide("ol.MapBrowserEventHandler");goog.provide("ol.MapBrowserPointerEvent");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.MapEvent");goog.require("ol.Pixel");goog.require("ol.pointer.PointerEvent");goog.require("ol.pointer.PointerEventHandler");ol.MapBrowserEvent=function(type,map,browserEvent,opt_dragging,opt_frameState){goog.base(this,type,map,opt_frameState);this.browserEvent=browserEvent;this.originalEvent=browserEvent.getBrowserEvent();this.pixel=map.getEventPixel(this.originalEvent);this.coordinate=map.getCoordinateFromPixel(this.pixel);this.dragging=goog.isDef(opt_dragging)?opt_dragging:false};goog.inherits(ol.MapBrowserEvent,ol.MapEvent);ol.MapBrowserEvent.prototype.preventDefault=function(){goog.base(this,"preventDefault");this.browserEvent.preventDefault()};ol.MapBrowserEvent.prototype.stopPropagation=function(){goog.base(this,"stopPropagation");this.browserEvent.stopPropagation()};ol.MapBrowserPointerEvent=function(type,map,pointerEvent,opt_dragging,opt_frameState){goog.base(this,type,map,pointerEvent.browserEvent,opt_dragging,opt_frameState);this.pointerEvent=pointerEvent};goog.inherits(ol.MapBrowserPointerEvent,ol.MapBrowserEvent);ol.MapBrowserEventHandler=function(map){goog.base(this);this.map_=map;this.clickTimeoutId_=0;this.dragging_=false;this.dragListenerKeys_=null;this.pointerdownListenerKey_=null;if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.ieDblclickListenerKey_=null}this.down_=null;var element=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new ol.pointer.PointerEventHandler(element);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=goog.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERDOWN,this.handlePointerDown_,false,this);this.relayedListenerKey_=goog.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERMOVE,this.relayEvent_,false,this);if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.ieDblclickListenerKey_=goog.events.listen(element,goog.events.EventType.DBLCLICK,this.emulateClickLegacyIE_,false,this)}};goog.inherits(ol.MapBrowserEventHandler,goog.events.EventTarget);ol.MapBrowserEventHandler.prototype.emulateClickLegacyIE_=function(browserEvent){var pointerEvent=this.pointerEventHandler_.wrapMouseEvent(ol.MapBrowserEvent.EventType.POINTERUP,browserEvent);this.emulateClick_(pointerEvent)};ol.MapBrowserEventHandler.prototype.emulateClick_=function(pointerEvent){var newEvent;newEvent=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.CLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent);if(this.clickTimeoutId_!==0){goog.global.clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=0;newEvent=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.DBLCLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent)}else{this.clickTimeoutId_=goog.global.setTimeout(goog.bind(function(){this.clickTimeoutId_=0;var newEvent=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.SINGLECLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent)},this),250)}};ol.MapBrowserEventHandler.prototype.updateActivePointers_=function(pointerEvent){var event=pointerEvent;if(event.type==ol.MapBrowserEvent.EventType.POINTERUP||event.type==ol.MapBrowserEvent.EventType.POINTERCANCEL){delete this.trackedTouches_[event.pointerId]}else{if(event.type==ol.MapBrowserEvent.EventType.POINTERDOWN){this.trackedTouches_[event.pointerId]=true}}this.activePointers_=goog.object.getCount(this.trackedTouches_)};ol.MapBrowserEventHandler.prototype.handlePointerUp_=function(pointerEvent){this.updateActivePointers_(pointerEvent);var newEvent=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERUP,this.map_,pointerEvent);this.dispatchEvent(newEvent);if(!this.dragging_&&this.isMouseActionButton_(pointerEvent)){goog.asserts.assert(!goog.isNull(this.down_),"this.down_ should not be null");this.emulateClick_(this.down_)}goog.asserts.assert(this.activePointers_>=0,"this.activePointers_ should be equal to or larger than 0");if(this.activePointers_===0){goog.array.forEach(this.dragListenerKeys_,goog.events.unlistenByKey);this.dragListenerKeys_=null;this.dragging_=false;this.down_=null;goog.dispose(this.documentPointerEventHandler_);this.documentPointerEventHandler_=null}};ol.MapBrowserEventHandler.prototype.isMouseActionButton_=function(pointerEvent){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){return pointerEvent.button==1}else{return pointerEvent.button===0}};ol.MapBrowserEventHandler.prototype.handlePointerDown_=function(pointerEvent){this.updateActivePointers_(pointerEvent);var newEvent=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDOWN,this.map_,pointerEvent);this.dispatchEvent(newEvent);this.down_=pointerEvent;if(goog.isNull(this.dragListenerKeys_)){this.documentPointerEventHandler_=new ol.pointer.PointerEventHandler(document);this.dragListenerKeys_=[goog.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERMOVE,this.handlePointerMove_,false,this),goog.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERUP,this.handlePointerUp_,false,this),goog.events.listen(this.pointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERCANCEL,this.handlePointerUp_,false,this)]}};ol.MapBrowserEventHandler.prototype.handlePointerMove_=function(pointerEvent){if(this.isMoving_(pointerEvent)){this.dragging_=true;var newEvent=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDRAG,this.map_,pointerEvent,this.dragging_);this.dispatchEvent(newEvent)}pointerEvent.preventDefault()};ol.MapBrowserEventHandler.prototype.relayEvent_=function(pointerEvent){var dragging=!goog.isNull(this.down_)&&this.isMoving_(pointerEvent);this.dispatchEvent(new ol.MapBrowserPointerEvent(pointerEvent.type,this.map_,pointerEvent,dragging))};ol.MapBrowserEventHandler.prototype.isMoving_=function(pointerEvent){return pointerEvent.clientX!=this.down_.clientX||pointerEvent.clientY!=this.down_.clientY};ol.MapBrowserEventHandler.prototype.disposeInternal=function(){if(!goog.isNull(this.relayedListenerKey_)){goog.events.unlistenByKey(this.relayedListenerKey_);this.relayedListenerKey_=null}if(!goog.isNull(this.pointerdownListenerKey_)){goog.events.unlistenByKey(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}if(!goog.isNull(this.dragListenerKeys_)){goog.array.forEach(this.dragListenerKeys_,goog.events.unlistenByKey);this.dragListenerKeys_=null}if(!goog.isNull(this.documentPointerEventHandler_)){goog.dispose(this.documentPointerEventHandler_);this.documentPointerEventHandler_=null}if(!goog.isNull(this.pointerEventHandler_)){goog.dispose(this.pointerEventHandler_);this.pointerEventHandler_=null}if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&!goog.isNull(this.ieDblclickListenerKey_)){goog.events.unlistenByKey(this.ieDblclickListenerKey_);this.ieDblclickListenerKey_=null}goog.base(this,"disposeInternal")};ol.MapBrowserEvent.EventType={SINGLECLICK:"singleclick",CLICK:goog.events.EventType.CLICK,DBLCLICK:goog.events.EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};goog.provide("ol.layer.Base");goog.provide("ol.layer.LayerProperty");goog.provide("ol.layer.LayerState");goog.require("goog.math");goog.require("goog.object");goog.require("ol.Object");goog.require("ol.source.State");ol.layer.LayerProperty={BRIGHTNESS:"brightness",CONTRAST:"contrast",HUE:"hue",OPACITY:"opacity",SATURATION:"saturation",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};ol.layer.LayerState;ol.layer.Base=function(options){goog.base(this);var properties=goog.object.clone(options);properties[ol.layer.LayerProperty.BRIGHTNESS]=goog.isDef(options.brightness)?options.brightness:0;properties[ol.layer.LayerProperty.CONTRAST]=goog.isDef(options.contrast)?options.contrast:1;properties[ol.layer.LayerProperty.HUE]=goog.isDef(options.hue)?options.hue:0;properties[ol.layer.LayerProperty.OPACITY]=goog.isDef(options.opacity)?options.opacity:1;properties[ol.layer.LayerProperty.SATURATION]=goog.isDef(options.saturation)?options.saturation:1;properties[ol.layer.LayerProperty.VISIBLE]=goog.isDef(options.visible)?options.visible:true;properties[ol.layer.LayerProperty.Z_INDEX]=goog.isDef(options.zIndex)?options.zIndex:0;properties[ol.layer.LayerProperty.MAX_RESOLUTION]=goog.isDef(options.maxResolution)?options.maxResolution:Infinity;properties[ol.layer.LayerProperty.MIN_RESOLUTION]=goog.isDef(options.minResolution)?options.minResolution:0;this.setProperties(properties)};goog.inherits(ol.layer.Base,ol.Object);ol.layer.Base.prototype.getBrightness=function(){return(this.get(ol.layer.LayerProperty.BRIGHTNESS))};ol.layer.Base.prototype.getContrast=function(){return(this.get(ol.layer.LayerProperty.CONTRAST))};ol.layer.Base.prototype.getHue=function(){return(this.get(ol.layer.LayerProperty.HUE))};ol.layer.Base.prototype.getLayerState=function(){var brightness=this.getBrightness();var contrast=this.getContrast();var hue=this.getHue();var opacity=this.getOpacity();var saturation=this.getSaturation();var sourceState=this.getSourceState();var visible=this.getVisible();var extent=this.getExtent();var zIndex=this.getZIndex();var maxResolution=this.getMaxResolution();var minResolution=this.getMinResolution();return{layer:(this),brightness:goog.math.clamp(brightness,-1,1),contrast:Math.max(contrast,0),hue:hue,opacity:goog.math.clamp(opacity,0,1),saturation:Math.max(saturation,0),sourceState:sourceState,visible:visible,managed:true,extent:extent,zIndex:zIndex,maxResolution:maxResolution,minResolution:Math.max(minResolution,0)}};ol.layer.Base.prototype.getLayersArray=goog.abstractMethod;ol.layer.Base.prototype.getLayerStatesArray=goog.abstractMethod;ol.layer.Base.prototype.getExtent=function(){return(this.get(ol.layer.LayerProperty.EXTENT))};ol.layer.Base.prototype.getMaxResolution=function(){return(this.get(ol.layer.LayerProperty.MAX_RESOLUTION))};ol.layer.Base.prototype.getMinResolution=function(){return(this.get(ol.layer.LayerProperty.MIN_RESOLUTION))};ol.layer.Base.prototype.getOpacity=function(){return(this.get(ol.layer.LayerProperty.OPACITY))};ol.layer.Base.prototype.getSaturation=function(){return(this.get(ol.layer.LayerProperty.SATURATION))};ol.layer.Base.prototype.getSourceState=goog.abstractMethod;ol.layer.Base.prototype.getVisible=function(){return(this.get(ol.layer.LayerProperty.VISIBLE))};ol.layer.Base.prototype.getZIndex=function(){return(this.get(ol.layer.LayerProperty.Z_INDEX))};ol.layer.Base.prototype.setBrightness=function(brightness){this.set(ol.layer.LayerProperty.BRIGHTNESS,brightness)};ol.layer.Base.prototype.setContrast=function(contrast){this.set(ol.layer.LayerProperty.CONTRAST,contrast)};ol.layer.Base.prototype.setHue=function(hue){this.set(ol.layer.LayerProperty.HUE,hue)};ol.layer.Base.prototype.setExtent=function(extent){this.set(ol.layer.LayerProperty.EXTENT,extent)};ol.layer.Base.prototype.setMaxResolution=function(maxResolution){this.set(ol.layer.LayerProperty.MAX_RESOLUTION,maxResolution)};ol.layer.Base.prototype.setMinResolution=function(minResolution){this.set(ol.layer.LayerProperty.MIN_RESOLUTION,minResolution)};ol.layer.Base.prototype.setOpacity=function(opacity){this.set(ol.layer.LayerProperty.OPACITY,opacity)};ol.layer.Base.prototype.setSaturation=function(saturation){this.set(ol.layer.LayerProperty.SATURATION,saturation)};ol.layer.Base.prototype.setVisible=function(visible){this.set(ol.layer.LayerProperty.VISIBLE,visible)};ol.layer.Base.prototype.setZIndex=function(zindex){this.set(ol.layer.LayerProperty.Z_INDEX,zindex)};goog.provide("ol.render.VectorContext");ol.render.VectorContext=function(){};ol.render.VectorContext.prototype.drawAsync=goog.abstractMethod;ol.render.VectorContext.prototype.drawCircleGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawFeature=goog.abstractMethod;ol.render.VectorContext.prototype.drawGeometryCollectionGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawLineStringGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiLineStringGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiPointGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiPolygonGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawPointGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawPolygonGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawText=goog.abstractMethod;ol.render.VectorContext.prototype.setFillStrokeStyle=goog.abstractMethod;ol.render.VectorContext.prototype.setImageStyle=goog.abstractMethod;ol.render.VectorContext.prototype.setTextStyle=goog.abstractMethod;goog.provide("ol.render.Event");goog.provide("ol.render.EventType");goog.require("goog.events.Event");goog.require("ol.render.VectorContext");ol.render.EventType={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"};ol.render.Event=function(type,opt_target,opt_vectorContext,opt_frameState,opt_context,opt_glContext){goog.base(this,type,opt_target);this.vectorContext=opt_vectorContext;this.frameState=opt_frameState;this.context=opt_context;this.glContext=opt_glContext};goog.inherits(ol.render.Event,goog.events.Event);goog.provide("ol.layer.Layer");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Object");goog.require("ol.layer.Base");goog.require("ol.layer.LayerProperty");goog.require("ol.render.EventType");goog.require("ol.source.State");ol.layer.Layer=function(options){var baseOptions=goog.object.clone(options);delete baseOptions.source;goog.base(this,(baseOptions));this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(goog.isDef(options.map)){this.setMap(options.map)}goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.LayerProperty.SOURCE),this.handleSourcePropertyChange_,false,this);var source=goog.isDef(options.source)?options.source:null;this.setSource(source)};goog.inherits(ol.layer.Layer,ol.layer.Base);ol.layer.Layer.visibleAtResolution=function(layerState,resolution){return layerState.visible&&resolution>=layerState.minResolution&&resolution<layerState.maxResolution};ol.layer.Layer.prototype.getLayersArray=function(opt_array){var array=goog.isDef(opt_array)?opt_array:[];array.push(this);return array};ol.layer.Layer.prototype.getLayerStatesArray=function(opt_states){var states=goog.isDef(opt_states)?opt_states:[];states.push(this.getLayerState());return states};ol.layer.Layer.prototype.getSource=function(){var source=this.get(ol.layer.LayerProperty.SOURCE);return goog.isDef(source)?(source):null};ol.layer.Layer.prototype.getSourceState=function(){var source=this.getSource();return goog.isNull(source)?ol.source.State.UNDEFINED:source.getState()};ol.layer.Layer.prototype.handleSourceChange_=function(){this.changed()};ol.layer.Layer.prototype.handleSourcePropertyChange_=function(){if(!goog.isNull(this.sourceChangeKey_)){goog.events.unlistenByKey(this.sourceChangeKey_);this.sourceChangeKey_=null}var source=this.getSource();if(!goog.isNull(source)){this.sourceChangeKey_=goog.events.listen(source,goog.events.EventType.CHANGE,this.handleSourceChange_,false,this)}this.changed()};ol.layer.Layer.prototype.setMap=function(map){goog.events.unlistenByKey(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null;if(goog.isNull(map)){this.changed()}goog.events.unlistenByKey(this.mapRenderKey_);this.mapRenderKey_=null;if(!goog.isNull(map)){this.mapPrecomposeKey_=goog.events.listen(map,ol.render.EventType.PRECOMPOSE,function(evt){var layerState=this.getLayerState();layerState.managed=false;layerState.zIndex=Infinity;evt.frameState.layerStatesArray.push(layerState);evt.frameState.layerStates[goog.getUid(this)]=layerState},false,this);this.mapRenderKey_=goog.events.listen(this,goog.events.EventType.CHANGE,map.render,false,map);this.changed()}};ol.layer.Layer.prototype.setSource=function(source){this.set(ol.layer.LayerProperty.SOURCE,source)};goog.provide("ol.ImageBase");goog.provide("ol.ImageState");goog.require("goog.asserts");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("ol.Attribution");goog.require("ol.Extent");ol.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.ImageBase=function(extent,resolution,pixelRatio,state,attributions){goog.base(this);this.attributions_=attributions;this.extent=extent;this.pixelRatio_=pixelRatio;this.resolution=resolution;this.state=state};goog.inherits(ol.ImageBase,goog.events.EventTarget);ol.ImageBase.prototype.changed=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.ImageBase.prototype.getAttributions=function(){return this.attributions_};ol.ImageBase.prototype.getExtent=function(){return this.extent};ol.ImageBase.prototype.getImage=goog.abstractMethod;ol.ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_};ol.ImageBase.prototype.getResolution=function(){goog.asserts.assert(goog.isDef(this.resolution),"resolution not yet set");return this.resolution};ol.ImageBase.prototype.getState=function(){return this.state};ol.ImageBase.prototype.load=goog.abstractMethod;goog.provide("ol.vec.Mat4");goog.provide("ol.vec.Mat4.Number");goog.require("goog.vec.Mat4");ol.vec.Mat4.Number;ol.vec.Mat4.makeTransform2D=function(mat,translateX1,translateY1,scaleX,scaleY,rotation,translateX2,translateY2){goog.vec.Mat4.makeIdentity(mat);if(translateX1!==0||translateY1!==0){goog.vec.Mat4.translate(mat,translateX1,translateY1,0)}if(scaleX!=1||scaleY!=1){goog.vec.Mat4.scale(mat,scaleX,scaleY,1)}if(rotation!==0){goog.vec.Mat4.rotateZ(mat,rotation)}if(translateX2!==0||translateY2!==0){goog.vec.Mat4.translate(mat,translateX2,translateY2,0)}return mat};ol.vec.Mat4.equals2D=function(mat1,mat2){return(goog.vec.Mat4.getElement(mat1,0,0)==goog.vec.Mat4.getElement(mat2,0,0)&&goog.vec.Mat4.getElement(mat1,1,0)==goog.vec.Mat4.getElement(mat2,1,0)&&goog.vec.Mat4.getElement(mat1,0,1)==goog.vec.Mat4.getElement(mat2,0,1)&&goog.vec.Mat4.getElement(mat1,1,1)==goog.vec.Mat4.getElement(mat2,1,1)&&goog.vec.Mat4.getElement(mat1,0,3)==goog.vec.Mat4.getElement(mat2,0,3)&&goog.vec.Mat4.getElement(mat1,1,3)==goog.vec.Mat4.getElement(mat2,1,3))};ol.vec.Mat4.multVec2=function(mat,vec,resultVec){var m00=goog.vec.Mat4.getElement(mat,0,0);var m10=goog.vec.Mat4.getElement(mat,1,0);var m01=goog.vec.Mat4.getElement(mat,0,1);var m11=goog.vec.Mat4.getElement(mat,1,1);var m03=goog.vec.Mat4.getElement(mat,0,3);var m13=goog.vec.Mat4.getElement(mat,1,3);var x=vec[0],y=vec[1];resultVec[0]=m00*x+m01*y+m03;resultVec[1]=m10*x+m11*y+m13;return resultVec};goog.provide("ol.renderer.Layer");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("ol.ImageState");goog.require("ol.Observable");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.layer.Layer");goog.require("ol.source.Source");goog.require("ol.source.State");goog.require("ol.source.Tile");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");ol.renderer.Layer=function(layer){goog.base(this);this.layer_=layer};goog.inherits(ol.renderer.Layer,ol.Observable);ol.renderer.Layer.prototype.forEachFeatureAtCoordinate=goog.nullFunction;ol.renderer.Layer.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg){var coordinate=pixel.slice();ol.vec.Mat4.multVec2(frameState.pixelToCoordinateMatrix,coordinate,coordinate);var hasFeature=this.forEachFeatureAtCoordinate(coordinate,frameState,goog.functions.TRUE,this);if(hasFeature){return callback.call(thisArg,this.layer_)}else{return undefined}};ol.renderer.Layer.prototype.hasFeatureAtCoordinate=goog.functions.FALSE;ol.renderer.Layer.prototype.createLoadedTileFinder=function(source,tiles){return(function(zoom,tileRange){return source.forEachLoadedTile(zoom,tileRange,function(tile){if(!tiles[zoom]){tiles[zoom]={}}tiles[zoom][tile.tileCoord.toString()]=tile})})};ol.renderer.Layer.prototype.getLayer=function(){return this.layer_};ol.renderer.Layer.prototype.handleImageChange_=function(event){var image=(event.target);if(image.getState()===ol.ImageState.LOADED){this.renderIfReadyAndVisible()}};ol.renderer.Layer.prototype.loadImage=function(image){var imageState=image.getState();if(imageState!=ol.ImageState.LOADED&&imageState!=ol.ImageState.ERROR){goog.asserts.assert(imageState==ol.ImageState.IDLE||imageState==ol.ImageState.LOADING,'imageState is "idle" or "loading"');goog.events.listen(image,goog.events.EventType.CHANGE,this.handleImageChange_,false,this)}if(imageState==ol.ImageState.IDLE){image.load();imageState=image.getState();goog.asserts.assert(imageState==ol.ImageState.LOADING,'imageState is "loading"')}return imageState==ol.ImageState.LOADED};ol.renderer.Layer.prototype.renderIfReadyAndVisible=function(){var layer=this.getLayer();if(layer.getVisible()&&layer.getSourceState()==ol.source.State.READY){this.changed()}};ol.renderer.Layer.prototype.scheduleExpireCache=function(frameState,tileSource){if(tileSource.canExpireCache()){frameState.postRenderFunctions.push(goog.partial(function(tileSource,map,frameState){var tileSourceKey=goog.getUid(tileSource).toString();tileSource.expireCache(frameState.usedTiles[tileSourceKey])},tileSource))}};ol.renderer.Layer.prototype.updateAttributions=function(attributionsSet,attributions){if(goog.isDefAndNotNull(attributions)){var attribution,i,ii;for(i=0,ii=attributions.length;i<ii;++i){attribution=attributions[i];attributionsSet[goog.getUid(attribution).toString()]=attribution}}};ol.renderer.Layer.prototype.updateLogos=function(frameState,source){var logo=source.getLogo();if(goog.isDef(logo)){if(goog.isString(logo)){frameState.logos[logo]=""}else{if(goog.isObject(logo)){goog.asserts.assertString(logo.href,"logo.href is a string");goog.asserts.assertString(logo.src,"logo.src is a string");frameState.logos[logo.src]=logo.href}}}};ol.renderer.Layer.prototype.updateUsedTiles=function(usedTiles,tileSource,z,tileRange){var tileSourceKey=goog.getUid(tileSource).toString();var zKey=z.toString();if(tileSourceKey in usedTiles){if(zKey in usedTiles[tileSourceKey]){usedTiles[tileSourceKey][zKey].extend(tileRange)}else{usedTiles[tileSourceKey][zKey]=tileRange}}else{usedTiles[tileSourceKey]={};usedTiles[tileSourceKey][zKey]=tileRange}};ol.renderer.Layer.prototype.snapCenterToPixel=function(center,resolution,size){return[resolution*(Math.round(center[0]/resolution)+(size[0]%2)/2),resolution*(Math.round(center[1]/resolution)+(size[1]%2)/2)]};ol.renderer.Layer.prototype.manageTilePyramid=function(frameState,tileSource,tileGrid,pixelRatio,projection,extent,currentZ,preload,opt_tileCallback,opt_this){var tileSourceKey=goog.getUid(tileSource).toString();if(!(tileSourceKey in frameState.wantedTiles)){frameState.wantedTiles[tileSourceKey]={}}var wantedTiles=frameState.wantedTiles[tileSourceKey];var tileQueue=frameState.tileQueue;var minZoom=tileGrid.getMinZoom();var tile,tileRange,tileResolution,x,y,z;for(z=currentZ;z>=minZoom;--z){tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z,tileRange);tileResolution=tileGrid.getResolution(z);for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){if(currentZ-z<=preload){tile=tileSource.getTile(z,x,y,pixelRatio,projection);if(tile.getState()==ol.TileState.IDLE){wantedTiles[ol.tilecoord.toString(tile.tileCoord)]=true;if(!tileQueue.isKeyQueued(tile.getKey())){tileQueue.enqueue([tile,tileSourceKey,tileGrid.getTileCoordCenter(tile.tileCoord),tileResolution])}}if(goog.isDef(opt_tileCallback)){opt_tileCallback.call(opt_this,tile)}}else{tileSource.useTile(z,x,y)}}}}};goog.provide("ol.style.Image");goog.provide("ol.style.ImageState");ol.style.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.style.ImageOptions;ol.style.Image=function(options){this.opacity_=options.opacity;this.rotateWithView_=options.rotateWithView;this.rotation_=options.rotation;this.scale_=options.scale;this.snapToPixel_=options.snapToPixel};ol.style.Image.prototype.getOpacity=function(){return this.opacity_};ol.style.Image.prototype.getRotateWithView=function(){return this.rotateWithView_};ol.style.Image.prototype.getRotation=function(){return this.rotation_};ol.style.Image.prototype.getScale=function(){return this.scale_};ol.style.Image.prototype.getSnapToPixel=function(){return this.snapToPixel_};ol.style.Image.prototype.getAnchor=goog.abstractMethod;ol.style.Image.prototype.getImage=goog.abstractMethod;ol.style.Image.prototype.getHitDetectionImage=goog.abstractMethod;ol.style.Image.prototype.getImageState=goog.abstractMethod;ol.style.Image.prototype.getImageSize=goog.abstractMethod;ol.style.Image.prototype.getHitDetectionImageSize=goog.abstractMethod;ol.style.Image.prototype.getOrigin=goog.abstractMethod;ol.style.Image.prototype.getSize=goog.abstractMethod;ol.style.Image.prototype.setOpacity=function(opacity){this.opacity_=opacity};ol.style.Image.prototype.setRotateWithView=function(rotateWithView){this.rotateWithView_=rotateWithView};ol.style.Image.prototype.setRotation=function(rotation){this.rotation_=rotation};ol.style.Image.prototype.setScale=function(scale){this.scale_=scale};ol.style.Image.prototype.setSnapToPixel=function(snapToPixel){this.snapToPixel_=snapToPixel};ol.style.Image.prototype.listenImageChange=goog.abstractMethod;ol.style.Image.prototype.load=goog.abstractMethod;ol.style.Image.prototype.unlistenImageChange=goog.abstractMethod;goog.provide("ol.style.Icon");goog.provide("ol.style.IconAnchorUnits");goog.provide("ol.style.IconImageCache");goog.provide("ol.style.IconOrigin");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("ol.dom");goog.require("ol.style.Image");goog.require("ol.style.ImageState");ol.style.IconAnchorUnits={FRACTION:"fraction",PIXELS:"pixels"};ol.style.IconOrigin={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.style.Icon=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.anchor_=goog.isDef(options.anchor)?options.anchor:[0.5,0.5];this.normalizedAnchor_=null;this.anchorOrigin_=goog.isDef(options.anchorOrigin)?options.anchorOrigin:ol.style.IconOrigin.TOP_LEFT;this.anchorXUnits_=goog.isDef(options.anchorXUnits)?options.anchorXUnits:ol.style.IconAnchorUnits.FRACTION;this.anchorYUnits_=goog.isDef(options.anchorYUnits)?options.anchorYUnits:ol.style.IconAnchorUnits.FRACTION;var crossOrigin=goog.isDef(options.crossOrigin)?options.crossOrigin:null;var image=goog.isDef(options.img)?options.img:null;var imgSize=goog.isDef(options.imgSize)?options.imgSize:null;var src=options.src;goog.asserts.assert(!(goog.isDef(src)&&!goog.isNull(image)),"image and src can not provided at the same time");goog.asserts.assert(!goog.isDef(src)||(goog.isDef(src)&&goog.isNull(imgSize)),"imgSize should not be set when src is provided");goog.asserts.assert(goog.isNull(image)||(!goog.isNull(image)&&!goog.isNull(imgSize)),"imgSize must be set when image is provided");if((!goog.isDef(src)||src.length===0)&&!goog.isNull(image)){src=image.src}goog.asserts.assert(goog.isDef(src)&&src.length>0,"must provide a defined and non-empty src or image");var imageState=goog.isDef(options.src)?ol.style.ImageState.IDLE:ol.style.ImageState.LOADED;this.iconImage_=ol.style.IconImage_.get(image,src,imgSize,crossOrigin,imageState);this.offset_=goog.isDef(options.offset)?options.offset:[0,0];this.offsetOrigin_=goog.isDef(options.offsetOrigin)?options.offsetOrigin:ol.style.IconOrigin.TOP_LEFT;this.origin_=null;this.size_=goog.isDef(options.size)?options.size:null;var opacity=goog.isDef(options.opacity)?options.opacity:1;var rotateWithView=goog.isDef(options.rotateWithView)?options.rotateWithView:false;var rotation=goog.isDef(options.rotation)?options.rotation:0;var scale=goog.isDef(options.scale)?options.scale:1;var snapToPixel=goog.isDef(options.snapToPixel)?options.snapToPixel:true;goog.base(this,{opacity:opacity,rotation:rotation,scale:scale,snapToPixel:snapToPixel,rotateWithView:rotateWithView})};goog.inherits(ol.style.Icon,ol.style.Image);ol.style.Icon.prototype.getAnchor=function(){if(!goog.isNull(this.normalizedAnchor_)){return this.normalizedAnchor_}var anchor=this.anchor_;var size=this.getSize();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION||this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){if(goog.isNull(size)){return null}anchor=this.anchor_.slice();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION){anchor[0]*=size[0]}if(this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){anchor[1]*=size[1]}}if(this.anchorOrigin_!=ol.style.IconOrigin.TOP_LEFT){if(goog.isNull(size)){return null}if(anchor===this.anchor_){anchor=this.anchor_.slice()}if(this.anchorOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){anchor[0]=-anchor[0]+size[0]}if(this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){anchor[1]=-anchor[1]+size[1]}}this.normalizedAnchor_=anchor;return this.normalizedAnchor_};ol.style.Icon.prototype.getImage=function(pixelRatio){return this.iconImage_.getImage(pixelRatio)};ol.style.Icon.prototype.getImageSize=function(){return this.iconImage_.getSize()};ol.style.Icon.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};ol.style.Icon.prototype.getImageState=function(){return this.iconImage_.getImageState()};ol.style.Icon.prototype.getHitDetectionImage=function(pixelRatio){return this.iconImage_.getHitDetectionImage(pixelRatio)};ol.style.Icon.prototype.getOrigin=function(){if(!goog.isNull(this.origin_)){return this.origin_}var offset=this.offset_;if(this.offsetOrigin_!=ol.style.IconOrigin.TOP_LEFT){var size=this.getSize();var iconImageSize=this.iconImage_.getSize();if(goog.isNull(size)||goog.isNull(iconImageSize)){return null}offset=offset.slice();if(this.offsetOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){offset[0]=iconImageSize[0]-size[0]-offset[0]}if(this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){offset[1]=iconImageSize[1]-size[1]-offset[1]}}this.origin_=offset;return this.origin_};ol.style.Icon.prototype.getSrc=function(){return this.iconImage_.getSrc()};ol.style.Icon.prototype.getSize=function(){return goog.isNull(this.size_)?this.iconImage_.getSize():this.size_};ol.style.Icon.prototype.listenImageChange=function(listener,thisArg){return goog.events.listen(this.iconImage_,goog.events.EventType.CHANGE,listener,false,thisArg)};ol.style.Icon.prototype.load=function(){this.iconImage_.load()};ol.style.Icon.prototype.unlistenImageChange=function(listener,thisArg){goog.events.unlisten(this.iconImage_,goog.events.EventType.CHANGE,listener,false,thisArg)};ol.style.IconImage_=function(image,src,size,crossOrigin,imageState){goog.base(this);this.hitDetectionImage_=null;this.image_=goog.isNull(image)?new Image():image;if(!goog.isNull(crossOrigin)){this.image_.crossOrigin=crossOrigin}this.imageListenerKeys_=null;this.imageState_=imageState;this.size_=size;this.src_=src;this.tainting_=false};goog.inherits(ol.style.IconImage_,goog.events.EventTarget);ol.style.IconImage_.get=function(image,src,size,crossOrigin,imageState){var iconImageCache=ol.style.IconImageCache.getInstance();var iconImage=iconImageCache.get(src,crossOrigin);if(goog.isNull(iconImage)){iconImage=new ol.style.IconImage_(image,src,size,crossOrigin,imageState);iconImageCache.set(src,crossOrigin,iconImage)}return iconImage};ol.style.IconImage_.prototype.determineTainting_=function(){var context=ol.dom.createCanvasContext2D(1,1);context.drawImage(this.image_,0,0);try{context.getImageData(0,0,1,1)}catch(e){this.tainting_=true}};ol.style.IconImage_.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.style.IconImage_.prototype.handleImageError_=function(){this.imageState_=ol.style.ImageState.ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.handleImageLoad_=function(){this.imageState_=ol.style.ImageState.LOADED;this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.getImage=function(pixelRatio){return this.image_};ol.style.IconImage_.prototype.getImageState=function(){return this.imageState_};ol.style.IconImage_.prototype.getHitDetectionImage=function(pixelRatio){if(goog.isNull(this.hitDetectionImage_)){if(this.tainting_){var width=this.size_[0];var height=this.size_[1];var context=ol.dom.createCanvasContext2D(width,height);context.fillRect(0,0,width,height);this.hitDetectionImage_=context.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};ol.style.IconImage_.prototype.getSize=function(){return this.size_};ol.style.IconImage_.prototype.getSrc=function(){return this.src_};ol.style.IconImage_.prototype.load=function(){if(this.imageState_==ol.style.ImageState.IDLE){goog.asserts.assert(goog.isDef(this.src_),"this.src_ must not be undefined");goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"no listener keys existing");this.imageState_=ol.style.ImageState.LOADING;this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,false,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,false,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}};ol.style.IconImage_.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"we must have listeners registered");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};ol.style.IconImageCache=function(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};goog.addSingletonGetter(ol.style.IconImageCache);ol.style.IconImageCache.getKey=function(src,crossOrigin){goog.asserts.assert(goog.isDef(crossOrigin),"argument crossOrigin must be defined");return crossOrigin+":"+src};ol.style.IconImageCache.prototype.clear=function(){this.cache_={};this.cacheSize_=0};ol.style.IconImageCache.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var i=0;var key,iconImage;for(key in this.cache_){iconImage=this.cache_[key];if((i++&3)===0&&!goog.events.hasListener(iconImage)){delete this.cache_[key];--this.cacheSize_}}}};ol.style.IconImageCache.prototype.get=function(src,crossOrigin){var key=ol.style.IconImageCache.getKey(src,crossOrigin);return key in this.cache_?this.cache_[key]:null};ol.style.IconImageCache.prototype.set=function(src,crossOrigin,iconImage){var key=ol.style.IconImageCache.getKey(src,crossOrigin);this.cache_[key]=iconImage;++this.cacheSize_};goog.provide("ol.RendererType");goog.provide("ol.renderer.Map");goog.require("goog.Disposable");goog.require("goog.asserts");goog.require("goog.dispose");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.extent");goog.require("ol.layer.Layer");goog.require("ol.renderer.Layer");goog.require("ol.style.IconImageCache");goog.require("ol.vec.Mat4");ol.RendererType={CANVAS:"canvas",DOM:"dom",WEBGL:"webgl"};ol.renderer.Map=function(container,map){goog.base(this);this.map_=map;this.layerRenderers_={};this.layerRendererListeners_={}};goog.inherits(ol.renderer.Map,goog.Disposable);ol.renderer.Map.prototype.calculateMatrices2D=function(frameState){var viewState=frameState.viewState;var coordinateToPixelMatrix=frameState.coordinateToPixelMatrix;goog.asserts.assert(!goog.isNull(coordinateToPixelMatrix),"frameState has non-null coordinateToPixelMatrix");ol.vec.Mat4.makeTransform2D(coordinateToPixelMatrix,frameState.size[0]/2,frameState.size[1]/2,1/viewState.resolution,-1/viewState.resolution,-viewState.rotation,-viewState.center[0],-viewState.center[1]);var inverted=goog.vec.Mat4.invert(coordinateToPixelMatrix,frameState.pixelToCoordinateMatrix);goog.asserts.assert(inverted,"matrix could be inverted")};ol.renderer.Map.prototype.createLayerRenderer=goog.abstractMethod;ol.renderer.Map.prototype.disposeInternal=function(){goog.object.forEach(this.layerRenderers_,goog.dispose);goog.base(this,"disposeInternal")};ol.renderer.Map.expireIconCache_=function(map,frameState){ol.style.IconImageCache.getInstance().expire()};ol.renderer.Map.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg,layerFilter,thisArg2){var result;var viewState=frameState.viewState;var viewResolution=viewState.resolution;var features={};function forEachFeatureAtCoordinate(feature){goog.asserts.assert(goog.isDef(feature),"received a feature");var key=goog.getUid(feature).toString();if(!(key in features)){features[key]=true;return callback.call(thisArg,feature,null)}}var projection=viewState.projection;var translatedCoordinate=coordinate;if(projection.canWrapX()){var projectionExtent=projection.getExtent();var worldWidth=ol.extent.getWidth(projectionExtent);var x=coordinate[0];if(x<projectionExtent[0]||x>projectionExtent[2]){var worldsAway=Math.ceil((projectionExtent[0]-x)/worldWidth);translatedCoordinate=[x+worldWidth*worldsAway,coordinate[1]]}}var layerStates=frameState.layerStatesArray;var numLayers=layerStates.length;var i;for(i=numLayers-1;i>=0;--i){var layerState=layerStates[i];var layer=layerState.layer;if(!layerState.managed||(ol.layer.Layer.visibleAtResolution(layerState,viewResolution)&&layerFilter.call(thisArg2,layer))){var layerRenderer=this.getLayerRenderer(layer);result=layerRenderer.forEachFeatureAtCoordinate(layer.getSource().getWrapX()?translatedCoordinate:coordinate,frameState,callback,thisArg);if(result){return result}}}return undefined};ol.renderer.Map.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg,layerFilter,thisArg2){var result;var viewState=frameState.viewState;var viewResolution=viewState.resolution;var layerStates=frameState.layerStatesArray;var numLayers=layerStates.length;var i;for(i=numLayers-1;i>=0;--i){var layerState=layerStates[i];var layer=layerState.layer;if(ol.layer.Layer.visibleAtResolution(layerState,viewResolution)&&layerFilter.call(thisArg2,layer)){var layerRenderer=this.getLayerRenderer(layer);result=layerRenderer.forEachLayerAtPixel(pixel,frameState,callback,thisArg);if(result){return result}}}return undefined};ol.renderer.Map.prototype.hasFeatureAtCoordinate=function(coordinate,frameState,layerFilter,thisArg){var hasFeature=this.forEachFeatureAtCoordinate(coordinate,frameState,goog.functions.TRUE,this,layerFilter,thisArg);return goog.isDef(hasFeature)};ol.renderer.Map.prototype.getLayerRenderer=function(layer){var layerKey=goog.getUid(layer).toString();if(layerKey in this.layerRenderers_){return this.layerRenderers_[layerKey]}else{var layerRenderer=this.createLayerRenderer(layer);this.layerRenderers_[layerKey]=layerRenderer;this.layerRendererListeners_[layerKey]=goog.events.listen(layerRenderer,goog.events.EventType.CHANGE,this.handleLayerRendererChange_,false,this);return layerRenderer}};ol.renderer.Map.prototype.getLayerRendererByKey=function(layerKey){goog.asserts.assert(layerKey in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",layerKey);return this.layerRenderers_[layerKey]};ol.renderer.Map.prototype.getLayerRenderers=function(){return this.layerRenderers_};ol.renderer.Map.prototype.getMap=function(){return this.map_};ol.renderer.Map.prototype.getType=goog.abstractMethod;ol.renderer.Map.prototype.handleLayerRendererChange_=function(){this.map_.render()};ol.renderer.Map.prototype.removeLayerRendererByKey_=function(layerKey){goog.asserts.assert(layerKey in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",layerKey);var layerRenderer=this.layerRenderers_[layerKey];delete this.layerRenderers_[layerKey];goog.asserts.assert(layerKey in this.layerRendererListeners_,"given layerKey (%s) exists in layerRendererListeners",layerKey);goog.events.unlistenByKey(this.layerRendererListeners_[layerKey]);delete this.layerRendererListeners_[layerKey];return layerRenderer};ol.renderer.Map.prototype.renderFrame=goog.nullFunction;ol.renderer.Map.prototype.removeUnusedLayerRenderers_=function(map,frameState){var layerKey;for(layerKey in this.layerRenderers_){if(goog.isNull(frameState)||!(layerKey in frameState.layerStates)){goog.dispose(this.removeLayerRendererByKey_(layerKey))}}};ol.renderer.Map.prototype.scheduleExpireIconCache=function(frameState){frameState.postRenderFunctions.push(ol.renderer.Map.expireIconCache_)};ol.renderer.Map.prototype.scheduleRemoveUnusedLayerRenderers=function(frameState){var layerKey;for(layerKey in this.layerRenderers_){if(!(layerKey in frameState.layerStates)){frameState.postRenderFunctions.push(goog.bind(this.removeUnusedLayerRenderers_,this));return}}};ol.renderer.Map.sortByZIndex=function(state1,state2){return state1.zIndex-state2.zIndex};goog.provide("ol.structs.PriorityQueue");goog.require("goog.asserts");goog.require("goog.object");ol.structs.PriorityQueue=function(priorityFunction,keyFunction){this.priorityFunction_=priorityFunction;this.keyFunction_=keyFunction;this.elements_=[];this.priorities_=[];this.queuedElements_={}};ol.structs.PriorityQueue.DROP=Infinity;ol.structs.PriorityQueue.prototype.assertValid=function(){var elements=this.elements_;var priorities=this.priorities_;var n=elements.length;goog.asserts.assert(priorities.length==n);var i,priority;for(i=0;i<(n>>1)-1;++i){priority=priorities[i];goog.asserts.assert(priority<=priorities[this.getLeftChildIndex_(i)],"priority smaller than or equal to priority of left child (%s <= %s)",priority,priorities[this.getLeftChildIndex_(i)]);goog.asserts.assert(priority<=priorities[this.getRightChildIndex_(i)],"priority smaller than or equal to priority of right child (%s <= %s)",priority,priorities[this.getRightChildIndex_(i)])}};ol.structs.PriorityQueue.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;goog.object.clear(this.queuedElements_)};ol.structs.PriorityQueue.prototype.dequeue=function(){var elements=this.elements_;goog.asserts.assert(elements.length>0,"must have elements in order to be able to dequeue");var priorities=this.priorities_;var element=elements[0];if(elements.length==1){elements.length=0;priorities.length=0}else{elements[0]=elements.pop();priorities[0]=priorities.pop();this.siftUp_(0)}var elementKey=this.keyFunction_(element);goog.asserts.assert(elementKey in this.queuedElements_,"key %s is not listed as queued",elementKey);delete this.queuedElements_[elementKey];return element};ol.structs.PriorityQueue.prototype.enqueue=function(element){goog.asserts.assert(!(this.keyFunction_(element) in this.queuedElements_),"key %s is already listed as queued",this.keyFunction_(element));var priority=this.priorityFunction_(element);if(priority!=ol.structs.PriorityQueue.DROP){this.elements_.push(element);this.priorities_.push(priority);this.queuedElements_[this.keyFunction_(element)]=true;this.siftDown_(0,this.elements_.length-1)}};ol.structs.PriorityQueue.prototype.getCount=function(){return this.elements_.length};ol.structs.PriorityQueue.prototype.getLeftChildIndex_=function(index){return index*2+1};ol.structs.PriorityQueue.prototype.getRightChildIndex_=function(index){return index*2+2};ol.structs.PriorityQueue.prototype.getParentIndex_=function(index){return(index-1)>>1};ol.structs.PriorityQueue.prototype.heapify_=function(){var i;for(i=(this.elements_.length>>1)-1;i>=0;i--){this.siftUp_(i)}};ol.structs.PriorityQueue.prototype.isEmpty=function(){return this.elements_.length===0};ol.structs.PriorityQueue.prototype.isKeyQueued=function(key){return key in this.queuedElements_};ol.structs.PriorityQueue.prototype.isQueued=function(element){return this.isKeyQueued(this.keyFunction_(element))};ol.structs.PriorityQueue.prototype.siftUp_=function(index){var elements=this.elements_;var priorities=this.priorities_;var count=elements.length;var element=elements[index];var priority=priorities[index];var startIndex=index;while(index<(count>>1)){var lIndex=this.getLeftChildIndex_(index);var rIndex=this.getRightChildIndex_(index);var smallerChildIndex=rIndex<count&&priorities[rIndex]<priorities[lIndex]?rIndex:lIndex;elements[index]=elements[smallerChildIndex];priorities[index]=priorities[smallerChildIndex];index=smallerChildIndex}elements[index]=element;priorities[index]=priority;this.siftDown_(startIndex,index)};ol.structs.PriorityQueue.prototype.siftDown_=function(startIndex,index){var elements=this.elements_;var priorities=this.priorities_;var element=elements[index];var priority=priorities[index];while(index>startIndex){var parentIndex=this.getParentIndex_(index);if(priorities[parentIndex]>priority){elements[index]=elements[parentIndex];priorities[index]=priorities[parentIndex];index=parentIndex}else{break}}elements[index]=element;priorities[index]=priority};ol.structs.PriorityQueue.prototype.reprioritize=function(){var priorityFunction=this.priorityFunction_;var elements=this.elements_;var priorities=this.priorities_;var index=0;var n=elements.length;var element,i,priority;for(i=0;i<n;++i){element=elements[i];priority=priorityFunction(element);if(priority==ol.structs.PriorityQueue.DROP){delete this.queuedElements_[this.keyFunction_(element)]}else{priorities[index]=priority;elements[index++]=element}}elements.length=index;priorities.length=index;this.heapify_()};goog.provide("ol.TilePriorityFunction");goog.provide("ol.TileQueue");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.Coordinate");goog.require("ol.TileState");goog.require("ol.structs.PriorityQueue");ol.TilePriorityFunction;ol.TileQueue=function(tilePriorityFunction,tileChangeCallback){goog.base(this,function(element){return tilePriorityFunction.apply(null,element)},function(element){return(element[0]).getKey()});this.tileChangeCallback_=tileChangeCallback;this.tilesLoading_=0};goog.inherits(ol.TileQueue,ol.structs.PriorityQueue);ol.TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_};ol.TileQueue.prototype.handleTileChange=function(event){var tile=(event.target);var state=tile.getState();if(state===ol.TileState.LOADED||state===ol.TileState.ERROR||state===ol.TileState.EMPTY){goog.events.unlisten(tile,goog.events.EventType.CHANGE,this.handleTileChange,false,this);--this.tilesLoading_;this.tileChangeCallback_()}};ol.TileQueue.prototype.loadMoreTiles=function(maxTotalLoading,maxNewLoads){var newLoads=0;var tile;while(this.tilesLoading_<maxTotalLoading&&newLoads<maxNewLoads&&this.getCount()>0){tile=(this.dequeue()[0]);if(tile.getState()===ol.TileState.IDLE){goog.events.listen(tile,goog.events.EventType.CHANGE,this.handleTileChange,false,this);tile.load();++this.tilesLoading_;++newLoads}}};goog.provide("ol.Kinetic");goog.require("ol.Coordinate");goog.require("ol.PreRenderFunction");goog.require("ol.animation");ol.Kinetic=function(decay,minVelocity,delay){this.decay_=decay;this.minVelocity_=minVelocity;this.delay_=delay;this.points_=[];this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.begin=function(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.update=function(x,y){this.points_.push(x,y,goog.now())};ol.Kinetic.prototype.end=function(){if(this.points_.length<6){return false}var delay=goog.now()-this.delay_;var lastIndex=this.points_.length-3;if(this.points_[lastIndex+2]<delay){return false}var firstIndex=lastIndex-3;while(firstIndex>0&&this.points_[firstIndex+2]>delay){firstIndex-=3}var duration=this.points_[lastIndex+2]-this.points_[firstIndex+2];var dx=this.points_[lastIndex]-this.points_[firstIndex];var dy=this.points_[lastIndex+1]-this.points_[firstIndex+1];this.angle_=Math.atan2(dy,dx);this.initialVelocity_=Math.sqrt(dx*dx+dy*dy)/duration;return this.initialVelocity_>this.minVelocity_};ol.Kinetic.prototype.pan=function(source){var decay=this.decay_;var initialVelocity=this.initialVelocity_;var velocity=this.minVelocity_-initialVelocity;var duration=this.getDuration_();var easingFunction=(function(t){return initialVelocity*(Math.exp((decay*t)*duration)-1)/velocity});return ol.animation.pan({source:source,duration:duration,easing:easingFunction})};ol.Kinetic.prototype.getDuration_=function(){return Math.log(this.minVelocity_/this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getAngle=function(){return this.angle_};goog.provide("ol.interaction.Interaction");goog.provide("ol.interaction.InteractionProperty");goog.require("ol.MapBrowserEvent");goog.require("ol.Object");goog.require("ol.animation");goog.require("ol.easing");ol.interaction.InteractionProperty={ACTIVE:"active"};ol.interaction.Interaction=function(options){goog.base(this);this.map_=null;this.setActive(true);this.handleEvent=options.handleEvent};goog.inherits(ol.interaction.Interaction,ol.Object);ol.interaction.Interaction.prototype.getActive=function(){return(this.get(ol.interaction.InteractionProperty.ACTIVE))};ol.interaction.Interaction.prototype.getMap=function(){return this.map_};ol.interaction.Interaction.prototype.setActive=function(active){this.set(ol.interaction.InteractionProperty.ACTIVE,active)};ol.interaction.Interaction.prototype.setMap=function(map){this.map_=map};ol.interaction.Interaction.pan=function(map,view,delta,opt_duration){var currentCenter=view.getCenter();if(goog.isDef(currentCenter)){if(goog.isDef(opt_duration)&&opt_duration>0){map.beforeRender(ol.animation.pan({source:currentCenter,duration:opt_duration,easing:ol.easing.linear}))}var center=view.constrainCenter([currentCenter[0]+delta[0],currentCenter[1]+delta[1]]);view.setCenter(center)}};ol.interaction.Interaction.rotate=function(map,view,rotation,opt_anchor,opt_duration){rotation=view.constrainRotation(rotation,0);ol.interaction.Interaction.rotateWithoutConstraints(map,view,rotation,opt_anchor,opt_duration)};ol.interaction.Interaction.rotateWithoutConstraints=function(map,view,rotation,opt_anchor,opt_duration){if(goog.isDefAndNotNull(rotation)){var currentRotation=view.getRotation();var currentCenter=view.getCenter();if(goog.isDef(currentRotation)&&goog.isDef(currentCenter)&&goog.isDef(opt_duration)&&opt_duration>0){map.beforeRender(ol.animation.rotate({rotation:currentRotation,duration:opt_duration,easing:ol.easing.easeOut}));if(goog.isDef(opt_anchor)){map.beforeRender(ol.animation.pan({source:currentCenter,duration:opt_duration,easing:ol.easing.easeOut}))}}view.rotate(rotation,opt_anchor)}};ol.interaction.Interaction.zoom=function(map,view,resolution,opt_anchor,opt_duration,opt_direction){resolution=view.constrainResolution(resolution,0,opt_direction);ol.interaction.Interaction.zoomWithoutConstraints(map,view,resolution,opt_anchor,opt_duration)};ol.interaction.Interaction.zoomByDelta=function(map,view,delta,opt_anchor,opt_duration){var currentResolution=view.getResolution();var resolution=view.constrainResolution(currentResolution,delta,0);ol.interaction.Interaction.zoomWithoutConstraints(map,view,resolution,opt_anchor,opt_duration)};ol.interaction.Interaction.zoomWithoutConstraints=function(map,view,resolution,opt_anchor,opt_duration){if(goog.isDefAndNotNull(resolution)){var currentResolution=view.getResolution();var currentCenter=view.getCenter();if(goog.isDef(currentResolution)&&goog.isDef(currentCenter)&&goog.isDef(opt_duration)&&opt_duration>0){map.beforeRender(ol.animation.zoom({resolution:currentResolution,duration:opt_duration,easing:ol.easing.easeOut}));if(goog.isDef(opt_anchor)){map.beforeRender(ol.animation.pan({source:currentCenter,duration:opt_duration,easing:ol.easing.easeOut}))}}if(goog.isDefAndNotNull(opt_anchor)){var center=view.calculateCenterZoom(resolution,opt_anchor);view.setCenter(center)}view.setResolution(resolution)}};goog.provide("ol.interaction.DoubleClickZoom");goog.require("goog.asserts");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.interaction.Interaction");ol.interaction.DoubleClickZoom=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.delta_=goog.isDef(options.delta)?options.delta:1;goog.base(this,{handleEvent:ol.interaction.DoubleClickZoom.handleEvent});this.duration_=goog.isDef(options.duration)?options.duration:250};goog.inherits(ol.interaction.DoubleClickZoom,ol.interaction.Interaction);ol.interaction.DoubleClickZoom.handleEvent=function(mapBrowserEvent){var stopEvent=false;var browserEvent=mapBrowserEvent.browserEvent;if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.DBLCLICK){var map=mapBrowserEvent.map;var anchor=mapBrowserEvent.coordinate;var delta=browserEvent.shiftKey?-this.delta_:this.delta_;var view=map.getView();goog.asserts.assert(!goog.isNull(view),"view should not be null");ol.interaction.Interaction.zoomByDelta(map,view,delta,anchor,this.duration_);mapBrowserEvent.preventDefault();stopEvent=true}return !stopEvent};goog.provide("ol.events.ConditionType");goog.provide("ol.events.condition");goog.require("goog.asserts");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");ol.events.ConditionType;ol.events.condition.altKeyOnly=function(mapBrowserEvent){var browserEvent=mapBrowserEvent.browserEvent;return(browserEvent.altKey&&!browserEvent.platformModifierKey&&!browserEvent.shiftKey)};ol.events.condition.altShiftKeysOnly=function(mapBrowserEvent){var browserEvent=mapBrowserEvent.browserEvent;return(browserEvent.altKey&&!browserEvent.platformModifierKey&&browserEvent.shiftKey)};ol.events.condition.always=goog.functions.TRUE;ol.events.condition.click=function(mapBrowserEvent){return mapBrowserEvent.type==ol.MapBrowserEvent.EventType.CLICK};ol.events.condition.never=goog.functions.FALSE;ol.events.condition.pointerMove=function(mapBrowserEvent){return mapBrowserEvent.type=="pointermove"};ol.events.condition.singleClick=function(mapBrowserEvent){return mapBrowserEvent.type==ol.MapBrowserEvent.EventType.SINGLECLICK};ol.events.condition.doubleClick=function(mapBrowserEvent){return mapBrowserEvent.type==ol.MapBrowserEvent.EventType.DBLCLICK};ol.events.condition.noModifierKeys=function(mapBrowserEvent){var browserEvent=mapBrowserEvent.browserEvent;return(!browserEvent.altKey&&!browserEvent.platformModifierKey&&!browserEvent.shiftKey)};ol.events.condition.platformModifierKeyOnly=function(mapBrowserEvent){var browserEvent=mapBrowserEvent.browserEvent;return(!browserEvent.altKey&&browserEvent.platformModifierKey&&!browserEvent.shiftKey)};ol.events.condition.shiftKeyOnly=function(mapBrowserEvent){var browserEvent=mapBrowserEvent.browserEvent;return(!browserEvent.altKey&&!browserEvent.platformModifierKey&&browserEvent.shiftKey)};ol.events.condition.targetNotEditable=function(mapBrowserEvent){var target=mapBrowserEvent.browserEvent.target;goog.asserts.assertInstanceof(target,Element,"target should be an Element");var tagName=target.tagName;return(tagName!==goog.dom.TagName.INPUT&&tagName!==goog.dom.TagName.SELECT&&tagName!==goog.dom.TagName.TEXTAREA)};ol.events.condition.mouseOnly=function(mapBrowserEvent){goog.asserts.assertInstanceof(mapBrowserEvent,ol.MapBrowserPointerEvent,"mapBrowserEvent should be an instance of ol.MapBrowserPointerEvent");return mapBrowserEvent.pointerEvent.pointerId==1};goog.provide("ol.interaction.Pointer");goog.require("goog.functions");goog.require("goog.object");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.Pixel");goog.require("ol.interaction.Interaction");ol.interaction.Pointer=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var handleEvent=goog.isDef(options.handleEvent)?options.handleEvent:ol.interaction.Pointer.handleEvent;goog.base(this,{handleEvent:handleEvent});this.handleDownEvent_=goog.isDef(options.handleDownEvent)?options.handleDownEvent:ol.interaction.Pointer.handleDownEvent;this.handleDragEvent_=goog.isDef(options.handleDragEvent)?options.handleDragEvent:ol.interaction.Pointer.handleDragEvent;this.handleMoveEvent_=goog.isDef(options.handleMoveEvent)?options.handleMoveEvent:ol.interaction.Pointer.handleMoveEvent;this.handleUpEvent_=goog.isDef(options.handleUpEvent)?options.handleUpEvent:ol.interaction.Pointer.handleUpEvent;this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]};goog.inherits(ol.interaction.Pointer,ol.interaction.Interaction);ol.interaction.Pointer.centroid=function(pointerEvents){var length=pointerEvents.length;var clientX=0;var clientY=0;for(var i=0;i<length;i++){clientX+=pointerEvents[i].clientX;clientY+=pointerEvents[i].clientY}return[clientX/length,clientY/length]};ol.interaction.Pointer.prototype.isPointerDraggingEvent_=function(mapBrowserEvent){var type=mapBrowserEvent.type;return(type===ol.MapBrowserEvent.EventType.POINTERDOWN||type===ol.MapBrowserEvent.EventType.POINTERDRAG||type===ol.MapBrowserEvent.EventType.POINTERUP)};ol.interaction.Pointer.prototype.updateTrackedPointers_=function(mapBrowserEvent){if(this.isPointerDraggingEvent_(mapBrowserEvent)){var event=mapBrowserEvent.pointerEvent;if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERUP){delete this.trackedPointers_[event.pointerId]}else{if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERDOWN){this.trackedPointers_[event.pointerId]=event}else{if(event.pointerId in this.trackedPointers_){this.trackedPointers_[event.pointerId]=event}}}this.targetPointers=goog.object.getValues(this.trackedPointers_)}};ol.interaction.Pointer.handleDragEvent=goog.nullFunction;ol.interaction.Pointer.handleUpEvent=goog.functions.FALSE;ol.interaction.Pointer.handleDownEvent=goog.functions.FALSE;ol.interaction.Pointer.handleMoveEvent=goog.nullFunction;ol.interaction.Pointer.handleEvent=function(mapBrowserEvent){if(!(mapBrowserEvent instanceof ol.MapBrowserPointerEvent)){return true}var stopEvent=false;this.updateTrackedPointers_(mapBrowserEvent);if(this.handlingDownUpSequence){if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERDRAG){this.handleDragEvent_(mapBrowserEvent)}else{if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERUP){this.handlingDownUpSequence=this.handleUpEvent_(mapBrowserEvent)}}}if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERDOWN){var handled=this.handleDownEvent_(mapBrowserEvent);this.handlingDownUpSequence=handled;stopEvent=this.shouldStopEvent(handled)}else{if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERMOVE){this.handleMoveEvent_(mapBrowserEvent)}}return !stopEvent};ol.interaction.Pointer.prototype.shouldStopEvent=goog.functions.identity;goog.provide("ol.interaction.DragPan");goog.require("goog.asserts");goog.require("ol.Kinetic");goog.require("ol.Pixel");goog.require("ol.PreRenderFunction");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.interaction.Pointer");ol.interaction.DragPan=function(opt_options){goog.base(this,{handleDownEvent:ol.interaction.DragPan.handleDownEvent_,handleDragEvent:ol.interaction.DragPan.handleDragEvent_,handleUpEvent:ol.interaction.DragPan.handleUpEvent_});var options=goog.isDef(opt_options)?opt_options:{};this.kinetic_=options.kinetic;this.kineticPreRenderFn_=null;this.lastCentroid=null;this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.noModifierKeys;this.noKinetic_=false};goog.inherits(ol.interaction.DragPan,ol.interaction.Pointer);ol.interaction.DragPan.handleDragEvent_=function(mapBrowserEvent){goog.asserts.assert(this.targetPointers.length>=1,"the length of this.targetPointers should be more than 1");var centroid=ol.interaction.Pointer.centroid(this.targetPointers);if(this.kinetic_){this.kinetic_.update(centroid[0],centroid[1])}if(!goog.isNull(this.lastCentroid)){var deltaX=this.lastCentroid[0]-centroid[0];var deltaY=centroid[1]-this.lastCentroid[1];var map=mapBrowserEvent.map;var view=map.getView();var viewState=view.getState();var center=[deltaX,deltaY];ol.coordinate.scale(center,viewState.resolution);ol.coordinate.rotate(center,viewState.rotation);ol.coordinate.add(center,viewState.center);center=view.constrainCenter(center);map.render();view.setCenter(center)}this.lastCentroid=centroid};ol.interaction.DragPan.handleUpEvent_=function(mapBrowserEvent){var map=mapBrowserEvent.map;var view=map.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var distance=this.kinetic_.getDistance();var angle=this.kinetic_.getAngle();var center=view.getCenter();goog.asserts.assert(goog.isDef(center),"center should be defined");this.kineticPreRenderFn_=this.kinetic_.pan(center);map.beforeRender(this.kineticPreRenderFn_);var centerpx=map.getPixelFromCoordinate(center);var dest=map.getCoordinateFromPixel([centerpx[0]-distance*Math.cos(angle),centerpx[1]-distance*Math.sin(angle)]);dest=view.constrainCenter(dest);view.setCenter(dest)}view.setHint(ol.ViewHint.INTERACTING,-1);map.render();return false}else{this.lastCentroid=null;return true}};ol.interaction.DragPan.handleDownEvent_=function(mapBrowserEvent){if(this.targetPointers.length>0&&this.condition_(mapBrowserEvent)){var map=mapBrowserEvent.map;var view=map.getView();this.lastCentroid=null;if(!this.handlingDownUpSequence){view.setHint(ol.ViewHint.INTERACTING,1)}map.render();if(!goog.isNull(this.kineticPreRenderFn_)&&map.removePreRenderFunction(this.kineticPreRenderFn_)){view.setCenter(mapBrowserEvent.frameState.viewState.center);this.kineticPreRenderFn_=null}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}};ol.interaction.DragPan.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction.DragRotate");goog.require("ol.ViewHint");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.DragRotate=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this,{handleDownEvent:ol.interaction.DragRotate.handleDownEvent_,handleDragEvent:ol.interaction.DragRotate.handleDragEvent_,handleUpEvent:ol.interaction.DragRotate.handleUpEvent_});this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.altShiftKeysOnly;this.lastAngle_=undefined;this.duration_=goog.isDef(options.duration)?options.duration:250};goog.inherits(ol.interaction.DragRotate,ol.interaction.Pointer);ol.interaction.DragRotate.handleDragEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return}var map=mapBrowserEvent.map;var size=map.getSize();var offset=mapBrowserEvent.pixel;var theta=Math.atan2(size[1]/2-offset[1],offset[0]-size[0]/2);if(goog.isDef(this.lastAngle_)){var delta=theta-this.lastAngle_;var view=map.getView();var rotation=view.getRotation();map.render();ol.interaction.Interaction.rotateWithoutConstraints(map,view,rotation-delta)}this.lastAngle_=theta};ol.interaction.DragRotate.handleUpEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return true}var map=mapBrowserEvent.map;var view=map.getView();view.setHint(ol.ViewHint.INTERACTING,-1);var rotation=view.getRotation();ol.interaction.Interaction.rotate(map,view,rotation,undefined,this.duration_);return false};ol.interaction.DragRotate.handleDownEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return false}var browserEvent=mapBrowserEvent.browserEvent;if(browserEvent.isMouseActionButton()&&this.condition_(mapBrowserEvent)){var map=mapBrowserEvent.map;map.getView().setHint(ol.ViewHint.INTERACTING,1);map.render();this.lastAngle_=undefined;return true}else{return false}};ol.interaction.DragRotate.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.render.Box");goog.require("goog.Disposable");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("ol.geom.Polygon");goog.require("ol.render.EventType");ol.render.Box=function(style){this.map_=null;this.postComposeListenerKey_=null;this.startPixel_=null;this.endPixel_=null;this.geometry_=null;this.style_=style};goog.inherits(ol.render.Box,goog.Disposable);ol.render.Box.prototype.createGeometry_=function(){goog.asserts.assert(!goog.isNull(this.startPixel_),"this.startPixel_ should not be null");goog.asserts.assert(!goog.isNull(this.endPixel_),"this.endPixel_ should not be null");goog.asserts.assert(!goog.isNull(this.map_),"this.map_ should not be null");var startPixel=this.startPixel_;var endPixel=this.endPixel_;var pixels=[startPixel,[startPixel[0],endPixel[1]],endPixel,[endPixel[0],startPixel[1]]];var coordinates=goog.array.map(pixels,this.map_.getCoordinateFromPixel,this.map_);coordinates[4]=coordinates[0].slice();return new ol.geom.Polygon([coordinates])};ol.render.Box.prototype.disposeInternal=function(){this.setMap(null)};ol.render.Box.prototype.handleMapPostCompose_=function(event){var geometry=this.geometry_;goog.asserts.assert(goog.isDefAndNotNull(geometry),"geometry should be defined");var style=this.style_;goog.asserts.assert(!goog.isNull(style),"style should not be null");event.vectorContext.drawAsync(Infinity,function(render){render.setFillStrokeStyle(style.getFill(),style.getStroke());render.setTextStyle(style.getText());render.drawPolygonGeometry(geometry,null)})};ol.render.Box.prototype.getGeometry=function(){return this.geometry_};ol.render.Box.prototype.requestMapRenderFrame_=function(){if(!goog.isNull(this.map_)&&!goog.isNull(this.startPixel_)&&!goog.isNull(this.endPixel_)){this.map_.render()}};ol.render.Box.prototype.setMap=function(map){if(!goog.isNull(this.postComposeListenerKey_)){goog.events.unlistenByKey(this.postComposeListenerKey_);this.postComposeListenerKey_=null;this.map_.render();this.map_=null}this.map_=map;if(!goog.isNull(this.map_)){this.postComposeListenerKey_=goog.events.listen(map,ol.render.EventType.POSTCOMPOSE,this.handleMapPostCompose_,false,this);this.requestMapRenderFrame_()}};ol.render.Box.prototype.setPixels=function(startPixel,endPixel){this.startPixel_=startPixel;this.endPixel_=endPixel;this.geometry_=this.createGeometry_();this.requestMapRenderFrame_()};goog.provide("ol.DragBoxEvent");goog.provide("ol.interaction.DragBox");goog.require("goog.events.Event");goog.require("ol");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Pointer");goog.require("ol.render.Box");ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED=ol.DRAG_BOX_HYSTERESIS_PIXELS*ol.DRAG_BOX_HYSTERESIS_PIXELS;ol.DragBoxEventType={BOXSTART:"boxstart",BOXEND:"boxend"};ol.DragBoxEvent=function(type,coordinate){goog.base(this,type);this.coordinate=coordinate};goog.inherits(ol.DragBoxEvent,goog.events.Event);ol.interaction.DragBox=function(opt_options){goog.base(this,{handleDownEvent:ol.interaction.DragBox.handleDownEvent_,handleDragEvent:ol.interaction.DragBox.handleDragEvent_,handleUpEvent:ol.interaction.DragBox.handleUpEvent_});var options=goog.isDef(opt_options)?opt_options:{};var style=goog.isDef(options.style)?options.style:null;this.box_=new ol.render.Box(style);this.startPixel_=null;this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.always};goog.inherits(ol.interaction.DragBox,ol.interaction.Pointer);ol.interaction.DragBox.handleDragEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return}this.box_.setPixels(this.startPixel_,mapBrowserEvent.pixel)};ol.interaction.DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()};ol.interaction.DragBox.prototype.onBoxEnd=goog.nullFunction;ol.interaction.DragBox.handleUpEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return true}this.box_.setMap(null);var deltaX=mapBrowserEvent.pixel[0]-this.startPixel_[0];var deltaY=mapBrowserEvent.pixel[1]-this.startPixel_[1];if(deltaX*deltaX+deltaY*deltaY>=ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED){this.onBoxEnd(mapBrowserEvent);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXEND,mapBrowserEvent.coordinate))}return false};ol.interaction.DragBox.handleDownEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return false}var browserEvent=mapBrowserEvent.browserEvent;if(browserEvent.isMouseActionButton()&&this.condition_(mapBrowserEvent)){this.startPixel_=mapBrowserEvent.pixel;this.box_.setMap(mapBrowserEvent.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXSTART,mapBrowserEvent.coordinate));return true}else{return false}};goog.provide("goog.crypt");goog.require("goog.array");goog.require("goog.asserts");goog.crypt.stringToByteArray=function(str){var output=[],p=0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);while(c>255){output[p++]=c&255;c>>=8}output[p++]=c}return output};goog.crypt.byteArrayToString=function(bytes){var CHUNK_SIZE=8192;if(bytes.length<=CHUNK_SIZE){return String.fromCharCode.apply(null,bytes)}var str="";for(var i=0;i<bytes.length;i+=CHUNK_SIZE){var chunk=goog.array.slice(bytes,i,i+CHUNK_SIZE);str+=String.fromCharCode.apply(null,chunk)}return str};goog.crypt.byteArrayToHex=function(array){return goog.array.map(array,function(numByte){var hexByte=numByte.toString(16);return hexByte.length>1?hexByte:"0"+hexByte}).join("")};goog.crypt.hexToByteArray=function(hexString){goog.asserts.assert(hexString.length%2==0,"Key string length must be multiple of 2");var arr=[];for(var i=0;i<hexString.length;i+=2){arr.push(parseInt(hexString.substring(i,i+2),16))}return arr};goog.crypt.stringToUtf8ByteArray=function(str){var out=[],p=0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<128){out[p++]=c}else{if(c<2048){out[p++]=(c>>6)|192;out[p++]=(c&63)|128}else{out[p++]=(c>>12)|224;out[p++]=((c>>6)&63)|128;out[p++]=(c&63)|128}}}return out};goog.crypt.utf8ByteArrayToString=function(bytes){var out=[],pos=0,c=0;while(pos<bytes.length){var c1=bytes[pos++];if(c1<128){out[c++]=String.fromCharCode(c1)}else{if(c1>191&&c1<224){var c2=bytes[pos++];out[c++]=String.fromCharCode((c1&31)<<6|c2&63)}else{var c2=bytes[pos++];var c3=bytes[pos++];out[c++]=String.fromCharCode((c1&15)<<12|(c2&63)<<6|c3&63)}}}return out.join("")};goog.crypt.xorByteArray=function(bytes1,bytes2){goog.asserts.assert(bytes1.length==bytes2.length,"XOR array lengths must match");var result=[];for(var i=0;i<bytes1.length;i++){result.push(bytes1[i]^bytes2[i])}return result};goog.provide("goog.crypt.Hash");goog.crypt.Hash=function(){this.blockSize=-1};goog.crypt.Hash.prototype.reset=goog.abstractMethod;goog.crypt.Hash.prototype.update=goog.abstractMethod;goog.crypt.Hash.prototype.digest=goog.abstractMethod;goog.provide("goog.crypt.Md5");goog.require("goog.crypt.Hash");goog.crypt.Md5=function(){goog.crypt.Md5.base(this,"constructor");this.blockSize=512/8;this.chain_=new Array(4);this.block_=new Array(this.blockSize);this.blockLength_=0;this.totalLength_=0;this.reset()};goog.inherits(goog.crypt.Md5,goog.crypt.Hash);goog.crypt.Md5.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.blockLength_=0;this.totalLength_=0};goog.crypt.Md5.prototype.compress_=function(buf,opt_offset){if(!opt_offset){opt_offset=0}var X=new Array(16);if(goog.isString(buf)){for(var i=0;i<16;++i){X[i]=(buf.charCodeAt(opt_offset++))|(buf.charCodeAt(opt_offset++)<<8)|(buf.charCodeAt(opt_offset++)<<16)|(buf.charCodeAt(opt_offset++)<<24)}}else{for(var i=0;i<16;++i){X[i]=(buf[opt_offset++])|(buf[opt_offset++]<<8)|(buf[opt_offset++]<<16)|(buf[opt_offset++]<<24)}}var A=this.chain_[0];var B=this.chain_[1];var C=this.chain_[2];var D=this.chain_[3];var sum=0;sum=(A+(D^(B&(C^D)))+X[0]+3614090360)&4294967295;A=B+(((sum<<7)&4294967295)|(sum>>>25));sum=(D+(C^(A&(B^C)))+X[1]+3905402710)&4294967295;D=A+(((sum<<12)&4294967295)|(sum>>>20));sum=(C+(B^(D&(A^B)))+X[2]+606105819)&4294967295;C=D+(((sum<<17)&4294967295)|(sum>>>15));sum=(B+(A^(C&(D^A)))+X[3]+3250441966)&4294967295;B=C+(((sum<<22)&4294967295)|(sum>>>10));sum=(A+(D^(B&(C^D)))+X[4]+4118548399)&4294967295;A=B+(((sum<<7)&4294967295)|(sum>>>25));sum=(D+(C^(A&(B^C)))+X[5]+1200080426)&4294967295;D=A+(((sum<<12)&4294967295)|(sum>>>20));sum=(C+(B^(D&(A^B)))+X[6]+2821735955)&4294967295;C=D+(((sum<<17)&4294967295)|(sum>>>15));sum=(B+(A^(C&(D^A)))+X[7]+4249261313)&4294967295;B=C+(((sum<<22)&4294967295)|(sum>>>10));sum=(A+(D^(B&(C^D)))+X[8]+1770035416)&4294967295;A=B+(((sum<<7)&4294967295)|(sum>>>25));sum=(D+(C^(A&(B^C)))+X[9]+2336552879)&4294967295;D=A+(((sum<<12)&4294967295)|(sum>>>20));sum=(C+(B^(D&(A^B)))+X[10]+4294925233)&4294967295;C=D+(((sum<<17)&4294967295)|(sum>>>15));sum=(B+(A^(C&(D^A)))+X[11]+2304563134)&4294967295;B=C+(((sum<<22)&4294967295)|(sum>>>10));sum=(A+(D^(B&(C^D)))+X[12]+1804603682)&4294967295;A=B+(((sum<<7)&4294967295)|(sum>>>25));sum=(D+(C^(A&(B^C)))+X[13]+4254626195)&4294967295;D=A+(((sum<<12)&4294967295)|(sum>>>20));sum=(C+(B^(D&(A^B)))+X[14]+2792965006)&4294967295;C=D+(((sum<<17)&4294967295)|(sum>>>15));sum=(B+(A^(C&(D^A)))+X[15]+1236535329)&4294967295;B=C+(((sum<<22)&4294967295)|(sum>>>10));sum=(A+(C^(D&(B^C)))+X[1]+4129170786)&4294967295;A=B+(((sum<<5)&4294967295)|(sum>>>27));sum=(D+(B^(C&(A^B)))+X[6]+3225465664)&4294967295;D=A+(((sum<<9)&4294967295)|(sum>>>23));sum=(C+(A^(B&(D^A)))+X[11]+643717713)&4294967295;C=D+(((sum<<14)&4294967295)|(sum>>>18));sum=(B+(D^(A&(C^D)))+X[0]+3921069994)&4294967295;B=C+(((sum<<20)&4294967295)|(sum>>>12));sum=(A+(C^(D&(B^C)))+X[5]+3593408605)&4294967295;A=B+(((sum<<5)&4294967295)|(sum>>>27));sum=(D+(B^(C&(A^B)))+X[10]+38016083)&4294967295;D=A+(((sum<<9)&4294967295)|(sum>>>23));sum=(C+(A^(B&(D^A)))+X[15]+3634488961)&4294967295;C=D+(((sum<<14)&4294967295)|(sum>>>18));sum=(B+(D^(A&(C^D)))+X[4]+3889429448)&4294967295;B=C+(((sum<<20)&4294967295)|(sum>>>12));sum=(A+(C^(D&(B^C)))+X[9]+568446438)&4294967295;A=B+(((sum<<5)&4294967295)|(sum>>>27));sum=(D+(B^(C&(A^B)))+X[14]+3275163606)&4294967295;D=A+(((sum<<9)&4294967295)|(sum>>>23));sum=(C+(A^(B&(D^A)))+X[3]+4107603335)&4294967295;C=D+(((sum<<14)&4294967295)|(sum>>>18));sum=(B+(D^(A&(C^D)))+X[8]+1163531501)&4294967295;B=C+(((sum<<20)&4294967295)|(sum>>>12));sum=(A+(C^(D&(B^C)))+X[13]+2850285829)&4294967295;A=B+(((sum<<5)&4294967295)|(sum>>>27));sum=(D+(B^(C&(A^B)))+X[2]+4243563512)&4294967295;D=A+(((sum<<9)&4294967295)|(sum>>>23));sum=(C+(A^(B&(D^A)))+X[7]+1735328473)&4294967295;C=D+(((sum<<14)&4294967295)|(sum>>>18));sum=(B+(D^(A&(C^D)))+X[12]+2368359562)&4294967295;B=C+(((sum<<20)&4294967295)|(sum>>>12));sum=(A+(B^C^D)+X[5]+4294588738)&4294967295;A=B+(((sum<<4)&4294967295)|(sum>>>28));sum=(D+(A^B^C)+X[8]+2272392833)&4294967295;D=A+(((sum<<11)&4294967295)|(sum>>>21));sum=(C+(D^A^B)+X[11]+1839030562)&4294967295;C=D+(((sum<<16)&4294967295)|(sum>>>16));sum=(B+(C^D^A)+X[14]+4259657740)&4294967295;B=C+(((sum<<23)&4294967295)|(sum>>>9));sum=(A+(B^C^D)+X[1]+2763975236)&4294967295;A=B+(((sum<<4)&4294967295)|(sum>>>28));sum=(D+(A^B^C)+X[4]+1272893353)&4294967295;D=A+(((sum<<11)&4294967295)|(sum>>>21));sum=(C+(D^A^B)+X[7]+4139469664)&4294967295;C=D+(((sum<<16)&4294967295)|(sum>>>16));sum=(B+(C^D^A)+X[10]+3200236656)&4294967295;B=C+(((sum<<23)&4294967295)|(sum>>>9));sum=(A+(B^C^D)+X[13]+681279174)&4294967295;A=B+(((sum<<4)&4294967295)|(sum>>>28));sum=(D+(A^B^C)+X[0]+3936430074)&4294967295;D=A+(((sum<<11)&4294967295)|(sum>>>21));sum=(C+(D^A^B)+X[3]+3572445317)&4294967295;C=D+(((sum<<16)&4294967295)|(sum>>>16));sum=(B+(C^D^A)+X[6]+76029189)&4294967295;B=C+(((sum<<23)&4294967295)|(sum>>>9));sum=(A+(B^C^D)+X[9]+3654602809)&4294967295;A=B+(((sum<<4)&4294967295)|(sum>>>28));sum=(D+(A^B^C)+X[12]+3873151461)&4294967295;D=A+(((sum<<11)&4294967295)|(sum>>>21));sum=(C+(D^A^B)+X[15]+530742520)&4294967295;C=D+(((sum<<16)&4294967295)|(sum>>>16));sum=(B+(C^D^A)+X[2]+3299628645)&4294967295;B=C+(((sum<<23)&4294967295)|(sum>>>9));sum=(A+(C^(B|(~D)))+X[0]+4096336452)&4294967295;A=B+(((sum<<6)&4294967295)|(sum>>>26));sum=(D+(B^(A|(~C)))+X[7]+1126891415)&4294967295;D=A+(((sum<<10)&4294967295)|(sum>>>22));sum=(C+(A^(D|(~B)))+X[14]+2878612391)&4294967295;C=D+(((sum<<15)&4294967295)|(sum>>>17));sum=(B+(D^(C|(~A)))+X[5]+4237533241)&4294967295;B=C+(((sum<<21)&4294967295)|(sum>>>11));sum=(A+(C^(B|(~D)))+X[12]+1700485571)&4294967295;A=B+(((sum<<6)&4294967295)|(sum>>>26));sum=(D+(B^(A|(~C)))+X[3]+2399980690)&4294967295;D=A+(((sum<<10)&4294967295)|(sum>>>22));sum=(C+(A^(D|(~B)))+X[10]+4293915773)&4294967295;C=D+(((sum<<15)&4294967295)|(sum>>>17));sum=(B+(D^(C|(~A)))+X[1]+2240044497)&4294967295;B=C+(((sum<<21)&4294967295)|(sum>>>11));sum=(A+(C^(B|(~D)))+X[8]+1873313359)&4294967295;A=B+(((sum<<6)&4294967295)|(sum>>>26));sum=(D+(B^(A|(~C)))+X[15]+4264355552)&4294967295;D=A+(((sum<<10)&4294967295)|(sum>>>22));sum=(C+(A^(D|(~B)))+X[6]+2734768916)&4294967295;C=D+(((sum<<15)&4294967295)|(sum>>>17));sum=(B+(D^(C|(~A)))+X[13]+1309151649)&4294967295;B=C+(((sum<<21)&4294967295)|(sum>>>11));sum=(A+(C^(B|(~D)))+X[4]+4149444226)&4294967295;A=B+(((sum<<6)&4294967295)|(sum>>>26));sum=(D+(B^(A|(~C)))+X[11]+3174756917)&4294967295;D=A+(((sum<<10)&4294967295)|(sum>>>22));sum=(C+(A^(D|(~B)))+X[2]+718787259)&4294967295;C=D+(((sum<<15)&4294967295)|(sum>>>17));sum=(B+(D^(C|(~A)))+X[9]+3951481745)&4294967295;B=C+(((sum<<21)&4294967295)|(sum>>>11));this.chain_[0]=(this.chain_[0]+A)&4294967295;this.chain_[1]=(this.chain_[1]+B)&4294967295;this.chain_[2]=(this.chain_[2]+C)&4294967295;this.chain_[3]=(this.chain_[3]+D)&4294967295};goog.crypt.Md5.prototype.update=function(bytes,opt_length){if(!goog.isDef(opt_length)){opt_length=bytes.length}var lengthMinusBlock=opt_length-this.blockSize;var block=this.block_;var blockLength=this.blockLength_;var i=0;while(i<opt_length){if(blockLength==0){while(i<=lengthMinusBlock){this.compress_(bytes,i);i+=this.blockSize}}if(goog.isString(bytes)){while(i<opt_length){block[blockLength++]=bytes.charCodeAt(i++);if(blockLength==this.blockSize){this.compress_(block);blockLength=0;break}}}else{while(i<opt_length){block[blockLength++]=bytes[i++];if(blockLength==this.blockSize){this.compress_(block);blockLength=0;break}}}}this.blockLength_=blockLength;this.totalLength_+=opt_length};goog.crypt.Md5.prototype.digest=function(){var pad=new Array((this.blockLength_<56?this.blockSize:this.blockSize*2)-this.blockLength_);pad[0]=128;for(var i=1;i<pad.length-8;++i){pad[i]=0}var totalBits=this.totalLength_*8;for(var i=pad.length-8;i<pad.length;++i){pad[i]=totalBits&255;totalBits/=256}this.update(pad);var digest=new Array(16);var n=0;for(var i=0;i<4;++i){for(var j=0;j<32;j+=8){digest[n++]=(this.chain_[i]>>>j)&255}}return digest};goog.provide("ol.structs.IHasChecksum");ol.structs.IHasChecksum=function(){};ol.structs.IHasChecksum.prototype.getChecksum=function(){};goog.provide("ol.style.Stroke");goog.require("goog.crypt");goog.require("goog.crypt.Md5");goog.require("ol.color");goog.require("ol.structs.IHasChecksum");ol.style.Stroke=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.color_=goog.isDef(options.color)?options.color:null;this.lineCap_=options.lineCap;this.lineDash_=goog.isDef(options.lineDash)?options.lineDash:null;this.lineJoin_=options.lineJoin;this.miterLimit_=options.miterLimit;this.width_=options.width;this.checksum_=undefined};ol.style.Stroke.prototype.getColor=function(){return this.color_};ol.style.Stroke.prototype.getLineCap=function(){return this.lineCap_};ol.style.Stroke.prototype.getLineDash=function(){return this.lineDash_};ol.style.Stroke.prototype.getLineJoin=function(){return this.lineJoin_};ol.style.Stroke.prototype.getMiterLimit=function(){return this.miterLimit_};ol.style.Stroke.prototype.getWidth=function(){return this.width_};ol.style.Stroke.prototype.setColor=function(color){this.color_=color;this.checksum_=undefined};ol.style.Stroke.prototype.setLineCap=function(lineCap){this.lineCap_=lineCap;this.checksum_=undefined};ol.style.Stroke.prototype.setLineDash=function(lineDash){this.lineDash_=lineDash;this.checksum_=undefined};ol.style.Stroke.prototype.setLineJoin=function(lineJoin){this.lineJoin_=lineJoin;this.checksum_=undefined};ol.style.Stroke.prototype.setMiterLimit=function(miterLimit){this.miterLimit_=miterLimit;this.checksum_=undefined};ol.style.Stroke.prototype.setWidth=function(width){this.width_=width;this.checksum_=undefined};ol.style.Stroke.prototype.getChecksum=function(){if(!goog.isDef(this.checksum_)){var raw="s"+(!goog.isNull(this.color_)?ol.color.asString(this.color_):"-")+","+(goog.isDef(this.lineCap_)?this.lineCap_.toString():"-")+","+(!goog.isNull(this.lineDash_)?this.lineDash_.toString():"-")+","+(goog.isDef(this.lineJoin_)?this.lineJoin_:"-")+","+(goog.isDef(this.miterLimit_)?this.miterLimit_.toString():"-")+","+(goog.isDef(this.width_)?this.width_.toString():"-");var md5=new goog.crypt.Md5();md5.update(raw);this.checksum_=goog.crypt.byteArrayToString(md5.digest())}return this.checksum_};goog.provide("ol.render.canvas");ol.render.canvas.FillState;ol.render.canvas.StrokeState;ol.render.canvas.TextState;ol.render.canvas.defaultFont="10px sans-serif";ol.render.canvas.defaultFillStyle=[0,0,0,1];ol.render.canvas.defaultLineCap="round";ol.render.canvas.defaultLineDash=[];ol.render.canvas.defaultLineJoin="round";ol.render.canvas.defaultMiterLimit=10;ol.render.canvas.defaultStrokeStyle=[0,0,0,1];ol.render.canvas.defaultTextAlign="center";ol.render.canvas.defaultTextBaseline="middle";ol.render.canvas.defaultLineWidth=1;goog.provide("ol.style.Fill");goog.require("ol.color");goog.require("ol.structs.IHasChecksum");ol.style.Fill=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.color_=goog.isDef(options.color)?options.color:null;this.checksum_=undefined};ol.style.Fill.prototype.getColor=function(){return this.color_};ol.style.Fill.prototype.setColor=function(color){this.color_=color;this.checksum_=undefined};ol.style.Fill.prototype.getChecksum=function(){if(!goog.isDef(this.checksum_)){this.checksum_="f"+(!goog.isNull(this.color_)?ol.color.asString(this.color_):"-")}return this.checksum_};goog.provide("ol.style.Circle");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("ol.color");goog.require("ol.has");goog.require("ol.render.canvas");goog.require("ol.structs.IHasChecksum");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.Stroke");ol.style.Circle=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=goog.isDef(options.fill)?options.fill:null;this.stroke_=goog.isDef(options.stroke)?options.stroke:null;this.radius_=options.radius;this.origin_=[0,0];this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.render_(options.atlasManager);var snapToPixel=goog.isDef(options.snapToPixel)?options.snapToPixel:true;goog.base(this,{opacity:1,rotateWithView:false,rotation:0,scale:1,snapToPixel:snapToPixel})};goog.inherits(ol.style.Circle,ol.style.Image);ol.style.Circle.prototype.getAnchor=function(){return this.anchor_};ol.style.Circle.prototype.getFill=function(){return this.fill_};ol.style.Circle.prototype.getHitDetectionImage=function(pixelRatio){return this.hitDetectionCanvas_};ol.style.Circle.prototype.getImage=function(pixelRatio){return this.canvas_};ol.style.Circle.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.Circle.prototype.getImageSize=function(){return this.imageSize_};ol.style.Circle.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.Circle.prototype.getOrigin=function(){return this.origin_};ol.style.Circle.prototype.getRadius=function(){return this.radius_};ol.style.Circle.prototype.getSize=function(){return this.size_};ol.style.Circle.prototype.getStroke=function(){return this.stroke_};ol.style.Circle.prototype.listenImageChange=goog.nullFunction;ol.style.Circle.prototype.load=goog.nullFunction;ol.style.Circle.prototype.unlistenImageChange=goog.nullFunction;ol.style.Circle.RenderOptions;ol.style.Circle.prototype.render_=function(atlasManager){var imageSize;var lineDash=null;var strokeStyle;var strokeWidth=0;if(!goog.isNull(this.stroke_)){strokeStyle=ol.color.asString(this.stroke_.getColor());strokeWidth=this.stroke_.getWidth();if(!goog.isDef(strokeWidth)){strokeWidth=ol.render.canvas.defaultLineWidth}lineDash=this.stroke_.getLineDash();if(!ol.has.CANVAS_LINE_DASH){lineDash=null}}var size=2*(this.radius_+strokeWidth)+1;var renderOptions={strokeStyle:strokeStyle,strokeWidth:strokeWidth,size:size,lineDash:lineDash};if(!goog.isDef(atlasManager)){this.canvas_=(goog.dom.createElement(goog.dom.TagName.CANVAS));this.canvas_.height=size;this.canvas_.width=size;size=this.canvas_.width;imageSize=size;var context=(this.canvas_.getContext("2d"));this.draw_(renderOptions,context,0,0);this.createHitDetectionCanvas_(renderOptions)}else{size=Math.round(size);var hasCustomHitDetectionImage=goog.isNull(this.fill_);var renderHitDetectionCallback;if(hasCustomHitDetectionImage){renderHitDetectionCallback=goog.bind(this.drawHitDetectionCanvas_,this,renderOptions)}var id=this.getChecksum();var info=atlasManager.add(id,size,size,goog.bind(this.draw_,this,renderOptions),renderHitDetectionCallback);goog.asserts.assert(info!==null,"circle radius is too large");this.canvas_=info.image;this.origin_=[info.offsetX,info.offsetY];imageSize=info.image.width;if(hasCustomHitDetectionImage){this.hitDetectionCanvas_=info.hitImage;this.hitDetectionImageSize_=[info.hitImage.width,info.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[imageSize,imageSize]}}this.anchor_=[size/2,size/2];this.size_=[size,size];this.imageSize_=[imageSize,imageSize]};ol.style.Circle.prototype.draw_=function(renderOptions,context,x,y){context.setTransform(1,0,0,1,0,0);context.translate(x,y);context.beginPath();context.arc(renderOptions.size/2,renderOptions.size/2,this.radius_,0,2*Math.PI,true);if(!goog.isNull(this.fill_)){context.fillStyle=ol.color.asString(this.fill_.getColor());context.fill()}if(!goog.isNull(this.stroke_)){context.strokeStyle=renderOptions.strokeStyle;context.lineWidth=renderOptions.strokeWidth;if(!goog.isNull(renderOptions.lineDash)){context.setLineDash(renderOptions.lineDash)}context.stroke()}context.closePath()};ol.style.Circle.prototype.createHitDetectionCanvas_=function(renderOptions){this.hitDetectionImageSize_=[renderOptions.size,renderOptions.size];if(!goog.isNull(this.fill_)){this.hitDetectionCanvas_=this.canvas_;return}this.hitDetectionCanvas_=(goog.dom.createElement(goog.dom.TagName.CANVAS));var canvas=this.hitDetectionCanvas_;canvas.height=renderOptions.size;canvas.width=renderOptions.size;var context=(canvas.getContext("2d"));this.drawHitDetectionCanvas_(renderOptions,context,0,0)};ol.style.Circle.prototype.drawHitDetectionCanvas_=function(renderOptions,context,x,y){context.setTransform(1,0,0,1,0,0);context.translate(x,y);context.beginPath();context.arc(renderOptions.size/2,renderOptions.size/2,this.radius_,0,2*Math.PI,true);context.fillStyle=ol.render.canvas.defaultFillStyle;context.fill();if(!goog.isNull(this.stroke_)){context.strokeStyle=renderOptions.strokeStyle;context.lineWidth=renderOptions.strokeWidth;if(!goog.isNull(renderOptions.lineDash)){context.setLineDash(renderOptions.lineDash)}context.stroke()}context.closePath()};ol.style.Circle.prototype.getChecksum=function(){var strokeChecksum=!goog.isNull(this.stroke_)?this.stroke_.getChecksum():"-";var fillChecksum=!goog.isNull(this.fill_)?this.fill_.getChecksum():"-";var recalculate=goog.isNull(this.checksums_)||(strokeChecksum!=this.checksums_[1]||fillChecksum!=this.checksums_[2]||this.radius_!=this.checksums_[3]);if(recalculate){var checksum="c"+strokeChecksum+fillChecksum+(goog.isDef(this.radius_)?this.radius_.toString():"-");this.checksums_=[checksum,strokeChecksum,fillChecksum,this.radius_]}return this.checksums_[0]};goog.provide("ol.style.GeometryFunction");goog.provide("ol.style.Style");goog.provide("ol.style.StyleFunction");goog.provide("ol.style.defaultGeometryFunction");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryType");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.Stroke");ol.style.Style=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.geometry_=null;this.geometryFunction_=ol.style.defaultGeometryFunction;if(goog.isDef(options.geometry)){this.setGeometry(options.geometry)}this.fill_=goog.isDef(options.fill)?options.fill:null;this.image_=goog.isDef(options.image)?options.image:null;this.stroke_=goog.isDef(options.stroke)?options.stroke:null;this.text_=goog.isDef(options.text)?options.text:null;this.zIndex_=options.zIndex};ol.style.Style.prototype.getGeometry=function(){return this.geometry_};ol.style.Style.prototype.getGeometryFunction=function(){return this.geometryFunction_};ol.style.Style.prototype.getFill=function(){return this.fill_};ol.style.Style.prototype.getImage=function(){return this.image_};ol.style.Style.prototype.getStroke=function(){return this.stroke_};ol.style.Style.prototype.getText=function(){return this.text_};ol.style.Style.prototype.getZIndex=function(){return this.zIndex_};ol.style.Style.prototype.setGeometry=function(geometry){if(goog.isFunction(geometry)){this.geometryFunction_=geometry}else{if(goog.isString(geometry)){this.geometryFunction_=function(feature){var result=feature.get(geometry);if(goog.isDefAndNotNull(result)){goog.asserts.assertInstanceof(result,ol.geom.Geometry,"feature geometry must be an ol.geom.Geometry instance")}return result}}else{if(goog.isNull(geometry)){this.geometryFunction_=ol.style.defaultGeometryFunction}else{if(goog.isDef(geometry)){goog.asserts.assertInstanceof(geometry,ol.geom.Geometry,"geometry must be an ol.geom.Geometry instance");this.geometryFunction_=function(){return geometry}}}}}this.geometry_=geometry};ol.style.Style.prototype.setZIndex=function(zIndex){this.zIndex_=zIndex};ol.style.StyleFunction;ol.style.createStyleFunction=function(obj){var styleFunction;if(goog.isFunction(obj)){styleFunction=obj}else{var styles;if(goog.isArray(obj)){styles=obj}else{goog.asserts.assertInstanceof(obj,ol.style.Style,"obj geometry must be an ol.style.Style instance");styles=[obj]}styleFunction=goog.functions.constant(styles)}return styleFunction};ol.style.defaultStyle_=null;ol.style.defaultStyleFunction=function(feature,resolution){if(goog.isNull(ol.style.defaultStyle_)){var fill=new ol.style.Fill({color:"rgba(255,255,255,0.4)"});var stroke=new ol.style.Stroke({color:"#3399CC",width:1.25});ol.style.defaultStyle_=[new ol.style.Style({image:new ol.style.Circle({fill:fill,stroke:stroke,radius:5}),fill:fill,stroke:stroke})]}return ol.style.defaultStyle_};ol.style.createDefaultEditingStyles=function(){var styles={};var white=[255,255,255,1];var blue=[0,153,255,1];var width=3;styles[ol.geom.GeometryType.POLYGON]=[new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,0.5]})})];styles[ol.geom.GeometryType.MULTI_POLYGON]=styles[ol.geom.GeometryType.POLYGON];styles[ol.geom.GeometryType.LINE_STRING]=[new ol.style.Style({stroke:new ol.style.Stroke({color:white,width:width+2})}),new ol.style.Style({stroke:new ol.style.Stroke({color:blue,width:width})})];styles[ol.geom.GeometryType.MULTI_LINE_STRING]=styles[ol.geom.GeometryType.LINE_STRING];styles[ol.geom.GeometryType.CIRCLE]=styles[ol.geom.GeometryType.POLYGON].concat(styles[ol.geom.GeometryType.LINE_STRING]);styles[ol.geom.GeometryType.POINT]=[new ol.style.Style({image:new ol.style.Circle({radius:width*2,fill:new ol.style.Fill({color:blue}),stroke:new ol.style.Stroke({color:white,width:width/2})}),zIndex:Infinity})];styles[ol.geom.GeometryType.MULTI_POINT]=styles[ol.geom.GeometryType.POINT];styles[ol.geom.GeometryType.GEOMETRY_COLLECTION]=styles[ol.geom.GeometryType.POLYGON].concat(styles[ol.geom.GeometryType.LINE_STRING],styles[ol.geom.GeometryType.POINT]);return styles};ol.style.GeometryFunction;ol.style.defaultGeometryFunction=function(feature){goog.asserts.assert(!goog.isNull(feature),"feature must not be null");return feature.getGeometry()};goog.provide("ol.interaction.DragZoom");goog.require("goog.asserts");goog.require("ol.animation");goog.require("ol.easing");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.interaction.DragBox");goog.require("ol.style.Stroke");goog.require("ol.style.Style");ol.interaction.DragZoom=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var condition=goog.isDef(options.condition)?options.condition:ol.events.condition.shiftKeyOnly;this.duration_=goog.isDef(options.duration)?options.duration:200;var style=goog.isDef(options.style)?options.style:new ol.style.Style({stroke:new ol.style.Stroke({color:[0,0,255,1]})});goog.base(this,{condition:condition,style:style})};goog.inherits(ol.interaction.DragZoom,ol.interaction.DragBox);ol.interaction.DragZoom.prototype.onBoxEnd=function(){var map=this.getMap();var view=map.getView();goog.asserts.assert(!goog.isNull(view),"view should not be null");var size=map.getSize();goog.asserts.assert(goog.isDef(size),"size should be defined");var extent=this.getGeometry().getExtent();var resolution=view.constrainResolution(view.getResolutionForExtent(extent,size));var currentResolution=view.getResolution();goog.asserts.assert(goog.isDef(currentResolution),"res should be defined");var currentCenter=view.getCenter();goog.asserts.assert(goog.isDef(currentCenter),"center should be defined");map.beforeRender(ol.animation.zoom({resolution:currentResolution,duration:this.duration_,easing:ol.easing.easeOut}));map.beforeRender(ol.animation.pan({source:currentCenter,duration:this.duration_,easing:ol.easing.easeOut}));view.setCenter(ol.extent.getCenter(extent));view.setResolution(resolution)};goog.provide("ol.interaction.KeyboardPan");goog.require("goog.asserts");goog.require("goog.events.KeyCodes");goog.require("goog.events.KeyHandler.EventType");goog.require("goog.functions");goog.require("ol.coordinate");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");ol.interaction.KeyboardPan=function(opt_options){goog.base(this,{handleEvent:ol.interaction.KeyboardPan.handleEvent});var options=goog.isDef(opt_options)?opt_options:{};this.condition_=goog.isDef(options.condition)?options.condition:goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.targetNotEditable);this.duration_=goog.isDef(options.duration)?options.duration:100;this.pixelDelta_=goog.isDef(options.pixelDelta)?options.pixelDelta:128};goog.inherits(ol.interaction.KeyboardPan,ol.interaction.Interaction);ol.interaction.KeyboardPan.handleEvent=function(mapBrowserEvent){var stopEvent=false;if(mapBrowserEvent.type==goog.events.KeyHandler.EventType.KEY){var keyEvent=(mapBrowserEvent.browserEvent);var keyCode=keyEvent.keyCode;if(this.condition_(mapBrowserEvent)&&(keyCode==goog.events.KeyCodes.DOWN||keyCode==goog.events.KeyCodes.LEFT||keyCode==goog.events.KeyCodes.RIGHT||keyCode==goog.events.KeyCodes.UP)){var map=mapBrowserEvent.map;var view=map.getView();goog.asserts.assert(!goog.isNull(view),"view should not be null");var mapUnitsDelta=view.getResolution()*this.pixelDelta_;var deltaX=0,deltaY=0;if(keyCode==goog.events.KeyCodes.DOWN){deltaY=-mapUnitsDelta}else{if(keyCode==goog.events.KeyCodes.LEFT){deltaX=-mapUnitsDelta}else{if(keyCode==goog.events.KeyCodes.RIGHT){deltaX=mapUnitsDelta}else{deltaY=mapUnitsDelta}}}var delta=[deltaX,deltaY];ol.coordinate.rotate(delta,view.getRotation());ol.interaction.Interaction.pan(map,view,delta,this.duration_);mapBrowserEvent.preventDefault();stopEvent=true}}return !stopEvent};goog.provide("ol.interaction.KeyboardZoom");goog.require("goog.asserts");goog.require("goog.events.KeyHandler.EventType");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");ol.interaction.KeyboardZoom=function(opt_options){goog.base(this,{handleEvent:ol.interaction.KeyboardZoom.handleEvent});var options=goog.isDef(opt_options)?opt_options:{};this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.targetNotEditable;this.delta_=goog.isDef(options.delta)?options.delta:1;this.duration_=goog.isDef(options.duration)?options.duration:100};goog.inherits(ol.interaction.KeyboardZoom,ol.interaction.Interaction);ol.interaction.KeyboardZoom.handleEvent=function(mapBrowserEvent){var stopEvent=false;if(mapBrowserEvent.type==goog.events.KeyHandler.EventType.KEY){var keyEvent=(mapBrowserEvent.browserEvent);var charCode=keyEvent.charCode;if(this.condition_(mapBrowserEvent)&&(charCode=="+".charCodeAt(0)||charCode=="-".charCodeAt(0))){var map=mapBrowserEvent.map;var delta=(charCode=="+".charCodeAt(0))?this.delta_:-this.delta_;map.render();var view=map.getView();goog.asserts.assert(!goog.isNull(view),"view should not be null");ol.interaction.Interaction.zoomByDelta(map,view,delta,undefined,this.duration_);mapBrowserEvent.preventDefault();stopEvent=true}}return !stopEvent};goog.provide("ol.interaction.MouseWheelZoom");goog.require("goog.asserts");goog.require("goog.events.MouseWheelEvent");goog.require("goog.events.MouseWheelHandler.EventType");goog.require("goog.math");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.interaction.Interaction");ol.interaction.MouseWheelZoom=function(opt_options){goog.base(this,{handleEvent:ol.interaction.MouseWheelZoom.handleEvent});var options=goog.isDef(opt_options)?opt_options:{};this.delta_=0;this.duration_=goog.isDef(options.duration)?options.duration:250;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};goog.inherits(ol.interaction.MouseWheelZoom,ol.interaction.Interaction);ol.interaction.MouseWheelZoom.handleEvent=function(mapBrowserEvent){var stopEvent=false;if(mapBrowserEvent.type==goog.events.MouseWheelHandler.EventType.MOUSEWHEEL){var map=mapBrowserEvent.map;var mouseWheelEvent=mapBrowserEvent.browserEvent;goog.asserts.assertInstanceof(mouseWheelEvent,goog.events.MouseWheelEvent,"mouseWheelEvent should be of type MouseWheelEvent");this.lastAnchor_=mapBrowserEvent.coordinate;this.delta_+=mouseWheelEvent.deltaY;if(!goog.isDef(this.startTime_)){this.startTime_=goog.now()}var duration=ol.MOUSEWHEELZOOM_TIMEOUT_DURATION;var timeLeft=Math.max(duration-(goog.now()-this.startTime_),0);goog.global.clearTimeout(this.timeoutId_);this.timeoutId_=goog.global.setTimeout(goog.bind(this.doZoom_,this,map),timeLeft);mapBrowserEvent.preventDefault();stopEvent=true}return !stopEvent};ol.interaction.MouseWheelZoom.prototype.doZoom_=function(map){var maxDelta=ol.MOUSEWHEELZOOM_MAXDELTA;var delta=goog.math.clamp(this.delta_,-maxDelta,maxDelta);var view=map.getView();goog.asserts.assert(!goog.isNull(view),"view should not be null");map.render();ol.interaction.Interaction.zoomByDelta(map,view,-delta,this.lastAnchor_,this.duration_);this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};goog.provide("ol.interaction.PinchRotate");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.ViewHint");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.PinchRotate=function(opt_options){goog.base(this,{handleDownEvent:ol.interaction.PinchRotate.handleDownEvent_,handleDragEvent:ol.interaction.PinchRotate.handleDragEvent_,handleUpEvent:ol.interaction.PinchRotate.handleUpEvent_});var options=goog.isDef(opt_options)?opt_options:{};this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;this.threshold_=goog.isDef(options.threshold)?options.threshold:0.3;this.duration_=goog.isDef(options.duration)?options.duration:250};goog.inherits(ol.interaction.PinchRotate,ol.interaction.Pointer);ol.interaction.PinchRotate.handleDragEvent_=function(mapBrowserEvent){goog.asserts.assert(this.targetPointers.length>=2,"length of this.targetPointers should be greater than or equal to 2");var rotationDelta=0;var touch0=this.targetPointers[0];var touch1=this.targetPointers[1];var angle=Math.atan2(touch1.clientY-touch0.clientY,touch1.clientX-touch0.clientX);if(goog.isDef(this.lastAngle_)){var delta=angle-this.lastAngle_;this.rotationDelta_+=delta;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}rotationDelta=delta}this.lastAngle_=angle;var map=mapBrowserEvent.map;var viewportPosition=goog.style.getClientPosition(map.getViewport());var centroid=ol.interaction.Pointer.centroid(this.targetPointers);centroid[0]-=viewportPosition.x;centroid[1]-=viewportPosition.y;this.anchor_=map.getCoordinateFromPixel(centroid);if(this.rotating_){var view=map.getView();var rotation=view.getRotation();map.render();ol.interaction.Interaction.rotateWithoutConstraints(map,view,rotation+rotationDelta,this.anchor_)}};ol.interaction.PinchRotate.handleUpEvent_=function(mapBrowserEvent){if(this.targetPointers.length<2){var map=mapBrowserEvent.map;var view=map.getView();view.setHint(ol.ViewHint.INTERACTING,-1);if(this.rotating_){var rotation=view.getRotation();ol.interaction.Interaction.rotate(map,view,rotation,this.anchor_,this.duration_)}return false}else{return true}};ol.interaction.PinchRotate.handleDownEvent_=function(mapBrowserEvent){if(this.targetPointers.length>=2){var map=mapBrowserEvent.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;if(!this.handlingDownUpSequence){map.getView().setHint(ol.ViewHint.INTERACTING,1)}map.render();return true}else{return false}};ol.interaction.PinchRotate.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction.PinchZoom");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.ViewHint");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.PinchZoom=function(opt_options){goog.base(this,{handleDownEvent:ol.interaction.PinchZoom.handleDownEvent_,handleDragEvent:ol.interaction.PinchZoom.handleDragEvent_,handleUpEvent:ol.interaction.PinchZoom.handleUpEvent_});var options=goog.isDef(opt_options)?opt_options:{};this.anchor_=null;this.duration_=goog.isDef(options.duration)?options.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1};goog.inherits(ol.interaction.PinchZoom,ol.interaction.Pointer);ol.interaction.PinchZoom.handleDragEvent_=function(mapBrowserEvent){goog.asserts.assert(this.targetPointers.length>=2,"length of this.targetPointers should be 2 or more");var scaleDelta=1;var touch0=this.targetPointers[0];var touch1=this.targetPointers[1];var dx=touch0.clientX-touch1.clientX;var dy=touch0.clientY-touch1.clientY;var distance=Math.sqrt(dx*dx+dy*dy);if(goog.isDef(this.lastDistance_)){scaleDelta=this.lastDistance_/distance}this.lastDistance_=distance;if(scaleDelta!=1){this.lastScaleDelta_=scaleDelta}var map=mapBrowserEvent.map;var view=map.getView();var resolution=view.getResolution();var viewportPosition=goog.style.getClientPosition(map.getViewport());var centroid=ol.interaction.Pointer.centroid(this.targetPointers);centroid[0]-=viewportPosition.x;centroid[1]-=viewportPosition.y;this.anchor_=map.getCoordinateFromPixel(centroid);map.render();ol.interaction.Interaction.zoomWithoutConstraints(map,view,resolution*scaleDelta,this.anchor_)};ol.interaction.PinchZoom.handleUpEvent_=function(mapBrowserEvent){if(this.targetPointers.length<2){var map=mapBrowserEvent.map;var view=map.getView();view.setHint(ol.ViewHint.INTERACTING,-1);var resolution=view.getResolution();var direction=this.lastScaleDelta_-1;ol.interaction.Interaction.zoom(map,view,resolution,this.anchor_,this.duration_,direction);return false}else{return true}};ol.interaction.PinchZoom.handleDownEvent_=function(mapBrowserEvent){if(this.targetPointers.length>=2){var map=mapBrowserEvent.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){map.getView().setHint(ol.ViewHint.INTERACTING,1)}map.render();return true}else{return false}};ol.interaction.PinchZoom.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction");goog.require("ol.Collection");goog.require("ol.Kinetic");goog.require("ol.interaction.DoubleClickZoom");goog.require("ol.interaction.DragPan");goog.require("ol.interaction.DragRotate");goog.require("ol.interaction.DragZoom");goog.require("ol.interaction.KeyboardPan");goog.require("ol.interaction.KeyboardZoom");goog.require("ol.interaction.MouseWheelZoom");goog.require("ol.interaction.PinchRotate");goog.require("ol.interaction.PinchZoom");ol.interaction.defaults=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var interactions=new ol.Collection();var kinetic=new ol.Kinetic(-0.005,0.05,100);var altShiftDragRotate=goog.isDef(options.altShiftDragRotate)?options.altShiftDragRotate:true;if(altShiftDragRotate){interactions.push(new ol.interaction.DragRotate())}var doubleClickZoom=goog.isDef(options.doubleClickZoom)?options.doubleClickZoom:true;if(doubleClickZoom){interactions.push(new ol.interaction.DoubleClickZoom({delta:options.zoomDelta,duration:options.zoomDuration}))}var dragPan=goog.isDef(options.dragPan)?options.dragPan:true;if(dragPan){interactions.push(new ol.interaction.DragPan({kinetic:kinetic}))}var pinchRotate=goog.isDef(options.pinchRotate)?options.pinchRotate:true;if(pinchRotate){interactions.push(new ol.interaction.PinchRotate())}var pinchZoom=goog.isDef(options.pinchZoom)?options.pinchZoom:true;if(pinchZoom){interactions.push(new ol.interaction.PinchZoom({duration:options.zoomDuration}))}var keyboard=goog.isDef(options.keyboard)?options.keyboard:true;if(keyboard){interactions.push(new ol.interaction.KeyboardPan());interactions.push(new ol.interaction.KeyboardZoom({delta:options.zoomDelta,duration:options.zoomDuration}))}var mouseWheelZoom=goog.isDef(options.mouseWheelZoom)?options.mouseWheelZoom:true;if(mouseWheelZoom){interactions.push(new ol.interaction.MouseWheelZoom({duration:options.zoomDuration}))}var shiftDragZoom=goog.isDef(options.shiftDragZoom)?options.shiftDragZoom:true;if(shiftDragZoom){interactions.push(new ol.interaction.DragZoom())}return interactions};goog.provide("ol.layer.Group");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math");goog.require("goog.object");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Object");goog.require("ol.ObjectEventType");goog.require("ol.extent");goog.require("ol.layer.Base");goog.require("ol.source.State");ol.layer.GroupProperty={LAYERS:"layers"};ol.layer.Group=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var baseOptions=(goog.object.clone(options));delete baseOptions.layers;var layers=options.layers;goog.base(this,baseOptions);this.layersListenerKeys_=[];this.listenerKeys_={};goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.GroupProperty.LAYERS),this.handleLayersChanged_,false,this);if(goog.isDefAndNotNull(layers)){if(goog.isArray(layers)){layers=new ol.Collection(layers.slice())}else{goog.asserts.assertInstanceof(layers,ol.Collection,"layers should be an ol.Collection");layers=layers}}else{layers=new ol.Collection()}this.setLayers(layers)};goog.inherits(ol.layer.Group,ol.layer.Base);ol.layer.Group.prototype.handleLayerChange_=function(){if(this.getVisible()){this.changed()}};ol.layer.Group.prototype.handleLayersChanged_=function(event){goog.array.forEach(this.layersListenerKeys_,goog.events.unlistenByKey);this.layersListenerKeys_.length=0;var layers=this.getLayers();this.layersListenerKeys_.push(goog.events.listen(layers,ol.CollectionEventType.ADD,this.handleLayersAdd_,false,this),goog.events.listen(layers,ol.CollectionEventType.REMOVE,this.handleLayersRemove_,false,this));goog.object.forEach(this.listenerKeys_,function(keys){goog.array.forEach(keys,goog.events.unlistenByKey)});goog.object.clear(this.listenerKeys_);var layersArray=layers.getArray();var i,ii,layer;for(i=0,ii=layersArray.length;i<ii;i++){layer=layersArray[i];this.listenerKeys_[goog.getUid(layer).toString()]=[goog.events.listen(layer,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,false,this),goog.events.listen(layer,goog.events.EventType.CHANGE,this.handleLayerChange_,false,this)]}this.changed()};ol.layer.Group.prototype.handleLayersAdd_=function(collectionEvent){var layer=(collectionEvent.element);var key=goog.getUid(layer).toString();goog.asserts.assert(!(key in this.listenerKeys_),"listeners already registered");this.listenerKeys_[key]=[goog.events.listen(layer,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,false,this),goog.events.listen(layer,goog.events.EventType.CHANGE,this.handleLayerChange_,false,this)];this.changed()};ol.layer.Group.prototype.handleLayersRemove_=function(collectionEvent){var layer=(collectionEvent.element);var key=goog.getUid(layer).toString();goog.asserts.assert(key in this.listenerKeys_,"no listeners to unregister");goog.array.forEach(this.listenerKeys_[key],goog.events.unlistenByKey);delete this.listenerKeys_[key];this.changed()};ol.layer.Group.prototype.getLayers=function(){return(this.get(ol.layer.GroupProperty.LAYERS))};ol.layer.Group.prototype.setLayers=function(layers){this.set(ol.layer.GroupProperty.LAYERS,layers)};ol.layer.Group.prototype.getLayersArray=function(opt_array){var array=goog.isDef(opt_array)?opt_array:[];this.getLayers().forEach(function(layer){layer.getLayersArray(array)});return array};ol.layer.Group.prototype.getLayerStatesArray=function(opt_states){var states=goog.isDef(opt_states)?opt_states:[];var pos=states.length;this.getLayers().forEach(function(layer){layer.getLayerStatesArray(states)});var ownLayerState=this.getLayerState();var i,ii,layerState;for(i=pos,ii=states.length;i<ii;i++){layerState=states[i];layerState.brightness=goog.math.clamp(layerState.brightness+ownLayerState.brightness,-1,1);layerState.contrast*=ownLayerState.contrast;layerState.hue+=ownLayerState.hue;layerState.opacity*=ownLayerState.opacity;layerState.saturation*=ownLayerState.saturation;layerState.visible=layerState.visible&&ownLayerState.visible;layerState.maxResolution=Math.min(layerState.maxResolution,ownLayerState.maxResolution);layerState.minResolution=Math.max(layerState.minResolution,ownLayerState.minResolution);if(goog.isDef(ownLayerState.extent)){if(goog.isDef(layerState.extent)){layerState.extent=ol.extent.getIntersection(layerState.extent,ownLayerState.extent)}else{layerState.extent=ownLayerState.extent}}}return states};ol.layer.Group.prototype.getSourceState=function(){return ol.source.State.READY};goog.provide("ol.proj.EPSG3857");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.math");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.proj.EPSG3857_=function(code){goog.base(this,{code:code,units:ol.proj.Units.METERS,extent:ol.proj.EPSG3857.EXTENT,global:true,worldExtent:ol.proj.EPSG3857.WORLD_EXTENT})};goog.inherits(ol.proj.EPSG3857_,ol.proj.Projection);ol.proj.EPSG3857_.prototype.getPointResolution=function(resolution,point){return resolution/ol.math.cosh(point[1]/ol.proj.EPSG3857.RADIUS)};ol.proj.EPSG3857.RADIUS=6378137;ol.proj.EPSG3857.HALF_SIZE=Math.PI*ol.proj.EPSG3857.RADIUS;ol.proj.EPSG3857.EXTENT=[-ol.proj.EPSG3857.HALF_SIZE,-ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE];ol.proj.EPSG3857.WORLD_EXTENT=[-180,-85,180,85];ol.proj.EPSG3857.CODES=["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913","urn:ogc:def:crs:EPSG:6.18:3:3857","urn:ogc:def:crs:EPSG::3857","http://www.opengis.net/gml/srs/epsg.xml#3857"];ol.proj.EPSG3857.PROJECTIONS=goog.array.map(ol.proj.EPSG3857.CODES,function(code){return new ol.proj.EPSG3857_(code)});ol.proj.EPSG3857.fromEPSG4326=function(input,opt_output,opt_dimension){var length=input.length,dimension=opt_dimension>1?opt_dimension:2,output=opt_output;if(!goog.isDef(output)){if(dimension>2){output=input.slice()}else{output=new Array(length)}}goog.asserts.assert(output.length%dimension===0,"modulus of output.length with dimension should be 0");for(var i=0;i<length;i+=dimension){output[i]=ol.proj.EPSG3857.RADIUS*Math.PI*input[i]/180;output[i+1]=ol.proj.EPSG3857.RADIUS*Math.log(Math.tan(Math.PI*(input[i+1]+90)/360))}return output};ol.proj.EPSG3857.toEPSG4326=function(input,opt_output,opt_dimension){var length=input.length,dimension=opt_dimension>1?opt_dimension:2,output=opt_output;if(!goog.isDef(output)){if(dimension>2){output=input.slice()}else{output=new Array(length)}}goog.asserts.assert(output.length%dimension===0,"modulus of output.length with dimension should be 0");for(var i=0;i<length;i+=dimension){output[i]=180*input[i]/(ol.proj.EPSG3857.RADIUS*Math.PI);output[i+1]=360*Math.atan(Math.exp(input[i+1]/ol.proj.EPSG3857.RADIUS))/Math.PI-90}return output};goog.provide("ol.proj.EPSG4326");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.proj.EPSG4326_=function(code,opt_axisOrientation){goog.base(this,{code:code,units:ol.proj.Units.DEGREES,extent:ol.proj.EPSG4326.EXTENT,axisOrientation:opt_axisOrientation,global:true,worldExtent:ol.proj.EPSG4326.EXTENT})};goog.inherits(ol.proj.EPSG4326_,ol.proj.Projection);ol.proj.EPSG4326_.prototype.getPointResolution=function(resolution,point){return resolution};ol.proj.EPSG4326.EXTENT=[-180,-90,180,90];ol.proj.EPSG4326.PROJECTIONS=[new ol.proj.EPSG4326_("CRS:84"),new ol.proj.EPSG4326_("EPSG:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG::4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:1.3:CRS84"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:2:84"),new ol.proj.EPSG4326_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ol.proj.EPSG4326_("urn:x-ogc:def:crs:EPSG:4326","neu")];goog.provide("ol.proj.common");goog.require("ol.proj");goog.require("ol.proj.EPSG3857");goog.require("ol.proj.EPSG4326");ol.proj.common.add=function(){ol.proj.addEquivalentProjections(ol.proj.EPSG3857.PROJECTIONS);ol.proj.addEquivalentProjections(ol.proj.EPSG4326.PROJECTIONS);ol.proj.addEquivalentTransforms(ol.proj.EPSG4326.PROJECTIONS,ol.proj.EPSG3857.PROJECTIONS,ol.proj.EPSG3857.fromEPSG4326,ol.proj.EPSG3857.toEPSG4326)};goog.provide("ol.layer.Image");goog.require("ol.layer.Layer");ol.layer.Image=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this,(options))};goog.inherits(ol.layer.Image,ol.layer.Layer);ol.layer.Image.prototype.getSource;goog.provide("ol.layer.Tile");goog.require("goog.object");goog.require("ol.layer.Layer");ol.layer.TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};ol.layer.Tile=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var baseOptions=goog.object.clone(options);delete baseOptions.preload;delete baseOptions.useInterimTilesOnError;goog.base(this,(baseOptions));this.setPreload(goog.isDef(options.preload)?options.preload:0);this.setUseInterimTilesOnError(goog.isDef(options.useInterimTilesOnError)?options.useInterimTilesOnError:true)};goog.inherits(ol.layer.Tile,ol.layer.Layer);ol.layer.Tile.prototype.getPreload=function(){return(this.get(ol.layer.TileProperty.PRELOAD))};ol.layer.Tile.prototype.getSource;ol.layer.Tile.prototype.setPreload=function(preload){this.set(ol.layer.TileProperty.PRELOAD,preload)};ol.layer.Tile.prototype.getUseInterimTilesOnError=function(){return(this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR))};ol.layer.Tile.prototype.setUseInterimTilesOnError=function(useInterimTilesOnError){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,useInterimTilesOnError)};goog.provide("ol.layer.Vector");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.layer.Layer");goog.require("ol.style.Style");ol.layer.VectorProperty={RENDER_ORDER:"renderOrder"};ol.layer.Vector=function(opt_options){var options=goog.isDef(opt_options)?opt_options:({});goog.asserts.assert(!goog.isDef(options.renderOrder)||goog.isNull(options.renderOrder)||goog.isFunction(options.renderOrder),"renderOrder must be a comparator function");var baseOptions=goog.object.clone(options);delete baseOptions.style;delete baseOptions.renderBuffer;delete baseOptions.updateWhileAnimating;delete baseOptions.updateWhileInteracting;goog.base(this,(baseOptions));this.renderBuffer_=goog.isDef(options.renderBuffer)?options.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(options.style);this.updateWhileAnimating_=goog.isDef(options.updateWhileAnimating)?options.updateWhileAnimating:false;this.updateWhileInteracting_=goog.isDef(options.updateWhileInteracting)?options.updateWhileInteracting:false};goog.inherits(ol.layer.Vector,ol.layer.Layer);ol.layer.Vector.prototype.getRenderBuffer=function(){return this.renderBuffer_};ol.layer.Vector.prototype.getRenderOrder=function(){return(this.get(ol.layer.VectorProperty.RENDER_ORDER))};ol.layer.Vector.prototype.getSource;ol.layer.Vector.prototype.getStyle=function(){return this.style_};ol.layer.Vector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.layer.Vector.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};ol.layer.Vector.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};ol.layer.Vector.prototype.setRenderOrder=function(renderOrder){goog.asserts.assert(!goog.isDef(renderOrder)||goog.isNull(renderOrder)||goog.isFunction(renderOrder),"renderOrder must be a comparator function");this.set(ol.layer.VectorProperty.RENDER_ORDER,renderOrder)};ol.layer.Vector.prototype.setStyle=function(style){this.style_=goog.isDef(style)?style:ol.style.defaultStyleFunction;this.styleFunction_=goog.isNull(style)?undefined:ol.style.createStyleFunction(this.style_);this.changed()};goog.provide("ol.render.canvas.Immediate");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.color");goog.require("ol.extent");goog.require("ol.geom.flat.transform");goog.require("ol.has");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas");goog.require("ol.vec.Mat4");ol.render.canvas.Immediate=function(context,pixelRatio,extent,transform,viewRotation){this.callbacksByZIndex_={};this.context_=context;this.pixelRatio_=pixelRatio;this.extent_=extent;this.transform_=transform;this.viewRotation_=viewRotation;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageSnapToPixel_=false;this.imageWidth_=0;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.Immediate.prototype.drawImages_=function(flatCoordinates,offset,end,stride){if(goog.isNull(this.image_)){return}goog.asserts.assert(offset===0,"offset should be 0");goog.asserts.assert(end==flatCoordinates.length,"end should be equal to the length of flatCoordinates");var pixelCoordinates=ol.geom.flat.transform.transform2D(flatCoordinates,offset,end,2,this.transform_,this.pixelCoordinates_);var context=this.context_;var localTransform=this.tmpLocalTransform_;var alpha=context.globalAlpha;if(this.imageOpacity_!=1){context.globalAlpha=alpha*this.imageOpacity_}var rotation=this.imageRotation_;if(this.imageRotateWithView_){rotation+=this.viewRotation_}var i,ii;for(i=0,ii=pixelCoordinates.length;i<ii;i+=2){var x=pixelCoordinates[i]-this.imageAnchorX_;var y=pixelCoordinates[i+1]-this.imageAnchorY_;if(this.imageSnapToPixel_){x=(x+0.5)|0;y=(y+0.5)|0}if(rotation!==0||this.imageScale_!=1){var centerX=x+this.imageAnchorX_;var centerY=y+this.imageAnchorY_;ol.vec.Mat4.makeTransform2D(localTransform,centerX,centerY,this.imageScale_,this.imageScale_,rotation,-centerX,-centerY);context.setTransform(goog.vec.Mat4.getElement(localTransform,0,0),goog.vec.Mat4.getElement(localTransform,1,0),goog.vec.Mat4.getElement(localTransform,0,1),goog.vec.Mat4.getElement(localTransform,1,1),goog.vec.Mat4.getElement(localTransform,0,3),goog.vec.Mat4.getElement(localTransform,1,3))}context.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,y,this.imageWidth_,this.imageHeight_)}if(rotation!==0||this.imageScale_!=1){context.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){context.globalAlpha=alpha}};ol.render.canvas.Immediate.prototype.drawText_=function(flatCoordinates,offset,end,stride){if(goog.isNull(this.textState_)||this.text_===""){return}if(!goog.isNull(this.textFillState_)){this.setContextFillState_(this.textFillState_)}if(!goog.isNull(this.textStrokeState_)){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);goog.asserts.assert(offset===0,"offset should be 0");goog.asserts.assert(end==flatCoordinates.length,"end should be equal to the length of flatCoordinates");var pixelCoordinates=ol.geom.flat.transform.transform2D(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_);var context=this.context_;for(;offset<end;offset+=stride){var x=pixelCoordinates[offset]+this.textOffsetX_;var y=pixelCoordinates[offset+1]+this.textOffsetY_;if(this.textRotation_!==0||this.textScale_!=1){var localTransform=ol.vec.Mat4.makeTransform2D(this.tmpLocalTransform_,x,y,this.textScale_,this.textScale_,this.textRotation_,-x,-y);context.setTransform(goog.vec.Mat4.getElement(localTransform,0,0),goog.vec.Mat4.getElement(localTransform,1,0),goog.vec.Mat4.getElement(localTransform,0,1),goog.vec.Mat4.getElement(localTransform,1,1),goog.vec.Mat4.getElement(localTransform,0,3),goog.vec.Mat4.getElement(localTransform,1,3))}if(!goog.isNull(this.textStrokeState_)){context.strokeText(this.text_,x,y)}if(!goog.isNull(this.textFillState_)){context.fillText(this.text_,x,y)}}if(this.textRotation_!==0||this.textScale_!=1){context.setTransform(1,0,0,1,0,0)}};ol.render.canvas.Immediate.prototype.moveToLineTo_=function(flatCoordinates,offset,end,stride,close){var context=this.context_;var pixelCoordinates=ol.geom.flat.transform.transform2D(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_);context.moveTo(pixelCoordinates[0],pixelCoordinates[1]);var i;for(i=2;i<pixelCoordinates.length;i+=2){context.lineTo(pixelCoordinates[i],pixelCoordinates[i+1])}if(close){context.lineTo(pixelCoordinates[0],pixelCoordinates[1])}return end};ol.render.canvas.Immediate.prototype.drawRings_=function(flatCoordinates,offset,ends,stride){var context=this.context_;var i,ii;for(i=0,ii=ends.length;i<ii;++i){offset=this.moveToLineTo_(flatCoordinates,offset,ends[i],stride,true);context.closePath()}return offset};ol.render.canvas.Immediate.prototype.drawAsync=function(zIndex,callback){var zIndexKey=zIndex.toString();var callbacks=this.callbacksByZIndex_[zIndexKey];if(goog.isDef(callbacks)){callbacks.push(callback)}else{this.callbacksByZIndex_[zIndexKey]=[callback]}};ol.render.canvas.Immediate.prototype.drawCircleGeometry=function(circleGeometry,feature){if(!ol.extent.intersects(this.extent_,circleGeometry.getExtent())){return}if(!goog.isNull(this.fillState_)||!goog.isNull(this.strokeState_)){if(!goog.isNull(this.fillState_)){this.setContextFillState_(this.fillState_)}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_)}var pixelCoordinates=ol.geom.transformSimpleGeometry2D(circleGeometry,this.transform_,this.pixelCoordinates_);var dx=pixelCoordinates[2]-pixelCoordinates[0];var dy=pixelCoordinates[3]-pixelCoordinates[1];var radius=Math.sqrt(dx*dx+dy*dy);var context=this.context_;context.beginPath();context.arc(pixelCoordinates[0],pixelCoordinates[1],radius,0,2*Math.PI);if(!goog.isNull(this.fillState_)){context.fill()}if(!goog.isNull(this.strokeState_)){context.stroke()}}if(this.text_!==""){this.drawText_(circleGeometry.getCenter(),0,2,2)}};ol.render.canvas.Immediate.prototype.drawFeature=function(feature,style){var geometry=style.getGeometryFunction()(feature);if(!goog.isDefAndNotNull(geometry)||!ol.extent.intersects(this.extent_,geometry.getExtent())){return}var zIndex=style.getZIndex();if(!goog.isDef(zIndex)){zIndex=0}this.drawAsync(zIndex,function(render){render.setFillStrokeStyle(style.getFill(),style.getStroke());render.setImageStyle(style.getImage());render.setTextStyle(style.getText());var renderGeometry=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[geometry.getType()];goog.asserts.assert(goog.isDef(renderGeometry),"renderGeometry should be defined");renderGeometry.call(render,geometry,null)})};ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry=function(geometryCollectionGeometry,feature){var geometries=geometryCollectionGeometry.getGeometriesArray();var i,ii;for(i=0,ii=geometries.length;i<ii;++i){var geometry=geometries[i];var geometryRenderer=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[geometry.getType()];goog.asserts.assert(goog.isDef(geometryRenderer),"geometryRenderer should be defined");geometryRenderer.call(this,geometry,feature)}};ol.render.canvas.Immediate.prototype.drawPointGeometry=function(pointGeometry,feature){var flatCoordinates=pointGeometry.getFlatCoordinates();var stride=pointGeometry.getStride();if(!goog.isNull(this.image_)){this.drawImages_(flatCoordinates,0,flatCoordinates.length,stride)}if(this.text_!==""){this.drawText_(flatCoordinates,0,flatCoordinates.length,stride)}};ol.render.canvas.Immediate.prototype.drawMultiPointGeometry=function(multiPointGeometry,feature){var flatCoordinates=multiPointGeometry.getFlatCoordinates();var stride=multiPointGeometry.getStride();if(!goog.isNull(this.image_)){this.drawImages_(flatCoordinates,0,flatCoordinates.length,stride)}if(this.text_!==""){this.drawText_(flatCoordinates,0,flatCoordinates.length,stride)}};ol.render.canvas.Immediate.prototype.drawLineStringGeometry=function(lineStringGeometry,feature){if(!ol.extent.intersects(this.extent_,lineStringGeometry.getExtent())){return}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_);var context=this.context_;var flatCoordinates=lineStringGeometry.getFlatCoordinates();context.beginPath();this.moveToLineTo_(flatCoordinates,0,flatCoordinates.length,lineStringGeometry.getStride(),false);context.stroke()}if(this.text_!==""){var flatMidpoint=lineStringGeometry.getFlatMidpoint();this.drawText_(flatMidpoint,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry=function(multiLineStringGeometry,feature){var geometryExtent=multiLineStringGeometry.getExtent();if(!ol.extent.intersects(this.extent_,geometryExtent)){return}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_);var context=this.context_;var flatCoordinates=multiLineStringGeometry.getFlatCoordinates();var offset=0;var ends=multiLineStringGeometry.getEnds();var stride=multiLineStringGeometry.getStride();context.beginPath();var i,ii;for(i=0,ii=ends.length;i<ii;++i){offset=this.moveToLineTo_(flatCoordinates,offset,ends[i],stride,false)}context.stroke()}if(this.text_!==""){var flatMidpoints=multiLineStringGeometry.getFlatMidpoints();this.drawText_(flatMidpoints,0,flatMidpoints.length,2)}};ol.render.canvas.Immediate.prototype.drawPolygonGeometry=function(polygonGeometry,feature){if(!ol.extent.intersects(this.extent_,polygonGeometry.getExtent())){return}if(!goog.isNull(this.strokeState_)||!goog.isNull(this.fillState_)){if(!goog.isNull(this.fillState_)){this.setContextFillState_(this.fillState_)}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_)}var context=this.context_;context.beginPath();this.drawRings_(polygonGeometry.getOrientedFlatCoordinates(),0,polygonGeometry.getEnds(),polygonGeometry.getStride());if(!goog.isNull(this.fillState_)){context.fill()}if(!goog.isNull(this.strokeState_)){context.stroke()}}if(this.text_!==""){var flatInteriorPoint=polygonGeometry.getFlatInteriorPoint();this.drawText_(flatInteriorPoint,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry=function(multiPolygonGeometry,feature){if(!ol.extent.intersects(this.extent_,multiPolygonGeometry.getExtent())){return}if(!goog.isNull(this.strokeState_)||!goog.isNull(this.fillState_)){if(!goog.isNull(this.fillState_)){this.setContextFillState_(this.fillState_)}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_)}var context=this.context_;var flatCoordinates=multiPolygonGeometry.getOrientedFlatCoordinates();var offset=0;var endss=multiPolygonGeometry.getEndss();var stride=multiPolygonGeometry.getStride();var i,ii;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];context.beginPath();offset=this.drawRings_(flatCoordinates,offset,ends,stride);if(!goog.isNull(this.fillState_)){context.fill()}if(!goog.isNull(this.strokeState_)){context.stroke()}}}if(this.text_!==""){var flatInteriorPoints=multiPolygonGeometry.getFlatInteriorPoints();this.drawText_(flatInteriorPoints,0,flatInteriorPoints.length,2)}};ol.render.canvas.Immediate.prototype.drawText=goog.abstractMethod;ol.render.canvas.Immediate.prototype.flush=function(){var zs=goog.array.map(goog.object.getKeys(this.callbacksByZIndex_),Number);goog.array.sort(zs);var i,ii,callbacks,j,jj;for(i=0,ii=zs.length;i<ii;++i){callbacks=this.callbacksByZIndex_[zs[i].toString()];for(j=0,jj=callbacks.length;j<jj;++j){callbacks[j](this)}}};ol.render.canvas.Immediate.prototype.setContextFillState_=function(fillState){var context=this.context_;var contextFillState=this.contextFillState_;if(goog.isNull(contextFillState)){context.fillStyle=fillState.fillStyle;this.contextFillState_={fillStyle:fillState.fillStyle}}else{if(contextFillState.fillStyle!=fillState.fillStyle){contextFillState.fillStyle=context.fillStyle=fillState.fillStyle}}};ol.render.canvas.Immediate.prototype.setContextStrokeState_=function(strokeState){var context=this.context_;var contextStrokeState=this.contextStrokeState_;if(goog.isNull(contextStrokeState)){context.lineCap=strokeState.lineCap;if(ol.has.CANVAS_LINE_DASH){context.setLineDash(strokeState.lineDash)}context.lineJoin=strokeState.lineJoin;context.lineWidth=strokeState.lineWidth;context.miterLimit=strokeState.miterLimit;context.strokeStyle=strokeState.strokeStyle;this.contextStrokeState_={lineCap:strokeState.lineCap,lineDash:strokeState.lineDash,lineJoin:strokeState.lineJoin,lineWidth:strokeState.lineWidth,miterLimit:strokeState.miterLimit,strokeStyle:strokeState.strokeStyle}}else{if(contextStrokeState.lineCap!=strokeState.lineCap){contextStrokeState.lineCap=context.lineCap=strokeState.lineCap}if(ol.has.CANVAS_LINE_DASH){if(!goog.array.equals(contextStrokeState.lineDash,strokeState.lineDash)){context.setLineDash(contextStrokeState.lineDash=strokeState.lineDash)}}if(contextStrokeState.lineJoin!=strokeState.lineJoin){contextStrokeState.lineJoin=context.lineJoin=strokeState.lineJoin}if(contextStrokeState.lineWidth!=strokeState.lineWidth){contextStrokeState.lineWidth=context.lineWidth=strokeState.lineWidth}if(contextStrokeState.miterLimit!=strokeState.miterLimit){contextStrokeState.miterLimit=context.miterLimit=strokeState.miterLimit}if(contextStrokeState.strokeStyle!=strokeState.strokeStyle){contextStrokeState.strokeStyle=context.strokeStyle=strokeState.strokeStyle}}};ol.render.canvas.Immediate.prototype.setContextTextState_=function(textState){var context=this.context_;var contextTextState=this.contextTextState_;if(goog.isNull(contextTextState)){context.font=textState.font;context.textAlign=textState.textAlign;context.textBaseline=textState.textBaseline;this.contextTextState_={font:textState.font,textAlign:textState.textAlign,textBaseline:textState.textBaseline}}else{if(contextTextState.font!=textState.font){contextTextState.font=context.font=textState.font}if(contextTextState.textAlign!=textState.textAlign){contextTextState.textAlign=context.textAlign=textState.textAlign}if(contextTextState.textBaseline!=textState.textBaseline){contextTextState.textBaseline=context.textBaseline=textState.textBaseline}}};ol.render.canvas.Immediate.prototype.setFillStrokeStyle=function(fillStyle,strokeStyle){if(goog.isNull(fillStyle)){this.fillState_=null}else{var fillStyleColor=fillStyle.getColor();this.fillState_={fillStyle:ol.color.asString(!goog.isNull(fillStyleColor)?fillStyleColor:ol.render.canvas.defaultFillStyle)}}if(goog.isNull(strokeStyle)){this.strokeState_=null}else{var strokeStyleColor=strokeStyle.getColor();var strokeStyleLineCap=strokeStyle.getLineCap();var strokeStyleLineDash=strokeStyle.getLineDash();var strokeStyleLineJoin=strokeStyle.getLineJoin();var strokeStyleWidth=strokeStyle.getWidth();var strokeStyleMiterLimit=strokeStyle.getMiterLimit();this.strokeState_={lineCap:goog.isDef(strokeStyleLineCap)?strokeStyleLineCap:ol.render.canvas.defaultLineCap,lineDash:goog.isDefAndNotNull(strokeStyleLineDash)?strokeStyleLineDash:ol.render.canvas.defaultLineDash,lineJoin:goog.isDef(strokeStyleLineJoin)?strokeStyleLineJoin:ol.render.canvas.defaultLineJoin,lineWidth:this.pixelRatio_*(goog.isDef(strokeStyleWidth)?strokeStyleWidth:ol.render.canvas.defaultLineWidth),miterLimit:goog.isDef(strokeStyleMiterLimit)?strokeStyleMiterLimit:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(!goog.isNull(strokeStyleColor)?strokeStyleColor:ol.render.canvas.defaultStrokeStyle)}}};ol.render.canvas.Immediate.prototype.setImageStyle=function(imageStyle){if(goog.isNull(imageStyle)){this.image_=null}else{var imageAnchor=imageStyle.getAnchor();var imageImage=imageStyle.getImage(1);var imageOrigin=imageStyle.getOrigin();var imageSize=imageStyle.getSize();goog.asserts.assert(!goog.isNull(imageAnchor),"imageAnchor should not be null");goog.asserts.assert(!goog.isNull(imageImage),"imageImage should not be null");goog.asserts.assert(!goog.isNull(imageOrigin),"imageOrigin should not be null");goog.asserts.assert(!goog.isNull(imageSize),"imageSize should not be null");this.imageAnchorX_=imageAnchor[0];this.imageAnchorY_=imageAnchor[1];this.imageHeight_=imageSize[1];this.image_=imageImage;this.imageOpacity_=imageStyle.getOpacity();this.imageOriginX_=imageOrigin[0];this.imageOriginY_=imageOrigin[1];this.imageRotateWithView_=imageStyle.getRotateWithView();this.imageRotation_=imageStyle.getRotation();this.imageScale_=imageStyle.getScale();this.imageSnapToPixel_=imageStyle.getSnapToPixel();this.imageWidth_=imageSize[0]}};ol.render.canvas.Immediate.prototype.setTextStyle=function(textStyle){if(goog.isNull(textStyle)){this.text_=""}else{var textFillStyle=textStyle.getFill();if(goog.isNull(textFillStyle)){this.textFillState_=null}else{var textFillStyleColor=textFillStyle.getColor();this.textFillState_={fillStyle:ol.color.asString(!goog.isNull(textFillStyleColor)?textFillStyleColor:ol.render.canvas.defaultFillStyle)}}var textStrokeStyle=textStyle.getStroke();if(goog.isNull(textStrokeStyle)){this.textStrokeState_=null}else{var textStrokeStyleColor=textStrokeStyle.getColor();var textStrokeStyleLineCap=textStrokeStyle.getLineCap();var textStrokeStyleLineDash=textStrokeStyle.getLineDash();var textStrokeStyleLineJoin=textStrokeStyle.getLineJoin();var textStrokeStyleWidth=textStrokeStyle.getWidth();var textStrokeStyleMiterLimit=textStrokeStyle.getMiterLimit();this.textStrokeState_={lineCap:goog.isDef(textStrokeStyleLineCap)?textStrokeStyleLineCap:ol.render.canvas.defaultLineCap,lineDash:goog.isDefAndNotNull(textStrokeStyleLineDash)?textStrokeStyleLineDash:ol.render.canvas.defaultLineDash,lineJoin:goog.isDef(textStrokeStyleLineJoin)?textStrokeStyleLineJoin:ol.render.canvas.defaultLineJoin,lineWidth:goog.isDef(textStrokeStyleWidth)?textStrokeStyleWidth:ol.render.canvas.defaultLineWidth,miterLimit:goog.isDef(textStrokeStyleMiterLimit)?textStrokeStyleMiterLimit:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(!goog.isNull(textStrokeStyleColor)?textStrokeStyleColor:ol.render.canvas.defaultStrokeStyle)}}var textFont=textStyle.getFont();var textOffsetX=textStyle.getOffsetX();var textOffsetY=textStyle.getOffsetY();var textRotation=textStyle.getRotation();var textScale=textStyle.getScale();var textText=textStyle.getText();var textTextAlign=textStyle.getTextAlign();var textTextBaseline=textStyle.getTextBaseline();this.textState_={font:goog.isDef(textFont)?textFont:ol.render.canvas.defaultFont,textAlign:goog.isDef(textTextAlign)?textTextAlign:ol.render.canvas.defaultTextAlign,textBaseline:goog.isDef(textTextBaseline)?textTextBaseline:ol.render.canvas.defaultTextBaseline};this.text_=goog.isDef(textText)?textText:"";this.textOffsetX_=goog.isDef(textOffsetX)?(this.pixelRatio_*textOffsetX):0;this.textOffsetY_=goog.isDef(textOffsetY)?(this.pixelRatio_*textOffsetY):0;this.textRotation_=goog.isDef(textRotation)?textRotation:0;this.textScale_=this.pixelRatio_*(goog.isDef(textScale)?textScale:1)}};ol.render.canvas.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.canvas.Immediate.prototype.drawPointGeometry,LineString:ol.render.canvas.Immediate.prototype.drawLineStringGeometry,Polygon:ol.render.canvas.Immediate.prototype.drawPolygonGeometry,MultiPoint:ol.render.canvas.Immediate.prototype.drawMultiPointGeometry,MultiLineString:ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry,MultiPolygon:ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry,GeometryCollection:ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry,Circle:ol.render.canvas.Immediate.prototype.drawCircleGeometry};goog.provide("ol.renderer.canvas.Layer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Layer");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Layer");goog.require("ol.vec.Mat4");ol.renderer.canvas.Layer=function(layer){goog.base(this,layer);this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Layer,ol.renderer.Layer);ol.renderer.canvas.Layer.prototype.composeFrame=function(frameState,layerState,context){this.dispatchPreComposeEvent(context,frameState);var image=this.getImage();if(!goog.isNull(image)){var extent=layerState.extent;var clipped=goog.isDef(extent);if(clipped){goog.asserts.assert(goog.isDef(extent),"layerState extent is defined");var pixelRatio=frameState.pixelRatio;var topLeft=ol.extent.getTopLeft(extent);var topRight=ol.extent.getTopRight(extent);var bottomRight=ol.extent.getBottomRight(extent);var bottomLeft=ol.extent.getBottomLeft(extent);ol.vec.Mat4.multVec2(frameState.coordinateToPixelMatrix,topLeft,topLeft);ol.vec.Mat4.multVec2(frameState.coordinateToPixelMatrix,topRight,topRight);ol.vec.Mat4.multVec2(frameState.coordinateToPixelMatrix,bottomRight,bottomRight);ol.vec.Mat4.multVec2(frameState.coordinateToPixelMatrix,bottomLeft,bottomLeft);context.save();context.beginPath();context.moveTo(topLeft[0]*pixelRatio,topLeft[1]*pixelRatio);context.lineTo(topRight[0]*pixelRatio,topRight[1]*pixelRatio);context.lineTo(bottomRight[0]*pixelRatio,bottomRight[1]*pixelRatio);context.lineTo(bottomLeft[0]*pixelRatio,bottomLeft[1]*pixelRatio);context.clip()}var imageTransform=this.getImageTransform();var alpha=context.globalAlpha;context.globalAlpha=layerState.opacity;if(frameState.viewState.rotation===0){var dx=goog.vec.Mat4.getElement(imageTransform,0,3);var dy=goog.vec.Mat4.getElement(imageTransform,1,3);var dw=image.width*goog.vec.Mat4.getElement(imageTransform,0,0);var dh=image.height*goog.vec.Mat4.getElement(imageTransform,1,1);context.drawImage(image,0,0,+image.width,+image.height,Math.round(dx),Math.round(dy),Math.round(dw),Math.round(dh))}else{context.setTransform(goog.vec.Mat4.getElement(imageTransform,0,0),goog.vec.Mat4.getElement(imageTransform,1,0),goog.vec.Mat4.getElement(imageTransform,0,1),goog.vec.Mat4.getElement(imageTransform,1,1),goog.vec.Mat4.getElement(imageTransform,0,3),goog.vec.Mat4.getElement(imageTransform,1,3));context.drawImage(image,0,0);context.setTransform(1,0,0,1,0,0)}context.globalAlpha=alpha;if(clipped){context.restore()}}this.dispatchPostComposeEvent(context,frameState)};ol.renderer.canvas.Layer.prototype.dispatchComposeEvent_=function(type,context,frameState,opt_transform){var layer=this.getLayer();if(layer.hasListener(type)){var transform=goog.isDef(opt_transform)?opt_transform:this.getTransform(frameState,0);var render=new ol.render.canvas.Immediate(context,frameState.pixelRatio,frameState.extent,transform,frameState.viewState.rotation);var composeEvent=new ol.render.Event(type,layer,render,frameState,context,null);layer.dispatchEvent(composeEvent);render.flush()}};ol.renderer.canvas.Layer.prototype.dispatchPostComposeEvent=function(context,frameState,opt_transform){this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,context,frameState,opt_transform)};ol.renderer.canvas.Layer.prototype.dispatchPreComposeEvent=function(context,frameState,opt_transform){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,context,frameState,opt_transform)};ol.renderer.canvas.Layer.prototype.dispatchRenderEvent=function(context,frameState,opt_transform){this.dispatchComposeEvent_(ol.render.EventType.RENDER,context,frameState,opt_transform)};ol.renderer.canvas.Layer.prototype.getImage=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getImageTransform=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getTransform=function(frameState,offsetX){var viewState=frameState.viewState;var pixelRatio=frameState.pixelRatio;return ol.vec.Mat4.makeTransform2D(this.transform_,pixelRatio*frameState.size[0]/2,pixelRatio*frameState.size[1]/2,pixelRatio/viewState.resolution,-pixelRatio/viewState.resolution,-viewState.rotation,-viewState.center[0]+offsetX,-viewState.center[1])};ol.renderer.canvas.Layer.prototype.prepareFrame=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getPixelOnCanvas=function(pixelOnMap,imageTransformInv){var pixelOnCanvas=[0,0];ol.vec.Mat4.multVec2(imageTransformInv,pixelOnMap,pixelOnCanvas);return pixelOnCanvas};ol.renderer.canvas.Layer.testCanvasSize=(function(){var context=null;var imageData=null;return function(size){if(goog.isNull(context)){context=ol.dom.createCanvasContext2D(1,1);imageData=context.createImageData(1,1);var data=imageData.data;data[0]=42;data[1]=84;data[2]=126;data[3]=255}var canvas=context.canvas;var good=size[0]<=canvas.width&&size[1]<=canvas.height;if(!good){canvas.width=size[0];canvas.height=size[1];var x=size[0]-1;var y=size[1]-1;context.putImageData(imageData,x,y);var result=context.getImageData(x,y,1,1);good=goog.array.equals(imageData.data,result.data)}return good}})();goog.provide("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");ol.render.ReplayType={IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};ol.render.REPLAY_ORDER=[ol.render.ReplayType.POLYGON,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT];ol.render.IReplayGroup=function(){};ol.render.IReplayGroup.prototype.getReplay=function(zIndex,replayType){};ol.render.IReplayGroup.prototype.isEmpty=function(){};goog.provide("ol.render.canvas.ImageReplay");goog.provide("ol.render.canvas.LineStringReplay");goog.provide("ol.render.canvas.PolygonReplay");goog.provide("ol.render.canvas.Replay");goog.provide("ol.render.canvas.ReplayGroup");goog.provide("ol.render.canvas.TextReplay");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.array");goog.require("ol.color");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.extent.Relationship");goog.require("ol.geom.flat.simplify");goog.require("ol.geom.flat.transform");goog.require("ol.has");goog.require("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas");goog.require("ol.vec.Mat4");ol.render.canvas.Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,DRAW_IMAGE:4,DRAW_TEXT:5,END_GEOMETRY:6,FILL:7,MOVE_TO_LINE_TO:8,SET_FILL_STYLE:9,SET_STROKE_STYLE:10,SET_TEXT_STYLE:11,STROKE:12};ol.render.canvas.Replay=function(tolerance,maxExtent,resolution){goog.base(this);this.tolerance=tolerance;this.maxExtent=maxExtent;this.bufferedMaxExtent_=null;this.maxLineWidth=0;this.resolution=resolution;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.instructions=[];this.coordinates=[];this.renderedTransform_=goog.vec.Mat4.createNumber();this.hitDetectionInstructions=[];this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.render.canvas.Replay,ol.render.VectorContext);ol.render.canvas.Replay.prototype.appendFlatCoordinates=function(flatCoordinates,offset,end,stride,close){var myEnd=this.coordinates.length;var extent=this.getBufferedMaxExtent();var lastCoord=[flatCoordinates[offset],flatCoordinates[offset+1]];var nextCoord=[NaN,NaN];var skipped=true;var i,lastRel,nextRel;for(i=offset+stride;i<end;i+=stride){nextCoord[0]=flatCoordinates[i];nextCoord[1]=flatCoordinates[i+1];nextRel=ol.extent.coordinateRelationship(extent,nextCoord);if(nextRel!==lastRel){if(skipped){this.coordinates[myEnd++]=lastCoord[0];this.coordinates[myEnd++]=lastCoord[1]}this.coordinates[myEnd++]=nextCoord[0];this.coordinates[myEnd++]=nextCoord[1];skipped=false}else{if(nextRel===ol.extent.Relationship.INTERSECTING){this.coordinates[myEnd++]=nextCoord[0];this.coordinates[myEnd++]=nextCoord[1];skipped=false}else{skipped=true}}lastCoord[0]=nextCoord[0];lastCoord[1]=nextCoord[1];lastRel=nextRel}if(i===offset+stride){this.coordinates[myEnd++]=lastCoord[0];this.coordinates[myEnd++]=lastCoord[1]}if(close){this.coordinates[myEnd++]=flatCoordinates[offset];this.coordinates[myEnd++]=flatCoordinates[offset+1]}return myEnd};ol.render.canvas.Replay.prototype.beginGeometry=function(geometry,feature){this.beginGeometryInstruction1_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,feature,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,feature,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};ol.render.canvas.Replay.prototype.replay_=function(context,pixelRatio,transform,viewRotation,skippedFeaturesHash,instructions,featureCallback,opt_hitExtent){var pixelCoordinates;if(ol.vec.Mat4.equals2D(transform,this.renderedTransform_)){pixelCoordinates=this.pixelCoordinates_}else{pixelCoordinates=ol.geom.flat.transform.transform2D(this.coordinates,0,this.coordinates.length,2,transform,this.pixelCoordinates_);goog.vec.Mat4.setFromArray(this.renderedTransform_,transform);goog.asserts.assert(pixelCoordinates===this.pixelCoordinates_,"pixelCoordinates should be the same as this.pixelCoordinates_")}var i=0;var ii=instructions.length;var d=0;var dd;var localTransform=this.tmpLocalTransform_;while(i<ii){var instruction=instructions[i];var type=(instruction[0]);var feature,fill,stroke,text,x,y;switch(type){case ol.render.canvas.Instruction.BEGIN_GEOMETRY:feature=(instruction[1]);var featureUid=goog.getUid(feature).toString();if(goog.isDef(skippedFeaturesHash[featureUid])||!goog.isDefAndNotNull(feature.getGeometry())){i=(instruction[2])}else{if(goog.isDef(opt_hitExtent)&&!ol.extent.intersects(opt_hitExtent,feature.getGeometry().getExtent())){i=(instruction[2])}else{++i}}break;case ol.render.canvas.Instruction.BEGIN_PATH:context.beginPath();++i;break;case ol.render.canvas.Instruction.CIRCLE:goog.asserts.assert(goog.isNumber(instruction[1]),"second instruction should be a number");d=(instruction[1]);var x1=pixelCoordinates[d];var y1=pixelCoordinates[d+1];var x2=pixelCoordinates[d+2];var y2=pixelCoordinates[d+3];var dx=x2-x1;var dy=y2-y1;var r=Math.sqrt(dx*dx+dy*dy);context.arc(x1,y1,r,0,2*Math.PI,true);++i;break;case ol.render.canvas.Instruction.CLOSE_PATH:context.closePath();++i;break;case ol.render.canvas.Instruction.DRAW_IMAGE:goog.asserts.assert(goog.isNumber(instruction[1]),"second instruction should be a number");d=(instruction[1]);goog.asserts.assert(goog.isNumber(instruction[2]),"third instruction should be a number");dd=(instruction[2]);var image=(instruction[3]);var anchorX=(instruction[4])*pixelRatio;var anchorY=(instruction[5])*pixelRatio;var height=(instruction[6]);var opacity=(instruction[7]);var originX=(instruction[8]);var originY=(instruction[9]);var rotateWithView=(instruction[10]);var rotation=(instruction[11]);var scale=(instruction[12]);var snapToPixel=(instruction[13]);var width=(instruction[14]);if(rotateWithView){rotation+=viewRotation}for(;d<dd;d+=2){x=pixelCoordinates[d]-anchorX;y=pixelCoordinates[d+1]-anchorY;if(snapToPixel){x=(x+0.5)|0;y=(y+0.5)|0}if(scale!=1||rotation!==0){var centerX=x+anchorX;var centerY=y+anchorY;ol.vec.Mat4.makeTransform2D(localTransform,centerX,centerY,scale,scale,rotation,-centerX,-centerY);context.setTransform(goog.vec.Mat4.getElement(localTransform,0,0),goog.vec.Mat4.getElement(localTransform,1,0),goog.vec.Mat4.getElement(localTransform,0,1),goog.vec.Mat4.getElement(localTransform,1,1),goog.vec.Mat4.getElement(localTransform,0,3),goog.vec.Mat4.getElement(localTransform,1,3))}var alpha=context.globalAlpha;if(opacity!=1){context.globalAlpha=alpha*opacity}context.drawImage(image,originX,originY,width,height,x,y,width*pixelRatio,height*pixelRatio);if(opacity!=1){context.globalAlpha=alpha}if(scale!=1||rotation!==0){context.setTransform(1,0,0,1,0,0)}}++i;break;case ol.render.canvas.Instruction.DRAW_TEXT:goog.asserts.assert(goog.isNumber(instruction[1]),"2nd instruction should be a number");d=(instruction[1]);goog.asserts.assert(goog.isNumber(instruction[2]),"3rd instruction should be a number");dd=(instruction[2]);goog.asserts.assert(goog.isString(instruction[3]),"4th instruction should be a string");text=(instruction[3]);goog.asserts.assert(goog.isNumber(instruction[4]),"5th instruction should be a number");var offsetX=(instruction[4])*pixelRatio;goog.asserts.assert(goog.isNumber(instruction[5]),"6th instruction should be a number");var offsetY=(instruction[5])*pixelRatio;goog.asserts.assert(goog.isNumber(instruction[6]),"7th instruction should be a number");rotation=(instruction[6]);goog.asserts.assert(goog.isNumber(instruction[7]),"8th instruction should be a number");scale=(instruction[7])*pixelRatio;goog.asserts.assert(goog.isBoolean(instruction[8]),"9th instruction should be a boolean");fill=(instruction[8]);goog.asserts.assert(goog.isBoolean(instruction[9]),"10th instruction should be a boolean");stroke=(instruction[9]);for(;d<dd;d+=2){x=pixelCoordinates[d]+offsetX;y=pixelCoordinates[d+1]+offsetY;if(scale!=1||rotation!==0){ol.vec.Mat4.makeTransform2D(localTransform,x,y,scale,scale,rotation,-x,-y);context.setTransform(goog.vec.Mat4.getElement(localTransform,0,0),goog.vec.Mat4.getElement(localTransform,1,0),goog.vec.Mat4.getElement(localTransform,0,1),goog.vec.Mat4.getElement(localTransform,1,1),goog.vec.Mat4.getElement(localTransform,0,3),goog.vec.Mat4.getElement(localTransform,1,3))}if(stroke){context.strokeText(text,x,y)}if(fill){context.fillText(text,x,y)}if(scale!=1||rotation!==0){context.setTransform(1,0,0,1,0,0)}}++i;break;case ol.render.canvas.Instruction.END_GEOMETRY:if(goog.isDef(featureCallback)){feature=(instruction[1]);var result=featureCallback(feature);if(result){return result}}++i;break;case ol.render.canvas.Instruction.FILL:context.fill();++i;break;case ol.render.canvas.Instruction.MOVE_TO_LINE_TO:goog.asserts.assert(goog.isNumber(instruction[1]),"2nd instruction should be a number");d=(instruction[1]);goog.asserts.assert(goog.isNumber(instruction[2]),"3rd instruction should be a number");dd=(instruction[2]);context.moveTo(pixelCoordinates[d],pixelCoordinates[d+1]);for(d+=2;d<dd;d+=2){context.lineTo(pixelCoordinates[d],pixelCoordinates[d+1])}++i;break;case ol.render.canvas.Instruction.SET_FILL_STYLE:goog.asserts.assert(goog.isString(instruction[1]),"2nd instruction should be a string");context.fillStyle=(instruction[1]);++i;break;case ol.render.canvas.Instruction.SET_STROKE_STYLE:goog.asserts.assert(goog.isString(instruction[1]),"2nd instruction should be a string");goog.asserts.assert(goog.isNumber(instruction[2]),"3rd instruction should be a number");goog.asserts.assert(goog.isString(instruction[3]),"4rd instruction should be a string");goog.asserts.assert(goog.isString(instruction[4]),"5th instruction should be a string");goog.asserts.assert(goog.isNumber(instruction[5]),"6th instruction should be a number");goog.asserts.assert(!goog.isNull(instruction[6]),"7th instruction should not be null");var usePixelRatio=goog.isDef(instruction[7])?instruction[7]:true;var lineWidth=(instruction[2]);context.strokeStyle=(instruction[1]);context.lineWidth=usePixelRatio?lineWidth*pixelRatio:lineWidth;context.lineCap=(instruction[3]);context.lineJoin=(instruction[4]);context.miterLimit=(instruction[5]);if(ol.has.CANVAS_LINE_DASH){context.setLineDash((instruction[6]))}++i;break;case ol.render.canvas.Instruction.SET_TEXT_STYLE:goog.asserts.assert(goog.isString(instruction[1]),"2nd instruction should be a string");goog.asserts.assert(goog.isString(instruction[2]),"3rd instruction should be a string");goog.asserts.assert(goog.isString(instruction[3]),"4th instruction should be a string");context.font=(instruction[1]);context.textAlign=(instruction[2]);context.textBaseline=(instruction[3]);++i;break;case ol.render.canvas.Instruction.STROKE:context.stroke();++i;break;default:goog.asserts.fail("Unknown canvas render instruction");++i;break}}goog.asserts.assert(i==instructions.length,"all instructions should be consumed");return undefined};ol.render.canvas.Replay.prototype.replay=function(context,pixelRatio,transform,viewRotation,skippedFeaturesHash){var instructions=this.instructions;this.replay_(context,pixelRatio,transform,viewRotation,skippedFeaturesHash,instructions,undefined)};ol.render.canvas.Replay.prototype.replayHitDetection=function(context,transform,viewRotation,skippedFeaturesHash,opt_featureCallback,opt_hitExtent){var instructions=this.hitDetectionInstructions;return this.replay_(context,1,transform,viewRotation,skippedFeaturesHash,instructions,opt_featureCallback,opt_hitExtent)};ol.render.canvas.Replay.prototype.reverseHitDetectionInstructions_=function(){var hitDetectionInstructions=this.hitDetectionInstructions;hitDetectionInstructions.reverse();var i;var n=hitDetectionInstructions.length;var instruction;var type;var begin=-1;for(i=0;i<n;++i){instruction=hitDetectionInstructions[i];type=(instruction[0]);if(type==ol.render.canvas.Instruction.END_GEOMETRY){goog.asserts.assert(begin==-1,"begin should be -1");begin=i}else{if(type==ol.render.canvas.Instruction.BEGIN_GEOMETRY){instruction[2]=i;goog.asserts.assert(begin>=0,"begin should be larger than or equal to 0");ol.array.reverseSubArray(this.hitDetectionInstructions,begin,i);begin=-1}}}};ol.render.canvas.Replay.prototype.endGeometry=function(geometry,feature){goog.asserts.assert(!goog.isNull(this.beginGeometryInstruction1_),"this.beginGeometryInstruction1_ should not be null");this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;goog.asserts.assert(!goog.isNull(this.beginGeometryInstruction2_),"this.beginGeometryInstruction2_ should not be null");this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var endGeometryInstruction=[ol.render.canvas.Instruction.END_GEOMETRY,feature];this.instructions.push(endGeometryInstruction);this.hitDetectionInstructions.push(endGeometryInstruction)};ol.render.canvas.Replay.prototype.finish=goog.nullFunction;ol.render.canvas.Replay.prototype.getBufferedMaxExtent=function(){return this.maxExtent};ol.render.canvas.ImageReplay=function(tolerance,maxExtent,resolution){goog.base(this,tolerance,maxExtent,resolution);this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.snapToPixel_=undefined;this.width_=undefined};goog.inherits(ol.render.canvas.ImageReplay,ol.render.canvas.Replay);ol.render.canvas.ImageReplay.prototype.drawCoordinates_=function(flatCoordinates,offset,end,stride){return this.appendFlatCoordinates(flatCoordinates,offset,end,stride,false)};ol.render.canvas.ImageReplay.prototype.drawPointGeometry=function(pointGeometry,feature){if(goog.isNull(this.image_)){return}goog.asserts.assert(goog.isDef(this.anchorX_),"this.anchorX_ should be defined");goog.asserts.assert(goog.isDef(this.anchorY_),"this.anchorY_ should be defined");goog.asserts.assert(goog.isDef(this.height_),"this.height_ should be defined");goog.asserts.assert(goog.isDef(this.opacity_),"this.opacity_ should be defined");goog.asserts.assert(goog.isDef(this.originX_),"this.originX_ should be defined");goog.asserts.assert(goog.isDef(this.originY_),"this.originY_ should be defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"this.rotateWithView_ should be defined");goog.asserts.assert(goog.isDef(this.rotation_),"this.rotation_ should be defined");goog.asserts.assert(goog.isDef(this.scale_),"this.scale_ should be defined");goog.asserts.assert(goog.isDef(this.width_),"this.width_ should be defined");this.beginGeometry(pointGeometry,feature);var flatCoordinates=pointGeometry.getFlatCoordinates();var stride=pointGeometry.getStride();var myBegin=this.coordinates.length;var myEnd=this.drawCoordinates_(flatCoordinates,0,flatCoordinates.length,stride);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,myBegin,myEnd,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,myBegin,myEnd,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(pointGeometry,feature)};ol.render.canvas.ImageReplay.prototype.drawMultiPointGeometry=function(multiPointGeometry,feature){if(goog.isNull(this.image_)){return}goog.asserts.assert(goog.isDef(this.anchorX_),"this.anchorX_ should be defined");goog.asserts.assert(goog.isDef(this.anchorY_),"this.anchorY_ should be defined");goog.asserts.assert(goog.isDef(this.height_),"this.height_ should be defined");goog.asserts.assert(goog.isDef(this.opacity_),"this.opacity_ should be defined");goog.asserts.assert(goog.isDef(this.originX_),"this.originX_ should be defined");goog.asserts.assert(goog.isDef(this.originY_),"this.originY_ should be defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"this.rotateWithView_ should be defined");goog.asserts.assert(goog.isDef(this.rotation_),"this.rotation_ should be defined");goog.asserts.assert(goog.isDef(this.scale_),"this.scale_ should be defined");goog.asserts.assert(goog.isDef(this.width_),"this.width_ should be defined");this.beginGeometry(multiPointGeometry,feature);var flatCoordinates=multiPointGeometry.getFlatCoordinates();var stride=multiPointGeometry.getStride();var myBegin=this.coordinates.length;var myEnd=this.drawCoordinates_(flatCoordinates,0,flatCoordinates.length,stride);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,myBegin,myEnd,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,myBegin,myEnd,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(multiPointGeometry,feature)};ol.render.canvas.ImageReplay.prototype.finish=function(){this.reverseHitDetectionInstructions_();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.snapToPixel_=undefined;this.width_=undefined};ol.render.canvas.ImageReplay.prototype.setImageStyle=function(imageStyle){goog.asserts.assert(!goog.isNull(imageStyle),"imageStyle should not be null");var anchor=imageStyle.getAnchor();goog.asserts.assert(!goog.isNull(anchor),"anchor should not be null");var size=imageStyle.getSize();goog.asserts.assert(!goog.isNull(size),"size should not be null");var hitDetectionImage=imageStyle.getHitDetectionImage(1);goog.asserts.assert(!goog.isNull(hitDetectionImage),"hitDetectionImage should not be null");var image=imageStyle.getImage(1);goog.asserts.assert(!goog.isNull(image),"image should not be null");var origin=imageStyle.getOrigin();goog.asserts.assert(!goog.isNull(origin),"origin should not be null");this.anchorX_=anchor[0];this.anchorY_=anchor[1];this.hitDetectionImage_=hitDetectionImage;this.image_=image;this.height_=size[1];this.opacity_=imageStyle.getOpacity();this.originX_=origin[0];this.originY_=origin[1];this.rotateWithView_=imageStyle.getRotateWithView();this.rotation_=imageStyle.getRotation();this.scale_=imageStyle.getScale();this.snapToPixel_=imageStyle.getSnapToPixel();this.width_=size[0]};ol.render.canvas.LineStringReplay=function(tolerance,maxExtent,resolution){goog.base(this,tolerance,maxExtent,resolution);this.state_={currentStrokeStyle:undefined,currentLineCap:undefined,currentLineDash:null,currentLineJoin:undefined,currentLineWidth:undefined,currentMiterLimit:undefined,lastStroke:0,strokeStyle:undefined,lineCap:undefined,lineDash:null,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined}};goog.inherits(ol.render.canvas.LineStringReplay,ol.render.canvas.Replay);ol.render.canvas.LineStringReplay.prototype.drawFlatCoordinates_=function(flatCoordinates,offset,end,stride){var myBegin=this.coordinates.length;var myEnd=this.appendFlatCoordinates(flatCoordinates,offset,end,stride,false);var moveToLineToInstruction=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,myBegin,myEnd];this.instructions.push(moveToLineToInstruction);this.hitDetectionInstructions.push(moveToLineToInstruction);return end};ol.render.canvas.LineStringReplay.prototype.getBufferedMaxExtent=function(){if(goog.isNull(this.bufferedMaxExtent_)){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var width=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,width,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};ol.render.canvas.LineStringReplay.prototype.setStrokeStyle_=function(){var state=this.state_;var strokeStyle=state.strokeStyle;var lineCap=state.lineCap;var lineDash=state.lineDash;var lineJoin=state.lineJoin;var lineWidth=state.lineWidth;var miterLimit=state.miterLimit;goog.asserts.assert(goog.isDef(strokeStyle),"strokeStyle should be defined");goog.asserts.assert(goog.isDef(lineCap),"lineCap should be defined");goog.asserts.assert(!goog.isNull(lineDash),"lineDash should not be null");goog.asserts.assert(goog.isDef(lineJoin),"lineJoin should be defined");goog.asserts.assert(goog.isDef(lineWidth),"lineWidth should be defined");goog.asserts.assert(goog.isDef(miterLimit),"miterLimit should be defined");if(state.currentStrokeStyle!=strokeStyle||state.currentLineCap!=lineCap||!goog.array.equals(state.currentLineDash,lineDash)||state.currentLineJoin!=lineJoin||state.currentLineWidth!=lineWidth||state.currentMiterLimit!=miterLimit){if(state.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE]);state.lastStroke=this.coordinates.length}this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,strokeStyle,lineWidth,lineCap,lineJoin,miterLimit,lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);state.currentStrokeStyle=strokeStyle;state.currentLineCap=lineCap;state.currentLineDash=lineDash;state.currentLineJoin=lineJoin;state.currentLineWidth=lineWidth;state.currentMiterLimit=miterLimit}};ol.render.canvas.LineStringReplay.prototype.drawLineStringGeometry=function(lineStringGeometry,feature){var state=this.state_;goog.asserts.assert(!goog.isNull(state),"state should not be null");var strokeStyle=state.strokeStyle;var lineWidth=state.lineWidth;if(!goog.isDef(strokeStyle)||!goog.isDef(lineWidth)){return}this.setStrokeStyle_();this.beginGeometry(lineStringGeometry,feature);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,state.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var flatCoordinates=lineStringGeometry.getFlatCoordinates();var stride=lineStringGeometry.getStride();this.drawFlatCoordinates_(flatCoordinates,0,flatCoordinates.length,stride);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(lineStringGeometry,feature)};ol.render.canvas.LineStringReplay.prototype.drawMultiLineStringGeometry=function(multiLineStringGeometry,feature){var state=this.state_;goog.asserts.assert(!goog.isNull(state),"state should not be null");var strokeStyle=state.strokeStyle;var lineWidth=state.lineWidth;if(!goog.isDef(strokeStyle)||!goog.isDef(lineWidth)){return}this.setStrokeStyle_();this.beginGeometry(multiLineStringGeometry,feature);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,state.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var ends=multiLineStringGeometry.getEnds();var flatCoordinates=multiLineStringGeometry.getFlatCoordinates();var stride=multiLineStringGeometry.getStride();var offset=0;var i,ii;for(i=0,ii=ends.length;i<ii;++i){offset=this.drawFlatCoordinates_(flatCoordinates,offset,ends[i],stride)}this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(multiLineStringGeometry,feature)};ol.render.canvas.LineStringReplay.prototype.finish=function(){var state=this.state_;goog.asserts.assert(!goog.isNull(state),"state should not be null");if(state.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE])}this.reverseHitDetectionInstructions_();this.state_=null};ol.render.canvas.LineStringReplay.prototype.setFillStrokeStyle=function(fillStyle,strokeStyle){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");goog.asserts.assert(goog.isNull(fillStyle),"fillStyle should be null");goog.asserts.assert(!goog.isNull(strokeStyle),"strokeStyle should not be null");var strokeStyleColor=strokeStyle.getColor();this.state_.strokeStyle=ol.color.asString(!goog.isNull(strokeStyleColor)?strokeStyleColor:ol.render.canvas.defaultStrokeStyle);var strokeStyleLineCap=strokeStyle.getLineCap();this.state_.lineCap=goog.isDef(strokeStyleLineCap)?strokeStyleLineCap:ol.render.canvas.defaultLineCap;var strokeStyleLineDash=strokeStyle.getLineDash();this.state_.lineDash=!goog.isNull(strokeStyleLineDash)?strokeStyleLineDash:ol.render.canvas.defaultLineDash;var strokeStyleLineJoin=strokeStyle.getLineJoin();this.state_.lineJoin=goog.isDef(strokeStyleLineJoin)?strokeStyleLineJoin:ol.render.canvas.defaultLineJoin;var strokeStyleWidth=strokeStyle.getWidth();this.state_.lineWidth=goog.isDef(strokeStyleWidth)?strokeStyleWidth:ol.render.canvas.defaultLineWidth;var strokeStyleMiterLimit=strokeStyle.getMiterLimit();this.state_.miterLimit=goog.isDef(strokeStyleMiterLimit)?strokeStyleMiterLimit:ol.render.canvas.defaultMiterLimit;if(this.state_.lineWidth>this.maxLineWidth){this.maxLineWidth=this.state_.lineWidth;this.bufferedMaxExtent_=null}};ol.render.canvas.PolygonReplay=function(tolerance,maxExtent,resolution){goog.base(this,tolerance,maxExtent,resolution);this.state_={currentFillStyle:undefined,currentStrokeStyle:undefined,currentLineCap:undefined,currentLineDash:null,currentLineJoin:undefined,currentLineWidth:undefined,currentMiterLimit:undefined,fillStyle:undefined,strokeStyle:undefined,lineCap:undefined,lineDash:null,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined}};goog.inherits(ol.render.canvas.PolygonReplay,ol.render.canvas.Replay);ol.render.canvas.PolygonReplay.prototype.drawFlatCoordinatess_=function(flatCoordinates,offset,ends,stride){var state=this.state_;var beginPathInstruction=[ol.render.canvas.Instruction.BEGIN_PATH];this.instructions.push(beginPathInstruction);this.hitDetectionInstructions.push(beginPathInstruction);var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];var myBegin=this.coordinates.length;var myEnd=this.appendFlatCoordinates(flatCoordinates,offset,end,stride,true);var moveToLineToInstruction=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,myBegin,myEnd];var closePathInstruction=[ol.render.canvas.Instruction.CLOSE_PATH];this.instructions.push(moveToLineToInstruction,closePathInstruction);this.hitDetectionInstructions.push(moveToLineToInstruction,closePathInstruction);offset=end}var fillInstruction=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(fillInstruction);if(goog.isDef(state.fillStyle)){this.instructions.push(fillInstruction)}if(goog.isDef(state.strokeStyle)){goog.asserts.assert(goog.isDef(state.lineWidth),"state.lineWidth should be defined");var strokeInstruction=[ol.render.canvas.Instruction.STROKE];this.instructions.push(strokeInstruction);this.hitDetectionInstructions.push(strokeInstruction)}return offset};ol.render.canvas.PolygonReplay.prototype.drawCircleGeometry=function(circleGeometry,feature){var state=this.state_;goog.asserts.assert(!goog.isNull(state),"state should not be null");var fillStyle=state.fillStyle;var strokeStyle=state.strokeStyle;if(!goog.isDef(fillStyle)&&!goog.isDef(strokeStyle)){return}if(goog.isDef(strokeStyle)){goog.asserts.assert(goog.isDef(state.lineWidth),"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(circleGeometry,feature);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(goog.isDef(state.strokeStyle)){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,state.lineDash])}var flatCoordinates=circleGeometry.getFlatCoordinates();var stride=circleGeometry.getStride();var myBegin=this.coordinates.length;this.appendFlatCoordinates(flatCoordinates,0,flatCoordinates.length,stride,false);var beginPathInstruction=[ol.render.canvas.Instruction.BEGIN_PATH];var circleInstruction=[ol.render.canvas.Instruction.CIRCLE,myBegin];this.instructions.push(beginPathInstruction,circleInstruction);this.hitDetectionInstructions.push(beginPathInstruction,circleInstruction);var fillInstruction=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(fillInstruction);if(goog.isDef(state.fillStyle)){this.instructions.push(fillInstruction)}if(goog.isDef(state.strokeStyle)){goog.asserts.assert(goog.isDef(state.lineWidth),"state.lineWidth should be defined");var strokeInstruction=[ol.render.canvas.Instruction.STROKE];this.instructions.push(strokeInstruction);this.hitDetectionInstructions.push(strokeInstruction)}this.endGeometry(circleGeometry,feature)};ol.render.canvas.PolygonReplay.prototype.drawPolygonGeometry=function(polygonGeometry,feature){var state=this.state_;goog.asserts.assert(!goog.isNull(state),"state should not be null");var fillStyle=state.fillStyle;var strokeStyle=state.strokeStyle;if(!goog.isDef(fillStyle)&&!goog.isDef(strokeStyle)){return}if(goog.isDef(strokeStyle)){goog.asserts.assert(goog.isDef(state.lineWidth),"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(polygonGeometry,feature);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(goog.isDef(state.strokeStyle)){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,state.lineDash])}var ends=polygonGeometry.getEnds();var flatCoordinates=polygonGeometry.getOrientedFlatCoordinates();var stride=polygonGeometry.getStride();this.drawFlatCoordinatess_(flatCoordinates,0,ends,stride);this.endGeometry(polygonGeometry,feature)};ol.render.canvas.PolygonReplay.prototype.drawMultiPolygonGeometry=function(multiPolygonGeometry,feature){var state=this.state_;goog.asserts.assert(!goog.isNull(state),"state should not be null");var fillStyle=state.fillStyle;var strokeStyle=state.strokeStyle;if(!goog.isDef(fillStyle)&&!goog.isDef(strokeStyle)){return}if(goog.isDef(strokeStyle)){goog.asserts.assert(goog.isDef(state.lineWidth),"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(multiPolygonGeometry,feature);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(goog.isDef(state.strokeStyle)){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,state.lineDash])}var endss=multiPolygonGeometry.getEndss();var flatCoordinates=multiPolygonGeometry.getOrientedFlatCoordinates();var stride=multiPolygonGeometry.getStride();var offset=0;var i,ii;for(i=0,ii=endss.length;i<ii;++i){offset=this.drawFlatCoordinatess_(flatCoordinates,offset,endss[i],stride)}this.endGeometry(multiPolygonGeometry,feature)};ol.render.canvas.PolygonReplay.prototype.finish=function(){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");this.reverseHitDetectionInstructions_();this.state_=null;var tolerance=this.tolerance;if(tolerance!==0){var coordinates=this.coordinates;var i,ii;for(i=0,ii=coordinates.length;i<ii;++i){coordinates[i]=ol.geom.flat.simplify.snap(coordinates[i],tolerance)}}};ol.render.canvas.PolygonReplay.prototype.getBufferedMaxExtent=function(){if(goog.isNull(this.bufferedMaxExtent_)){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var width=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,width,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyle=function(fillStyle,strokeStyle){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");goog.asserts.assert(!goog.isNull(fillStyle)||!goog.isNull(strokeStyle),"fillStyle or strokeStyle should not be null");var state=this.state_;if(!goog.isNull(fillStyle)){var fillStyleColor=fillStyle.getColor();state.fillStyle=ol.color.asString(!goog.isNull(fillStyleColor)?fillStyleColor:ol.render.canvas.defaultFillStyle)}else{state.fillStyle=undefined}if(!goog.isNull(strokeStyle)){var strokeStyleColor=strokeStyle.getColor();state.strokeStyle=ol.color.asString(!goog.isNull(strokeStyleColor)?strokeStyleColor:ol.render.canvas.defaultStrokeStyle);var strokeStyleLineCap=strokeStyle.getLineCap();state.lineCap=goog.isDef(strokeStyleLineCap)?strokeStyleLineCap:ol.render.canvas.defaultLineCap;var strokeStyleLineDash=strokeStyle.getLineDash();state.lineDash=!goog.isNull(strokeStyleLineDash)?strokeStyleLineDash.slice():ol.render.canvas.defaultLineDash;var strokeStyleLineJoin=strokeStyle.getLineJoin();state.lineJoin=goog.isDef(strokeStyleLineJoin)?strokeStyleLineJoin:ol.render.canvas.defaultLineJoin;var strokeStyleWidth=strokeStyle.getWidth();state.lineWidth=goog.isDef(strokeStyleWidth)?strokeStyleWidth:ol.render.canvas.defaultLineWidth;var strokeStyleMiterLimit=strokeStyle.getMiterLimit();state.miterLimit=goog.isDef(strokeStyleMiterLimit)?strokeStyleMiterLimit:ol.render.canvas.defaultMiterLimit;if(state.lineWidth>this.maxLineWidth){this.maxLineWidth=state.lineWidth;this.bufferedMaxExtent_=null}}else{state.strokeStyle=undefined;state.lineCap=undefined;state.lineDash=null;state.lineJoin=undefined;state.lineWidth=undefined;state.miterLimit=undefined}};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyles_=function(){var state=this.state_;var fillStyle=state.fillStyle;var strokeStyle=state.strokeStyle;var lineCap=state.lineCap;var lineDash=state.lineDash;var lineJoin=state.lineJoin;var lineWidth=state.lineWidth;var miterLimit=state.miterLimit;if(goog.isDef(fillStyle)&&state.currentFillStyle!=fillStyle){this.instructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,fillStyle]);state.currentFillStyle=state.fillStyle}if(goog.isDef(strokeStyle)){goog.asserts.assert(goog.isDef(lineCap),"lineCap should be defined");goog.asserts.assert(!goog.isNull(lineDash),"lineDash should not be null");goog.asserts.assert(goog.isDef(lineJoin),"lineJoin should be defined");goog.asserts.assert(goog.isDef(lineWidth),"lineWidth should be defined");goog.asserts.assert(goog.isDef(miterLimit),"miterLimit should be defined");if(state.currentStrokeStyle!=strokeStyle||state.currentLineCap!=lineCap||state.currentLineDash!=lineDash||state.currentLineJoin!=lineJoin||state.currentLineWidth!=lineWidth||state.currentMiterLimit!=miterLimit){this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,strokeStyle,lineWidth,lineCap,lineJoin,miterLimit,lineDash]);state.currentStrokeStyle=strokeStyle;state.currentLineCap=lineCap;state.currentLineDash=lineDash;state.currentLineJoin=lineJoin;state.currentLineWidth=lineWidth;state.currentMiterLimit=miterLimit}}};ol.render.canvas.TextReplay=function(tolerance,maxExtent,resolution){goog.base(this,tolerance,maxExtent,resolution);this.replayFillState_=null;this.replayStrokeState_=null;this.replayTextState_=null;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null};goog.inherits(ol.render.canvas.TextReplay,ol.render.canvas.Replay);ol.render.canvas.TextReplay.prototype.drawText=function(flatCoordinates,offset,end,stride,geometry,feature){if(this.text_===""||goog.isNull(this.textState_)||(goog.isNull(this.textFillState_)&&goog.isNull(this.textStrokeState_))){return}if(!goog.isNull(this.textFillState_)){this.setReplayFillState_(this.textFillState_)}if(!goog.isNull(this.textStrokeState_)){this.setReplayStrokeState_(this.textStrokeState_)}this.setReplayTextState_(this.textState_);this.beginGeometry(geometry,feature);var myBegin=this.coordinates.length;var myEnd=this.appendFlatCoordinates(flatCoordinates,offset,end,stride,false);var fill=!goog.isNull(this.textFillState_);var stroke=!goog.isNull(this.textStrokeState_);var drawTextInstruction=[ol.render.canvas.Instruction.DRAW_TEXT,myBegin,myEnd,this.text_,this.textOffsetX_,this.textOffsetY_,this.textRotation_,this.textScale_,fill,stroke];this.instructions.push(drawTextInstruction);this.hitDetectionInstructions.push(drawTextInstruction);this.endGeometry(geometry,feature)};ol.render.canvas.TextReplay.prototype.setReplayFillState_=function(fillState){var replayFillState=this.replayFillState_;if(!goog.isNull(replayFillState)&&replayFillState.fillStyle==fillState.fillStyle){return}var setFillStyleInstruction=[ol.render.canvas.Instruction.SET_FILL_STYLE,fillState.fillStyle];this.instructions.push(setFillStyleInstruction);this.hitDetectionInstructions.push(setFillStyleInstruction);if(goog.isNull(replayFillState)){this.replayFillState_={fillStyle:fillState.fillStyle}}else{replayFillState.fillStyle=fillState.fillStyle}};ol.render.canvas.TextReplay.prototype.setReplayStrokeState_=function(strokeState){var replayStrokeState=this.replayStrokeState_;if(!goog.isNull(replayStrokeState)&&replayStrokeState.lineCap==strokeState.lineCap&&replayStrokeState.lineDash==strokeState.lineDash&&replayStrokeState.lineJoin==strokeState.lineJoin&&replayStrokeState.lineWidth==strokeState.lineWidth&&replayStrokeState.miterLimit==strokeState.miterLimit&&replayStrokeState.strokeStyle==strokeState.strokeStyle){return}var setStrokeStyleInstruction=[ol.render.canvas.Instruction.SET_STROKE_STYLE,strokeState.strokeStyle,strokeState.lineWidth,strokeState.lineCap,strokeState.lineJoin,strokeState.miterLimit,strokeState.lineDash,false];this.instructions.push(setStrokeStyleInstruction);this.hitDetectionInstructions.push(setStrokeStyleInstruction);if(goog.isNull(replayStrokeState)){this.replayStrokeState_={lineCap:strokeState.lineCap,lineDash:strokeState.lineDash,lineJoin:strokeState.lineJoin,lineWidth:strokeState.lineWidth,miterLimit:strokeState.miterLimit,strokeStyle:strokeState.strokeStyle}}else{replayStrokeState.lineCap=strokeState.lineCap;replayStrokeState.lineDash=strokeState.lineDash;replayStrokeState.lineJoin=strokeState.lineJoin;replayStrokeState.lineWidth=strokeState.lineWidth;replayStrokeState.miterLimit=strokeState.miterLimit;replayStrokeState.strokeStyle=strokeState.strokeStyle}};ol.render.canvas.TextReplay.prototype.setReplayTextState_=function(textState){var replayTextState=this.replayTextState_;if(!goog.isNull(replayTextState)&&replayTextState.font==textState.font&&replayTextState.textAlign==textState.textAlign&&replayTextState.textBaseline==textState.textBaseline){return}var setTextStyleInstruction=[ol.render.canvas.Instruction.SET_TEXT_STYLE,textState.font,textState.textAlign,textState.textBaseline];this.instructions.push(setTextStyleInstruction);this.hitDetectionInstructions.push(setTextStyleInstruction);if(goog.isNull(replayTextState)){this.replayTextState_={font:textState.font,textAlign:textState.textAlign,textBaseline:textState.textBaseline}}else{replayTextState.font=textState.font;replayTextState.textAlign=textState.textAlign;replayTextState.textBaseline=textState.textBaseline}};ol.render.canvas.TextReplay.prototype.setTextStyle=function(textStyle){if(goog.isNull(textStyle)){this.text_=""}else{var textFillStyle=textStyle.getFill();if(goog.isNull(textFillStyle)){this.textFillState_=null}else{var textFillStyleColor=textFillStyle.getColor();var fillStyle=ol.color.asString(!goog.isNull(textFillStyleColor)?textFillStyleColor:ol.render.canvas.defaultFillStyle);if(goog.isNull(this.textFillState_)){this.textFillState_={fillStyle:fillStyle}}else{var textFillState=this.textFillState_;textFillState.fillStyle=fillStyle}}var textStrokeStyle=textStyle.getStroke();if(goog.isNull(textStrokeStyle)){this.textStrokeState_=null}else{var textStrokeStyleColor=textStrokeStyle.getColor();var textStrokeStyleLineCap=textStrokeStyle.getLineCap();var textStrokeStyleLineDash=textStrokeStyle.getLineDash();var textStrokeStyleLineJoin=textStrokeStyle.getLineJoin();var textStrokeStyleWidth=textStrokeStyle.getWidth();var textStrokeStyleMiterLimit=textStrokeStyle.getMiterLimit();var lineCap=goog.isDef(textStrokeStyleLineCap)?textStrokeStyleLineCap:ol.render.canvas.defaultLineCap;var lineDash=goog.isDefAndNotNull(textStrokeStyleLineDash)?textStrokeStyleLineDash.slice():ol.render.canvas.defaultLineDash;var lineJoin=goog.isDef(textStrokeStyleLineJoin)?textStrokeStyleLineJoin:ol.render.canvas.defaultLineJoin;var lineWidth=goog.isDef(textStrokeStyleWidth)?textStrokeStyleWidth:ol.render.canvas.defaultLineWidth;var miterLimit=goog.isDef(textStrokeStyleMiterLimit)?textStrokeStyleMiterLimit:ol.render.canvas.defaultMiterLimit;var strokeStyle=ol.color.asString(!goog.isNull(textStrokeStyleColor)?textStrokeStyleColor:ol.render.canvas.defaultStrokeStyle);if(goog.isNull(this.textStrokeState_)){this.textStrokeState_={lineCap:lineCap,lineDash:lineDash,lineJoin:lineJoin,lineWidth:lineWidth,miterLimit:miterLimit,strokeStyle:strokeStyle}}else{var textStrokeState=this.textStrokeState_;textStrokeState.lineCap=lineCap;textStrokeState.lineDash=lineDash;textStrokeState.lineJoin=lineJoin;textStrokeState.lineWidth=lineWidth;textStrokeState.miterLimit=miterLimit;textStrokeState.strokeStyle=strokeStyle}}var textFont=textStyle.getFont();var textOffsetX=textStyle.getOffsetX();var textOffsetY=textStyle.getOffsetY();var textRotation=textStyle.getRotation();var textScale=textStyle.getScale();var textText=textStyle.getText();var textTextAlign=textStyle.getTextAlign();var textTextBaseline=textStyle.getTextBaseline();var font=goog.isDef(textFont)?textFont:ol.render.canvas.defaultFont;var textAlign=goog.isDef(textTextAlign)?textTextAlign:ol.render.canvas.defaultTextAlign;var textBaseline=goog.isDef(textTextBaseline)?textTextBaseline:ol.render.canvas.defaultTextBaseline;if(goog.isNull(this.textState_)){this.textState_={font:font,textAlign:textAlign,textBaseline:textBaseline}}else{var textState=this.textState_;textState.font=font;textState.textAlign=textAlign;textState.textBaseline=textBaseline}this.text_=goog.isDef(textText)?textText:"";this.textOffsetX_=goog.isDef(textOffsetX)?textOffsetX:0;this.textOffsetY_=goog.isDef(textOffsetY)?textOffsetY:0;this.textRotation_=goog.isDef(textRotation)?textRotation:0;this.textScale_=goog.isDef(textScale)?textScale:1}};ol.render.canvas.ReplayGroup=function(tolerance,maxExtent,resolution,opt_renderBuffer){this.tolerance_=tolerance;this.maxExtent_=maxExtent;this.resolution_=resolution;this.renderBuffer_=opt_renderBuffer;this.replaysByZIndex_={};this.hitDetectionContext_=ol.dom.createCanvasContext2D(1,1);this.hitDetectionTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.ReplayGroup.prototype.finish=function(){var zKey;for(zKey in this.replaysByZIndex_){var replays=this.replaysByZIndex_[zKey];var replayKey;for(replayKey in replays){replays[replayKey].finish()}}};ol.render.canvas.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(coordinate,resolution,rotation,skippedFeaturesHash,callback){var transform=this.hitDetectionTransform_;ol.vec.Mat4.makeTransform2D(transform,0.5,0.5,1/resolution,-1/resolution,-rotation,-coordinate[0],-coordinate[1]);var context=this.hitDetectionContext_;context.clearRect(0,0,1,1);var hitExtent;if(goog.isDef(this.renderBuffer_)){hitExtent=ol.extent.createEmpty();ol.extent.extendCoordinate(hitExtent,coordinate);ol.extent.buffer(hitExtent,resolution*this.renderBuffer_,hitExtent)}return this.replayHitDetection_(context,transform,rotation,skippedFeaturesHash,function(feature){var imageData=context.getImageData(0,0,1,1).data;if(imageData[3]>0){var result=callback(feature);if(result){return result}context.clearRect(0,0,1,1)}},hitExtent)};ol.render.canvas.ReplayGroup.prototype.getReplay=function(zIndex,replayType){var zIndexKey=goog.isDef(zIndex)?zIndex.toString():"0";var replays=this.replaysByZIndex_[zIndexKey];if(!goog.isDef(replays)){replays={};this.replaysByZIndex_[zIndexKey]=replays}var replay=replays[replayType];if(!goog.isDef(replay)){var Constructor=ol.render.canvas.BATCH_CONSTRUCTORS_[replayType];goog.asserts.assert(goog.isDef(Constructor),replayType+" constructor missing from ol.render.canvas.BATCH_CONSTRUCTORS_");replay=new Constructor(this.tolerance_,this.maxExtent_,this.resolution_);replays[replayType]=replay}return replay};ol.render.canvas.ReplayGroup.prototype.isEmpty=function(){return goog.object.isEmpty(this.replaysByZIndex_)};ol.render.canvas.ReplayGroup.prototype.replay=function(context,pixelRatio,transform,viewRotation,skippedFeaturesHash){var zs=goog.array.map(goog.object.getKeys(this.replaysByZIndex_),Number);goog.array.sort(zs);var maxExtent=this.maxExtent_;var minX=maxExtent[0];var minY=maxExtent[1];var maxX=maxExtent[2];var maxY=maxExtent[3];var flatClipCoords=[minX,minY,minX,maxY,maxX,maxY,maxX,minY];ol.geom.flat.transform.transform2D(flatClipCoords,0,8,2,transform,flatClipCoords);context.save();context.beginPath();context.moveTo(flatClipCoords[0],flatClipCoords[1]);context.lineTo(flatClipCoords[2],flatClipCoords[3]);context.lineTo(flatClipCoords[4],flatClipCoords[5]);context.lineTo(flatClipCoords[6],flatClipCoords[7]);context.closePath();context.clip();var i,ii,j,jj,replays,replay,result;for(i=0,ii=zs.length;i<ii;++i){replays=this.replaysByZIndex_[zs[i].toString()];for(j=0,jj=ol.render.REPLAY_ORDER.length;j<jj;++j){replay=replays[ol.render.REPLAY_ORDER[j]];if(goog.isDef(replay)){replay.replay(context,pixelRatio,transform,viewRotation,skippedFeaturesHash)}}}context.restore()};ol.render.canvas.ReplayGroup.prototype.replayHitDetection_=function(context,transform,viewRotation,skippedFeaturesHash,featureCallback,opt_hitExtent){var zs=goog.array.map(goog.object.getKeys(this.replaysByZIndex_),Number);goog.array.sort(zs,function(a,b){return b-a});var i,ii,j,replays,replay,result;for(i=0,ii=zs.length;i<ii;++i){replays=this.replaysByZIndex_[zs[i].toString()];for(j=ol.render.REPLAY_ORDER.length-1;j>=0;--j){replay=replays[ol.render.REPLAY_ORDER[j]];if(goog.isDef(replay)){result=replay.replayHitDetection(context,transform,viewRotation,skippedFeaturesHash,featureCallback,opt_hitExtent);if(result){return result}}}}return undefined};ol.render.canvas.BATCH_CONSTRUCTORS_={Image:ol.render.canvas.ImageReplay,LineString:ol.render.canvas.LineStringReplay,Polygon:ol.render.canvas.PolygonReplay,Text:ol.render.canvas.TextReplay};goog.provide("ol.geom.Circle");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.proj");ol.geom.Circle=function(center,opt_radius,opt_layout){goog.base(this);var radius=goog.isDef(opt_radius)?opt_radius:0;this.setCenterAndRadius(center,radius,opt_layout)};goog.inherits(ol.geom.Circle,ol.geom.SimpleGeometry);ol.geom.Circle.prototype.clone=function(){var circle=new ol.geom.Circle(null);circle.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return circle};ol.geom.Circle.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){var flatCoordinates=this.flatCoordinates;var dx=x-flatCoordinates[0];var dy=y-flatCoordinates[1];var squaredDistance=dx*dx+dy*dy;if(squaredDistance<minSquaredDistance){var i;if(squaredDistance===0){for(i=0;i<this.stride;++i){closestPoint[i]=flatCoordinates[i]}}else{var delta=this.getRadius()/Math.sqrt(squaredDistance);closestPoint[0]=flatCoordinates[0]+delta*dx;closestPoint[1]=flatCoordinates[1]+delta*dy;for(i=2;i<this.stride;++i){closestPoint[i]=flatCoordinates[i]}}closestPoint.length=this.stride;return squaredDistance}else{return minSquaredDistance}};ol.geom.Circle.prototype.containsXY=function(x,y){var flatCoordinates=this.flatCoordinates;var dx=x-flatCoordinates[0];var dy=y-flatCoordinates[1];return dx*dx+dy*dy<=this.getRadiusSquared_()};ol.geom.Circle.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.Circle.prototype.computeExtent=function(extent){var flatCoordinates=this.flatCoordinates;var radius=flatCoordinates[this.stride]-flatCoordinates[0];return ol.extent.createOrUpdate(flatCoordinates[0]-radius,flatCoordinates[1]-radius,flatCoordinates[0]+radius,flatCoordinates[1]+radius,extent)};ol.geom.Circle.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};ol.geom.Circle.prototype.getRadiusSquared_=function(){var dx=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var dy=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return dx*dx+dy*dy};ol.geom.Circle.prototype.getType=function(){return ol.geom.GeometryType.CIRCLE};ol.geom.Circle.prototype.intersectsExtent=function(extent){var circleExtent=this.getExtent();if(ol.extent.intersects(extent,circleExtent)){var center=this.getCenter();if(extent[0]<=center[0]&&extent[2]>=center[0]){return true}if(extent[1]<=center[1]&&extent[3]>=center[1]){return true}return ol.extent.forEachCorner(extent,this.containsCoordinate,this)}return false};ol.geom.Circle.prototype.setCenter=function(center){var stride=this.stride;goog.asserts.assert(center.length==stride,"center array length should match stride");var radius=this.flatCoordinates[stride]-this.flatCoordinates[0];var flatCoordinates=center.slice();flatCoordinates[stride]=flatCoordinates[0]+radius;var i;for(i=1;i<stride;++i){flatCoordinates[stride+i]=center[i]}this.setFlatCoordinates(this.layout,flatCoordinates)};ol.geom.Circle.prototype.setCenterAndRadius=function(center,radius,opt_layout){if(goog.isNull(center)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(opt_layout,center,0);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var flatCoordinates=this.flatCoordinates;var offset=ol.geom.flat.deflate.coordinate(flatCoordinates,0,center,this.stride);flatCoordinates[offset++]=flatCoordinates[0]+radius;var i,ii;for(i=1,ii=this.stride;i<ii;++i){flatCoordinates[offset++]=flatCoordinates[i]}flatCoordinates.length=offset;this.changed()}};ol.geom.Circle.prototype.setFlatCoordinates=function(layout,flatCoordinates){this.setFlatCoordinatesInternal(layout,flatCoordinates);this.changed()};ol.geom.Circle.prototype.setRadius=function(radius){goog.asserts.assert(!goog.isNull(this.flatCoordinates),"this.flatCoordinates cannot be null");this.flatCoordinates[this.stride]=this.flatCoordinates[0]+radius;this.changed()};ol.geom.Circle.prototype.transform;goog.provide("ol.geom.GeometryCollection");goog.require("goog.array");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryType");ol.geom.GeometryCollection=function(opt_geometries){goog.base(this);this.geometries_=goog.isDef(opt_geometries)?opt_geometries:null;this.listenGeometriesChange_()};goog.inherits(ol.geom.GeometryCollection,ol.geom.Geometry);ol.geom.GeometryCollection.cloneGeometries_=function(geometries){var clonedGeometries=[];var i,ii;for(i=0,ii=geometries.length;i<ii;++i){clonedGeometries.push(geometries[i].clone())}return clonedGeometries};ol.geom.GeometryCollection.prototype.unlistenGeometriesChange_=function(){var i,ii;if(goog.isNull(this.geometries_)){return}for(i=0,ii=this.geometries_.length;i<ii;++i){goog.events.unlisten(this.geometries_[i],goog.events.EventType.CHANGE,this.changed,false,this)}};ol.geom.GeometryCollection.prototype.listenGeometriesChange_=function(){var i,ii;if(goog.isNull(this.geometries_)){return}for(i=0,ii=this.geometries_.length;i<ii;++i){goog.events.listen(this.geometries_[i],goog.events.EventType.CHANGE,this.changed,false,this)}};ol.geom.GeometryCollection.prototype.clone=function(){var geometryCollection=new ol.geom.GeometryCollection(null);geometryCollection.setGeometries(this.geometries_);return geometryCollection};ol.geom.GeometryCollection.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}var geometries=this.geometries_;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){minSquaredDistance=geometries[i].closestPointXY(x,y,closestPoint,minSquaredDistance)}return minSquaredDistance};ol.geom.GeometryCollection.prototype.containsXY=function(x,y){var geometries=this.geometries_;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){if(geometries[i].containsXY(x,y)){return true}}return false};ol.geom.GeometryCollection.prototype.computeExtent=function(extent){ol.extent.createOrUpdateEmpty(extent);var geometries=this.geometries_;for(var i=0,ii=geometries.length;i<ii;++i){ol.extent.extend(extent,geometries[i].getExtent())}return extent};ol.geom.GeometryCollection.prototype.getGeometries=function(){return ol.geom.GeometryCollection.cloneGeometries_(this.geometries_)};ol.geom.GeometryCollection.prototype.getGeometriesArray=function(){return this.geometries_};ol.geom.GeometryCollection.prototype.getSimplifiedGeometry=function(squaredTolerance){if(this.simplifiedGeometryRevision!=this.getRevision()){goog.object.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(squaredTolerance<0||(this.simplifiedGeometryMaxMinSquaredTolerance!==0&&squaredTolerance<this.simplifiedGeometryMaxMinSquaredTolerance)){return this}var key=squaredTolerance.toString();if(this.simplifiedGeometryCache.hasOwnProperty(key)){return this.simplifiedGeometryCache[key]}else{var simplifiedGeometries=[];var geometries=this.geometries_;var simplified=false;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){var geometry=geometries[i];var simplifiedGeometry=geometry.getSimplifiedGeometry(squaredTolerance);simplifiedGeometries.push(simplifiedGeometry);if(simplifiedGeometry!==geometry){simplified=true}}if(simplified){var simplifiedGeometryCollection=new ol.geom.GeometryCollection(null);simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);this.simplifiedGeometryCache[key]=simplifiedGeometryCollection;return simplifiedGeometryCollection}else{this.simplifiedGeometryMaxMinSquaredTolerance=squaredTolerance;return this}}};ol.geom.GeometryCollection.prototype.getType=function(){return ol.geom.GeometryType.GEOMETRY_COLLECTION};ol.geom.GeometryCollection.prototype.intersectsExtent=function(extent){var geometries=this.geometries_;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){if(geometries[i].intersectsExtent(extent)){return true}}return false};ol.geom.GeometryCollection.prototype.isEmpty=function(){return goog.array.isEmpty(this.geometries_)};ol.geom.GeometryCollection.prototype.setGeometries=function(geometries){this.setGeometriesArray(ol.geom.GeometryCollection.cloneGeometries_(geometries))};ol.geom.GeometryCollection.prototype.setGeometriesArray=function(geometries){this.unlistenGeometriesChange_();this.geometries_=geometries;this.listenGeometriesChange_();this.changed()};ol.geom.GeometryCollection.prototype.applyTransform=function(transformFn){var geometries=this.geometries_;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){geometries[i].applyTransform(transformFn)}this.changed()};ol.geom.GeometryCollection.prototype.translate=function(deltaX,deltaY){var geometries=this.geometries_;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){geometries[i].translate(deltaX,deltaY)}this.changed()};ol.geom.GeometryCollection.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();goog.base(this,"disposeInternal")};goog.provide("ol.geom.flat.interpolate");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");ol.geom.flat.interpolate.lineString=function(flatCoordinates,offset,end,stride,fraction,opt_dest){goog.asserts.assert(0<=fraction&&fraction<=1,"fraction should be in between 0 and 1");var pointX=NaN;var pointY=NaN;var n=(end-offset)/stride;if(n===0){goog.asserts.fail("n cannot be 0")}else{if(n==1){pointX=flatCoordinates[offset];pointY=flatCoordinates[offset+1]}else{if(n==2){pointX=(1-fraction)*flatCoordinates[offset]+fraction*flatCoordinates[offset+stride];pointY=(1-fraction)*flatCoordinates[offset+1]+fraction*flatCoordinates[offset+stride+1]}else{var x1=flatCoordinates[offset];var y1=flatCoordinates[offset+1];var length=0;var cumulativeLengths=[0];var i;for(i=offset+stride;i<end;i+=stride){var x2=flatCoordinates[i];var y2=flatCoordinates[i+1];length+=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));cumulativeLengths.push(length);x1=x2;y1=y2}var target=fraction*length;var index=goog.array.binarySearch(cumulativeLengths,target);if(index<0){var t=(target-cumulativeLengths[-index-2])/(cumulativeLengths[-index-1]-cumulativeLengths[-index-2]);var o=offset+(-index-2)*stride;pointX=goog.math.lerp(flatCoordinates[o],flatCoordinates[o+stride],t);pointY=goog.math.lerp(flatCoordinates[o+1],flatCoordinates[o+stride+1],t)}else{pointX=flatCoordinates[offset+index*stride];pointY=flatCoordinates[offset+index*stride+1]}}}}if(goog.isDefAndNotNull(opt_dest)){opt_dest[0]=pointX;opt_dest[1]=pointY;return opt_dest}else{return[pointX,pointY]}};ol.geom.flat.lineStringCoordinateAtM=function(flatCoordinates,offset,end,stride,m,extrapolate){if(end==offset){return null}var coordinate;if(m<flatCoordinates[offset+stride-1]){if(extrapolate){coordinate=flatCoordinates.slice(offset,offset+stride);coordinate[stride-1]=m;return coordinate}else{return null}}else{if(flatCoordinates[end-1]<m){if(extrapolate){coordinate=flatCoordinates.slice(end-stride,end);coordinate[stride-1]=m;return coordinate}else{return null}}}if(m==flatCoordinates[offset+stride-1]){return flatCoordinates.slice(offset,offset+stride)}var lo=offset/stride;var hi=end/stride;while(lo<hi){var mid=(lo+hi)>>1;if(m<flatCoordinates[(mid+1)*stride-1]){hi=mid}else{lo=mid+1}}var m0=flatCoordinates[lo*stride-1];if(m==m0){return flatCoordinates.slice((lo-1)*stride,(lo-1)*stride+stride)}var m1=flatCoordinates[(lo+1)*stride-1];goog.asserts.assert(m0<m,"m0 should be less than m");goog.asserts.assert(m<=m1,"m should be less than or equal to m1");var t=(m-m0)/(m1-m0);coordinate=[];var i;for(i=0;i<stride-1;++i){coordinate.push(goog.math.lerp(flatCoordinates[(lo-1)*stride+i],flatCoordinates[lo*stride+i],t))}coordinate.push(m);goog.asserts.assert(coordinate.length==stride,"length of coordinate array should match stride");return coordinate};ol.geom.flat.lineStringsCoordinateAtM=function(flatCoordinates,offset,ends,stride,m,extrapolate,interpolate){if(interpolate){return ol.geom.flat.lineStringCoordinateAtM(flatCoordinates,offset,ends[ends.length-1],stride,m,extrapolate)}var coordinate;if(m<flatCoordinates[stride-1]){if(extrapolate){coordinate=flatCoordinates.slice(0,stride);coordinate[stride-1]=m;return coordinate}else{return null}}if(flatCoordinates[flatCoordinates.length-1]<m){if(extrapolate){coordinate=flatCoordinates.slice(flatCoordinates.length-stride);coordinate[stride-1]=m;return coordinate}else{return null}}var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];if(offset==end){continue}if(m<flatCoordinates[offset+stride-1]){return null}else{if(m<=flatCoordinates[end-1]){return ol.geom.flat.lineStringCoordinateAtM(flatCoordinates,offset,end,stride,m,false)}}offset=end}goog.asserts.fail("ol.geom.flat.lineStringsCoordinateAtM should have returned");return null};goog.provide("ol.geom.flat.length");ol.geom.flat.length.lineString=function(flatCoordinates,offset,end,stride){var x1=flatCoordinates[offset];var y1=flatCoordinates[offset+1];var length=0;var i;for(i=offset+stride;i<end;i+=stride){var x2=flatCoordinates[i];var y2=flatCoordinates[i+1];length+=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));x1=x2;y1=y2}return length};ol.geom.flat.length.linearRing=function(flatCoordinates,offset,end,stride){var perimeter=ol.geom.flat.length.lineString(flatCoordinates,offset,end,stride);var dx=flatCoordinates[end-stride]-flatCoordinates[offset];var dy=flatCoordinates[end-stride+1]-flatCoordinates[offset+1];perimeter+=Math.sqrt(dx*dx+dy*dy);return perimeter};goog.provide("ol.geom.LineString");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interpolate");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.length");goog.require("ol.geom.flat.segments");goog.require("ol.geom.flat.simplify");ol.geom.LineString=function(coordinates,opt_layout){goog.base(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.LineString,ol.geom.SimpleGeometry);ol.geom.LineString.prototype.appendCoordinate=function(coordinate){goog.asserts.assert(coordinate.length==this.stride,"length of coordinate array should match stride");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=coordinate.slice()}else{goog.array.extend(this.flatCoordinates,coordinate)}this.changed()};ol.geom.LineString.prototype.clone=function(){var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return lineString};ol.geom.LineString.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,x,y,closestPoint,minSquaredDistance)};ol.geom.LineString.prototype.forEachSegment=function(callback,opt_this){return ol.geom.flat.segments.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,callback,opt_this)};ol.geom.LineString.prototype.getCoordinateAtM=function(m,opt_extrapolate){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM){return null}var extrapolate=goog.isDef(opt_extrapolate)?opt_extrapolate:false;return ol.geom.flat.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,m,extrapolate)};ol.geom.LineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getLength=function(){return ol.geom.flat.length.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getFlatMidpoint=function(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=ol.geom.flat.interpolate.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};ol.geom.LineString.prototype.getSimplifiedGeometryInternal=function(squaredTolerance){var simplifiedFlatCoordinates=[];simplifiedFlatCoordinates.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,squaredTolerance,simplifiedFlatCoordinates,0);var simplifiedLineString=new ol.geom.LineString(null);simplifiedLineString.setFlatCoordinates(ol.geom.GeometryLayout.XY,simplifiedFlatCoordinates);return simplifiedLineString};ol.geom.LineString.prototype.getType=function(){return ol.geom.GeometryType.LINE_STRING};ol.geom.LineString.prototype.intersectsExtent=function(extent){return ol.geom.flat.intersectsextent.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,extent)};ol.geom.LineString.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(opt_layout,coordinates,1);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,coordinates,this.stride);this.changed()}};ol.geom.LineString.prototype.setFlatCoordinates=function(layout,flatCoordinates){this.setFlatCoordinatesInternal(layout,flatCoordinates);this.changed()};goog.provide("ol.geom.MultiLineString");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interpolate");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.simplify");ol.geom.MultiLineString=function(coordinates,opt_layout){goog.base(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.MultiLineString,ol.geom.SimpleGeometry);ol.geom.MultiLineString.prototype.appendLineString=function(lineString){goog.asserts.assert(lineString.getLayout()==this.layout,"layout of lineString should match the layout");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=lineString.getFlatCoordinates().slice()}else{goog.array.extend(this.flatCoordinates,lineString.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.MultiLineString.prototype.clone=function(){var multiLineString=new ol.geom.MultiLineString(null);multiLineString.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return multiLineString};ol.geom.MultiLineString.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,x,y,closestPoint,minSquaredDistance)};ol.geom.MultiLineString.prototype.getCoordinateAtM=function(m,opt_extrapolate,opt_interpolate){if((this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM)||this.flatCoordinates.length===0){return null}var extrapolate=goog.isDef(opt_extrapolate)?opt_extrapolate:false;var interpolate=goog.isDef(opt_interpolate)?opt_interpolate:false;return ol.geom.flat.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,m,extrapolate,interpolate)};ol.geom.MultiLineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)};ol.geom.MultiLineString.prototype.getEnds=function(){return this.ends_};ol.geom.MultiLineString.prototype.getLineString=function(index){goog.asserts.assert(0<=index&&index<this.ends_.length,"index should be in between 0 and length of the this.ends_ array");if(index<0||this.ends_.length<=index){return null}var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(this.layout,this.flatCoordinates.slice(index===0?0:this.ends_[index-1],this.ends_[index]));return lineString};ol.geom.MultiLineString.prototype.getLineStrings=function(){var flatCoordinates=this.flatCoordinates;var ends=this.ends_;var layout=this.layout;var lineStrings=[];var offset=0;var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(layout,flatCoordinates.slice(offset,end));lineStrings.push(lineString);offset=end}return lineStrings};ol.geom.MultiLineString.prototype.getFlatMidpoints=function(){var midpoints=[];var flatCoordinates=this.flatCoordinates;var offset=0;var ends=this.ends_;var stride=this.stride;var i,ii;for(i=0,ii=ends.length;i<ii;++i){var end=ends[i];var midpoint=ol.geom.flat.interpolate.lineString(flatCoordinates,offset,end,stride,0.5);goog.array.extend(midpoints,midpoint);offset=end}return midpoints};ol.geom.MultiLineString.prototype.getSimplifiedGeometryInternal=function(squaredTolerance){var simplifiedFlatCoordinates=[];var simplifiedEnds=[];simplifiedFlatCoordinates.length=ol.geom.flat.simplify.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,squaredTolerance,simplifiedFlatCoordinates,0,simplifiedEnds);var simplifiedMultiLineString=new ol.geom.MultiLineString(null);simplifiedMultiLineString.setFlatCoordinates(ol.geom.GeometryLayout.XY,simplifiedFlatCoordinates,simplifiedEnds);return simplifiedMultiLineString};ol.geom.MultiLineString.prototype.getType=function(){return ol.geom.GeometryType.MULTI_LINE_STRING};ol.geom.MultiLineString.prototype.intersectsExtent=function(extent){return ol.geom.flat.intersectsextent.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,extent)};ol.geom.MultiLineString.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(opt_layout,coordinates,2);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var ends=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,coordinates,this.stride,this.ends_);this.flatCoordinates.length=ends.length===0?0:ends[ends.length-1];this.changed()}};ol.geom.MultiLineString.prototype.setFlatCoordinates=function(layout,flatCoordinates,ends){if(goog.isNull(flatCoordinates)){goog.asserts.assert(!goog.isNull(ends)&&ends.length===0,"ends cannot be null and ends.length should be 0")}else{if(ends.length===0){goog.asserts.assert(flatCoordinates.length===0,"flatCoordinates should be an empty array")}else{goog.asserts.assert(flatCoordinates.length==ends[ends.length-1],"length of flatCoordinates array should match the last value of ends")}}this.setFlatCoordinatesInternal(layout,flatCoordinates);this.ends_=ends;this.changed()};ol.geom.MultiLineString.prototype.setLineStrings=function(lineStrings){var layout=ol.geom.GeometryLayout.XY;var flatCoordinates=[];var ends=[];var i,ii;for(i=0,ii=lineStrings.length;i<ii;++i){var lineString=lineStrings[i];if(i===0){layout=lineString.getLayout()}else{goog.asserts.assert(lineString.getLayout()==layout,"layout of lineString should match layout")}goog.array.extend(flatCoordinates,lineString.getFlatCoordinates());ends.push(flatCoordinates.length)}this.setFlatCoordinates(layout,flatCoordinates,ends)};goog.provide("ol.geom.MultiPoint");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.Point");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.math");ol.geom.MultiPoint=function(coordinates,opt_layout){goog.base(this);this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.MultiPoint,ol.geom.SimpleGeometry);ol.geom.MultiPoint.prototype.appendPoint=function(point){goog.asserts.assert(point.getLayout()==this.layout,"the layout of point should match layout");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=point.getFlatCoordinates().slice()}else{goog.array.extend(this.flatCoordinates,point.getFlatCoordinates())}this.changed()};ol.geom.MultiPoint.prototype.clone=function(){var multiPoint=new ol.geom.MultiPoint(null);multiPoint.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return multiPoint};ol.geom.MultiPoint.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}var flatCoordinates=this.flatCoordinates;var stride=this.stride;var i,ii,j;for(i=0,ii=flatCoordinates.length;i<ii;i+=stride){var squaredDistance=ol.math.squaredDistance(x,y,flatCoordinates[i],flatCoordinates[i+1]);if(squaredDistance<minSquaredDistance){minSquaredDistance=squaredDistance;for(j=0;j<stride;++j){closestPoint[j]=flatCoordinates[i+j]}closestPoint.length=stride}}return minSquaredDistance};ol.geom.MultiPoint.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.MultiPoint.prototype.getPoint=function(index){var n=goog.isNull(this.flatCoordinates)?0:this.flatCoordinates.length/this.stride;goog.asserts.assert(0<=index&&index<n,"index should be in between 0 and n");if(index<0||n<=index){return null}var point=new ol.geom.Point(null);point.setFlatCoordinates(this.layout,this.flatCoordinates.slice(index*this.stride,(index+1)*this.stride));return point};ol.geom.MultiPoint.prototype.getPoints=function(){var flatCoordinates=this.flatCoordinates;var layout=this.layout;var stride=this.stride;var points=[];var i,ii;for(i=0,ii=flatCoordinates.length;i<ii;i+=stride){var point=new ol.geom.Point(null);point.setFlatCoordinates(layout,flatCoordinates.slice(i,i+stride));points.push(point)}return points};ol.geom.MultiPoint.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POINT};ol.geom.MultiPoint.prototype.intersectsExtent=function(extent){var flatCoordinates=this.flatCoordinates;var stride=this.stride;var i,ii,x,y;for(i=0,ii=flatCoordinates.length;i<ii;i+=stride){x=flatCoordinates[i];y=flatCoordinates[i+1];if(ol.extent.containsXY(extent,x,y)){return true}}return false};ol.geom.MultiPoint.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(opt_layout,coordinates,1);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,coordinates,this.stride);this.changed()}};ol.geom.MultiPoint.prototype.setFlatCoordinates=function(layout,flatCoordinates){this.setFlatCoordinatesInternal(layout,flatCoordinates);this.changed()};goog.provide("ol.geom.flat.center");goog.require("ol.extent");ol.geom.flat.center.linearRingss=function(flatCoordinates,offset,endss,stride){var flatCenters=[];var i,ii;var extent=ol.extent.createEmpty();for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i];extent=ol.extent.createOrUpdateFromFlatCoordinates(flatCoordinates,offset,ends[0],stride);flatCenters.push((extent[0]+extent[2])/2,(extent[1]+extent[3])/2);offset=ends[ends.length-1]}return flatCenters};goog.provide("ol.geom.MultiPolygon");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.center");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interiorpoint");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.orient");goog.require("ol.geom.flat.simplify");ol.geom.MultiPolygon=function(coordinates,opt_layout){goog.base(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(coordinates,opt_layout)};goog.inherits(ol.geom.MultiPolygon,ol.geom.SimpleGeometry);ol.geom.MultiPolygon.prototype.appendPolygon=function(polygon){goog.asserts.assert(polygon.getLayout()==this.layout,"layout of polygon should match layout");var ends;if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=polygon.getFlatCoordinates().slice();ends=polygon.getEnds().slice();this.endss_.push()}else{var offset=this.flatCoordinates.length;goog.array.extend(this.flatCoordinates,polygon.getFlatCoordinates());ends=polygon.getEnds().slice();var i,ii;for(i=0,ii=ends.length;i<ii;++i){ends[i]+=offset}}this.endss_.push(ends);this.changed()};ol.geom.MultiPolygon.prototype.clone=function(){var multiPolygon=new ol.geom.MultiPolygon(null);var newEndss=(goog.object.unsafeClone(this.endss_));multiPolygon.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),newEndss);return multiPolygon};ol.geom.MultiPolygon.prototype.closestPointXY=function(x,y,closestPoint,minSquaredDistance){if(minSquaredDistance<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return minSquaredDistance}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,x,y,closestPoint,minSquaredDistance)};ol.geom.MultiPolygon.prototype.containsXY=function(x,y){return ol.geom.flat.contains.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,x,y)};ol.geom.MultiPolygon.prototype.getArea=function(){return ol.geom.flat.area.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getCoordinates=function(opt_right){var flatCoordinates;if(goog.isDef(opt_right)){flatCoordinates=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRingss(flatCoordinates,0,this.endss_,this.stride,opt_right)}else{flatCoordinates=this.flatCoordinates}return ol.geom.flat.inflate.coordinatesss(flatCoordinates,0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getEndss=function(){return this.endss_};ol.geom.MultiPolygon.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var flatCenters=ol.geom.flat.center.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,flatCenters);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};ol.geom.MultiPolygon.prototype.getInteriorPoints=function(){var interiorPoints=new ol.geom.MultiPoint(null);interiorPoints.setFlatCoordinates(ol.geom.GeometryLayout.XY,this.getFlatInteriorPoints().slice());return interiorPoints};ol.geom.MultiPolygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var flatCoordinates=this.flatCoordinates;if(ol.geom.flat.orient.linearRingssAreOriented(flatCoordinates,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=flatCoordinates}else{this.orientedFlatCoordinates_=flatCoordinates.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.MultiPolygon.prototype.getSimplifiedGeometryInternal=function(squaredTolerance){var simplifiedFlatCoordinates=[];var simplifiedEndss=[];simplifiedFlatCoordinates.length=ol.geom.flat.simplify.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(squaredTolerance),simplifiedFlatCoordinates,0,simplifiedEndss);var simplifiedMultiPolygon=new ol.geom.MultiPolygon(null);simplifiedMultiPolygon.setFlatCoordinates(ol.geom.GeometryLayout.XY,simplifiedFlatCoordinates,simplifiedEndss);return simplifiedMultiPolygon};ol.geom.MultiPolygon.prototype.getPolygon=function(index){goog.asserts.assert(0<=index&&index<this.endss_.length,"index should be in between 0 and the length of this.endss_");if(index<0||this.endss_.length<=index){return null}var offset;if(index===0){offset=0}else{var prevEnds=this.endss_[index-1];offset=prevEnds[prevEnds.length-1]}var ends=this.endss_[index].slice();var end=ends[ends.length-1];if(offset!==0){var i,ii;for(i=0,ii=ends.length;i<ii;++i){ends[i]-=offset}}var polygon=new ol.geom.Polygon(null);polygon.setFlatCoordinates(this.layout,this.flatCoordinates.slice(offset,end),ends);return polygon};ol.geom.MultiPolygon.prototype.getPolygons=function(){var layout=this.layout;var flatCoordinates=this.flatCoordinates;var endss=this.endss_;var polygons=[];var offset=0;var i,ii,j,jj;for(i=0,ii=endss.length;i<ii;++i){var ends=endss[i].slice();var end=ends[ends.length-1];if(offset!==0){for(j=0,jj=ends.length;j<jj;++j){ends[j]-=offset}}var polygon=new ol.geom.Polygon(null);polygon.setFlatCoordinates(layout,flatCoordinates.slice(offset,end),ends);polygons.push(polygon);offset=end}return polygons};ol.geom.MultiPolygon.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POLYGON};ol.geom.MultiPolygon.prototype.intersectsExtent=function(extent){return ol.geom.flat.intersectsextent.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,extent)};ol.geom.MultiPolygon.prototype.setCoordinates=function(coordinates,opt_layout){if(goog.isNull(coordinates)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.endss_)}else{this.setLayout(opt_layout,coordinates,3);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var endss=ol.geom.flat.deflate.coordinatesss(this.flatCoordinates,0,coordinates,this.stride,this.endss_);if(endss.length===0){this.flatCoordinates.length=0}else{var lastEnds=endss[endss.length-1];this.flatCoordinates.length=lastEnds.length===0?0:lastEnds[lastEnds.length-1]}this.changed()}};ol.geom.MultiPolygon.prototype.setFlatCoordinates=function(layout,flatCoordinates,endss){goog.asserts.assert(!goog.isNull(endss),"endss cannot be null");if(goog.isNull(flatCoordinates)||flatCoordinates.length===0){goog.asserts.assert(endss.length===0,"the length of endss should be 0")}else{goog.asserts.assert(endss.length>0,"endss cannot be an empty array");var ends=endss[endss.length-1];goog.asserts.assert(flatCoordinates.length==ends[ends.length-1],"the length of flatCoordinates should be the last value of ends")}this.setFlatCoordinatesInternal(layout,flatCoordinates);this.endss_=endss;this.changed()};ol.geom.MultiPolygon.prototype.setPolygons=function(polygons){var layout=ol.geom.GeometryLayout.XY;var flatCoordinates=[];var endss=[];var i,ii,ends;for(i=0,ii=polygons.length;i<ii;++i){var polygon=polygons[i];if(i===0){layout=polygon.getLayout()}else{goog.asserts.assert(polygon.getLayout()==layout,"layout of polygon should be layout")}var offset=flatCoordinates.length;ends=polygon.getEnds();var j,jj;for(j=0,jj=ends.length;j<jj;++j){ends[j]+=offset}goog.array.extend(flatCoordinates,polygon.getFlatCoordinates());endss.push(ends)}this.setFlatCoordinates(layout,flatCoordinates,endss)};goog.provide("ol.renderer.vector");goog.require("goog.asserts");goog.require("ol.geom.Circle");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.render.IReplayGroup");goog.require("ol.style.ImageState");goog.require("ol.style.Style");ol.renderer.vector.defaultOrder=function(feature1,feature2){return goog.getUid(feature1)-goog.getUid(feature2)};ol.renderer.vector.getSquaredTolerance=function(resolution,pixelRatio){var tolerance=ol.renderer.vector.getTolerance(resolution,pixelRatio);return tolerance*tolerance};ol.renderer.vector.getTolerance=function(resolution,pixelRatio){return ol.SIMPLIFY_TOLERANCE*resolution/pixelRatio};ol.renderer.vector.renderCircleGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.Circle,"geometry should be an ol.geom.Circle");var fillStyle=style.getFill();var strokeStyle=style.getStroke();if(!goog.isNull(fillStyle)||!goog.isNull(strokeStyle)){var polygonReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.POLYGON);polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle);polygonReplay.drawCircleGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);textReplay.drawText(geometry.getCenter(),0,2,2,geometry,feature)}};ol.renderer.vector.renderFeature=function(replayGroup,feature,style,squaredTolerance,listener,thisArg){var loading=false;var imageStyle,imageState;imageStyle=style.getImage();if(!goog.isNull(imageStyle)){imageState=imageStyle.getImageState();if(imageState==ol.style.ImageState.LOADED||imageState==ol.style.ImageState.ERROR){imageStyle.unlistenImageChange(listener,thisArg)}else{if(imageState==ol.style.ImageState.IDLE){imageStyle.load()}imageState=imageStyle.getImageState();goog.asserts.assert(imageState==ol.style.ImageState.LOADING,"imageState should be LOADING");imageStyle.listenImageChange(listener,thisArg);loading=true}}ol.renderer.vector.renderFeature_(replayGroup,feature,style,squaredTolerance);return loading};ol.renderer.vector.renderFeature_=function(replayGroup,feature,style,squaredTolerance){var geometry=style.getGeometryFunction()(feature);if(!goog.isDefAndNotNull(geometry)){return}var simplifiedGeometry=geometry.getSimplifiedGeometry(squaredTolerance);var geometryRenderer=ol.renderer.vector.GEOMETRY_RENDERERS_[simplifiedGeometry.getType()];goog.asserts.assert(goog.isDef(geometryRenderer),"geometryRenderer should be defined");geometryRenderer(replayGroup,simplifiedGeometry,style,feature)};ol.renderer.vector.renderGeometryCollectionGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");var geometries=geometry.getGeometriesArray();var i,ii;for(i=0,ii=geometries.length;i<ii;++i){var geometryRenderer=ol.renderer.vector.GEOMETRY_RENDERERS_[geometries[i].getType()];goog.asserts.assert(goog.isDef(geometryRenderer),"geometryRenderer should be defined");geometryRenderer(replayGroup,geometries[i],style,feature)}};ol.renderer.vector.renderLineStringGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.LineString,"geometry should be an ol.geom.LineString");var strokeStyle=style.getStroke();if(!goog.isNull(strokeStyle)){var lineStringReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.LINE_STRING);lineStringReplay.setFillStrokeStyle(null,strokeStyle);lineStringReplay.drawLineStringGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);textReplay.drawText(geometry.getFlatMidpoint(),0,2,2,geometry,feature)}};ol.renderer.vector.renderMultiLineStringGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");var strokeStyle=style.getStroke();if(!goog.isNull(strokeStyle)){var lineStringReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.LINE_STRING);lineStringReplay.setFillStrokeStyle(null,strokeStyle);lineStringReplay.drawMultiLineStringGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);var flatMidpointCoordinates=geometry.getFlatMidpoints();textReplay.drawText(flatMidpointCoordinates,0,flatMidpointCoordinates.length,2,geometry,feature)}};ol.renderer.vector.renderMultiPolygonGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var fillStyle=style.getFill();var strokeStyle=style.getStroke();if(!goog.isNull(strokeStyle)||!goog.isNull(fillStyle)){var polygonReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.POLYGON);polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle);polygonReplay.drawMultiPolygonGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);var flatInteriorPointCoordinates=geometry.getFlatInteriorPoints();textReplay.drawText(flatInteriorPointCoordinates,0,flatInteriorPointCoordinates.length,2,geometry,feature)}};ol.renderer.vector.renderPointGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.Point,"geometry should be an ol.geom.Point");var imageStyle=style.getImage();if(!goog.isNull(imageStyle)){if(imageStyle.getImageState()!=ol.style.ImageState.LOADED){return}var imageReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.IMAGE);imageReplay.setImageStyle(imageStyle);imageReplay.drawPointGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);textReplay.drawText(geometry.getCoordinates(),0,2,2,geometry,feature)}};ol.renderer.vector.renderMultiPointGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.MultiPoint,"geometry should be an ol.goem.MultiPoint");var imageStyle=style.getImage();if(!goog.isNull(imageStyle)){if(imageStyle.getImageState()!=ol.style.ImageState.LOADED){return}var imageReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.IMAGE);imageReplay.setImageStyle(imageStyle);imageReplay.drawMultiPointGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);var flatCoordinates=geometry.getFlatCoordinates();textReplay.drawText(flatCoordinates,0,flatCoordinates.length,geometry.getStride(),geometry,feature)}};ol.renderer.vector.renderPolygonGeometry_=function(replayGroup,geometry,style,feature){goog.asserts.assertInstanceof(geometry,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var fillStyle=style.getFill();var strokeStyle=style.getStroke();if(!goog.isNull(fillStyle)||!goog.isNull(strokeStyle)){var polygonReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.POLYGON);polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle);polygonReplay.drawPolygonGeometry(geometry,feature)}var textStyle=style.getText();if(!goog.isNull(textStyle)){var textReplay=replayGroup.getReplay(style.getZIndex(),ol.render.ReplayType.TEXT);textReplay.setTextStyle(textStyle);textReplay.drawText(geometry.getFlatInteriorPoint(),0,2,2,geometry,feature)}};ol.renderer.vector.GEOMETRY_RENDERERS_={Point:ol.renderer.vector.renderPointGeometry_,LineString:ol.renderer.vector.renderLineStringGeometry_,Polygon:ol.renderer.vector.renderPolygonGeometry_,MultiPoint:ol.renderer.vector.renderMultiPointGeometry_,MultiLineString:ol.renderer.vector.renderMultiLineStringGeometry_,MultiPolygon:ol.renderer.vector.renderMultiPolygonGeometry_,GeometryCollection:ol.renderer.vector.renderGeometryCollectionGeometry_,Circle:ol.renderer.vector.renderCircleGeometry_};goog.provide("ol.ImageCanvas");goog.require("goog.asserts");goog.require("ol.ImageBase");goog.require("ol.ImageState");ol.ImageCanvas=function(extent,resolution,pixelRatio,attributions,canvas,opt_loader){this.loader_=goog.isDef(opt_loader)?opt_loader:null;var state=goog.isDef(opt_loader)?ol.ImageState.IDLE:ol.ImageState.LOADED;goog.base(this,extent,resolution,pixelRatio,state,attributions);this.canvas_=canvas;this.error_=null};goog.inherits(ol.ImageCanvas,ol.ImageBase);ol.ImageCanvas.prototype.getError=function(){return this.error_};ol.ImageCanvas.prototype.handleLoad_=function(err){if(err){this.error_=err;this.state=ol.ImageState.ERROR}else{this.state=ol.ImageState.LOADED}this.changed()};ol.ImageCanvas.prototype.load=function(){if(this.state==ol.ImageState.IDLE){goog.asserts.assert(!goog.isNull(this.loader_));this.state=ol.ImageState.LOADING;this.changed();this.loader_(goog.bind(this.handleLoad_,this))}};ol.ImageCanvas.prototype.getImage=function(opt_context){return this.canvas_};ol.ImageCanvasLoader;goog.provide("ol.source.Image");goog.provide("ol.source.ImageEvent");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events.Event");goog.require("ol.Attribution");goog.require("ol.Extent");goog.require("ol.ImageState");goog.require("ol.array");goog.require("ol.source.Source");ol.source.ImageOptions;ol.source.Image=function(options){goog.base(this,{attributions:options.attributions,extent:options.extent,logo:options.logo,projection:options.projection,state:options.state});this.resolutions_=goog.isDef(options.resolutions)?options.resolutions:null;goog.asserts.assert(goog.isNull(this.resolutions_)||goog.array.isSorted(this.resolutions_,function(a,b){return b-a},true),"resolutions must be null or sorted in descending order")};goog.inherits(ol.source.Image,ol.source.Source);ol.source.Image.prototype.getResolutions=function(){return this.resolutions_};ol.source.Image.prototype.findNearestResolution=function(resolution){if(!goog.isNull(this.resolutions_)){var idx=ol.array.linearFindNearest(this.resolutions_,resolution,0);resolution=this.resolutions_[idx]}return resolution};ol.source.Image.prototype.getImage=goog.abstractMethod;ol.source.Image.prototype.handleImageChange=function(event){var image=(event.target);switch(image.getState()){case ol.ImageState.LOADING:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADSTART,image));break;case ol.ImageState.LOADED:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADEND,image));break;case ol.ImageState.ERROR:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADERROR,image));break}};ol.source.Image.defaultImageLoadFunction=function(image,src){image.getImage().src=src};ol.source.ImageEvent=function(type,image){goog.base(this,type);this.image=image};goog.inherits(ol.source.ImageEvent,goog.events.Event);ol.source.ImageEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};goog.provide("ol.source.ImageCanvas");goog.require("ol.CanvasFunctionType");goog.require("ol.ImageCanvas");goog.require("ol.extent");goog.require("ol.source.Image");ol.source.ImageCanvas=function(options){goog.base(this,{attributions:options.attributions,logo:options.logo,projection:options.projection,resolutions:options.resolutions,state:goog.isDef(options.state)?(options.state):undefined});this.canvasFunction_=options.canvasFunction;this.canvas_=null;this.renderedRevision_=0;this.ratio_=goog.isDef(options.ratio)?options.ratio:1.5};goog.inherits(ol.source.ImageCanvas,ol.source.Image);ol.source.ImageCanvas.prototype.getImage=function(extent,resolution,pixelRatio,projection){resolution=this.findNearestResolution(resolution);var canvas=this.canvas_;if(!goog.isNull(canvas)&&this.renderedRevision_==this.getRevision()&&canvas.getResolution()==resolution&&canvas.getPixelRatio()==pixelRatio&&ol.extent.containsExtent(canvas.getExtent(),extent)){return canvas}extent=extent.slice();ol.extent.scaleFromCenter(extent,this.ratio_);var width=ol.extent.getWidth(extent)/resolution;var height=ol.extent.getHeight(extent)/resolution;var size=[width*pixelRatio,height*pixelRatio];var canvasElement=this.canvasFunction_(extent,resolution,pixelRatio,size,projection);if(!goog.isNull(canvasElement)){canvas=new ol.ImageCanvas(extent,resolution,pixelRatio,this.getAttributions(),canvasElement)}this.canvas_=canvas;this.renderedRevision_=this.getRevision();return canvas};goog.provide("ol.Feature");goog.provide("ol.FeatureStyleFunction");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("ol.Object");goog.require("ol.geom.Geometry");goog.require("ol.style.Style");ol.Feature=function(opt_geometryOrProperties){goog.base(this);this.id_=undefined;this.geometryName_="geometry";this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,false,this);if(goog.isDef(opt_geometryOrProperties)){if(opt_geometryOrProperties instanceof ol.geom.Geometry||goog.isNull(opt_geometryOrProperties)){var geometry=(opt_geometryOrProperties);this.setGeometry(geometry)}else{goog.asserts.assert(goog.isObject(opt_geometryOrProperties),"opt_geometryOrProperties should be an Object");var properties=(opt_geometryOrProperties);this.setProperties(properties)}}};goog.inherits(ol.Feature,ol.Object);ol.Feature.prototype.clone=function(){var clone=new ol.Feature(this.getProperties());clone.setGeometryName(this.getGeometryName());var geometry=this.getGeometry();if(goog.isDefAndNotNull(geometry)){clone.setGeometry(geometry.clone())}var style=this.getStyle();if(!goog.isNull(style)){clone.setStyle(style)}return clone};ol.Feature.prototype.getGeometry=function(){return(this.get(this.geometryName_))};ol.Feature.prototype.getId=function(){return this.id_};ol.Feature.prototype.getGeometryName=function(){return this.geometryName_};ol.Feature.prototype.getStyle=function(){return this.style_};ol.Feature.prototype.getStyleFunction=function(){return this.styleFunction_};ol.Feature.prototype.handleGeometryChange_=function(){this.changed()};ol.Feature.prototype.handleGeometryChanged_=function(){if(!goog.isNull(this.geometryChangeKey_)){goog.events.unlistenByKey(this.geometryChangeKey_);this.geometryChangeKey_=null}var geometry=this.getGeometry();if(goog.isDefAndNotNull(geometry)){this.geometryChangeKey_=goog.events.listen(geometry,goog.events.EventType.CHANGE,this.handleGeometryChange_,false,this)}this.changed()};ol.Feature.prototype.setGeometry=function(geometry){this.set(this.geometryName_,geometry)};ol.Feature.prototype.setStyle=function(style){this.style_=style;this.styleFunction_=goog.isNull(style)?undefined:ol.Feature.createStyleFunction(style);this.changed()};ol.Feature.prototype.setId=function(id){this.id_=id;this.changed()};ol.Feature.prototype.setGeometryName=function(name){goog.events.unlisten(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,false,this);this.geometryName_=name;goog.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,false,this);this.handleGeometryChanged_()};ol.FeatureStyleFunction;ol.Feature.createStyleFunction=function(obj){var styleFunction;if(goog.isFunction(obj)){styleFunction=obj}else{var styles;if(goog.isArray(obj)){styles=obj}else{goog.asserts.assertInstanceof(obj,ol.style.Style,"obj should be an ol.style.Style");styles=[obj]}styleFunction=goog.functions.constant(styles)}return styleFunction};goog.provide("goog.net.EventType");goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.provide("goog.Thenable");goog.Thenable=function(){};goog.Thenable.prototype.then=function(opt_onFulfilled,opt_onRejected,opt_context){};goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable";goog.Thenable.addImplementation=function(ctor){goog.exportProperty(ctor.prototype,"then",ctor.prototype.then);if(COMPILED){ctor.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=true}else{ctor.prototype.$goog_Thenable=true}};goog.Thenable.isImplementedBy=function(object){if(!object){return false}try{if(COMPILED){return !!object[goog.Thenable.IMPLEMENTED_BY_PROP]}return !!object.$goog_Thenable}catch(e){return false}};goog.provide("goog.async.FreeList");goog.async.FreeList=goog.defineClass(null,{constructor:function(create,reset,limit){this.limit_=limit;this.create_=create;this.reset_=reset;this.occupants_=0;this.head_=null},get:function(){var item;if(this.occupants_>0){this.occupants_--;item=this.head_;this.head_=item.next;item.next=null}else{item=this.create_()}return item},put:function(item){this.reset_(item);if(this.occupants_<this.limit_){this.occupants_++;item.next=this.head_;this.head_=item}},occupants:function(){return this.occupants_}});goog.provide("goog.async.WorkItem");goog.provide("goog.async.WorkQueue");goog.require("goog.asserts");goog.require("goog.async.FreeList");goog.async.WorkQueue=function(){this.workHead_=null;this.workTail_=null};goog.define("goog.async.WorkQueue.DEFAULT_MAX_UNUSED",100);goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem()},function(item){item.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED);goog.async.WorkQueue.prototype.add=function(fn,scope){var item=this.getUnusedItem_();item.set(fn,scope);if(this.workTail_){this.workTail_.next=item;this.workTail_=item}else{goog.asserts.assert(!this.workHead_);this.workHead_=item;this.workTail_=item}};goog.async.WorkQueue.prototype.remove=function(){var item=null;if(this.workHead_){item=this.workHead_;this.workHead_=this.workHead_.next;if(!this.workHead_){this.workTail_=null}item.next=null}return item};goog.async.WorkQueue.prototype.returnUnused=function(item){goog.async.WorkQueue.freelist_.put(item)};goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()};goog.async.WorkItem=function(){this.fn=null;this.scope=null;this.next=null};goog.async.WorkItem.prototype.set=function(fn,scope){this.fn=fn;this.scope=scope;this.next=null};goog.async.WorkItem.prototype.reset=function(){this.fn=null;this.scope=null;this.next=null};goog.provide("goog.testing.watchers");goog.testing.watchers.resetWatchers_=[];goog.testing.watchers.signalClockReset=function(){var watchers=goog.testing.watchers.resetWatchers_;for(var i=0;i<watchers.length;i++){goog.testing.watchers.resetWatchers_[i]()}};goog.testing.watchers.watchClockReset=function(fn){goog.testing.watchers.resetWatchers_.push(fn)};goog.provide("goog.async.run");goog.require("goog.async.WorkQueue");goog.require("goog.async.nextTick");goog.require("goog.async.throwException");goog.require("goog.testing.watchers");goog.async.run=function(callback,opt_context){if(!goog.async.run.schedule_){goog.async.run.initializeRunner_()}if(!goog.async.run.workQueueScheduled_){goog.async.run.schedule_();goog.async.run.workQueueScheduled_=true}goog.async.run.workQueue_.add(callback,opt_context)};goog.async.run.initializeRunner_=function(){if(goog.global.Promise&&goog.global.Promise.resolve){var promise=goog.global.Promise.resolve(undefined);goog.async.run.schedule_=function(){promise.then(goog.async.run.processWorkQueue)}}else{goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}}};goog.async.run.forceNextTick=function(opt_realSetTimeout){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue);if(opt_realSetTimeout){opt_realSetTimeout(goog.async.run.processWorkQueue)}}};goog.async.run.schedule_;goog.async.run.workQueueScheduled_=false;goog.async.run.workQueue_=new goog.async.WorkQueue();if(goog.DEBUG){goog.async.run.resetQueue_=function(){goog.async.run.workQueueScheduled_=false;goog.async.run.workQueue_=new goog.async.WorkQueue()};goog.testing.watchers.watchClockReset(goog.async.run.resetQueue_)}goog.async.run.processWorkQueue=function(){var item=null;while(item=goog.async.run.workQueue_.remove()){try{item.fn.call(item.scope)}catch(e){goog.async.throwException(e)}goog.async.run.workQueue_.returnUnused(item)}goog.async.run.workQueueScheduled_=false};goog.provide("goog.promise.Resolver");goog.promise.Resolver=function(){};goog.promise.Resolver.prototype.promise;goog.promise.Resolver.prototype.resolve;goog.promise.Resolver.prototype.reject;goog.provide("goog.Promise");goog.require("goog.Thenable");goog.require("goog.asserts");goog.require("goog.async.FreeList");goog.require("goog.async.run");goog.require("goog.async.throwException");goog.require("goog.debug.Error");goog.require("goog.promise.Resolver");goog.Promise=function(resolver,opt_context){this.state_=goog.Promise.State_.PENDING;this.result_=undefined;this.parent_=null;this.callbackEntries_=null;this.callbackEntriesTail_=null;this.executing_=false;if(goog.Promise.UNHANDLED_REJECTION_DELAY>0){this.unhandledRejectionId_=0}else{if(goog.Promise.UNHANDLED_REJECTION_DELAY==0){this.hadUnhandledRejection_=false}}if(goog.Promise.LONG_STACK_TRACES){this.stack_=[];this.addStackTrace_(new Error("created"));this.currentStep_=0}if(resolver!=goog.nullFunction){try{var self=this;resolver.call(opt_context,function(value){self.resolve_(goog.Promise.State_.FULFILLED,value)},function(reason){if(goog.DEBUG&&!(reason instanceof goog.Promise.CancellationError)){try{if(reason instanceof Error){throw reason}else{throw new Error("Promise rejected.")}}catch(e){}}self.resolve_(goog.Promise.State_.REJECTED,reason)})}catch(e){this.resolve_(goog.Promise.State_.REJECTED,e)}}};goog.define("goog.Promise.LONG_STACK_TRACES",false);goog.define("goog.Promise.UNHANDLED_REJECTION_DELAY",0);goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3};goog.Promise.CallbackEntry_=function(){this.child=null;this.onFulfilled=null;this.onRejected=null;this.context=null;this.next=null;this.always=false};goog.Promise.CallbackEntry_.prototype.reset=function(){this.child=null;this.onFulfilled=null;this.onRejected=null;this.context=null;this.always=false};goog.define("goog.Promise.DEFAULT_MAX_UNUSED",100);goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_()},function(item){item.reset()},goog.Promise.DEFAULT_MAX_UNUSED);goog.Promise.getCallbackEntry_=function(onFulfilled,onRejected,context){var entry=goog.Promise.freelist_.get();entry.onFulfilled=onFulfilled;entry.onRejected=onRejected;entry.context=context;return entry};goog.Promise.returnEntry_=function(entry){goog.Promise.freelist_.put(entry)};goog.Promise.resolve=function(opt_value){if(opt_value instanceof goog.Promise){return opt_value}var promise=new goog.Promise(goog.nullFunction);promise.resolve_(goog.Promise.State_.FULFILLED,opt_value);return promise};goog.Promise.reject=function(opt_reason){return new goog.Promise(function(resolve,reject){reject(opt_reason)})};goog.Promise.resolveThen_=function(value,onFulfilled,onRejected){var isThenable=goog.Promise.maybeThen_(value,onFulfilled,onRejected,null);if(!isThenable){goog.async.run(goog.partial(onFulfilled,value))}};goog.Promise.race=function(promises){return new goog.Promise(function(resolve,reject){if(!promises.length){resolve(undefined)}for(var i=0,promise;i<promises.length;i++){promise=promises[i];goog.Promise.resolveThen_(promise,resolve,reject)}})};goog.Promise.all=function(promises){return new goog.Promise(function(resolve,reject){var toFulfill=promises.length;var values=[];if(!toFulfill){resolve(values);return}var onFulfill=function(index,value){toFulfill--;values[index]=value;if(toFulfill==0){resolve(values)}};var onReject=function(reason){reject(reason)};for(var i=0,promise;i<promises.length;i++){promise=promises[i];goog.Promise.resolveThen_(promise,goog.partial(onFulfill,i),onReject)}})};goog.Promise.allSettled=function(promises){return new goog.Promise(function(resolve,reject){var toSettle=promises.length;var results=[];if(!toSettle){resolve(results);return}var onSettled=function(index,fulfilled,result){toSettle--;results[index]=fulfilled?{fulfilled:true,value:result}:{fulfilled:false,reason:result};if(toSettle==0){resolve(results)}};for(var i=0,promise;i<promises.length;i++){promise=promises[i];goog.Promise.resolveThen_(promise,goog.partial(onSettled,i,true),goog.partial(onSettled,i,false))}})};goog.Promise.firstFulfilled=function(promises){return new goog.Promise(function(resolve,reject){var toReject=promises.length;var reasons=[];if(!toReject){resolve(undefined);return}var onFulfill=function(value){resolve(value)};var onReject=function(index,reason){toReject--;reasons[index]=reason;if(toReject==0){reject(reasons)}};for(var i=0,promise;i<promises.length;i++){promise=promises[i];goog.Promise.resolveThen_(promise,onFulfill,goog.partial(onReject,i))}})};goog.Promise.withResolver=function(){var resolve,reject;var promise=new goog.Promise(function(rs,rj){resolve=rs;reject=rj});return new goog.Promise.Resolver_(promise,resolve,reject)};goog.Promise.prototype.then=function(opt_onFulfilled,opt_onRejected,opt_context){if(opt_onFulfilled!=null){goog.asserts.assertFunction(opt_onFulfilled,"opt_onFulfilled should be a function.")}if(opt_onRejected!=null){goog.asserts.assertFunction(opt_onRejected,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?")}if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("then"))}return this.addChildPromise_(goog.isFunction(opt_onFulfilled)?opt_onFulfilled:null,goog.isFunction(opt_onRejected)?opt_onRejected:null,opt_context)};goog.Thenable.addImplementation(goog.Promise);goog.Promise.prototype.thenVoid=function(opt_onFulfilled,opt_onRejected,opt_context){if(opt_onFulfilled!=null){goog.asserts.assertFunction(opt_onFulfilled,"opt_onFulfilled should be a function.")}if(opt_onRejected!=null){goog.asserts.assertFunction(opt_onRejected,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?")}if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("then"))}this.addCallbackEntry_(goog.Promise.getCallbackEntry_(opt_onFulfilled||goog.nullFunction,opt_onRejected||null,opt_context))};goog.Promise.prototype.thenAlways=function(onSettled,opt_context){if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("thenAlways"))}var entry=goog.Promise.getCallbackEntry_(onSettled,onSettled,opt_context);entry.always=true;this.addCallbackEntry_(entry);return this};goog.Promise.prototype.thenCatch=function(onRejected,opt_context){if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("thenCatch"))}return this.addChildPromise_(null,onRejected,opt_context)};goog.Promise.prototype.cancel=function(opt_message){if(this.state_==goog.Promise.State_.PENDING){goog.async.run(function(){var err=new goog.Promise.CancellationError(opt_message);this.cancelInternal_(err)},this)}};goog.Promise.prototype.cancelInternal_=function(err){if(this.state_==goog.Promise.State_.PENDING){if(this.parent_){this.parent_.cancelChild_(this,err);this.parent_=null}else{this.resolve_(goog.Promise.State_.REJECTED,err)}}};goog.Promise.prototype.cancelChild_=function(childPromise,err){if(!this.callbackEntries_){return}var childCount=0;var childEntry=null;var beforeChildEntry=null;for(var entry=this.callbackEntries_;entry;entry=entry.next){if(!entry.always){childCount++;if(entry.child==childPromise){childEntry=entry}if(childEntry&&childCount>1){break}}if(!childEntry){beforeChildEntry=entry}}if(childEntry){if(this.state_==goog.Promise.State_.PENDING&&childCount==1){this.cancelInternal_(err)}else{if(beforeChildEntry){this.removeEntryAfter_(beforeChildEntry)}else{this.popEntry_()}this.executeCallback_(childEntry,goog.Promise.State_.REJECTED,err)}}};goog.Promise.prototype.addCallbackEntry_=function(callbackEntry){if(!this.hasEntry_()&&(this.state_==goog.Promise.State_.FULFILLED||this.state_==goog.Promise.State_.REJECTED)){this.scheduleCallbacks_()}this.queueEntry_(callbackEntry)};goog.Promise.prototype.addChildPromise_=function(onFulfilled,onRejected,opt_context){var callbackEntry=goog.Promise.getCallbackEntry_(null,null,null);callbackEntry.child=new goog.Promise(function(resolve,reject){callbackEntry.onFulfilled=onFulfilled?function(value){try{var result=onFulfilled.call(opt_context,value);resolve(result)}catch(err){reject(err)}}:resolve;callbackEntry.onRejected=onRejected?function(reason){try{var result=onRejected.call(opt_context,reason);if(!goog.isDef(result)&&reason instanceof goog.Promise.CancellationError){reject(reason)}else{resolve(result)}}catch(err){reject(err)}}:reject});callbackEntry.child.parent_=this;this.addCallbackEntry_(callbackEntry);return callbackEntry.child};goog.Promise.prototype.unblockAndFulfill_=function(value){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.FULFILLED,value)};goog.Promise.prototype.unblockAndReject_=function(reason){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.REJECTED,reason)};goog.Promise.prototype.resolve_=function(state,x){if(this.state_!=goog.Promise.State_.PENDING){return}if(this==x){state=goog.Promise.State_.REJECTED;x=new TypeError("Promise cannot resolve to itself")}this.state_=goog.Promise.State_.BLOCKED;var isThenable=goog.Promise.maybeThen_(x,this.unblockAndFulfill_,this.unblockAndReject_,this);if(isThenable){return}this.result_=x;this.state_=state;this.parent_=null;this.scheduleCallbacks_();if(state==goog.Promise.State_.REJECTED&&!(x instanceof goog.Promise.CancellationError)){goog.Promise.addUnhandledRejection_(this,x)}};goog.Promise.maybeThen_=function(value,onFulfilled,onRejected,context){if(value instanceof goog.Promise){value.thenVoid(onFulfilled,onRejected,context);return true}else{if(goog.Thenable.isImplementedBy(value)){value=(value);value.then(onFulfilled,onRejected,context);return true}else{if(goog.isObject(value)){try{var then=value.then;if(goog.isFunction(then)){goog.Promise.tryThen_(value,then,onFulfilled,onRejected,context);return true}}catch(e){onRejected.call(context,e);return true}}}}return false};goog.Promise.tryThen_=function(thenable,then,onFulfilled,onRejected,context){var called=false;var resolve=function(value){if(!called){called=true;onFulfilled.call(context,value)}};var reject=function(reason){if(!called){called=true;onRejected.call(context,reason)}};try{then.call(thenable,resolve,reject)}catch(e){reject(e)}};goog.Promise.prototype.scheduleCallbacks_=function(){if(!this.executing_){this.executing_=true;goog.async.run(this.executeCallbacks_,this)}};goog.Promise.prototype.hasEntry_=function(){return !!this.callbackEntries_};goog.Promise.prototype.queueEntry_=function(entry){goog.asserts.assert(entry.onFulfilled!=null);if(this.callbackEntriesTail_){this.callbackEntriesTail_.next=entry;this.callbackEntriesTail_=entry}else{this.callbackEntries_=entry;this.callbackEntriesTail_=entry}};goog.Promise.prototype.popEntry_=function(){var entry=null;if(this.callbackEntries_){entry=this.callbackEntries_;this.callbackEntries_=entry.next;entry.next=null}if(!this.callbackEntries_){this.callbackEntriesTail_=null}if(entry!=null){goog.asserts.assert(entry.onFulfilled!=null)}return entry};goog.Promise.prototype.removeEntryAfter_=function(previous){goog.asserts.assert(this.callbackEntries_);goog.asserts.assert(previous!=null);if(previous.next==this.callbackEntriesTail_){this.callbackEntriesTail_=previous}previous.next=previous.next.next};goog.Promise.prototype.executeCallbacks_=function(){var entry=null;while(entry=this.popEntry_()){if(goog.Promise.LONG_STACK_TRACES){this.currentStep_++}this.executeCallback_(entry,this.state_,this.result_)}this.executing_=false};goog.Promise.prototype.executeCallback_=function(callbackEntry,state,result){if(state==goog.Promise.State_.REJECTED&&callbackEntry.onRejected&&!callbackEntry.always){this.removeUnhandledRejection_()}if(callbackEntry.child){callbackEntry.child.parent_=null;goog.Promise.invokeCallback_(callbackEntry,state,result)}else{try{callbackEntry.always?callbackEntry.onFulfilled.call(callbackEntry.context):goog.Promise.invokeCallback_(callbackEntry,state,result)}catch(err){goog.Promise.handleRejection_.call(null,err)}}goog.Promise.returnEntry_(callbackEntry)};goog.Promise.invokeCallback_=function(callbackEntry,state,result){if(state==goog.Promise.State_.FULFILLED){callbackEntry.onFulfilled.call(callbackEntry.context,result)}else{if(callbackEntry.onRejected){callbackEntry.onRejected.call(callbackEntry.context,result)}}};goog.Promise.prototype.addStackTrace_=function(err){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(err.stack)){var trace=err.stack.split("\n",4)[3];var message=err.message;message+=Array(11-message.length).join(" ");this.stack_.push(message+trace)}};goog.Promise.prototype.appendLongStack_=function(err){if(goog.Promise.LONG_STACK_TRACES&&err&&goog.isString(err.stack)&&this.stack_.length){var longTrace=["Promise trace:"];for(var promise=this;promise;promise=promise.parent_){for(var i=this.currentStep_;i>=0;i--){longTrace.push(promise.stack_[i])}longTrace.push("Value: ["+(promise.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(promise.result_)+">")}err.stack+="\n\n"+longTrace.join("\n")}};goog.Promise.prototype.removeUnhandledRejection_=function(){if(goog.Promise.UNHANDLED_REJECTION_DELAY>0){for(var p=this;p&&p.unhandledRejectionId_;p=p.parent_){goog.global.clearTimeout(p.unhandledRejectionId_);p.unhandledRejectionId_=0}}else{if(goog.Promise.UNHANDLED_REJECTION_DELAY==0){for(var p=this;p&&p.hadUnhandledRejection_;p=p.parent_){p.hadUnhandledRejection_=false}}}};goog.Promise.addUnhandledRejection_=function(promise,reason){if(goog.Promise.UNHANDLED_REJECTION_DELAY>0){promise.unhandledRejectionId_=goog.global.setTimeout(function(){promise.appendLongStack_(reason);goog.Promise.handleRejection_.call(null,reason)},goog.Promise.UNHANDLED_REJECTION_DELAY)}else{if(goog.Promise.UNHANDLED_REJECTION_DELAY==0){promise.hadUnhandledRejection_=true;goog.async.run(function(){if(promise.hadUnhandledRejection_){promise.appendLongStack_(reason);goog.Promise.handleRejection_.call(null,reason)}})}}};goog.Promise.handleRejection_=goog.async.throwException;goog.Promise.setUnhandledRejectionHandler=function(handler){goog.Promise.handleRejection_=handler};goog.Promise.CancellationError=function(opt_message){goog.Promise.CancellationError.base(this,"constructor",opt_message)};goog.inherits(goog.Promise.CancellationError,goog.debug.Error);goog.Promise.CancellationError.prototype.name="cancel";goog.Promise.Resolver_=function(promise,resolve,reject){this.promise=promise;this.resolve=resolve;this.reject=reject};goog.provide("goog.Timer");goog.require("goog.Promise");goog.require("goog.events.EventTarget");goog.Timer=function(opt_interval,opt_timerObject){goog.events.EventTarget.call(this);this.interval_=opt_interval||1;this.timerObject_=opt_timerObject||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.INVALID_TIMEOUT_ID_=-1;goog.Timer.prototype.enabled=false;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=0.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};goog.Timer.prototype.setInterval=function(interval){this.interval_=interval;if(this.timer_&&this.enabled){this.stop();this.start()}else{if(this.timer_){this.stop()}}};goog.Timer.prototype.tick_=function(){if(this.enabled){var elapsed=goog.now()-this.last_;if(elapsed>0&&elapsed<this.interval_*goog.Timer.intervalScale){this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-elapsed);return}if(this.timer_){this.timerObject_.clearTimeout(this.timer_);this.timer_=null}this.dispatchTick();if(this.enabled){this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_);this.last_=goog.now()}}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=true;if(!this.timer_){this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_);this.last_=goog.now()}};goog.Timer.prototype.stop=function(){this.enabled=false;if(this.timer_){this.timerObject_.clearTimeout(this.timer_);this.timer_=null}};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";goog.Timer.callOnce=function(listener,opt_delay,opt_handler){if(goog.isFunction(listener)){if(opt_handler){listener=goog.bind(listener,opt_handler)}}else{if(listener&&typeof listener.handleEvent=="function"){listener=goog.bind(listener.handleEvent,listener)}else{throw Error("Invalid listener argument")}}if(opt_delay>goog.Timer.MAX_TIMEOUT_){return goog.Timer.INVALID_TIMEOUT_ID_}else{return goog.Timer.defaultTimerObject.setTimeout(listener,opt_delay||0)}};goog.Timer.clear=function(timerId){goog.Timer.defaultTimerObject.clearTimeout(timerId)};goog.Timer.promise=function(delay,opt_result){var timerKey=null;return new goog.Promise(function(resolve,reject){timerKey=goog.Timer.callOnce(function(){resolve(opt_result)},delay);if(timerKey==goog.Timer.INVALID_TIMEOUT_ID_){reject(new Error("Failed to schedule timer."))}}).thenCatch(function(error){goog.Timer.clear(timerKey);throw error})};goog.provide("goog.json");goog.provide("goog.json.Replacer");goog.provide("goog.json.Reviver");goog.provide("goog.json.Serializer");goog.define("goog.json.USE_NATIVE_JSON",false);goog.json.isValid=function(s){if(/^\s*$/.test(s)){return false}var backslashesRe=/\\["\\\/bfnrtu]/g;var simpleValuesRe=/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var openBracketsRe=/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g;var remainderRe=/^[\],:{}\s\u2028\u2029]*$/;return remainderRe.test(s.replace(backslashesRe,"@").replace(simpleValuesRe,"]").replace(openBracketsRe,""))};goog.json.parse=goog.json.USE_NATIVE_JSON?(goog.global.JSON["parse"]):function(s){var o=String(s);if(goog.json.isValid(o)){try{return(eval("("+o+")"))}catch(ex){}}throw Error("Invalid JSON string: "+o)};goog.json.unsafeParse=goog.json.USE_NATIVE_JSON?(goog.global.JSON["parse"]):function(s){return(eval("("+s+")"))};goog.json.Replacer;goog.json.Reviver;goog.json.serialize=goog.json.USE_NATIVE_JSON?(goog.global.JSON["stringify"]):function(object,opt_replacer){return new goog.json.Serializer(opt_replacer).serialize(object)};goog.json.Serializer=function(opt_replacer){this.replacer_=opt_replacer};goog.json.Serializer.prototype.serialize=function(object){var sb=[];this.serializeInternal(object,sb);return sb.join("")};goog.json.Serializer.prototype.serializeInternal=function(object,sb){if(object==null){sb.push("null");return}if(typeof object=="object"){if(goog.isArray(object)){this.serializeArray(object,sb);return}else{if(object instanceof String||object instanceof Number||object instanceof Boolean){object=object.valueOf()}else{this.serializeObject_((object),sb);return}}}switch(typeof object){case"string":this.serializeString_(object,sb);break;case"number":this.serializeNumber_(object,sb);break;case"boolean":sb.push(object);break;case"function":sb.push("null");break;default:throw Error("Unknown type: "+typeof object)}};goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;goog.json.Serializer.prototype.serializeString_=function(s,sb){sb.push('"',s.replace(goog.json.Serializer.charsToReplace_,function(c){var rv=goog.json.Serializer.charToJsonCharCache_[c];if(!rv){rv="\\u"+(c.charCodeAt(0)|65536).toString(16).substr(1);goog.json.Serializer.charToJsonCharCache_[c]=rv}return rv}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(n,sb){sb.push(isFinite(n)&&!isNaN(n)?n:"null")};goog.json.Serializer.prototype.serializeArray=function(arr,sb){var l=arr.length;sb.push("[");var sep="";for(var i=0;i<l;i++){sb.push(sep);var value=arr[i];this.serializeInternal(this.replacer_?this.replacer_.call(arr,String(i),value):value,sb);sep=","}sb.push("]")};goog.json.Serializer.prototype.serializeObject_=function(obj,sb){sb.push("{");var sep="";for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var value=obj[key];if(typeof value!="function"){sb.push(sep);this.serializeString_(key,sb);sb.push(":");this.serializeInternal(this.replacer_?this.replacer_.call(obj,key,value):value,sb);sep=","}}}sb.push("}")};goog.provide("goog.net.ErrorCode");goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};goog.net.ErrorCode.getDebugMessage=function(errorCode){switch(errorCode){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.provide("goog.net.HttpStatus");goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,NETWORK_AUTHENTICATION_REQUIRED:511,QUIRK_IE_NO_CONTENT:1223};goog.net.HttpStatus.isSuccess=function(status){switch(status){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return true;default:return false}};goog.provide("goog.net.XhrLike");goog.net.XhrLike=function(){};goog.net.XhrLike.OrNative;goog.net.XhrLike.prototype.onreadystatechange;goog.net.XhrLike.prototype.responseText;goog.net.XhrLike.prototype.responseXML;goog.net.XhrLike.prototype.readyState;goog.net.XhrLike.prototype.status;goog.net.XhrLike.prototype.statusText;goog.net.XhrLike.prototype.open=function(method,url,opt_async,opt_user,opt_password){};goog.net.XhrLike.prototype.send=function(opt_data){};goog.net.XhrLike.prototype.abort=function(){};goog.net.XhrLike.prototype.setRequestHeader=function(header,value){};goog.net.XhrLike.prototype.getResponseHeader=function(header){};goog.net.XhrLike.prototype.getAllResponseHeaders=function(){};goog.provide("goog.net.XmlHttpFactory");goog.require("goog.net.XhrLike");goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.createInstance=goog.abstractMethod;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.XmlHttpFactory.prototype.internalGetOptions=goog.abstractMethod;goog.provide("goog.net.WrapperXmlHttpFactory");goog.require("goog.net.XhrLike");goog.require("goog.net.XmlHttpFactory");goog.net.WrapperXmlHttpFactory=function(xhrFactory,optionsFactory){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=xhrFactory;this.optionsFactory_=optionsFactory};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.provide("goog.net.DefaultXmlHttpFactory");goog.provide("goog.net.XmlHttp");goog.provide("goog.net.XmlHttp.OptionType");goog.provide("goog.net.XmlHttp.ReadyState");goog.provide("goog.net.XmlHttpDefines");goog.require("goog.asserts");goog.require("goog.net.WrapperXmlHttpFactory");goog.require("goog.net.XmlHttpFactory");goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.define("goog.net.XmlHttp.ASSUME_NATIVE_XHR",false);goog.net.XmlHttpDefines={};goog.define("goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR",false);goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};goog.net.XmlHttp.factory_;goog.net.XmlHttp.setFactory=function(factory,optionsFactory){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(goog.asserts.assert(factory),goog.asserts.assert(optionsFactory)))};goog.net.XmlHttp.setGlobalFactory=function(factory){goog.net.XmlHttp.factory_=factory};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var progId=this.getProgId_();if(progId){return new ActiveXObject(progId)}else{return new XMLHttpRequest()}};goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var progId=this.getProgId_();var options={};if(progId){options[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=true;options[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=true}return options};goog.net.DefaultXmlHttpFactory.prototype.ieProgId_;goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR||goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR){return""}if(!this.ieProgId_&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){var ACTIVE_X_IDENTS=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var i=0;i<ACTIVE_X_IDENTS.length;i++){var candidate=ACTIVE_X_IDENTS[i];try{new ActiveXObject(candidate);this.ieProgId_=candidate;return candidate}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return(this.ieProgId_)};goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory());goog.provide("goog.uri.utils");goog.provide("goog.uri.utils.ComponentIndex");goog.provide("goog.uri.utils.QueryArray");goog.provide("goog.uri.utils.QueryValue");goog.provide("goog.uri.utils.StandardQueryParam");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.userAgent");goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(opt_scheme,opt_userInfo,opt_domain,opt_port,opt_path,opt_queryData,opt_fragment){var out="";if(opt_scheme){out+=opt_scheme+":"}if(opt_domain){out+="//";if(opt_userInfo){out+=opt_userInfo+"@"}out+=opt_domain;if(opt_port){out+=":"+opt_port}}if(opt_path){out+=opt_path}if(opt_queryData){out+="?"+opt_queryData}if(opt_fragment){out+="#"+opt_fragment}return out};goog.uri.utils.splitRe_=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(uri){goog.uri.utils.phishingProtection_();return(uri.match(goog.uri.utils.splitRe_))};goog.uri.utils.needsPhishingProtection_=goog.userAgent.WEBKIT;goog.uri.utils.phishingProtection_=function(){if(goog.uri.utils.needsPhishingProtection_){goog.uri.utils.needsPhishingProtection_=false;var location=goog.global.location;if(location){var href=location.href;if(href){var domain=goog.uri.utils.getDomain(href);if(domain&&domain!=location.hostname){goog.uri.utils.needsPhishingProtection_=true;throw Error()}}}}};goog.uri.utils.decodeIfPossible_=function(uri,opt_preserveReserved){if(!uri){return uri}return opt_preserveReserved?decodeURI(uri):decodeURIComponent(uri)};goog.uri.utils.getComponentByIndex_=function(componentIndex,uri){return goog.uri.utils.split(uri)[componentIndex]||null};goog.uri.utils.getScheme=function(uri){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,uri)};goog.uri.utils.getEffectiveScheme=function(uri){var scheme=goog.uri.utils.getScheme(uri);if(!scheme&&goog.global.self&&goog.global.self.location){var protocol=goog.global.self.location.protocol;scheme=protocol.substr(0,protocol.length-1)}return scheme?scheme.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(uri){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,uri)};goog.uri.utils.getUserInfo=function(uri){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(uri))};goog.uri.utils.getDomainEncoded=function(uri){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,uri)};goog.uri.utils.getDomain=function(uri){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(uri),true)};goog.uri.utils.getPort=function(uri){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,uri))||null};goog.uri.utils.getPathEncoded=function(uri){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,uri)};goog.uri.utils.getPath=function(uri){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(uri),true)};goog.uri.utils.getQueryData=function(uri){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,uri)};goog.uri.utils.getFragmentEncoded=function(uri){var hashIndex=uri.indexOf("#");return hashIndex<0?null:uri.substr(hashIndex+1)};goog.uri.utils.setFragmentEncoded=function(uri,fragment){return goog.uri.utils.removeFragment(uri)+(fragment?"#"+fragment:"")};goog.uri.utils.getFragment=function(uri){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(uri))};goog.uri.utils.getHost=function(uri){var pieces=goog.uri.utils.split(uri);return goog.uri.utils.buildFromEncodedParts(pieces[goog.uri.utils.ComponentIndex.SCHEME],pieces[goog.uri.utils.ComponentIndex.USER_INFO],pieces[goog.uri.utils.ComponentIndex.DOMAIN],pieces[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(uri){var pieces=goog.uri.utils.split(uri);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,pieces[goog.uri.utils.ComponentIndex.PATH],pieces[goog.uri.utils.ComponentIndex.QUERY_DATA],pieces[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(uri){var hashIndex=uri.indexOf("#");return hashIndex<0?uri:uri.substr(0,hashIndex)};goog.uri.utils.haveSameDomain=function(uri1,uri2){var pieces1=goog.uri.utils.split(uri1);var pieces2=goog.uri.utils.split(uri2);return pieces1[goog.uri.utils.ComponentIndex.DOMAIN]==pieces2[goog.uri.utils.ComponentIndex.DOMAIN]&&pieces1[goog.uri.utils.ComponentIndex.SCHEME]==pieces2[goog.uri.utils.ComponentIndex.SCHEME]&&pieces1[goog.uri.utils.ComponentIndex.PORT]==pieces2[goog.uri.utils.ComponentIndex.PORT]};goog.uri.utils.assertNoFragmentsOrQueries_=function(uri){if(goog.DEBUG&&(uri.indexOf("#")>=0||uri.indexOf("?")>=0)){throw Error("goog.uri.utils: Fragment or query identifiers are not supported: ["+uri+"]")}};goog.uri.utils.QueryValue;goog.uri.utils.QueryArray;goog.uri.utils.parseQueryData=function(encodedQuery,callback){if(!encodedQuery){return}var pairs=encodedQuery.split("&");for(var i=0;i<pairs.length;i++){var indexOfEquals=pairs[i].indexOf("=");var name=null;var value=null;if(indexOfEquals>=0){name=pairs[i].substring(0,indexOfEquals);value=pairs[i].substring(indexOfEquals+1)}else{name=pairs[i]}callback(name,value?goog.string.urlDecode(value):"")}};goog.uri.utils.appendQueryData_=function(buffer){if(buffer[1]){var baseUri=(buffer[0]);var hashIndex=baseUri.indexOf("#");if(hashIndex>=0){buffer.push(baseUri.substr(hashIndex));buffer[0]=baseUri=baseUri.substr(0,hashIndex)}var questionIndex=baseUri.indexOf("?");if(questionIndex<0){buffer[1]="?"}else{if(questionIndex==baseUri.length-1){buffer[1]=undefined}}}return buffer.join("")};goog.uri.utils.appendKeyValuePairs_=function(key,value,pairs){if(goog.isArray(value)){goog.asserts.assertArray(value);for(var j=0;j<value.length;j++){goog.uri.utils.appendKeyValuePairs_(key,String(value[j]),pairs)}}else{if(value!=null){pairs.push("&",key,value===""?"":"=",goog.string.urlEncode(value))}}};goog.uri.utils.buildQueryDataBuffer_=function(buffer,keysAndValues,opt_startIndex){goog.asserts.assert(Math.max(keysAndValues.length-(opt_startIndex||0),0)%2==0,"goog.uri.utils: Key/value lists must be even in length.");for(var i=opt_startIndex||0;i<keysAndValues.length;i+=2){goog.uri.utils.appendKeyValuePairs_(keysAndValues[i],keysAndValues[i+1],buffer)}return buffer};goog.uri.utils.buildQueryData=function(keysAndValues,opt_startIndex){var buffer=goog.uri.utils.buildQueryDataBuffer_([],keysAndValues,opt_startIndex);buffer[0]="";return buffer.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(buffer,map){for(var key in map){goog.uri.utils.appendKeyValuePairs_(key,map[key],buffer)}return buffer};goog.uri.utils.buildQueryDataFromMap=function(map){var buffer=goog.uri.utils.buildQueryDataBufferFromMap_([],map);buffer[0]="";return buffer.join("")};goog.uri.utils.appendParams=function(uri,var_args){return goog.uri.utils.appendQueryData_(arguments.length==2?goog.uri.utils.buildQueryDataBuffer_([uri],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([uri],arguments,1))};goog.uri.utils.appendParamsFromMap=function(uri,map){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([uri],map))};goog.uri.utils.appendParam=function(uri,key,opt_value){var paramArr=[uri,"&",key];if(goog.isDefAndNotNull(opt_value)){paramArr.push("=",goog.string.urlEncode(opt_value))}return goog.uri.utils.appendQueryData_(paramArr)};goog.uri.utils.findParam_=function(uri,startIndex,keyEncoded,hashOrEndIndex){var index=startIndex;var keyLength=keyEncoded.length;while((index=uri.indexOf(keyEncoded,index))>=0&&index<hashOrEndIndex){var precedingChar=uri.charCodeAt(index-1);if(precedingChar==goog.uri.utils.CharCode_.AMPERSAND||precedingChar==goog.uri.utils.CharCode_.QUESTION){var followingChar=uri.charCodeAt(index+keyLength);if(!followingChar||followingChar==goog.uri.utils.CharCode_.EQUAL||followingChar==goog.uri.utils.CharCode_.AMPERSAND||followingChar==goog.uri.utils.CharCode_.HASH){return index}}index+=keyLength+1}return -1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(uri,keyEncoded){return goog.uri.utils.findParam_(uri,0,keyEncoded,uri.search(goog.uri.utils.hashOrEndRe_))>=0};goog.uri.utils.getParamValue=function(uri,keyEncoded){var hashOrEndIndex=uri.search(goog.uri.utils.hashOrEndRe_);var foundIndex=goog.uri.utils.findParam_(uri,0,keyEncoded,hashOrEndIndex);if(foundIndex<0){return null}else{var endPosition=uri.indexOf("&",foundIndex);if(endPosition<0||endPosition>hashOrEndIndex){endPosition=hashOrEndIndex}foundIndex+=keyEncoded.length+1;return goog.string.urlDecode(uri.substr(foundIndex,endPosition-foundIndex))}};goog.uri.utils.getParamValues=function(uri,keyEncoded){var hashOrEndIndex=uri.search(goog.uri.utils.hashOrEndRe_);var position=0;var foundIndex;var result=[];while((foundIndex=goog.uri.utils.findParam_(uri,position,keyEncoded,hashOrEndIndex))>=0){position=uri.indexOf("&",foundIndex);if(position<0||position>hashOrEndIndex){position=hashOrEndIndex}foundIndex+=keyEncoded.length+1;result.push(goog.string.urlDecode(uri.substr(foundIndex,position-foundIndex)))}return result};goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(uri,keyEncoded){var hashOrEndIndex=uri.search(goog.uri.utils.hashOrEndRe_);var position=0;var foundIndex;var buffer=[];while((foundIndex=goog.uri.utils.findParam_(uri,position,keyEncoded,hashOrEndIndex))>=0){buffer.push(uri.substring(position,foundIndex));position=Math.min((uri.indexOf("&",foundIndex)+1)||hashOrEndIndex,hashOrEndIndex)}buffer.push(uri.substr(position));return buffer.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(uri,keyEncoded,value){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(uri,keyEncoded),keyEncoded,value)};goog.uri.utils.appendPath=function(baseUri,path){goog.uri.utils.assertNoFragmentsOrQueries_(baseUri);if(goog.string.endsWith(baseUri,"/")){baseUri=baseUri.substr(0,baseUri.length-1)}if(goog.string.startsWith(path,"/")){path=path.substr(1)}return goog.string.buildString(baseUri,"/",path)};goog.uri.utils.setPath=function(uri,path){if(!goog.string.startsWith(path,"/")){path="/"+path}var parts=goog.uri.utils.split(uri);return goog.uri.utils.buildFromEncodedParts(parts[goog.uri.utils.ComponentIndex.SCHEME],parts[goog.uri.utils.ComponentIndex.USER_INFO],parts[goog.uri.utils.ComponentIndex.DOMAIN],parts[goog.uri.utils.ComponentIndex.PORT],path,parts[goog.uri.utils.ComponentIndex.QUERY_DATA],parts[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(uri){return goog.uri.utils.setParam(uri,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.provide("goog.net.XhrIo");goog.provide("goog.net.XhrIo.ResponseType");goog.require("goog.Timer");goog.require("goog.array");goog.require("goog.debug.entryPointRegistry");goog.require("goog.events.EventTarget");goog.require("goog.json");goog.require("goog.log");goog.require("goog.net.ErrorCode");goog.require("goog.net.EventType");goog.require("goog.net.HttpStatus");goog.require("goog.net.XmlHttp");goog.require("goog.object");goog.require("goog.string");goog.require("goog.structs");goog.require("goog.structs.Map");goog.require("goog.uri.utils");goog.require("goog.userAgent");goog.forwardDeclare("goog.Uri");goog.net.XhrIo=function(opt_xmlHttpFactory){goog.net.XhrIo.base(this,"constructor");this.headers=new goog.structs.Map();this.xmlHttpFactory_=opt_xmlHttpFactory||null;this.active_=false;this.xhr_=null;this.xhrOptions_=null;this.lastUri_="";this.lastMethod_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.errorDispatched_=false;this.inSend_=false;this.inOpen_=false;this.inAbort_=false;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.withCredentials_=false;this.useXhr2Timeout_=false};goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";goog.net.XhrIo.XHR2_TIMEOUT_="timeout";goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(url,opt_callback,opt_method,opt_content,opt_headers,opt_timeoutInterval,opt_withCredentials){var x=new goog.net.XhrIo();goog.net.XhrIo.sendInstances_.push(x);if(opt_callback){x.listen(goog.net.EventType.COMPLETE,opt_callback)}x.listenOnce(goog.net.EventType.READY,x.cleanupSend_);if(opt_timeoutInterval){x.setTimeoutInterval(opt_timeoutInterval)}if(opt_withCredentials){x.setWithCredentials(opt_withCredentials)}x.send(url,opt_method,opt_content,opt_headers);return x};goog.net.XhrIo.cleanup=function(){var instances=goog.net.XhrIo.sendInstances_;while(instances.length){instances.pop().dispose()}};goog.net.XhrIo.protectEntryPoints=function(errorHandler){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=errorHandler.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(ms){this.timeoutInterval_=Math.max(0,ms)};goog.net.XhrIo.prototype.setResponseType=function(type){this.responseType_=type};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(withCredentials){this.withCredentials_=withCredentials};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};goog.net.XhrIo.prototype.send=function(url,opt_method,opt_content,opt_headers){if(this.xhr_){throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+url)}var method=opt_method?opt_method.toUpperCase():"GET";this.lastUri_=url;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=method;this.errorDispatched_=false;this.active_=true;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,this);try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr"));this.inOpen_=true;this.xhr_.open(method,String(url),true);this.inOpen_=false}catch(err){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+err.message));this.error_(goog.net.ErrorCode.EXCEPTION,err);return}var content=opt_content||"";var headers=this.headers.clone();if(opt_headers){goog.structs.forEach(opt_headers,function(value,key){headers.set(key,value)})}var contentTypeKey=goog.array.find(headers.getKeys(),goog.net.XhrIo.isContentTypeHeader_);var contentIsFormData=(goog.global.FormData&&(content instanceof goog.global.FormData));if(goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,method)&&!contentTypeKey&&!contentIsFormData){headers.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE)}headers.forEach(function(value,key){this.xhr_.setRequestHeader(key,value)},this);if(this.responseType_){this.xhr_.responseType=this.responseType_}if(goog.object.containsKey(this.xhr_,"withCredentials")){this.xhr_.withCredentials=this.withCredentials_}try{this.cleanUpTimeoutTimer_();if(this.timeoutInterval_>0){this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_);goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_));if(this.useXhr2Timeout_){this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_;this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,this)}else{this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)}}goog.log.fine(this.logger_,this.formatMsg_("Sending request"));this.inSend_=true;this.xhr_.send(content);this.inSend_=false}catch(err){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+err.message));this.error_(goog.net.ErrorCode.EXCEPTION,err)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(xhr){return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(xhr[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(xhr[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};goog.net.XhrIo.isContentTypeHeader_=function(header){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,header)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};goog.net.XhrIo.prototype.timeout_=function(){if(typeof goog=="undefined"){}else{if(this.xhr_){this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting";this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT;goog.log.fine(this.logger_,this.formatMsg_(this.lastError_));this.dispatchEvent(goog.net.EventType.TIMEOUT);this.abort(goog.net.ErrorCode.TIMEOUT)}}};goog.net.XhrIo.prototype.error_=function(errorCode,err){this.active_=false;if(this.xhr_){this.inAbort_=true;this.xhr_.abort();this.inAbort_=false}this.lastError_=err;this.lastErrorCode_=errorCode;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){if(!this.errorDispatched_){this.errorDispatched_=true;this.dispatchEvent(goog.net.EventType.COMPLETE);this.dispatchEvent(goog.net.EventType.ERROR)}};goog.net.XhrIo.prototype.abort=function(opt_failureCode){if(this.xhr_&&this.active_){goog.log.fine(this.logger_,this.formatMsg_("Aborting"));this.active_=false;this.inAbort_=true;this.xhr_.abort();this.inAbort_=false;this.lastErrorCode_=opt_failureCode||goog.net.ErrorCode.ABORT;this.dispatchEvent(goog.net.EventType.COMPLETE);this.dispatchEvent(goog.net.EventType.ABORT);this.cleanUpXhr_()}};goog.net.XhrIo.prototype.disposeInternal=function(){if(this.xhr_){if(this.active_){this.active_=false;this.inAbort_=true;this.xhr_.abort();this.inAbort_=false}this.cleanUpXhr_(true)}goog.net.XhrIo.base(this,"disposeInternal")};goog.net.XhrIo.prototype.onReadyStateChange_=function(){if(this.isDisposed()){return}if(!this.inOpen_&&!this.inSend_&&!this.inAbort_){this.onReadyStateChangeEntryPoint_()}else{this.onReadyStateChangeHelper_()}};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(!this.active_){return}if(typeof goog=="undefined"){}else{if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&this.getStatus()==2){goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"))}else{if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE){goog.Timer.callOnce(this.onReadyStateChange_,0,this);return}this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE);if(this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=false;try{if(this.isSuccess()){this.dispatchEvent(goog.net.EventType.COMPLETE);this.dispatchEvent(goog.net.EventType.SUCCESS)}else{this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR;this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]";this.dispatchErrors_()}}finally{this.cleanUpXhr_()}}}}};goog.net.XhrIo.prototype.cleanUpXhr_=function(opt_fromDispose){if(this.xhr_){this.cleanUpTimeoutTimer_();var xhr=this.xhr_;var clearedOnReadyStateChange=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhr_=null;this.xhrOptions_=null;if(!opt_fromDispose){this.dispatchEvent(goog.net.EventType.READY)}try{xhr.onreadystatechange=clearedOnReadyStateChange}catch(e){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+e.message)}}};goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){if(this.xhr_&&this.useXhr2Timeout_){this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null}if(goog.isNumber(this.timeoutId_)){goog.Timer.clear(this.timeoutId_);this.timeoutId_=null}};goog.net.XhrIo.prototype.isActive=function(){return !!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};goog.net.XhrIo.prototype.isSuccess=function(){var status=this.getStatus();return goog.net.HttpStatus.isSuccess(status)||status===0&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var scheme=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(scheme)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?(this.xhr_.readyState):goog.net.XmlHttp.ReadyState.UNINITIALIZED};goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(e){return -1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(e){goog.log.fine(this.logger_,"Can not get status: "+e.message);return""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(e){goog.log.fine(this.logger_,"Can not get responseText: "+e.message);return""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody" in this.xhr_){return this.xhr_.responseBody}}catch(e){goog.log.fine(this.logger_,"Can not get responseBody: "+e.message)}return null};goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(e){goog.log.fine(this.logger_,"Can not get responseXML: "+e.message);return null}};goog.net.XhrIo.prototype.getResponseJson=function(opt_xssiPrefix){if(!this.xhr_){return undefined}var responseText=this.xhr_.responseText;if(opt_xssiPrefix&&responseText.indexOf(opt_xssiPrefix)==0){responseText=responseText.substring(opt_xssiPrefix.length)}return goog.json.parse(responseText)};goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_){return null}if("response" in this.xhr_){return this.xhr_.response}switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer" in this.xhr_){return this.xhr_.mozResponseArrayBuffer}}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not supported on this browser");return null}catch(e){goog.log.fine(this.logger_,"Can not get response: "+e.message);return null}};goog.net.XhrIo.prototype.getResponseHeader=function(key){return this.xhr_&&this.isComplete()?this.xhr_.getResponseHeader(key):undefined};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders():""};goog.net.XhrIo.prototype.getResponseHeaders=function(){var headersObject={};var headersArray=this.getAllResponseHeaders().split("\r\n");for(var i=0;i<headersArray.length;i++){if(goog.string.isEmptyOrWhitespace(headersArray[i])){continue}var keyValue=goog.string.splitLimit(headersArray[i],": ",2);if(headersObject[keyValue[0]]){headersObject[keyValue[0]]+=", "+keyValue[1]}else{headersObject[keyValue[0]]=keyValue[1]}}return headersObject};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};goog.net.XhrIo.prototype.formatMsg_=function(msg){return msg+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};goog.debug.entryPointRegistry.register(function(transformer){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=transformer(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});goog.provide("ol.format.FormatType");ol.format.FormatType={JSON:"json",TEXT:"text",XML:"xml"};goog.provide("goog.dom.xml");goog.require("goog.dom");goog.require("goog.dom.NodeType");goog.dom.xml.MAX_XML_SIZE_KB=2*1024;goog.dom.xml.MAX_ELEMENT_DEPTH=256;goog.dom.xml.createDocument=function(opt_rootTagName,opt_namespaceUri){if(opt_namespaceUri&&!opt_rootTagName){throw Error("Can't create document with namespace and no root tag")}if(document.implementation&&document.implementation.createDocument){return document.implementation.createDocument(opt_namespaceUri||"",opt_rootTagName||"",null)}else{if(typeof ActiveXObject!="undefined"){var doc=goog.dom.xml.createMsXmlDocument_();if(doc){if(opt_rootTagName){doc.appendChild(doc.createNode(goog.dom.NodeType.ELEMENT,opt_rootTagName,opt_namespaceUri||""))}return doc}}}throw Error("Your browser does not support creating new documents")};goog.dom.xml.loadXml=function(xml){if(typeof DOMParser!="undefined"){return new DOMParser().parseFromString(xml,"application/xml")}else{if(typeof ActiveXObject!="undefined"){var doc=goog.dom.xml.createMsXmlDocument_();doc.loadXML(xml);return doc}}throw Error("Your browser does not support loading xml documents")};goog.dom.xml.serialize=function(xml){if(typeof XMLSerializer!="undefined"){return new XMLSerializer().serializeToString(xml)}var text=xml.xml;if(text){return text}throw Error("Your browser does not support serializing XML documents")};goog.dom.xml.selectSingleNode=function(node,path){if(typeof node.selectSingleNode!="undefined"){var doc=goog.dom.getOwnerDocument(node);if(typeof doc.setProperty!="undefined"){doc.setProperty("SelectionLanguage","XPath")}return node.selectSingleNode(path)}else{if(document.implementation.hasFeature("XPath","3.0")){var doc=goog.dom.getOwnerDocument(node);var resolver=doc.createNSResolver(doc.documentElement);var result=doc.evaluate(path,node,resolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return result.singleNodeValue}}return null};goog.dom.xml.selectNodes=function(node,path){if(typeof node.selectNodes!="undefined"){var doc=goog.dom.getOwnerDocument(node);if(typeof doc.setProperty!="undefined"){doc.setProperty("SelectionLanguage","XPath")}return node.selectNodes(path)}else{if(document.implementation.hasFeature("XPath","3.0")){var doc=goog.dom.getOwnerDocument(node);var resolver=doc.createNSResolver(doc.documentElement);var nodes=doc.evaluate(path,node,resolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var results=[];var count=nodes.snapshotLength;for(var i=0;i<count;i++){results.push(nodes.snapshotItem(i))}return results}else{return[]}}};goog.dom.xml.setAttributes=function(element,attributes){for(var key in attributes){if(attributes.hasOwnProperty(key)){element.setAttribute(key,attributes[key])}}};goog.dom.xml.createMsXmlDocument_=function(){var doc=new ActiveXObject("MSXML2.DOMDocument");if(doc){doc.resolveExternals=false;doc.validateOnParse=false;try{doc.setProperty("ProhibitDTD",true);doc.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB);doc.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(e){}}return doc};goog.provide("ol.xml");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.xml");goog.require("goog.object");goog.require("goog.userAgent");ol.xml.NodeStackItem;ol.xml.Parser;ol.xml.Serializer;ol.xml.DOCUMENT=goog.dom.xml.createDocument();ol.xml.createElementNS_=function(namespaceURI,qualifiedName){return ol.xml.DOCUMENT.createElementNS(namespaceURI,qualifiedName)};ol.xml.createElementNSActiveX_=function(namespaceURI,qualifiedName){if(goog.isNull(namespaceURI)){namespaceURI=""}return ol.xml.DOCUMENT.createNode(1,qualifiedName,namespaceURI)};ol.xml.createElementNS=(document.implementation&&document.implementation.createDocument)?ol.xml.createElementNS_:ol.xml.createElementNSActiveX_;ol.xml.getAllTextContent=function(node,normalizeWhitespace){return ol.xml.getAllTextContent_(node,normalizeWhitespace,[]).join("")};ol.xml.getAllTextContent_=function(node,normalizeWhitespace,accumulator){if(node.nodeType==goog.dom.NodeType.CDATA_SECTION||node.nodeType==goog.dom.NodeType.TEXT){if(normalizeWhitespace){accumulator.push(String(node.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{accumulator.push(node.nodeValue)}}else{var n;for(n=node.firstChild;!goog.isNull(n);n=n.nextSibling){ol.xml.getAllTextContent_(n,normalizeWhitespace,accumulator)}}return accumulator};ol.xml.getLocalName_=function(node){return node.localName};ol.xml.getLocalNameIE_=function(node){var localName=node.localName;if(goog.isDef(localName)){return localName}var baseName=node.baseName;goog.asserts.assert(goog.isDefAndNotNull(baseName),"Failed to get localName/baseName of node %s",node);return baseName};ol.xml.getLocalName=goog.userAgent.IE?ol.xml.getLocalNameIE_:ol.xml.getLocalName_;ol.xml.isDocument_=function(value){return value instanceof Document};ol.xml.isDocumentIE_=function(value){return goog.isObject(value)&&value.nodeType==goog.dom.NodeType.DOCUMENT};ol.xml.isDocument=goog.userAgent.IE?ol.xml.isDocumentIE_:ol.xml.isDocument_;ol.xml.isNode_=function(value){return value instanceof Node};ol.xml.isNodeIE_=function(value){return goog.isObject(value)&&goog.isDef(value.nodeType)};ol.xml.isNode=goog.userAgent.IE?ol.xml.isNodeIE_:ol.xml.isNode_;ol.xml.getAttributeNS_=function(node,namespaceURI,name){return node.getAttributeNS(namespaceURI,name)||""};ol.xml.getAttributeNSActiveX_=function(node,namespaceURI,name){var attributeValue="";var attributeNode=ol.xml.getAttributeNodeNS(node,namespaceURI,name);if(goog.isDef(attributeNode)){attributeValue=attributeNode.nodeValue}return attributeValue};ol.xml.getAttributeNS=(document.implementation&&document.implementation.createDocument)?ol.xml.getAttributeNS_:ol.xml.getAttributeNSActiveX_;ol.xml.getAttributeNodeNS_=function(node,namespaceURI,name){return node.getAttributeNodeNS(namespaceURI,name)};ol.xml.getAttributeNodeNSActiveX_=function(node,namespaceURI,name){var attributeNode=null;var attributes=node.attributes;var potentialNode,fullName;for(var i=0,len=attributes.length;i<len;++i){potentialNode=attributes[i];if(potentialNode.namespaceURI==namespaceURI){fullName=(potentialNode.prefix)?(potentialNode.prefix+":"+name):name;if(fullName==potentialNode.nodeName){attributeNode=potentialNode;break}}}return attributeNode};ol.xml.getAttributeNodeNS=(document.implementation&&document.implementation.createDocument)?ol.xml.getAttributeNodeNS_:ol.xml.getAttributeNodeNSActiveX_;ol.xml.setAttributeNS_=function(node,namespaceURI,name,value){node.setAttributeNS(namespaceURI,name,value)};ol.xml.setAttributeNSActiveX_=function(node,namespaceURI,name,value){if(!goog.isNull(namespaceURI)){var attribute=node.ownerDocument.createNode(2,name,namespaceURI);attribute.nodeValue=value;node.setAttributeNode(attribute)}else{node.setAttribute(name,value)}};ol.xml.setAttributeNS=(document.implementation&&document.implementation.createDocument)?ol.xml.setAttributeNS_:ol.xml.setAttributeNSActiveX_;ol.xml.parse=function(xml){return new DOMParser().parseFromString(xml,"application/xml")};ol.xml.makeArrayExtender=function(valueReader,opt_this){return(function(node,objectStack){var value=valueReader.call(opt_this,node,objectStack);if(goog.isDef(value)){goog.asserts.assert(goog.isArray(value),"valueReader function is expected to return an array of values");var array=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(array),"objectStack is supposed to be an array of arrays");goog.array.extend(array,value)}})};ol.xml.makeArrayPusher=function(valueReader,opt_this){return(function(node,objectStack){var value=valueReader.call(goog.isDef(opt_this)?opt_this:this,node,objectStack);if(goog.isDef(value)){var array=objectStack[objectStack.length-1];goog.asserts.assert(goog.isArray(array),"objectStack is supposed to be an array of arrays");array.push(value)}})};ol.xml.makeReplacer=function(valueReader,opt_this){return(function(node,objectStack){var value=valueReader.call(goog.isDef(opt_this)?opt_this:this,node,objectStack);if(goog.isDef(value)){objectStack[objectStack.length-1]=value}})};ol.xml.makeObjectPropertyPusher=function(valueReader,opt_property,opt_this){goog.asserts.assert(goog.isDef(valueReader),"undefined valueReader, expected function(this: T, Node, Array.<*>)");return(function(node,objectStack){var value=valueReader.call(goog.isDef(opt_this)?opt_this:this,node,objectStack);if(goog.isDef(value)){var object=(objectStack[objectStack.length-1]);var property=goog.isDef(opt_property)?opt_property:node.localName;goog.asserts.assert(goog.isObject(object),"entity from stack was not an object");var array=goog.object.setIfUndefined(object,property,[]);array.push(value)}})};ol.xml.makeObjectPropertySetter=function(valueReader,opt_property,opt_this){goog.asserts.assert(goog.isDef(valueReader),"undefined valueReader, expected function(this: T, Node, Array.<*>)");return(function(node,objectStack){var value=valueReader.call(goog.isDef(opt_this)?opt_this:this,node,objectStack);if(goog.isDef(value)){var object=(objectStack[objectStack.length-1]);var property=goog.isDef(opt_property)?opt_property:node.localName;goog.asserts.assert(goog.isObject(object),"entity from stack was not an object");object[property]=value}})};ol.xml.makeChildAppender=function(nodeWriter,opt_this){return function(node,value,objectStack){nodeWriter.call(goog.isDef(opt_this)?opt_this:this,node,value,objectStack);var parent=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(parent),"entity from stack was not an object");var parentNode=parent.node;goog.asserts.assert(ol.xml.isNode(parentNode)||ol.xml.isDocument(parentNode),"expected parentNode %s to be a Node or a Document",parentNode);parentNode.appendChild(node)}};ol.xml.makeArraySerializer=function(nodeWriter,opt_this){var serializersNS,nodeFactory;return function(node,value,objectStack){if(!goog.isDef(serializersNS)){serializersNS={};var serializers={};serializers[node.localName]=nodeWriter;serializersNS[node.namespaceURI]=serializers;nodeFactory=ol.xml.makeSimpleNodeFactory(node.localName)}ol.xml.serialize(serializersNS,nodeFactory,value,objectStack)}};ol.xml.makeSimpleNodeFactory=function(opt_nodeName,opt_namespaceURI){var fixedNodeName=opt_nodeName;return(function(value,objectStack,opt_nodeName){var context=objectStack[objectStack.length-1];var node=context.node;goog.asserts.assert(ol.xml.isNode(node)||ol.xml.isDocument(node),"expected node %s to be a Node or a Document",node);var nodeName=fixedNodeName;if(!goog.isDef(nodeName)){nodeName=opt_nodeName}var namespaceURI=opt_namespaceURI;if(!goog.isDef(opt_namespaceURI)){namespaceURI=node.namespaceURI}goog.asserts.assert(goog.isDef(nodeName),"nodeName was undefined");return ol.xml.createElementNS(namespaceURI,nodeName)})};ol.xml.OBJECT_PROPERTY_NODE_FACTORY=ol.xml.makeSimpleNodeFactory();ol.xml.makeSequence=function(object,orderedKeys){var length=orderedKeys.length;var sequence=new Array(length);for(var i=0;i<length;++i){sequence[i]=object[orderedKeys[i]]}return sequence};ol.xml.makeStructureNS=function(namespaceURIs,structure,opt_structureNS){var structureNS=goog.isDef(opt_structureNS)?opt_structureNS:{};var i,ii;for(i=0,ii=namespaceURIs.length;i<ii;++i){structureNS[namespaceURIs[i]]=structure}return structureNS};ol.xml.parseNode=function(parsersNS,node,objectStack,opt_this){var n;for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){var parsers=parsersNS[n.namespaceURI];if(goog.isDef(parsers)){var parser=parsers[n.localName];if(goog.isDef(parser)){parser.call(opt_this,n,objectStack)}}}};ol.xml.pushParseAndPop=function(object,parsersNS,node,objectStack,opt_this){objectStack.push(object);ol.xml.parseNode(parsersNS,node,objectStack,opt_this);return objectStack.pop()};ol.xml.serialize=function(serializersNS,nodeFactory,values,objectStack,opt_keys,opt_this){var length=(goog.isDef(opt_keys)?opt_keys:values).length;var value,node;for(var i=0;i<length;++i){value=values[i];if(goog.isDef(value)){node=nodeFactory.call(opt_this,value,objectStack,goog.isDef(opt_keys)?opt_keys[i]:undefined);if(goog.isDef(node)){serializersNS[node.namespaceURI][node.localName].call(opt_this,node,value,objectStack)}}}};ol.xml.pushSerializeAndPop=function(object,serializersNS,nodeFactory,values,objectStack,opt_keys,opt_this){objectStack.push(object);ol.xml.serialize(serializersNS,nodeFactory,values,objectStack,opt_keys,opt_this);return objectStack.pop()};goog.provide("ol.FeatureLoader");goog.provide("ol.FeatureUrlFunction");goog.provide("ol.featureloader");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.net.EventType");goog.require("goog.net.XhrIo");goog.require("goog.net.XhrIo.ResponseType");goog.require("ol.format.FormatType");goog.require("ol.xml");ol.FeatureLoader;ol.FeatureUrlFunction;ol.featureloader.loadFeaturesXhr=function(url,format,success){return(function(extent,resolution,projection){var xhrIo=new goog.net.XhrIo();xhrIo.setResponseType(goog.net.XhrIo.ResponseType.TEXT);goog.events.listen(xhrIo,goog.net.EventType.COMPLETE,function(event){var xhrIo=event.target;goog.asserts.assertInstanceof(xhrIo,goog.net.XhrIo,"event.target/xhrIo is an instance of goog.net.XhrIo");if(xhrIo.isSuccess()){var type=format.getType();var source;if(type==ol.format.FormatType.JSON){source=xhrIo.getResponseText()}else{if(type==ol.format.FormatType.TEXT){source=xhrIo.getResponseText()}else{if(type==ol.format.FormatType.XML){if(!goog.userAgent.IE){source=xhrIo.getResponseXml()}if(!goog.isDefAndNotNull(source)){source=ol.xml.parse(xhrIo.getResponseText())}}else{goog.asserts.fail("unexpected format type")}}}if(goog.isDefAndNotNull(source)){var features=format.readFeatures(source,{featureProjection:projection});success.call(this,features)}else{goog.asserts.fail("undefined or null source")}}else{}goog.dispose(xhrIo)},false,this);if(goog.isFunction(url)){xhrIo.send(url(extent,resolution,projection))}else{xhrIo.send(url)}})};ol.featureloader.xhr=function(url,format){return ol.featureloader.loadFeaturesXhr(url,format,function(features){this.addFeatures(features)})};goog.provide("ol.LoadingStrategy");goog.provide("ol.loadingstrategy");goog.require("ol.TileCoord");ol.LoadingStrategy;ol.loadingstrategy.all=function(extent,resolution){return[[-Infinity,-Infinity,Infinity,Infinity]]};ol.loadingstrategy.bbox=function(extent,resolution){return[extent]};ol.loadingstrategy.tile=function(tileGrid){return(function(extent,resolution){var z=tileGrid.getZForResolution(resolution);var tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z);var extents=[];var tileCoord=[z,0,0];for(tileCoord[1]=tileRange.minX;tileCoord[1]<=tileRange.maxX;++tileCoord[1]){for(tileCoord[2]=tileRange.minY;tileCoord[2]<=tileRange.maxY;++tileCoord[2]){extents.push(tileGrid.getTileCoordExtent(tileCoord))}}return extents})};goog.provide("ol.ext.rbush");ol.ext.rbush;(function(){var exports={};var module={exports:exports};var define;(function(){function rbush(maxEntries,format){if(!(this instanceof rbush)){return new rbush(maxEntries,format)}this._maxEntries=Math.max(4,maxEntries||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*0.4));if(format){this._initFormat(format)}this.clear()}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node.bbox)){return result}var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child.bbox;if(intersects(bbox,childBBox)){if(node.leaf){result.push(child)}else{if(contains(bbox,childBBox)){this._all(child,result)}else{nodesToSearch.push(child)}}}}node=nodesToSearch.pop()}return result},load:function(data){if(!(data&&data.length)){return this}if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++){this.insert(data[i])}return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node}else{if(this.data.height===node.height){this._splitRoot(this.data,node)}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode}this._insert(node,this.data.height-node.height-1,true)}}return this},insert:function(item){if(item){this._insert(item,this.data.height-1)}return this},clear:function(){this.data={children:[],height:1,bbox:empty(),leaf:true};return this},remove:function(item){if(!item){return this}var node=this.data,bbox=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(node.leaf){index=node.children.indexOf(item);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this}}if(!goingUp&&!node.leaf&&contains(node.bbox,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0]}else{if(parent){i++;node=parent.children[i];goingUp=false}else{node=null}}}return this},toBBox:function(item){return item},compareMinX:function(a,b){return a[0]-b[0]},compareMinY:function(a,b){return a[1]-b[1]},toJSON:function(){return this.data},fromJSON:function(data){this.data=data;return this},_all:function(node,result){var nodesToSearch=[];while(node){if(node.leaf){result.push.apply(result,node.children)}else{nodesToSearch.push.apply(nodesToSearch,node.children)}node=nodesToSearch.pop()}return result},_build:function(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M){node={children:items.slice(left,right+1),height:1,bbox:null,leaf:true};calcBBox(node,this.toBBox);return node}if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1))}node={children:[],height:height,bbox:null};var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(items,left,right,N1,this.compareMinX);for(i=left;i<=right;i+=N1){right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(j=i;j<=right2;j+=N2){right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}calcBBox(node,this.toBBox);return node},_chooseSubtree:function(bbox,node,level,path){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){path.push(node);if(node.leaf||path.length-1===level){break}minArea=minEnlargement=Infinity;for(i=0,len=node.children.length;i<len;i++){child=node.children[i];area=bboxArea(child.bbox);enlargement=enlargedArea(bbox,child.bbox)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else{if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}}node=targetNode}return node},_insert:function(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item.bbox:toBBox(item),insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node.bbox,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--}else{break}}this._adjustParentBBoxes(bbox,insertPath,level)},_split:function(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var newNode={children:node.children.splice(this._chooseSplitIndex(node,m,M)),height:node.height};if(node.leaf){newNode.leaf=true}calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level){insertPath[level-1].children.push(newNode)}else{this._splitRoot(node,newNode)}},_splitRoot:function(node,newNode){this.data={children:[node,newNode],height:node.height+1};calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(node,0,i,this.toBBox);bbox2=distBBox(node,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else{if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}}return index},_chooseSplitAxis:function(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin){node.children.sort(compareMinX)}},_allDistMargin:function(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child.bbox);margin+=bboxMargin(leftBBox)}for(i=M-m-1;i>=m;i--){child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child.bbox);margin+=bboxMargin(rightBBox)}return margin},_adjustParentBBoxes:function(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i].bbox,bbox)}},_condense:function(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1)}else{this.clear()}}else{calcBBox(path[i],this.toBBox)}}},_initFormat:function(format){var compareArr=["return a"," - b",";"];this.compareMinX=new Function("a","b",compareArr.join(format[0]));this.compareMinY=new Function("a","b",compareArr.join(format[1]));this.toBBox=new Function("a","return [a"+format.join(", a")+"];")}};function calcBBox(node,toBBox){node.bbox=distBBox(node,0,node.children.length,toBBox)}function distBBox(node,k,p,toBBox){var bbox=empty();for(var i=k,child;i<p;i++){child=node.children[i];extend(bbox,node.leaf?toBBox(child):child.bbox)}return bbox}function empty(){return[Infinity,Infinity,-Infinity,-Infinity]}function extend(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.min(a[1],b[1]);a[2]=Math.max(a[2],b[2]);a[3]=Math.max(a[3],b[3]);return a}function compareNodeMinX(a,b){return a.bbox[0]-b.bbox[0]}function compareNodeMinY(a,b){return a.bbox[1]-b.bbox[1]}function bboxArea(a){return(a[2]-a[0])*(a[3]-a[1])}function bboxMargin(a){return(a[2]-a[0])+(a[3]-a[1])}function enlargedArea(a,b){return(Math.max(b[2],a[2])-Math.min(b[0],a[0]))*(Math.max(b[3],a[3])-Math.min(b[1],a[1]))}function intersectionArea(a,b){var minX=Math.max(a[0],b[0]),minY=Math.max(a[1],b[1]),maxX=Math.min(a[2],b[2]),maxY=Math.min(a[3],b[3]);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3]}function intersects(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1]}function multiSelect(arr,left,right,n,compare){var stack=[left,right],mid;while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n){continue}mid=left+Math.ceil((right-left)/n/2)*n;select(arr,left,right,mid,compare);stack.push(left,mid,mid,right)}}function select(arr,left,right,k,compare){var n,i,z,s,sd,newLeft,newRight,t,j;while(right>left){if(right-left>600){n=right-left+1;i=k-left+1;z=Math.log(n);s=0.5*Math.exp(2*z/3);sd=0.5*Math.sqrt(z*s*(n-s)/n)*(i-n/2<0?-1:1);newLeft=Math.max(left,Math.floor(k-i*s/n+sd));newRight=Math.min(right,Math.floor(k+(n-i)*s/n+sd));select(arr,newLeft,newRight,k,compare)}t=arr[k];i=left;j=right;swap(arr,left,k);if(compare(arr[right],t)>0){swap(arr,left,right)}while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0){i++}while(compare(arr[j],t)>0){j--}}if(compare(arr[left],t)===0){swap(arr,left,j)}else{j++;swap(arr,j,right)}if(j<=k){left=j+1}if(k<=j){right=j-1}}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}if(typeof define==="function"&&define.amd){define("rbush",function(){return rbush})}else{if(typeof module!=="undefined"){module.exports=rbush}else{if(typeof self!=="undefined"){self.rbush=rbush}else{window.rbush=rbush}}}})();ol.ext.rbush=module.exports})();goog.provide("ol.structs.RBush");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.ext.rbush");goog.require("ol.extent");ol.structs.RBush=function(opt_maxEntries){this.rbush_=ol.ext.rbush(opt_maxEntries);this.items_={};if(goog.DEBUG){this.readers_=0}};ol.structs.RBush.prototype.insert=function(extent,value){if(goog.DEBUG&&this.readers_){throw new Error("Can not insert value while reading")}var item=[extent[0],extent[1],extent[2],extent[3],value];this.rbush_.insert(item);goog.asserts.assert(!goog.object.containsKey(this.items_,goog.getUid(value)),"uid (%s) of value (%s) already exists",goog.getUid(value),value);this.items_[goog.getUid(value)]=item};ol.structs.RBush.prototype.load=function(extents,values){if(goog.DEBUG&&this.readers_){throw new Error("Can not insert values while reading")}goog.asserts.assert(extents.length===values.length,"extens and values must have same length (%s === %s)",extents.length,values.length);var items=new Array(values.length);for(var i=0,l=values.length;i<l;i++){var extent=extents[i];var value=values[i];var item=[extent[0],extent[1],extent[2],extent[3],value];items[i]=item;goog.asserts.assert(!goog.object.containsKey(this.items_,goog.getUid(value)),"uid (%s) of value (%s) already exists",goog.getUid(value),value);this.items_[goog.getUid(value)]=item}this.rbush_.load(items)};ol.structs.RBush.prototype.remove=function(value){if(goog.DEBUG&&this.readers_){throw new Error("Can not remove value while reading")}var uid=goog.getUid(value);goog.asserts.assert(goog.object.containsKey(this.items_,uid),"uid (%s) of value (%s) does not exist",uid,value);var item=this.items_[uid];goog.object.remove(this.items_,uid);return this.rbush_.remove(item)!==null};ol.structs.RBush.prototype.update=function(extent,value){var uid=goog.getUid(value);goog.asserts.assert(goog.object.containsKey(this.items_,uid),"uid (%s) of value (%s) does not exist",uid,value);var item=this.items_[uid];if(!ol.extent.equals(item.slice(0,4),extent)){if(goog.DEBUG&&this.readers_){throw new Error("Can not update extent while reading")}this.remove(value);this.insert(extent,value)}};ol.structs.RBush.prototype.getAll=function(){var items=this.rbush_.all();return goog.array.map(items,function(item){return item[4]})};ol.structs.RBush.prototype.getInExtent=function(extent){var items=this.rbush_.search(extent);return goog.array.map(items,function(item){return item[4]})};ol.structs.RBush.prototype.forEach=function(callback,opt_this){if(goog.DEBUG){++this.readers_;try{return this.forEach_(this.getAll(),callback,opt_this)}finally{--this.readers_}}else{return this.forEach_(this.getAll(),callback,opt_this)}};ol.structs.RBush.prototype.forEachInExtent=function(extent,callback,opt_this){if(goog.DEBUG){++this.readers_;try{return this.forEach_(this.getInExtent(extent),callback,opt_this)}finally{--this.readers_}}else{return this.forEach_(this.getInExtent(extent),callback,opt_this)}};ol.structs.RBush.prototype.forEach_=function(values,callback,opt_this){var result;for(var i=0,l=values.length;i<l;i++){result=callback.call(opt_this,values[i]);if(result){return result}}return result};ol.structs.RBush.prototype.isEmpty=function(){return goog.object.isEmpty(this.items_)};ol.structs.RBush.prototype.clear=function(){this.rbush_.clear();this.items_={}};ol.structs.RBush.prototype.getExtent=function(opt_extent){return this.rbush_.data.bbox};goog.provide("ol.source.Vector");goog.provide("ol.source.VectorEvent");goog.provide("ol.source.VectorEventType");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.FeatureLoader");goog.require("ol.LoadingStrategy");goog.require("ol.ObjectEventType");goog.require("ol.extent");goog.require("ol.featureloader");goog.require("ol.loadingstrategy");goog.require("ol.proj");goog.require("ol.source.Source");goog.require("ol.source.State");goog.require("ol.structs.RBush");ol.source.VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};ol.source.Vector=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this,{attributions:options.attributions,logo:options.logo,projection:undefined,state:ol.source.State.READY,wrapX:goog.isDef(options.wrapX)?options.wrapX:true});this.loader_=goog.nullFunction;if(goog.isDef(options.loader)){this.loader_=options.loader}else{if(goog.isDef(options.url)){goog.asserts.assert(goog.isDef(options.format),"format must be set when url is set");this.loader_=ol.featureloader.xhr(options.url,options.format)}}this.strategy_=goog.isDef(options.strategy)?options.strategy:ol.loadingstrategy.all;var useSpatialIndex=goog.isDef(options.useSpatialIndex)?options.useSpatialIndex:true;this.featuresRtree_=useSpatialIndex?new ol.structs.RBush():null;this.loadedExtentsRtree_=new ol.structs.RBush();this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var collection,features;if(options.features instanceof ol.Collection){collection=options.features;features=collection.getArray()}else{if(goog.isArray(options.features)){features=options.features}}if(!useSpatialIndex&&!goog.isDef(collection)){collection=new ol.Collection(features)}if(goog.isDef(features)){this.addFeaturesInternal(features)}if(goog.isDef(collection)){this.bindFeaturesCollection_(collection)}};goog.inherits(ol.source.Vector,ol.source.Source);ol.source.Vector.prototype.addFeature=function(feature){this.addFeatureInternal(feature);this.changed()};ol.source.Vector.prototype.addFeatureInternal=function(feature){var featureKey=goog.getUid(feature).toString();if(!this.addToIndex_(featureKey,feature)){return}this.setupChangeEvents_(featureKey,feature);var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){var extent=geometry.getExtent();if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.insert(extent,feature)}}else{this.nullGeometryFeatures_[featureKey]=feature}this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,feature))};ol.source.Vector.prototype.setupChangeEvents_=function(featureKey,feature){goog.asserts.assert(!(featureKey in this.featureChangeKeys_),"key (%s) not yet registered in featureChangeKey",featureKey);this.featureChangeKeys_[featureKey]=[goog.events.listen(feature,goog.events.EventType.CHANGE,this.handleFeatureChange_,false,this),goog.events.listen(feature,ol.ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,false,this)]};ol.source.Vector.prototype.addToIndex_=function(featureKey,feature){var valid=true;var id=feature.getId();if(goog.isDef(id)){if(!(id.toString() in this.idIndex_)){this.idIndex_[id.toString()]=feature}else{valid=false}}else{goog.asserts.assert(!(featureKey in this.undefIdIndex_),"Feature already added to the source");this.undefIdIndex_[featureKey]=feature}return valid};ol.source.Vector.prototype.addFeatures=function(features){this.addFeaturesInternal(features);this.changed()};ol.source.Vector.prototype.addFeaturesInternal=function(features){var featureKey,i,length,feature;var extents=[];var newFeatures=[];var geometryFeatures=[];for(i=0,length=features.length;i<length;i++){feature=features[i];featureKey=goog.getUid(feature).toString();if(this.addToIndex_(featureKey,feature)){newFeatures.push(feature)}}for(i=0,length=newFeatures.length;i<length;i++){feature=newFeatures[i];featureKey=goog.getUid(feature).toString();this.setupChangeEvents_(featureKey,feature);var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){var extent=geometry.getExtent();extents.push(extent);geometryFeatures.push(feature)}else{this.nullGeometryFeatures_[featureKey]=feature}}if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.load(extents,geometryFeatures)}for(i=0,length=newFeatures.length;i<length;i++){this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,newFeatures[i]))}};ol.source.Vector.prototype.bindFeaturesCollection_=function(collection){goog.asserts.assert(goog.isNull(this.featuresCollection_),"bindFeaturesCollection can only be called once");var modifyingCollection=false;goog.events.listen(this,ol.source.VectorEventType.ADDFEATURE,function(evt){if(!modifyingCollection){modifyingCollection=true;collection.push(evt.feature);modifyingCollection=false}});goog.events.listen(this,ol.source.VectorEventType.REMOVEFEATURE,function(evt){if(!modifyingCollection){modifyingCollection=true;collection.remove(evt.feature);modifyingCollection=false}});goog.events.listen(collection,ol.CollectionEventType.ADD,function(evt){if(!modifyingCollection){var feature=evt.element;goog.asserts.assertInstanceof(feature,ol.Feature);modifyingCollection=true;this.addFeature(feature);modifyingCollection=false}},false,this);goog.events.listen(collection,ol.CollectionEventType.REMOVE,function(evt){if(!modifyingCollection){var feature=evt.element;goog.asserts.assertInstanceof(feature,ol.Feature);modifyingCollection=true;this.removeFeature(feature);modifyingCollection=false}},false,this);this.featuresCollection_=collection};ol.source.Vector.prototype.clear=function(opt_fast){if(opt_fast){for(var featureId in this.featureChangeKeys_){var keys=this.featureChangeKeys_[featureId];goog.array.forEach(keys,goog.events.unlistenByKey)}if(goog.isNull(this.featuresCollection_)){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{var rmFeatureInternal=this.removeFeatureInternal;if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.forEach(rmFeatureInternal,this);goog.object.forEach(this.nullGeometryFeatures_,rmFeatureInternal,this)}}if(!goog.isNull(this.featuresCollection_)){this.featuresCollection_.clear()}goog.asserts.assert(goog.object.isEmpty(this.featureChangeKeys_),"featureChangeKeys is an empty object now");goog.asserts.assert(goog.object.isEmpty(this.idIndex_),"idIndex is an empty object now");goog.asserts.assert(goog.object.isEmpty(this.undefIdIndex_),"undefIdIndex is an empty object now");if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var clearEvent=new ol.source.VectorEvent(ol.source.VectorEventType.CLEAR);this.dispatchEvent(clearEvent);this.changed()};ol.source.Vector.prototype.forEachFeature=function(callback,opt_this){if(!goog.isNull(this.featuresRtree_)){return this.featuresRtree_.forEach(callback,opt_this)}else{if(!goog.isNull(this.featuresCollection_)){return this.featuresCollection_.forEach(callback,opt_this)}}};ol.source.Vector.prototype.forEachFeatureAtCoordinateDirect=function(coordinate,callback,opt_this){var extent=[coordinate[0],coordinate[1],coordinate[0],coordinate[1]];return this.forEachFeatureInExtent(extent,function(feature){var geometry=feature.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(geometry),"feature geometry is defined and not null");if(geometry.containsCoordinate(coordinate)){return callback.call(opt_this,feature)}else{return undefined}})};ol.source.Vector.prototype.forEachFeatureInExtent=function(extent,callback,opt_this){if(!goog.isNull(this.featuresRtree_)){return this.featuresRtree_.forEachInExtent(extent,callback,opt_this)}else{if(!goog.isNull(this.featuresCollection_)){return this.featuresCollection_.forEach(callback,opt_this)}}};ol.source.Vector.prototype.forEachFeatureInExtentAtResolution=function(extent,resolution,f,opt_this){return this.forEachFeatureInExtent(extent,f,opt_this)};ol.source.Vector.prototype.forEachFeatureIntersectingExtent=function(extent,callback,opt_this){return this.forEachFeatureInExtent(extent,function(feature){var geometry=feature.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(geometry),"feature geometry is defined and not null");if(geometry.intersectsExtent(extent)){var result=callback.call(opt_this,feature);if(result){return result}}})};ol.source.Vector.prototype.getFeaturesCollection=function(){return this.featuresCollection_};ol.source.Vector.prototype.getFeatures=function(){var features;if(!goog.isNull(this.featuresCollection_)){features=this.featuresCollection_.getArray()}else{if(!goog.isNull(this.featuresRtree_)){features=this.featuresRtree_.getAll();if(!goog.object.isEmpty(this.nullGeometryFeatures_)){goog.array.extend(features,goog.object.getValues(this.nullGeometryFeatures_))}}}goog.asserts.assert(goog.isDef(features),"Neither featuresRtree_ nor featuresCollection_ are available");return features};ol.source.Vector.prototype.getFeaturesAtCoordinate=function(coordinate){var features=[];this.forEachFeatureAtCoordinateDirect(coordinate,function(feature){features.push(feature)});return features};ol.source.Vector.prototype.getFeaturesInExtent=function(extent){goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getFeaturesInExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getInExtent(extent)};ol.source.Vector.prototype.getClosestFeatureToCoordinate=function(coordinate){var x=coordinate[0];var y=coordinate[1];var closestFeature=null;var closestPoint=[NaN,NaN];var minSquaredDistance=Infinity;var extent=[-Infinity,-Infinity,Infinity,Infinity];goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getClosestFeatureToCoordinate does not work with useSpatialIndex set to false");this.featuresRtree_.forEachInExtent(extent,function(feature){var geometry=feature.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(geometry),"feature geometry is defined and not null");var previousMinSquaredDistance=minSquaredDistance;minSquaredDistance=geometry.closestPointXY(x,y,closestPoint,minSquaredDistance);if(minSquaredDistance<previousMinSquaredDistance){closestFeature=feature;var minDistance=Math.sqrt(minSquaredDistance);extent[0]=x-minDistance;extent[1]=y-minDistance;extent[2]=x+minDistance;extent[3]=y+minDistance}});return closestFeature};ol.source.Vector.prototype.getExtent=function(){goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getExtent()};ol.source.Vector.prototype.getFeatureById=function(id){var feature=this.idIndex_[id.toString()];return goog.isDef(feature)?feature:null};ol.source.Vector.prototype.handleFeatureChange_=function(event){var feature=(event.target);var featureKey=goog.getUid(feature).toString();var geometry=feature.getGeometry();if(!goog.isDefAndNotNull(geometry)){if(!(featureKey in this.nullGeometryFeatures_)){if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.remove(feature)}this.nullGeometryFeatures_[featureKey]=feature}}else{var extent=geometry.getExtent();if(featureKey in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[featureKey];if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.insert(extent,feature)}}else{if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.update(extent,feature)}}}var id=feature.getId();var removed;if(goog.isDef(id)){var sid=id.toString();if(featureKey in this.undefIdIndex_){delete this.undefIdIndex_[featureKey];this.idIndex_[sid]=feature}else{if(this.idIndex_[sid]!==feature){removed=this.removeFromIdIndex_(feature);goog.asserts.assert(removed,"Expected feature to be removed from index");this.idIndex_[sid]=feature}}}else{if(!(featureKey in this.undefIdIndex_)){removed=this.removeFromIdIndex_(feature);goog.asserts.assert(removed,"Expected feature to be removed from index");this.undefIdIndex_[featureKey]=feature}else{goog.asserts.assert(this.undefIdIndex_[featureKey]===feature,"feature keyed under %s in undefIdKeys",featureKey)}}this.changed();this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.CHANGEFEATURE,feature))};ol.source.Vector.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&goog.object.isEmpty(this.nullGeometryFeatures_)};ol.source.Vector.prototype.loadFeatures=function(extent,resolution,projection){var loadedExtentsRtree=this.loadedExtentsRtree_;var extentsToLoad=this.strategy_(extent,resolution);var i,ii;for(i=0,ii=extentsToLoad.length;i<ii;++i){var extentToLoad=extentsToLoad[i];var alreadyLoaded=loadedExtentsRtree.forEachInExtent(extentToLoad,function(object){return ol.extent.containsExtent(object.extent,extentToLoad)});if(!alreadyLoaded){this.loader_.call(this,extentToLoad,resolution,projection);loadedExtentsRtree.insert(extentToLoad,{extent:extentToLoad.slice()})}}};ol.source.Vector.prototype.removeFeature=function(feature){var featureKey=goog.getUid(feature).toString();if(featureKey in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[featureKey]}else{if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.remove(feature)}}this.removeFeatureInternal(feature);this.changed()};ol.source.Vector.prototype.removeFeatureInternal=function(feature){var featureKey=goog.getUid(feature).toString();goog.asserts.assert(featureKey in this.featureChangeKeys_,"featureKey exists in featureChangeKeys");goog.array.forEach(this.featureChangeKeys_[featureKey],goog.events.unlistenByKey);delete this.featureChangeKeys_[featureKey];var id=feature.getId();if(goog.isDef(id)){delete this.idIndex_[id.toString()]}else{delete this.undefIdIndex_[featureKey]}this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.REMOVEFEATURE,feature))};ol.source.Vector.prototype.removeFromIdIndex_=function(feature){var removed=false;for(var id in this.idIndex_){if(this.idIndex_[id]===feature){delete this.idIndex_[id];removed=true;break}}return removed};ol.source.VectorEvent=function(type,opt_feature){goog.base(this,type);this.feature=opt_feature};goog.inherits(ol.source.VectorEvent,goog.events.Event);goog.provide("ol.source.ImageVector");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.vec.Mat4");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.vector");goog.require("ol.source.ImageCanvas");goog.require("ol.source.Vector");goog.require("ol.style.Style");goog.require("ol.vec.Mat4");ol.source.ImageVector=function(options){this.source_=options.source;this.transform_=goog.vec.Mat4.createNumber();this.canvasContext_=ol.dom.createCanvasContext2D();this.canvasSize_=[0,0];this.replayGroup_=null;goog.base(this,{attributions:options.attributions,canvasFunction:goog.bind(this.canvasFunctionInternal_,this),logo:options.logo,projection:options.projection,ratio:options.ratio,resolutions:options.resolutions,state:this.source_.getState()});this.style_=null;this.styleFunction_=undefined;this.setStyle(options.style);goog.events.listen(this.source_,goog.events.EventType.CHANGE,this.handleSourceChange_,undefined,this)};goog.inherits(ol.source.ImageVector,ol.source.ImageCanvas);ol.source.ImageVector.prototype.canvasFunctionInternal_=function(extent,resolution,pixelRatio,size,projection){var replayGroup=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(resolution,pixelRatio),extent,resolution);this.source_.loadFeatures(extent,resolution,projection);var loading=false;this.source_.forEachFeatureInExtentAtResolution(extent,resolution,function(feature){loading=loading||this.renderFeature_(feature,resolution,pixelRatio,replayGroup)},this);replayGroup.finish();if(loading){return null}if(this.canvasSize_[0]!=size[0]||this.canvasSize_[1]!=size[1]){this.canvasContext_.canvas.width=size[0];this.canvasContext_.canvas.height=size[1];this.canvasSize_[0]=size[0];this.canvasSize_[1]=size[1]}else{this.canvasContext_.clearRect(0,0,size[0],size[1])}var transform=this.getTransform_(ol.extent.getCenter(extent),resolution,pixelRatio,size);replayGroup.replay(this.canvasContext_,pixelRatio,transform,0,{});this.replayGroup_=replayGroup;return this.canvasContext_.canvas};ol.source.ImageVector.prototype.forEachFeatureAtCoordinate=function(coordinate,resolution,rotation,skippedFeatureUids,callback){if(goog.isNull(this.replayGroup_)){return undefined}else{var features={};return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,resolution,0,skippedFeatureUids,function(feature){goog.asserts.assert(goog.isDef(feature),"passed a feature");var key=goog.getUid(feature).toString();if(!(key in features)){features[key]=true;return callback(feature)}})}};ol.source.ImageVector.prototype.getSource=function(){return this.source_};ol.source.ImageVector.prototype.getStyle=function(){return this.style_};ol.source.ImageVector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.source.ImageVector.prototype.getTransform_=function(center,resolution,pixelRatio,size){return ol.vec.Mat4.makeTransform2D(this.transform_,size[0]/2,size[1]/2,pixelRatio/resolution,-pixelRatio/resolution,0,-center[0],-center[1])};ol.source.ImageVector.prototype.handleImageChange_=function(event){this.changed()};ol.source.ImageVector.prototype.handleSourceChange_=function(){this.setState(this.source_.getState())};ol.source.ImageVector.prototype.renderFeature_=function(feature,resolution,pixelRatio,replayGroup){var styles;if(goog.isDef(feature.getStyleFunction())){styles=feature.getStyleFunction().call(feature,resolution)}else{if(goog.isDef(this.styleFunction_)){styles=this.styleFunction_(feature,resolution)}}if(!goog.isDefAndNotNull(styles)){return false}var i,ii,loading=false;for(i=0,ii=styles.length;i<ii;++i){loading=ol.renderer.vector.renderFeature(replayGroup,feature,styles[i],ol.renderer.vector.getSquaredTolerance(resolution,pixelRatio),this.handleImageChange_,this)||loading}return loading};ol.source.ImageVector.prototype.setStyle=function(style){this.style_=goog.isDef(style)?style:ol.style.defaultStyleFunction;this.styleFunction_=goog.isNull(style)?undefined:ol.style.createStyleFunction(this.style_);this.changed()};goog.provide("ol.renderer.canvas.ImageLayer");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.canvas.Layer");goog.require("ol.source.ImageVector");goog.require("ol.vec.Mat4");ol.renderer.canvas.ImageLayer=function(imageLayer){goog.base(this,imageLayer);this.image_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.imageTransformInv_=null;this.hitCanvasContext_=null};goog.inherits(ol.renderer.canvas.ImageLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.ImageLayer.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg){var layer=this.getLayer();var source=layer.getSource();var resolution=frameState.viewState.resolution;var rotation=frameState.viewState.rotation;var skippedFeatureUids=frameState.skippedFeatureUids;return source.forEachFeatureAtCoordinate(coordinate,resolution,rotation,skippedFeatureUids,function(feature){return callback.call(thisArg,feature,layer)})};ol.renderer.canvas.ImageLayer.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg){if(goog.isNull(this.getImage())){return undefined}if(this.getLayer().getSource() instanceof ol.source.ImageVector){var coordinate=pixel.slice();ol.vec.Mat4.multVec2(frameState.pixelToCoordinateMatrix,coordinate,coordinate);var hasFeature=this.forEachFeatureAtCoordinate(coordinate,frameState,goog.functions.TRUE,this);if(hasFeature){return callback.call(thisArg,this.getLayer())}else{return undefined}}else{if(goog.isNull(this.imageTransformInv_)){this.imageTransformInv_=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)}var pixelOnCanvas=this.getPixelOnCanvas(pixel,this.imageTransformInv_);if(goog.isNull(this.hitCanvasContext_)){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),pixelOnCanvas[0],pixelOnCanvas[1],1,1,0,0,1,1);var imageData=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(imageData[3]>0){return callback.call(thisArg,this.getLayer())}else{return undefined}}};ol.renderer.canvas.ImageLayer.prototype.getImage=function(){return goog.isNull(this.image_)?null:this.image_.getImage()};ol.renderer.canvas.ImageLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.ImageLayer.prototype.prepareFrame=function(frameState,layerState){var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var viewCenter=viewState.center;var viewResolution=viewState.resolution;var viewRotation=viewState.rotation;var image;var imageLayer=this.getLayer();goog.asserts.assertInstanceof(imageLayer,ol.layer.Image,"layer is an instance of ol.layer.Image");var imageSource=imageLayer.getSource();var hints=frameState.viewHints;var renderedExtent=frameState.extent;if(goog.isDef(layerState.extent)){renderedExtent=ol.extent.getIntersection(renderedExtent,layerState.extent)}if(!hints[ol.ViewHint.ANIMATING]&&!hints[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(renderedExtent)){var projection=viewState.projection;var sourceProjection=imageSource.getProjection();if(!goog.isNull(sourceProjection)){goog.asserts.assert(ol.proj.equivalent(projection,sourceProjection),"projection and sourceProjection are equivalent");projection=sourceProjection}image=imageSource.getImage(renderedExtent,viewResolution,pixelRatio,projection);if(!goog.isNull(image)){var loaded=this.loadImage(image);if(loaded){this.image_=image}}}if(!goog.isNull(this.image_)){image=this.image_;var imageExtent=image.getExtent();var imageResolution=image.getResolution();var imagePixelRatio=image.getPixelRatio();var scale=pixelRatio*imageResolution/(viewResolution*imagePixelRatio);ol.vec.Mat4.makeTransform2D(this.imageTransform_,pixelRatio*frameState.size[0]/2,pixelRatio*frameState.size[1]/2,scale,scale,viewRotation,imagePixelRatio*(imageExtent[0]-viewCenter[0])/imageResolution,imagePixelRatio*(viewCenter[1]-imageExtent[3])/imageResolution);this.imageTransformInv_=null;this.updateAttributions(frameState.attributions,image.getAttributions());this.updateLogos(frameState,imageSource)}return true};goog.provide("ol.renderer.canvas.TileLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.Size");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.renderer.canvas.Layer");goog.require("ol.size");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");ol.renderer.canvas.TileLayer=function(tileLayer){goog.base(this,tileLayer);this.canvas_=null;this.canvasSize_=null;this.canvasTooBig_=false;this.context_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.imageTransformInv_=null;this.renderedCanvasZ_=NaN;this.renderedTileWidth_=NaN;this.renderedTileHeight_=NaN;this.renderedCanvasTileRange_=null;this.renderedTiles_=null;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.canvas.TileLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.TileLayer.prototype.getImage=function(){return this.canvas_};ol.renderer.canvas.TileLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.TileLayer.prototype.prepareFrame=function(frameState,layerState){var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var projection=viewState.projection;var tileLayer=this.getLayer();goog.asserts.assertInstanceof(tileLayer,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var tileSource=tileLayer.getSource();var tileGrid=tileSource.getTileGridForProjection(projection);var tileGutter=tileSource.getGutter();var z=tileGrid.getZForResolution(viewState.resolution);var tilePixelSize=tileSource.getTilePixelSize(z,frameState.pixelRatio,projection);var tilePixelRatio=tilePixelSize[0]/ol.size.toSize(tileGrid.getTileSize(z),this.tmpSize_)[0];var tileResolution=tileGrid.getResolution(z);var tilePixelResolution=tileResolution/tilePixelRatio;var center=viewState.center;var extent;if(tileResolution==viewState.resolution){center=this.snapCenterToPixel(center,tileResolution,frameState.size);extent=ol.extent.getForViewAndSize(center,tileResolution,viewState.rotation,frameState.size)}else{extent=frameState.extent}if(goog.isDef(layerState.extent)){extent=ol.extent.getIntersection(extent,layerState.extent)}if(ol.extent.isEmpty(extent)){return false}var tileRange=tileGrid.getTileRangeForExtentAndResolution(extent,tileResolution);var canvasWidth=tilePixelSize[0]*tileRange.getWidth();var canvasHeight=tilePixelSize[1]*tileRange.getHeight();var canvas,context;if(goog.isNull(this.canvas_)){goog.asserts.assert(goog.isNull(this.canvasSize_),"canvasSize is null (because canvas is null)");goog.asserts.assert(goog.isNull(this.context_),"context is null (because canvas is null)");goog.asserts.assert(goog.isNull(this.renderedCanvasTileRange_),"renderedCanvasTileRange is null (because canvas is null)");context=ol.dom.createCanvasContext2D(canvasWidth,canvasHeight);this.canvas_=context.canvas;this.canvasSize_=[canvasWidth,canvasHeight];this.context_=context;this.canvasTooBig_=!ol.renderer.canvas.Layer.testCanvasSize(this.canvasSize_)}else{goog.asserts.assert(!goog.isNull(this.canvasSize_),"non-null canvasSize (because canvas is not null)");goog.asserts.assert(!goog.isNull(this.context_),"non-null context (because canvas is not null)");canvas=this.canvas_;context=this.context_;if(this.canvasSize_[0]<canvasWidth||this.canvasSize_[1]<canvasHeight||this.renderedTileWidth_!==tilePixelSize[0]||this.renderedTileHeight_!==tilePixelSize[1]||(this.canvasTooBig_&&(this.canvasSize_[0]>canvasWidth||this.canvasSize_[1]>canvasHeight))){canvas.width=canvasWidth;canvas.height=canvasHeight;this.canvasSize_=[canvasWidth,canvasHeight];this.canvasTooBig_=!ol.renderer.canvas.Layer.testCanvasSize(this.canvasSize_);this.renderedCanvasTileRange_=null}else{canvasWidth=this.canvasSize_[0];canvasHeight=this.canvasSize_[1];if(z!=this.renderedCanvasZ_||!this.renderedCanvasTileRange_.containsTileRange(tileRange)){this.renderedCanvasTileRange_=null}}}var canvasTileRange,canvasTileRangeWidth,minX,minY;if(goog.isNull(this.renderedCanvasTileRange_)){canvasTileRangeWidth=canvasWidth/tilePixelSize[0];var canvasTileRangeHeight=canvasHeight/tilePixelSize[1];minX=tileRange.minX-Math.floor((canvasTileRangeWidth-tileRange.getWidth())/2);minY=tileRange.minY-Math.floor((canvasTileRangeHeight-tileRange.getHeight())/2);this.renderedCanvasZ_=z;this.renderedTileWidth_=tilePixelSize[0];this.renderedTileHeight_=tilePixelSize[1];this.renderedCanvasTileRange_=new ol.TileRange(minX,minX+canvasTileRangeWidth-1,minY,minY+canvasTileRangeHeight-1);this.renderedTiles_=new Array(canvasTileRangeWidth*canvasTileRangeHeight);canvasTileRange=this.renderedCanvasTileRange_}else{canvasTileRange=this.renderedCanvasTileRange_;canvasTileRangeWidth=canvasTileRange.getWidth()}goog.asserts.assert(canvasTileRange.containsTileRange(tileRange),"tileRange is contained in canvasTileRange");var tilesToDrawByZ={};tilesToDrawByZ[z]={};var tilesToClear=[];var findLoadedTiles=this.createLoadedTileFinder(tileSource,tilesToDrawByZ);var useInterimTilesOnError=tileLayer.getUseInterimTilesOnError();var tmpExtent=ol.extent.createEmpty();var tmpTileRange=new ol.TileRange(0,0,0,0);var childTileRange,fullyLoaded,tile,tileState,x,y;for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){tile=tileSource.getTile(z,x,y,pixelRatio,projection);tileState=tile.getState();if(tileState==ol.TileState.LOADED||tileState==ol.TileState.EMPTY||(tileState==ol.TileState.ERROR&&!useInterimTilesOnError)){tilesToDrawByZ[z][ol.tilecoord.toString(tile.tileCoord)]=tile;continue}fullyLoaded=tileGrid.forEachTileCoordParentTileRange(tile.tileCoord,findLoadedTiles,null,tmpTileRange,tmpExtent);if(!fullyLoaded){tilesToClear.push(tile);childTileRange=tileGrid.getTileCoordChildTileRange(tile.tileCoord,tmpTileRange,tmpExtent);if(!goog.isNull(childTileRange)){findLoadedTiles(z+1,childTileRange)}}}}var i,ii;for(i=0,ii=tilesToClear.length;i<ii;++i){tile=tilesToClear[i];x=tilePixelSize[0]*(tile.tileCoord[1]-canvasTileRange.minX);y=tilePixelSize[1]*(canvasTileRange.maxY-tile.tileCoord[2]);context.clearRect(x,y,tilePixelSize[0],tilePixelSize[1])}var zs=goog.array.map(goog.object.getKeys(tilesToDrawByZ),Number);goog.array.sort(zs);var opaque=tileSource.getOpaque();var origin=ol.extent.getTopLeft(tileGrid.getTileCoordExtent([z,canvasTileRange.minX,canvasTileRange.maxY],tmpExtent));var currentZ,index,scale,tileCoordKey,tileExtent,tilesToDraw;var ix,iy,interimTileExtent,interimTileRange,maxX,maxY;var height,width;for(i=0,ii=zs.length;i<ii;++i){currentZ=zs[i];tilePixelSize=tileSource.getTilePixelSize(currentZ,pixelRatio,projection);tilesToDraw=tilesToDrawByZ[currentZ];if(currentZ==z){for(tileCoordKey in tilesToDraw){tile=tilesToDraw[tileCoordKey];index=(tile.tileCoord[2]-canvasTileRange.minY)*canvasTileRangeWidth+(tile.tileCoord[1]-canvasTileRange.minX);if(this.renderedTiles_[index]!=tile){x=tilePixelSize[0]*(tile.tileCoord[1]-canvasTileRange.minX);y=tilePixelSize[1]*(canvasTileRange.maxY-tile.tileCoord[2]);tileState=tile.getState();if(tileState==ol.TileState.EMPTY||(tileState==ol.TileState.ERROR&&!useInterimTilesOnError)||!opaque){context.clearRect(x,y,tilePixelSize[0],tilePixelSize[1])}if(tileState==ol.TileState.LOADED){context.drawImage(tile.getImage(),tileGutter,tileGutter,tilePixelSize[0],tilePixelSize[1],x,y,tilePixelSize[0],tilePixelSize[1])}this.renderedTiles_[index]=tile}}}else{scale=tileGrid.getResolution(currentZ)/tileResolution;for(tileCoordKey in tilesToDraw){tile=tilesToDraw[tileCoordKey];tileExtent=tileGrid.getTileCoordExtent(tile.tileCoord,tmpExtent);x=(tileExtent[0]-origin[0])/tilePixelResolution;y=(origin[1]-tileExtent[3])/tilePixelResolution;width=scale*tilePixelSize[0];height=scale*tilePixelSize[1];tileState=tile.getState();if(tileState==ol.TileState.EMPTY||!opaque){context.clearRect(x,y,width,height)}if(tileState==ol.TileState.LOADED){context.drawImage(tile.getImage(),tileGutter,tileGutter,tilePixelSize[0],tilePixelSize[1],x,y,width,height)}interimTileRange=tileGrid.getTileRangeForExtentAndZ(tileExtent,z,tmpTileRange);minX=Math.max(interimTileRange.minX,canvasTileRange.minX);maxX=Math.min(interimTileRange.maxX,canvasTileRange.maxX);minY=Math.max(interimTileRange.minY,canvasTileRange.minY);maxY=Math.min(interimTileRange.maxY,canvasTileRange.maxY);for(ix=minX;ix<=maxX;++ix){for(iy=minY;iy<=maxY;++iy){index=(iy-canvasTileRange.minY)*canvasTileRangeWidth+(ix-canvasTileRange.minX);this.renderedTiles_[index]=undefined}}}}}this.updateUsedTiles(frameState.usedTiles,tileSource,z,tileRange);this.manageTilePyramid(frameState,tileSource,tileGrid,pixelRatio,projection,extent,z,tileLayer.getPreload());this.scheduleExpireCache(frameState,tileSource);this.updateLogos(frameState,tileSource);ol.vec.Mat4.makeTransform2D(this.imageTransform_,pixelRatio*frameState.size[0]/2,pixelRatio*frameState.size[1]/2,pixelRatio*tilePixelResolution/viewState.resolution,pixelRatio*tilePixelResolution/viewState.resolution,viewState.rotation,(origin[0]-center[0])/tilePixelResolution,(center[1]-origin[1])/tilePixelResolution);this.imageTransformInv_=null;return true};ol.renderer.canvas.TileLayer.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg){if(goog.isNull(this.context_)){return undefined}if(goog.isNull(this.imageTransformInv_)){this.imageTransformInv_=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)}var pixelOnCanvas=this.getPixelOnCanvas(pixel,this.imageTransformInv_);var imageData=this.context_.getImageData(pixelOnCanvas[0],pixelOnCanvas[1],1,1).data;if(imageData[3]>0){return callback.call(thisArg,this.getLayer())}else{return undefined}};goog.provide("ol.renderer.canvas.VectorLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.EventType");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.vector");goog.require("ol.source.Vector");ol.renderer.canvas.VectorLayer=function(vectorLayer){goog.base(this,vectorLayer);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.context_=ol.dom.createCanvasContext2D()};goog.inherits(ol.renderer.canvas.VectorLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.VectorLayer.prototype.composeFrame=function(frameState,layerState,context){var extent=frameState.extent;var pixelRatio=frameState.pixelRatio;var skippedFeatureUids=layerState.managed?frameState.skippedFeatureUids:{};var viewState=frameState.viewState;var projection=viewState.projection;var rotation=viewState.rotation;var projectionExtent=projection.getExtent();var vectorSource=this.getLayer().getSource();goog.asserts.assertInstanceof(vectorSource,ol.source.Vector);var transform=this.getTransform(frameState,0);this.dispatchPreComposeEvent(context,frameState,transform);var replayGroup=this.replayGroup_;if(!goog.isNull(replayGroup)&&!replayGroup.isEmpty()){var layer=this.getLayer();var replayContext;if(layer.hasListener(ol.render.EventType.RENDER)){this.context_.canvas.width=context.canvas.width;this.context_.canvas.height=context.canvas.height;replayContext=this.context_}else{replayContext=context}var alpha=replayContext.globalAlpha;replayContext.globalAlpha=layerState.opacity;replayGroup.replay(replayContext,pixelRatio,transform,rotation,skippedFeatureUids);if(vectorSource.getWrapX()&&projection.canWrapX()&&!ol.extent.containsExtent(projectionExtent,extent)){var startX=extent[0];var worldWidth=ol.extent.getWidth(projectionExtent);var world=0;var offsetX;while(startX<projectionExtent[0]){--world;offsetX=worldWidth*world;transform=this.getTransform(frameState,offsetX);replayGroup.replay(replayContext,pixelRatio,transform,rotation,skippedFeatureUids);startX+=worldWidth}world=0;startX=extent[2];while(startX>projectionExtent[2]){++world;offsetX=worldWidth*world;transform=this.getTransform(frameState,offsetX);replayGroup.replay(replayContext,pixelRatio,transform,rotation,skippedFeatureUids);startX-=worldWidth}transform=this.getTransform(frameState,0)}if(replayContext!=context){this.dispatchRenderEvent(replayContext,frameState,transform);context.drawImage(replayContext.canvas,0,0)}replayContext.globalAlpha=alpha}this.dispatchPostComposeEvent(context,frameState,transform)};ol.renderer.canvas.VectorLayer.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg){if(goog.isNull(this.replayGroup_)){return undefined}else{var resolution=frameState.viewState.resolution;var rotation=frameState.viewState.rotation;var layer=this.getLayer();var layerState=frameState.layerStates[goog.getUid(layer)];var features={};return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,resolution,rotation,layerState.managed?frameState.skippedFeatureUids:{},function(feature){goog.asserts.assert(goog.isDef(feature),"received a feature");var key=goog.getUid(feature).toString();if(!(key in features)){features[key]=true;return callback.call(thisArg,feature,layer)}})}};ol.renderer.canvas.VectorLayer.prototype.handleStyleImageChange_=function(event){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorLayer.prototype.prepareFrame=function(frameState,layerState){var vectorLayer=(this.getLayer());goog.asserts.assertInstanceof(vectorLayer,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var vectorSource=vectorLayer.getSource();this.updateAttributions(frameState.attributions,vectorSource.getAttributions());this.updateLogos(frameState,vectorSource);var animating=frameState.viewHints[ol.ViewHint.ANIMATING];var interacting=frameState.viewHints[ol.ViewHint.INTERACTING];var updateWhileAnimating=vectorLayer.getUpdateWhileAnimating();var updateWhileInteracting=vectorLayer.getUpdateWhileInteracting();if(!this.dirty_&&(!updateWhileAnimating&&animating)||(!updateWhileInteracting&&interacting)){return true}var frameStateExtent=frameState.extent;var viewState=frameState.viewState;var projection=viewState.projection;var resolution=viewState.resolution;var pixelRatio=frameState.pixelRatio;var vectorLayerRevision=vectorLayer.getRevision();var vectorLayerRenderBuffer=vectorLayer.getRenderBuffer();var vectorLayerRenderOrder=vectorLayer.getRenderOrder();if(!goog.isDef(vectorLayerRenderOrder)){vectorLayerRenderOrder=ol.renderer.vector.defaultOrder}var extent=ol.extent.buffer(frameStateExtent,vectorLayerRenderBuffer*resolution);var projectionExtent=viewState.projection.getExtent();if(vectorSource.getWrapX()&&viewState.projection.canWrapX()&&!ol.extent.containsExtent(projectionExtent,frameState.extent)){var worldWidth=ol.extent.getWidth(projectionExtent);var buffer=Math.max(ol.extent.getWidth(extent)/2,worldWidth);extent[0]=projectionExtent[0]-buffer;extent[2]=projectionExtent[2]+buffer}if(!this.dirty_&&this.renderedResolution_==resolution&&this.renderedRevision_==vectorLayerRevision&&this.renderedRenderOrder_==vectorLayerRenderOrder&&ol.extent.containsExtent(this.renderedExtent_,extent)){return true}goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=false;var replayGroup=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(resolution,pixelRatio),extent,resolution,vectorLayer.getRenderBuffer());vectorSource.loadFeatures(extent,resolution,projection);var renderFeature=function(feature){var styles;if(goog.isDef(feature.getStyleFunction())){styles=feature.getStyleFunction().call(feature,resolution)}else{if(goog.isDef(vectorLayer.getStyleFunction())){styles=vectorLayer.getStyleFunction()(feature,resolution)}}if(goog.isDefAndNotNull(styles)){var dirty=this.renderFeature(feature,resolution,pixelRatio,styles,replayGroup);this.dirty_=this.dirty_||dirty}};if(!goog.isNull(vectorLayerRenderOrder)){var features=[];vectorSource.forEachFeatureInExtentAtResolution(extent,resolution,function(feature){features.push(feature)},this);goog.array.sort(features,vectorLayerRenderOrder);goog.array.forEach(features,renderFeature,this)}else{vectorSource.forEachFeatureInExtentAtResolution(extent,resolution,renderFeature,this)}replayGroup.finish();this.renderedResolution_=resolution;this.renderedRevision_=vectorLayerRevision;this.renderedRenderOrder_=vectorLayerRenderOrder;this.renderedExtent_=extent;this.replayGroup_=replayGroup;return true};ol.renderer.canvas.VectorLayer.prototype.renderFeature=function(feature,resolution,pixelRatio,styles,replayGroup){if(!goog.isDefAndNotNull(styles)){return false}var i,ii,loading=false;for(i=0,ii=styles.length;i<ii;++i){loading=ol.renderer.vector.renderFeature(replayGroup,feature,styles[i],ol.renderer.vector.getSquaredTolerance(resolution,pixelRatio),this.handleStyleImageChange_,this)||loading}return loading};goog.provide("ol.renderer.canvas.Map");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.canvas.ImageLayer");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.canvas.TileLayer");goog.require("ol.renderer.canvas.VectorLayer");goog.require("ol.source.State");goog.require("ol.vec.Mat4");ol.renderer.canvas.Map=function(container,map){goog.base(this,container,map);this.context_=ol.dom.createCanvasContext2D();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(container,this.canvas_,0);this.renderedVisible_=true;this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Map,ol.renderer.Map);ol.renderer.canvas.Map.prototype.createLayerRenderer=function(layer){if(ol.ENABLE_IMAGE&&layer instanceof ol.layer.Image){return new ol.renderer.canvas.ImageLayer(layer)}else{if(ol.ENABLE_TILE&&layer instanceof ol.layer.Tile){return new ol.renderer.canvas.TileLayer(layer)}else{if(ol.ENABLE_VECTOR&&layer instanceof ol.layer.Vector){return new ol.renderer.canvas.VectorLayer(layer)}else{goog.asserts.fail("unexpected layer configuration");return null}}}};ol.renderer.canvas.Map.prototype.dispatchComposeEvent_=function(type,frameState){var map=this.getMap();var context=this.context_;if(map.hasListener(type)){var extent=frameState.extent;var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var rotation=viewState.rotation;var transform=this.getTransform(frameState);var vectorContext=new ol.render.canvas.Immediate(context,pixelRatio,extent,transform,rotation);var composeEvent=new ol.render.Event(type,map,vectorContext,frameState,context,null);map.dispatchEvent(composeEvent);vectorContext.flush()}};ol.renderer.canvas.Map.prototype.getTransform=function(frameState){var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var resolution=viewState.resolution;return ol.vec.Mat4.makeTransform2D(this.transform_,this.canvas_.width/2,this.canvas_.height/2,pixelRatio/resolution,-pixelRatio/resolution,-viewState.rotation,-viewState.center[0],-viewState.center[1])};ol.renderer.canvas.Map.prototype.getType=function(){return ol.RendererType.CANVAS};ol.renderer.canvas.Map.prototype.renderFrame=function(frameState){if(goog.isNull(frameState)){if(this.renderedVisible_){goog.style.setElementShown(this.canvas_,false);this.renderedVisible_=false}return}var context=this.context_;var width=frameState.size[0]*frameState.pixelRatio;var height=frameState.size[1]*frameState.pixelRatio;if(this.canvas_.width!=width||this.canvas_.height!=height){this.canvas_.width=width;this.canvas_.height=height}else{context.clearRect(0,0,this.canvas_.width,this.canvas_.height)}this.calculateMatrices2D(frameState);this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,frameState);var layerStatesArray=frameState.layerStatesArray;goog.array.stableSort(layerStatesArray,ol.renderer.Map.sortByZIndex);var viewResolution=frameState.viewState.resolution;var i,ii,layer,layerRenderer,layerState;for(i=0,ii=layerStatesArray.length;i<ii;++i){layerState=layerStatesArray[i];layer=layerState.layer;layerRenderer=this.getLayerRenderer(layer);goog.asserts.assertInstanceof(layerRenderer,ol.renderer.canvas.Layer,"layerRenderer is an instance of ol.renderer.canvas.Layer");if(!ol.layer.Layer.visibleAtResolution(layerState,viewResolution)||layerState.sourceState!=ol.source.State.READY){continue}if(layerRenderer.prepareFrame(frameState,layerState)){layerRenderer.composeFrame(frameState,layerState,context)}}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,frameState);if(!this.renderedVisible_){goog.style.setElementShown(this.canvas_,true);this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(frameState);this.scheduleExpireIconCache(frameState)};goog.provide("ol.renderer.dom.Layer");goog.require("ol.layer.Layer");goog.require("ol.renderer.Layer");ol.renderer.dom.Layer=function(layer,target){goog.base(this,layer);this.target=target};goog.inherits(ol.renderer.dom.Layer,ol.renderer.Layer);ol.renderer.dom.Layer.prototype.clearFrame=goog.nullFunction;ol.renderer.dom.Layer.prototype.composeFrame=goog.nullFunction;ol.renderer.dom.Layer.prototype.getTarget=function(){return this.target};ol.renderer.dom.Layer.prototype.prepareFrame=goog.abstractMethod;goog.provide("ol.renderer.dom.ImageLayer");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.vec.Mat4");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.dom.Layer");goog.require("ol.vec.Mat4");ol.renderer.dom.ImageLayer=function(imageLayer){var target=goog.dom.createElement(goog.dom.TagName.DIV);target.style.position="absolute";goog.base(this,imageLayer,target);this.image_=null;this.transform_=goog.vec.Mat4.createNumberIdentity()};goog.inherits(ol.renderer.dom.ImageLayer,ol.renderer.dom.Layer);ol.renderer.dom.ImageLayer.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg){var layer=this.getLayer();var source=layer.getSource();var resolution=frameState.viewState.resolution;var rotation=frameState.viewState.rotation;var skippedFeatureUids=frameState.skippedFeatureUids;return source.forEachFeatureAtCoordinate(coordinate,resolution,rotation,skippedFeatureUids,function(feature){return callback.call(thisArg,feature,layer)})};ol.renderer.dom.ImageLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.image_=null};ol.renderer.dom.ImageLayer.prototype.prepareFrame=function(frameState,layerState){var viewState=frameState.viewState;var viewCenter=viewState.center;var viewResolution=viewState.resolution;var viewRotation=viewState.rotation;var image=this.image_;var imageLayer=this.getLayer();goog.asserts.assertInstanceof(imageLayer,ol.layer.Image,"layer is an instance of ol.layer.Image");var imageSource=imageLayer.getSource();var hints=frameState.viewHints;var renderedExtent=frameState.extent;if(goog.isDef(layerState.extent)){renderedExtent=ol.extent.getIntersection(renderedExtent,layerState.extent)}if(!hints[ol.ViewHint.ANIMATING]&&!hints[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(renderedExtent)){var projection=viewState.projection;var sourceProjection=imageSource.getProjection();if(!goog.isNull(sourceProjection)){goog.asserts.assert(ol.proj.equivalent(projection,sourceProjection),"projection and sourceProjection are equivalent");projection=sourceProjection}var image_=imageSource.getImage(renderedExtent,viewResolution,frameState.pixelRatio,projection);if(!goog.isNull(image_)){var loaded=this.loadImage(image_);if(loaded){image=image_}}}if(!goog.isNull(image)){var imageExtent=image.getExtent();var imageResolution=image.getResolution();var transform=goog.vec.Mat4.createNumber();ol.vec.Mat4.makeTransform2D(transform,frameState.size[0]/2,frameState.size[1]/2,imageResolution/viewResolution,imageResolution/viewResolution,viewRotation,(imageExtent[0]-viewCenter[0])/imageResolution,(viewCenter[1]-imageExtent[3])/imageResolution);if(image!=this.image_){var imageElement=image.getImage(this);imageElement.style.maxWidth="none";imageElement.style.position="absolute";goog.dom.removeChildren(this.target);goog.dom.appendChild(this.target,imageElement);this.image_=image}this.setTransform_(transform);this.updateAttributions(frameState.attributions,image.getAttributions());this.updateLogos(frameState,imageSource)}return true};ol.renderer.dom.ImageLayer.prototype.setTransform_=function(transform){if(!ol.vec.Mat4.equals2D(transform,this.transform_)){ol.dom.transformElement2D(this.target,transform,6);goog.vec.Mat4.setFromArray(this.transform_,transform)}};goog.provide("ol.renderer.dom.TileLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.object");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.TileCoord");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.dom.BrowserFeature");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.renderer.dom.Layer");goog.require("ol.size");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");goog.require("ol.vec.Mat4");ol.renderer.dom.TileLayer=function(tileLayer){var target=goog.dom.createElement(goog.dom.TagName.DIV);target.style.position="absolute";if(ol.dom.BrowserFeature.USE_MS_MATRIX_TRANSFORM){target.style.width="100%";target.style.height="100%"}goog.base(this,tileLayer,target);this.renderedVisible_=true;this.renderedOpacity_=1;this.renderedRevision_=0;this.tileLayerZs_={}};goog.inherits(ol.renderer.dom.TileLayer,ol.renderer.dom.Layer);ol.renderer.dom.TileLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.renderedRevision_=0};ol.renderer.dom.TileLayer.prototype.prepareFrame=function(frameState,layerState){if(!layerState.visible){if(this.renderedVisible_){goog.style.setElementShown(this.target,false);this.renderedVisible_=false}return true}var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var projection=viewState.projection;var tileLayer=this.getLayer();goog.asserts.assertInstanceof(tileLayer,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var tileSource=tileLayer.getSource();var tileGrid=tileSource.getTileGridForProjection(projection);var tileGutter=tileSource.getGutter();var z=tileGrid.getZForResolution(viewState.resolution);var tileResolution=tileGrid.getResolution(z);var center=viewState.center;var extent;if(tileResolution==viewState.resolution){center=this.snapCenterToPixel(center,tileResolution,frameState.size);extent=ol.extent.getForViewAndSize(center,tileResolution,viewState.rotation,frameState.size)}else{extent=frameState.extent}if(goog.isDef(layerState.extent)){extent=ol.extent.getIntersection(extent,layerState.extent)}var tileRange=tileGrid.getTileRangeForExtentAndResolution(extent,tileResolution);var tilesToDrawByZ={};tilesToDrawByZ[z]={};var findLoadedTiles=this.createLoadedTileFinder(tileSource,tilesToDrawByZ);var useInterimTilesOnError=tileLayer.getUseInterimTilesOnError();var tmpExtent=ol.extent.createEmpty();var tmpTileRange=new ol.TileRange(0,0,0,0);var childTileRange,fullyLoaded,tile,tileState,x,y;for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){tile=tileSource.getTile(z,x,y,pixelRatio,projection);tileState=tile.getState();if(tileState==ol.TileState.LOADED){tilesToDrawByZ[z][ol.tilecoord.toString(tile.tileCoord)]=tile;continue}else{if(tileState==ol.TileState.EMPTY||(tileState==ol.TileState.ERROR&&!useInterimTilesOnError)){continue}}fullyLoaded=tileGrid.forEachTileCoordParentTileRange(tile.tileCoord,findLoadedTiles,null,tmpTileRange,tmpExtent);if(!fullyLoaded){childTileRange=tileGrid.getTileCoordChildTileRange(tile.tileCoord,tmpTileRange,tmpExtent);if(!goog.isNull(childTileRange)){findLoadedTiles(z+1,childTileRange)}}}}var tileLayerZ,tileLayerZKey;if(this.renderedRevision_!=tileSource.getRevision()){for(tileLayerZKey in this.tileLayerZs_){tileLayerZ=this.tileLayerZs_[+tileLayerZKey];goog.dom.removeNode(tileLayerZ.target)}this.tileLayerZs_={};this.renderedRevision_=tileSource.getRevision()}var zs=goog.array.map(goog.object.getKeys(tilesToDrawByZ),Number);goog.array.sort(zs);var newTileLayerZKeys={};var iz,iziz,tileCoordKey,tileCoordOrigin,tilesToDraw;for(iz=0,iziz=zs.length;iz<iziz;++iz){tileLayerZKey=zs[iz];if(tileLayerZKey in this.tileLayerZs_){tileLayerZ=this.tileLayerZs_[tileLayerZKey]}else{tileCoordOrigin=tileGrid.getTileCoordForCoordAndZ(center,tileLayerZKey);tileLayerZ=new ol.renderer.dom.TileLayerZ_(tileGrid,tileCoordOrigin);newTileLayerZKeys[tileLayerZKey]=true;this.tileLayerZs_[tileLayerZKey]=tileLayerZ}tilesToDraw=tilesToDrawByZ[tileLayerZKey];for(tileCoordKey in tilesToDraw){tileLayerZ.addTile(tilesToDraw[tileCoordKey],tileGutter)}tileLayerZ.finalizeAddTiles()}var tileLayerZKeys=goog.array.map(goog.object.getKeys(this.tileLayerZs_),Number);goog.array.sort(tileLayerZKeys);var i,ii,j,origin,resolution;var transform=goog.vec.Mat4.createNumber();for(i=0,ii=tileLayerZKeys.length;i<ii;++i){tileLayerZKey=tileLayerZKeys[i];tileLayerZ=this.tileLayerZs_[tileLayerZKey];if(!(tileLayerZKey in tilesToDrawByZ)){goog.dom.removeNode(tileLayerZ.target);delete this.tileLayerZs_[tileLayerZKey];continue}resolution=tileLayerZ.getResolution();origin=tileLayerZ.getOrigin();ol.vec.Mat4.makeTransform2D(transform,frameState.size[0]/2,frameState.size[1]/2,resolution/viewState.resolution,resolution/viewState.resolution,viewState.rotation,(origin[0]-center[0])/resolution,(center[1]-origin[1])/resolution);tileLayerZ.setTransform(transform);if(tileLayerZKey in newTileLayerZKeys){for(j=tileLayerZKey-1;j>=0;--j){if(j in this.tileLayerZs_){goog.dom.insertSiblingAfter(tileLayerZ.target,this.tileLayerZs_[j].target);break}}if(j<0){goog.dom.insertChildAt(this.target,tileLayerZ.target,0)}}else{if(!frameState.viewHints[ol.ViewHint.ANIMATING]&&!frameState.viewHints[ol.ViewHint.INTERACTING]){tileLayerZ.removeTilesOutsideExtent(extent,tmpTileRange)}}}if(layerState.opacity!=this.renderedOpacity_){ol.dom.setOpacity(this.target,layerState.opacity);this.renderedOpacity_=layerState.opacity}if(layerState.visible&&!this.renderedVisible_){goog.style.setElementShown(this.target,true);this.renderedVisible_=true}this.updateUsedTiles(frameState.usedTiles,tileSource,z,tileRange);this.manageTilePyramid(frameState,tileSource,tileGrid,pixelRatio,projection,extent,z,tileLayer.getPreload());this.scheduleExpireCache(frameState,tileSource);this.updateLogos(frameState,tileSource);return true};ol.renderer.dom.TileLayerZ_=function(tileGrid,tileCoordOrigin){this.target=goog.dom.createElement(goog.dom.TagName.DIV);this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.translateTarget_=goog.dom.createElement(goog.dom.TagName.DIV);this.translateTarget_.style.position="absolute";this.translateTarget_.style.width="100%";this.translateTarget_.style.height="100%";goog.dom.appendChild(this.target,this.translateTarget_)}this.tileGrid_=tileGrid;this.tileCoordOrigin_=tileCoordOrigin;this.origin_=ol.extent.getTopLeft(tileGrid.getTileCoordExtent(tileCoordOrigin));this.resolution_=tileGrid.getResolution(tileCoordOrigin[0]);this.tiles_={};this.documentFragment_=null;this.transform_=goog.vec.Mat4.createNumberIdentity();this.tmpSize_=[0,0]};ol.renderer.dom.TileLayerZ_.prototype.addTile=function(tile,tileGutter){var tileCoord=tile.tileCoord;var tileCoordZ=tileCoord[0];var tileCoordX=tileCoord[1];var tileCoordY=tileCoord[2];goog.asserts.assert(tileCoordZ==this.tileCoordOrigin_[0],"tileCoordZ matches z of tileCoordOrigin");var tileCoordKey=ol.tilecoord.toString(tileCoord);if(tileCoordKey in this.tiles_){return}var tileSize=ol.size.toSize(this.tileGrid_.getTileSize(tileCoordZ),this.tmpSize_);var image=tile.getImage(this);var imageStyle=image.style;imageStyle.maxWidth="none";var tileElement;var tileElementStyle;if(tileGutter>0){tileElement=goog.dom.createElement(goog.dom.TagName.DIV);tileElementStyle=tileElement.style;tileElementStyle.overflow="hidden";tileElementStyle.width=tileSize[0]+"px";tileElementStyle.height=tileSize[1]+"px";imageStyle.position="absolute";imageStyle.left=-tileGutter+"px";imageStyle.top=-tileGutter+"px";imageStyle.width=(tileSize[0]+2*tileGutter)+"px";imageStyle.height=(tileSize[1]+2*tileGutter)+"px";goog.dom.appendChild(tileElement,image)}else{imageStyle.width=tileSize[0]+"px";imageStyle.height=tileSize[1]+"px";tileElement=image;tileElementStyle=imageStyle}tileElementStyle.position="absolute";tileElementStyle.left=((tileCoordX-this.tileCoordOrigin_[1])*tileSize[0])+"px";tileElementStyle.top=((this.tileCoordOrigin_[2]-tileCoordY)*tileSize[1])+"px";if(goog.isNull(this.documentFragment_)){this.documentFragment_=document.createDocumentFragment()}goog.dom.appendChild(this.documentFragment_,tileElement);this.tiles_[tileCoordKey]=tile};ol.renderer.dom.TileLayerZ_.prototype.finalizeAddTiles=function(){if(!goog.isNull(this.documentFragment_)){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){goog.dom.appendChild(this.translateTarget_,this.documentFragment_)}else{goog.dom.appendChild(this.target,this.documentFragment_)}this.documentFragment_=null}};ol.renderer.dom.TileLayerZ_.prototype.getOrigin=function(){return this.origin_};ol.renderer.dom.TileLayerZ_.prototype.getResolution=function(){return this.resolution_};ol.renderer.dom.TileLayerZ_.prototype.removeTilesOutsideExtent=function(extent,opt_tileRange){var tileRange=this.tileGrid_.getTileRangeForExtentAndZ(extent,this.tileCoordOrigin_[0],opt_tileRange);var tilesToRemove=[];var tile,tileCoordKey;for(tileCoordKey in this.tiles_){tile=this.tiles_[tileCoordKey];if(!tileRange.contains(tile.tileCoord)){tilesToRemove.push(tile)}}var i,ii;for(i=0,ii=tilesToRemove.length;i<ii;++i){tile=tilesToRemove[i];tileCoordKey=ol.tilecoord.toString(tile.tileCoord);goog.dom.removeNode(tile.getImage(this));delete this.tiles_[tileCoordKey]}};ol.renderer.dom.TileLayerZ_.prototype.setTransform=function(transform){if(!ol.vec.Mat4.equals2D(transform,this.transform_)){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){ol.dom.transformElement2D(this.target,transform,6,this.translateTarget_)}else{ol.dom.transformElement2D(this.target,transform,6)}goog.vec.Mat4.setFromArray(this.transform_,transform)}};goog.provide("ol.renderer.dom.VectorLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.vec.Mat4");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.dom.Layer");goog.require("ol.renderer.vector");goog.require("ol.vec.Mat4");ol.renderer.dom.VectorLayer=function(vectorLayer){this.context_=ol.dom.createCanvasContext2D();var target=this.context_.canvas;target.style.maxWidth="none";target.style.position="absolute";goog.base(this,vectorLayer,target);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.transform_=goog.vec.Mat4.createNumber();this.elementTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.dom.VectorLayer,ol.renderer.dom.Layer);ol.renderer.dom.VectorLayer.prototype.composeFrame=function(frameState,layerState){var vectorLayer=(this.getLayer());goog.asserts.assertInstanceof(vectorLayer,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var viewState=frameState.viewState;var viewCenter=viewState.center;var viewRotation=viewState.rotation;var viewResolution=viewState.resolution;var pixelRatio=frameState.pixelRatio;var viewWidth=frameState.size[0];var viewHeight=frameState.size[1];var imageWidth=viewWidth*pixelRatio;var imageHeight=viewHeight*pixelRatio;var transform=ol.vec.Mat4.makeTransform2D(this.transform_,pixelRatio*viewWidth/2,pixelRatio*viewHeight/2,pixelRatio/viewResolution,-pixelRatio/viewResolution,-viewRotation,-viewCenter[0],-viewCenter[1]);var context=this.context_;context.canvas.width=imageWidth;context.canvas.height=imageHeight;var elementTransform=ol.vec.Mat4.makeTransform2D(this.elementTransform_,0,0,1/pixelRatio,1/pixelRatio,0,-(imageWidth-viewWidth)/2*pixelRatio,-(imageHeight-viewHeight)/2*pixelRatio);ol.dom.transformElement2D(context.canvas,elementTransform,6);this.dispatchEvent_(ol.render.EventType.PRECOMPOSE,frameState,transform);var replayGroup=this.replayGroup_;if(!goog.isNull(replayGroup)&&!replayGroup.isEmpty()){context.globalAlpha=layerState.opacity;replayGroup.replay(context,pixelRatio,transform,viewRotation,layerState.managed?frameState.skippedFeatureUids:{});this.dispatchEvent_(ol.render.EventType.RENDER,frameState,transform)}this.dispatchEvent_(ol.render.EventType.POSTCOMPOSE,frameState,transform)};ol.renderer.dom.VectorLayer.prototype.dispatchEvent_=function(type,frameState,transform){var context=this.context_;var layer=this.getLayer();if(layer.hasListener(type)){var render=new ol.render.canvas.Immediate(context,frameState.pixelRatio,frameState.extent,transform,frameState.viewState.rotation);var event=new ol.render.Event(type,layer,render,frameState,context,null);layer.dispatchEvent(event);render.flush()}};ol.renderer.dom.VectorLayer.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg){if(goog.isNull(this.replayGroup_)){return undefined}else{var resolution=frameState.viewState.resolution;var rotation=frameState.viewState.rotation;var layer=this.getLayer();var layerState=frameState.layerStates[goog.getUid(layer)];var features={};return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,resolution,rotation,layerState.managed?frameState.skippedFeatureUids:{},function(feature){goog.asserts.assert(goog.isDef(feature),"received a feature");var key=goog.getUid(feature).toString();if(!(key in features)){features[key]=true;return callback.call(thisArg,feature,layer)}})}};ol.renderer.dom.VectorLayer.prototype.handleStyleImageChange_=function(event){this.renderIfReadyAndVisible()};ol.renderer.dom.VectorLayer.prototype.prepareFrame=function(frameState,layerState){var vectorLayer=(this.getLayer());goog.asserts.assertInstanceof(vectorLayer,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var vectorSource=vectorLayer.getSource();this.updateAttributions(frameState.attributions,vectorSource.getAttributions());this.updateLogos(frameState,vectorSource);var animating=frameState.viewHints[ol.ViewHint.ANIMATING];var interacting=frameState.viewHints[ol.ViewHint.INTERACTING];var updateWhileAnimating=vectorLayer.getUpdateWhileAnimating();var updateWhileInteracting=vectorLayer.getUpdateWhileInteracting();if(!this.dirty_&&(!updateWhileAnimating&&animating)||(!updateWhileInteracting&&interacting)){return true}var frameStateExtent=frameState.extent;var viewState=frameState.viewState;var projection=viewState.projection;var resolution=viewState.resolution;var pixelRatio=frameState.pixelRatio;var vectorLayerRevision=vectorLayer.getRevision();var vectorLayerRenderBuffer=vectorLayer.getRenderBuffer();var vectorLayerRenderOrder=vectorLayer.getRenderOrder();if(!goog.isDef(vectorLayerRenderOrder)){vectorLayerRenderOrder=ol.renderer.vector.defaultOrder}var extent=ol.extent.buffer(frameStateExtent,vectorLayerRenderBuffer*resolution);if(!this.dirty_&&this.renderedResolution_==resolution&&this.renderedRevision_==vectorLayerRevision&&this.renderedRenderOrder_==vectorLayerRenderOrder&&ol.extent.containsExtent(this.renderedExtent_,extent)){return true}goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=false;var replayGroup=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(resolution,pixelRatio),extent,resolution,vectorLayer.getRenderBuffer());vectorSource.loadFeatures(extent,resolution,projection);var renderFeature=function(feature){var styles;if(goog.isDef(feature.getStyleFunction())){styles=feature.getStyleFunction().call(feature,resolution)}else{if(goog.isDef(vectorLayer.getStyleFunction())){styles=vectorLayer.getStyleFunction()(feature,resolution)}}if(goog.isDefAndNotNull(styles)){var dirty=this.renderFeature(feature,resolution,pixelRatio,styles,replayGroup);this.dirty_=this.dirty_||dirty}};if(!goog.isNull(vectorLayerRenderOrder)){var features=[];vectorSource.forEachFeatureInExtentAtResolution(extent,resolution,function(feature){features.push(feature)},this);goog.array.sort(features,vectorLayerRenderOrder);goog.array.forEach(features,renderFeature,this)}else{vectorSource.forEachFeatureInExtentAtResolution(extent,resolution,renderFeature,this)}replayGroup.finish();this.renderedResolution_=resolution;this.renderedRevision_=vectorLayerRevision;this.renderedRenderOrder_=vectorLayerRenderOrder;this.renderedExtent_=extent;this.replayGroup_=replayGroup;return true};ol.renderer.dom.VectorLayer.prototype.renderFeature=function(feature,resolution,pixelRatio,styles,replayGroup){if(!goog.isDefAndNotNull(styles)){return false}var i,ii,loading=false;for(i=0,ii=styles.length;i<ii;++i){loading=ol.renderer.vector.renderFeature(replayGroup,feature,styles[i],ol.renderer.vector.getSquaredTolerance(resolution,pixelRatio),this.handleStyleImageChange_,this)||loading}return loading};goog.provide("ol.renderer.dom.Map");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.dom.ImageLayer");goog.require("ol.renderer.dom.Layer");goog.require("ol.renderer.dom.TileLayer");goog.require("ol.renderer.dom.VectorLayer");goog.require("ol.source.State");goog.require("ol.vec.Mat4");ol.renderer.dom.Map=function(container,map){goog.base(this,container,map);this.context_=null;if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)){this.context_=ol.dom.createCanvasContext2D();var canvas=this.context_.canvas;canvas.style.position="absolute";canvas.style.width="100%";canvas.style.height="100%";canvas.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(container,canvas,0)}this.transform_=goog.vec.Mat4.createNumber();this.layersPane_=goog.dom.createElement(goog.dom.TagName.DIV);this.layersPane_.className=ol.css.CLASS_UNSELECTABLE;var style=this.layersPane_.style;style.position="absolute";style.width="100%";style.height="100%";if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.layersPane_.ondragstart=goog.functions.FALSE;this.layersPane_.onselectstart=goog.functions.FALSE}goog.events.listen(this.layersPane_,goog.events.EventType.TOUCHSTART,goog.events.Event.preventDefault);goog.dom.insertChildAt(container,this.layersPane_,0);this.renderedVisible_=true};goog.inherits(ol.renderer.dom.Map,ol.renderer.Map);ol.renderer.dom.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.layersPane_);goog.base(this,"disposeInternal")};ol.renderer.dom.Map.prototype.createLayerRenderer=function(layer){var layerRenderer;if(ol.ENABLE_IMAGE&&layer instanceof ol.layer.Image){layerRenderer=new ol.renderer.dom.ImageLayer(layer)}else{if(ol.ENABLE_TILE&&layer instanceof ol.layer.Tile){layerRenderer=new ol.renderer.dom.TileLayer(layer)}else{if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)&&ol.ENABLE_VECTOR&&layer instanceof ol.layer.Vector){layerRenderer=new ol.renderer.dom.VectorLayer(layer)}else{goog.asserts.fail("unexpected layer configuration");return null}}}return layerRenderer};ol.renderer.dom.Map.prototype.dispatchComposeEvent_=function(type,frameState){var map=this.getMap();if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)&&map.hasListener(type)){var extent=frameState.extent;var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var rotation=viewState.rotation;var context=this.context_;var canvas=context.canvas;ol.vec.Mat4.makeTransform2D(this.transform_,canvas.width/2,canvas.height/2,pixelRatio/viewState.resolution,-pixelRatio/viewState.resolution,-viewState.rotation,-viewState.center[0],-viewState.center[1]);var vectorContext=new ol.render.canvas.Immediate(context,pixelRatio,extent,this.transform_,rotation);var composeEvent=new ol.render.Event(type,map,vectorContext,frameState,context,null);map.dispatchEvent(composeEvent);vectorContext.flush()}};ol.renderer.dom.Map.prototype.getType=function(){return ol.RendererType.DOM};ol.renderer.dom.Map.prototype.renderFrame=function(frameState){if(goog.isNull(frameState)){if(this.renderedVisible_){goog.style.setElementShown(this.layersPane_,false);this.renderedVisible_=false}return}var addChild;if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){addChild=(function(elem){goog.dom.appendChild(this.layersPane_,elem)})}else{addChild=(function(elem,i){goog.dom.insertChildAt(this.layersPane_,elem,i)})}var map=this.getMap();if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)&&(map.hasListener(ol.render.EventType.PRECOMPOSE)||map.hasListener(ol.render.EventType.POSTCOMPOSE))){var canvas=this.context_.canvas;var pixelRatio=frameState.pixelRatio;canvas.width=frameState.size[0]*pixelRatio;canvas.height=frameState.size[1]*pixelRatio}this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,frameState);var layerStatesArray=frameState.layerStatesArray;goog.array.stableSort(layerStatesArray,ol.renderer.Map.sortByZIndex);var viewResolution=frameState.viewState.resolution;var i,ii,layer,layerRenderer,layerState;for(i=0,ii=layerStatesArray.length;i<ii;++i){layerState=layerStatesArray[i];layer=layerState.layer;layerRenderer=(this.getLayerRenderer(layer));goog.asserts.assertInstanceof(layerRenderer,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer");addChild.call(this,layerRenderer.getTarget(),i);if(ol.layer.Layer.visibleAtResolution(layerState,viewResolution)&&layerState.sourceState==ol.source.State.READY){if(layerRenderer.prepareFrame(frameState,layerState)){layerRenderer.composeFrame(frameState,layerState)}}else{layerRenderer.clearFrame()}}var layerStates=frameState.layerStates;var layerKey;for(layerKey in this.getLayerRenderers()){if(!(layerKey in layerStates)){layerRenderer=this.getLayerRendererByKey(layerKey);goog.asserts.assertInstanceof(layerRenderer,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer");goog.dom.removeNode(layerRenderer.getTarget())}}if(!this.renderedVisible_){goog.style.setElementShown(this.layersPane_,true);this.renderedVisible_=true}this.calculateMatrices2D(frameState);this.scheduleRemoveUnusedLayerRenderers(frameState);this.scheduleExpireIconCache(frameState);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,frameState)};goog.provide("goog.webgl");goog.webgl.DEPTH_BUFFER_BIT=256;goog.webgl.STENCIL_BUFFER_BIT=1024;goog.webgl.COLOR_BUFFER_BIT=16384;goog.webgl.POINTS=0;goog.webgl.LINES=1;goog.webgl.LINE_LOOP=2;goog.webgl.LINE_STRIP=3;goog.webgl.TRIANGLES=4;goog.webgl.TRIANGLE_STRIP=5;goog.webgl.TRIANGLE_FAN=6;goog.webgl.ZERO=0;goog.webgl.ONE=1;goog.webgl.SRC_COLOR=768;goog.webgl.ONE_MINUS_SRC_COLOR=769;goog.webgl.SRC_ALPHA=770;goog.webgl.ONE_MINUS_SRC_ALPHA=771;goog.webgl.DST_ALPHA=772;goog.webgl.ONE_MINUS_DST_ALPHA=773;goog.webgl.DST_COLOR=774;goog.webgl.ONE_MINUS_DST_COLOR=775;goog.webgl.SRC_ALPHA_SATURATE=776;goog.webgl.FUNC_ADD=32774;goog.webgl.BLEND_EQUATION=32777;goog.webgl.BLEND_EQUATION_RGB=32777;goog.webgl.BLEND_EQUATION_ALPHA=34877;goog.webgl.FUNC_SUBTRACT=32778;goog.webgl.FUNC_REVERSE_SUBTRACT=32779;goog.webgl.BLEND_DST_RGB=32968;goog.webgl.BLEND_SRC_RGB=32969;goog.webgl.BLEND_DST_ALPHA=32970;goog.webgl.BLEND_SRC_ALPHA=32971;goog.webgl.CONSTANT_COLOR=32769;goog.webgl.ONE_MINUS_CONSTANT_COLOR=32770;goog.webgl.CONSTANT_ALPHA=32771;goog.webgl.ONE_MINUS_CONSTANT_ALPHA=32772;goog.webgl.BLEND_COLOR=32773;goog.webgl.ARRAY_BUFFER=34962;goog.webgl.ELEMENT_ARRAY_BUFFER=34963;goog.webgl.ARRAY_BUFFER_BINDING=34964;goog.webgl.ELEMENT_ARRAY_BUFFER_BINDING=34965;goog.webgl.STREAM_DRAW=35040;goog.webgl.STATIC_DRAW=35044;goog.webgl.DYNAMIC_DRAW=35048;goog.webgl.BUFFER_SIZE=34660;goog.webgl.BUFFER_USAGE=34661;goog.webgl.CURRENT_VERTEX_ATTRIB=34342;goog.webgl.FRONT=1028;goog.webgl.BACK=1029;goog.webgl.FRONT_AND_BACK=1032;goog.webgl.CULL_FACE=2884;goog.webgl.BLEND=3042;goog.webgl.DITHER=3024;goog.webgl.STENCIL_TEST=2960;goog.webgl.DEPTH_TEST=2929;goog.webgl.SCISSOR_TEST=3089;goog.webgl.POLYGON_OFFSET_FILL=32823;goog.webgl.SAMPLE_ALPHA_TO_COVERAGE=32926;goog.webgl.SAMPLE_COVERAGE=32928;goog.webgl.NO_ERROR=0;goog.webgl.INVALID_ENUM=1280;goog.webgl.INVALID_VALUE=1281;goog.webgl.INVALID_OPERATION=1282;goog.webgl.OUT_OF_MEMORY=1285;goog.webgl.CW=2304;goog.webgl.CCW=2305;goog.webgl.LINE_WIDTH=2849;goog.webgl.ALIASED_POINT_SIZE_RANGE=33901;goog.webgl.ALIASED_LINE_WIDTH_RANGE=33902;goog.webgl.CULL_FACE_MODE=2885;goog.webgl.FRONT_FACE=2886;goog.webgl.DEPTH_RANGE=2928;goog.webgl.DEPTH_WRITEMASK=2930;goog.webgl.DEPTH_CLEAR_VALUE=2931;goog.webgl.DEPTH_FUNC=2932;goog.webgl.STENCIL_CLEAR_VALUE=2961;goog.webgl.STENCIL_FUNC=2962;goog.webgl.STENCIL_FAIL=2964;goog.webgl.STENCIL_PASS_DEPTH_FAIL=2965;goog.webgl.STENCIL_PASS_DEPTH_PASS=2966;goog.webgl.STENCIL_REF=2967;goog.webgl.STENCIL_VALUE_MASK=2963;goog.webgl.STENCIL_WRITEMASK=2968;goog.webgl.STENCIL_BACK_FUNC=34816;goog.webgl.STENCIL_BACK_FAIL=34817;goog.webgl.STENCIL_BACK_PASS_DEPTH_FAIL=34818;goog.webgl.STENCIL_BACK_PASS_DEPTH_PASS=34819;goog.webgl.STENCIL_BACK_REF=36003;goog.webgl.STENCIL_BACK_VALUE_MASK=36004;goog.webgl.STENCIL_BACK_WRITEMASK=36005;goog.webgl.VIEWPORT=2978;goog.webgl.SCISSOR_BOX=3088;goog.webgl.COLOR_CLEAR_VALUE=3106;goog.webgl.COLOR_WRITEMASK=3107;goog.webgl.UNPACK_ALIGNMENT=3317;goog.webgl.PACK_ALIGNMENT=3333;goog.webgl.MAX_TEXTURE_SIZE=3379;goog.webgl.MAX_VIEWPORT_DIMS=3386;goog.webgl.SUBPIXEL_BITS=3408;goog.webgl.RED_BITS=3410;goog.webgl.GREEN_BITS=3411;goog.webgl.BLUE_BITS=3412;goog.webgl.ALPHA_BITS=3413;goog.webgl.DEPTH_BITS=3414;goog.webgl.STENCIL_BITS=3415;goog.webgl.POLYGON_OFFSET_UNITS=10752;goog.webgl.POLYGON_OFFSET_FACTOR=32824;goog.webgl.TEXTURE_BINDING_2D=32873;goog.webgl.SAMPLE_BUFFERS=32936;goog.webgl.SAMPLES=32937;goog.webgl.SAMPLE_COVERAGE_VALUE=32938;goog.webgl.SAMPLE_COVERAGE_INVERT=32939;goog.webgl.COMPRESSED_TEXTURE_FORMATS=34467;goog.webgl.DONT_CARE=4352;goog.webgl.FASTEST=4353;goog.webgl.NICEST=4354;goog.webgl.GENERATE_MIPMAP_HINT=33170;goog.webgl.BYTE=5120;goog.webgl.UNSIGNED_BYTE=5121;goog.webgl.SHORT=5122;goog.webgl.UNSIGNED_SHORT=5123;goog.webgl.INT=5124;goog.webgl.UNSIGNED_INT=5125;goog.webgl.FLOAT=5126;goog.webgl.DEPTH_COMPONENT=6402;goog.webgl.ALPHA=6406;goog.webgl.RGB=6407;goog.webgl.RGBA=6408;goog.webgl.LUMINANCE=6409;goog.webgl.LUMINANCE_ALPHA=6410;goog.webgl.UNSIGNED_SHORT_4_4_4_4=32819;goog.webgl.UNSIGNED_SHORT_5_5_5_1=32820;goog.webgl.UNSIGNED_SHORT_5_6_5=33635;goog.webgl.FRAGMENT_SHADER=35632;goog.webgl.VERTEX_SHADER=35633;goog.webgl.MAX_VERTEX_ATTRIBS=34921;goog.webgl.MAX_VERTEX_UNIFORM_VECTORS=36347;goog.webgl.MAX_VARYING_VECTORS=36348;goog.webgl.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661;goog.webgl.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660;goog.webgl.MAX_TEXTURE_IMAGE_UNITS=34930;goog.webgl.MAX_FRAGMENT_UNIFORM_VECTORS=36349;goog.webgl.SHADER_TYPE=35663;goog.webgl.DELETE_STATUS=35712;goog.webgl.LINK_STATUS=35714;goog.webgl.VALIDATE_STATUS=35715;goog.webgl.ATTACHED_SHADERS=35717;goog.webgl.ACTIVE_UNIFORMS=35718;goog.webgl.ACTIVE_ATTRIBUTES=35721;goog.webgl.SHADING_LANGUAGE_VERSION=35724;goog.webgl.CURRENT_PROGRAM=35725;goog.webgl.NEVER=512;goog.webgl.LESS=513;goog.webgl.EQUAL=514;goog.webgl.LEQUAL=515;goog.webgl.GREATER=516;goog.webgl.NOTEQUAL=517;goog.webgl.GEQUAL=518;goog.webgl.ALWAYS=519;goog.webgl.KEEP=7680;goog.webgl.REPLACE=7681;goog.webgl.INCR=7682;goog.webgl.DECR=7683;goog.webgl.INVERT=5386;goog.webgl.INCR_WRAP=34055;goog.webgl.DECR_WRAP=34056;goog.webgl.VENDOR=7936;goog.webgl.RENDERER=7937;goog.webgl.VERSION=7938;goog.webgl.NEAREST=9728;goog.webgl.LINEAR=9729;goog.webgl.NEAREST_MIPMAP_NEAREST=9984;goog.webgl.LINEAR_MIPMAP_NEAREST=9985;goog.webgl.NEAREST_MIPMAP_LINEAR=9986;goog.webgl.LINEAR_MIPMAP_LINEAR=9987;goog.webgl.TEXTURE_MAG_FILTER=10240;goog.webgl.TEXTURE_MIN_FILTER=10241;goog.webgl.TEXTURE_WRAP_S=10242;goog.webgl.TEXTURE_WRAP_T=10243;goog.webgl.TEXTURE_2D=3553;goog.webgl.TEXTURE=5890;goog.webgl.TEXTURE_CUBE_MAP=34067;goog.webgl.TEXTURE_BINDING_CUBE_MAP=34068;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_X=34069;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_X=34070;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Y=34071;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Z=34073;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074;goog.webgl.MAX_CUBE_MAP_TEXTURE_SIZE=34076;goog.webgl.TEXTURE0=33984;goog.webgl.TEXTURE1=33985;goog.webgl.TEXTURE2=33986;goog.webgl.TEXTURE3=33987;goog.webgl.TEXTURE4=33988;goog.webgl.TEXTURE5=33989;goog.webgl.TEXTURE6=33990;goog.webgl.TEXTURE7=33991;goog.webgl.TEXTURE8=33992;goog.webgl.TEXTURE9=33993;goog.webgl.TEXTURE10=33994;goog.webgl.TEXTURE11=33995;goog.webgl.TEXTURE12=33996;goog.webgl.TEXTURE13=33997;goog.webgl.TEXTURE14=33998;goog.webgl.TEXTURE15=33999;goog.webgl.TEXTURE16=34000;goog.webgl.TEXTURE17=34001;goog.webgl.TEXTURE18=34002;goog.webgl.TEXTURE19=34003;goog.webgl.TEXTURE20=34004;goog.webgl.TEXTURE21=34005;goog.webgl.TEXTURE22=34006;goog.webgl.TEXTURE23=34007;goog.webgl.TEXTURE24=34008;goog.webgl.TEXTURE25=34009;goog.webgl.TEXTURE26=34010;goog.webgl.TEXTURE27=34011;goog.webgl.TEXTURE28=34012;goog.webgl.TEXTURE29=34013;goog.webgl.TEXTURE30=34014;goog.webgl.TEXTURE31=34015;goog.webgl.ACTIVE_TEXTURE=34016;goog.webgl.REPEAT=10497;goog.webgl.CLAMP_TO_EDGE=33071;goog.webgl.MIRRORED_REPEAT=33648;goog.webgl.FLOAT_VEC2=35664;goog.webgl.FLOAT_VEC3=35665;goog.webgl.FLOAT_VEC4=35666;goog.webgl.INT_VEC2=35667;goog.webgl.INT_VEC3=35668;goog.webgl.INT_VEC4=35669;goog.webgl.BOOL=35670;goog.webgl.BOOL_VEC2=35671;goog.webgl.BOOL_VEC3=35672;goog.webgl.BOOL_VEC4=35673;goog.webgl.FLOAT_MAT2=35674;goog.webgl.FLOAT_MAT3=35675;goog.webgl.FLOAT_MAT4=35676;goog.webgl.SAMPLER_2D=35678;goog.webgl.SAMPLER_CUBE=35680;goog.webgl.VERTEX_ATTRIB_ARRAY_ENABLED=34338;goog.webgl.VERTEX_ATTRIB_ARRAY_SIZE=34339;goog.webgl.VERTEX_ATTRIB_ARRAY_STRIDE=34340;goog.webgl.VERTEX_ATTRIB_ARRAY_TYPE=34341;goog.webgl.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922;goog.webgl.VERTEX_ATTRIB_ARRAY_POINTER=34373;goog.webgl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975;goog.webgl.COMPILE_STATUS=35713;goog.webgl.LOW_FLOAT=36336;goog.webgl.MEDIUM_FLOAT=36337;goog.webgl.HIGH_FLOAT=36338;goog.webgl.LOW_INT=36339;goog.webgl.MEDIUM_INT=36340;goog.webgl.HIGH_INT=36341;goog.webgl.FRAMEBUFFER=36160;goog.webgl.RENDERBUFFER=36161;goog.webgl.RGBA4=32854;goog.webgl.RGB5_A1=32855;goog.webgl.RGB565=36194;goog.webgl.DEPTH_COMPONENT16=33189;goog.webgl.STENCIL_INDEX=6401;goog.webgl.STENCIL_INDEX8=36168;goog.webgl.DEPTH_STENCIL=34041;goog.webgl.RENDERBUFFER_WIDTH=36162;goog.webgl.RENDERBUFFER_HEIGHT=36163;goog.webgl.RENDERBUFFER_INTERNAL_FORMAT=36164;goog.webgl.RENDERBUFFER_RED_SIZE=36176;goog.webgl.RENDERBUFFER_GREEN_SIZE=36177;goog.webgl.RENDERBUFFER_BLUE_SIZE=36178;goog.webgl.RENDERBUFFER_ALPHA_SIZE=36179;goog.webgl.RENDERBUFFER_DEPTH_SIZE=36180;goog.webgl.RENDERBUFFER_STENCIL_SIZE=36181;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051;goog.webgl.COLOR_ATTACHMENT0=36064;goog.webgl.DEPTH_ATTACHMENT=36096;goog.webgl.STENCIL_ATTACHMENT=36128;goog.webgl.DEPTH_STENCIL_ATTACHMENT=33306;goog.webgl.NONE=0;goog.webgl.FRAMEBUFFER_COMPLETE=36053;goog.webgl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054;goog.webgl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055;goog.webgl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057;goog.webgl.FRAMEBUFFER_UNSUPPORTED=36061;goog.webgl.FRAMEBUFFER_BINDING=36006;goog.webgl.RENDERBUFFER_BINDING=36007;goog.webgl.MAX_RENDERBUFFER_SIZE=34024;goog.webgl.INVALID_FRAMEBUFFER_OPERATION=1286;goog.webgl.UNPACK_FLIP_Y_WEBGL=37440;goog.webgl.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;goog.webgl.CONTEXT_LOST_WEBGL=37442;goog.webgl.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443;goog.webgl.BROWSER_DEFAULT_WEBGL=37444;goog.webgl.HALF_FLOAT_OES=36193;goog.webgl.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723;goog.webgl.VERTEX_ARRAY_BINDING_OES=34229;goog.webgl.UNMASKED_VENDOR_WEBGL=37445;goog.webgl.UNMASKED_RENDERER_WEBGL=37446;goog.webgl.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;goog.webgl.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;goog.webgl.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;goog.webgl.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;goog.webgl.TEXTURE_MAX_ANISOTROPY_EXT=34046;goog.webgl.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047;goog.provide("ol.webgl.Fragment");goog.provide("ol.webgl.Shader");goog.provide("ol.webgl.Vertex");goog.provide("ol.webgl.shader");goog.require("goog.functions");goog.require("goog.webgl");goog.require("ol.webgl");ol.webgl.Shader=function(source){this.source_=source};ol.webgl.Shader.prototype.getType=goog.abstractMethod;ol.webgl.Shader.prototype.getSource=function(){return this.source_};ol.webgl.Shader.prototype.isAnimated=goog.functions.FALSE;ol.webgl.shader.Fragment=function(source){goog.base(this,source)};goog.inherits(ol.webgl.shader.Fragment,ol.webgl.Shader);ol.webgl.shader.Fragment.prototype.getType=function(){return goog.webgl.FRAGMENT_SHADER};ol.webgl.shader.Vertex=function(source){goog.base(this,source)};goog.inherits(ol.webgl.shader.Vertex,ol.webgl.Shader);ol.webgl.shader.Vertex.prototype.getType=function(){return goog.webgl.VERTEX_SHADER};goog.provide("ol.render.webgl.imagereplay.shader.Color");goog.provide("ol.render.webgl.imagereplay.shader.Color.Locations");goog.provide("ol.render.webgl.imagereplay.shader.ColorFragment");goog.provide("ol.render.webgl.imagereplay.shader.ColorVertex");goog.require("ol.webgl.shader");ol.render.webgl.imagereplay.shader.ColorFragment=function(){goog.base(this,ol.render.webgl.imagereplay.shader.ColorFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.ColorFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.ColorFragment);ol.render.webgl.imagereplay.shader.ColorFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\n// @see https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/filters/skia/SkiaImageFilterBuilder.cpp\nuniform mat4 u_colorMatrix;\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n  gl_FragColor.rgb = (u_colorMatrix * vec4(texColor.rgb, 1.)).rgb;\n}\n";ol.render.webgl.imagereplay.shader.ColorFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform mat4 k;uniform float l;uniform sampler2D m;void main(void){vec4 texColor=texture2D(m,a);float alpha=texColor.a*b*l;if(alpha==0.0){discard;}gl_FragColor.a=alpha;gl_FragColor.rgb=(k*vec4(texColor.rgb,1.)).rgb;}";ol.render.webgl.imagereplay.shader.ColorFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.ColorFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.ColorFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.ColorVertex=function(){goog.base(this,ol.render.webgl.imagereplay.shader.ColorVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.ColorVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.ColorVertex);ol.render.webgl.imagereplay.shader.ColorVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.ColorVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.ColorVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.ColorVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.ColorVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Color.Locations=function(gl,program){this.u_colorMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_colorMatrix":"k");this.u_image=gl.getUniformLocation(program,goog.DEBUG?"u_image":"m");this.u_offsetRotateMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=gl.getUniformLocation(program,goog.DEBUG?"u_opacity":"l");this.u_projectionMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=gl.getAttribLocation(program,goog.DEBUG?"a_offsets":"e");this.a_opacity=gl.getAttribLocation(program,goog.DEBUG?"a_opacity":"f");this.a_position=gl.getAttribLocation(program,goog.DEBUG?"a_position":"c");this.a_rotateWithView=gl.getAttribLocation(program,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=gl.getAttribLocation(program,goog.DEBUG?"a_texCoord":"d")};goog.provide("ol.render.webgl.imagereplay.shader.Default");goog.provide("ol.render.webgl.imagereplay.shader.Default.Locations");goog.provide("ol.render.webgl.imagereplay.shader.DefaultFragment");goog.provide("ol.render.webgl.imagereplay.shader.DefaultVertex");goog.require("ol.webgl.shader");ol.render.webgl.imagereplay.shader.DefaultFragment=function(){goog.base(this,ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultFragment);ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n";ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}";ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.DefaultVertex=function(){goog.base(this,ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultVertex);ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Default.Locations=function(gl,program){this.u_image=gl.getUniformLocation(program,goog.DEBUG?"u_image":"l");this.u_offsetRotateMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=gl.getUniformLocation(program,goog.DEBUG?"u_opacity":"k");this.u_projectionMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=gl.getAttribLocation(program,goog.DEBUG?"a_offsets":"e");this.a_opacity=gl.getAttribLocation(program,goog.DEBUG?"a_opacity":"f");this.a_position=gl.getAttribLocation(program,goog.DEBUG?"a_position":"c");this.a_rotateWithView=gl.getAttribLocation(program,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=gl.getAttribLocation(program,goog.DEBUG?"a_texCoord":"d")};goog.provide("ol.webgl.Buffer");goog.require("goog.webgl");goog.require("ol");ol.webgl.BufferUsage={STATIC_DRAW:goog.webgl.STATIC_DRAW,STREAM_DRAW:goog.webgl.STREAM_DRAW,DYNAMIC_DRAW:goog.webgl.DYNAMIC_DRAW};ol.webgl.Buffer=function(opt_arr,opt_usage){this.arr_=goog.isDef(opt_arr)?opt_arr:[];this.usage_=goog.isDef(opt_usage)?opt_usage:ol.webgl.BufferUsage.STATIC_DRAW};ol.webgl.Buffer.prototype.getArray=function(){return this.arr_};ol.webgl.Buffer.prototype.getUsage=function(){return this.usage_};goog.provide("ol.webgl.Context");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.log");goog.require("goog.object");goog.require("ol");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.WebGLContextEventType");ol.webgl.BufferCacheEntry;ol.webgl.Context=function(canvas,gl){this.canvas_=canvas;this.gl_=gl;this.bufferCache_={};this.shaderCache_={};this.programCache_={};this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null;this.hasOESElementIndexUint=goog.array.contains(ol.WEBGL_EXTENSIONS,"OES_element_index_uint");if(this.hasOESElementIndexUint){var ext=gl.getExtension("OES_element_index_uint");goog.asserts.assert(!goog.isNull(ext),'Failed to get extension "OES_element_index_uint"')}goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,false,this);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,false,this)};ol.webgl.Context.prototype.bindBuffer=function(target,buf){var gl=this.getGL();var arr=buf.getArray();var bufferKey=goog.getUid(buf);if(bufferKey in this.bufferCache_){var bufferCacheEntry=this.bufferCache_[bufferKey];gl.bindBuffer(target,bufferCacheEntry.buffer)}else{var buffer=gl.createBuffer();gl.bindBuffer(target,buffer);goog.asserts.assert(target==goog.webgl.ARRAY_BUFFER||target==goog.webgl.ELEMENT_ARRAY_BUFFER,"target is supposed to be an ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER");var arrayBuffer;if(target==goog.webgl.ARRAY_BUFFER){arrayBuffer=new Float32Array(arr)}else{if(target==goog.webgl.ELEMENT_ARRAY_BUFFER){arrayBuffer=this.hasOESElementIndexUint?new Uint32Array(arr):new Uint16Array(arr)}else{goog.asserts.fail()}}gl.bufferData(target,arrayBuffer,buf.getUsage());this.bufferCache_[bufferKey]={buf:buf,buffer:buffer}}};ol.webgl.Context.prototype.deleteBuffer=function(buf){var gl=this.getGL();var bufferKey=goog.getUid(buf);goog.asserts.assert(bufferKey in this.bufferCache_,"attempted to delete uncached buffer");var bufferCacheEntry=this.bufferCache_[bufferKey];if(!gl.isContextLost()){gl.deleteBuffer(bufferCacheEntry.buffer)}delete this.bufferCache_[bufferKey]};ol.webgl.Context.prototype.disposeInternal=function(){var gl=this.getGL();if(!gl.isContextLost()){goog.object.forEach(this.bufferCache_,function(bufferCacheEntry){gl.deleteBuffer(bufferCacheEntry.buffer)});goog.object.forEach(this.programCache_,function(program){gl.deleteProgram(program)});goog.object.forEach(this.shaderCache_,function(shader){gl.deleteShader(shader)});gl.deleteFramebuffer(this.hitDetectionFramebuffer_);gl.deleteRenderbuffer(this.hitDetectionRenderbuffer_);gl.deleteTexture(this.hitDetectionTexture_)}};ol.webgl.Context.prototype.getCanvas=function(){return this.canvas_};ol.webgl.Context.prototype.getGL=function(){return this.gl_};ol.webgl.Context.prototype.getHitDetectionFramebuffer=function(){if(goog.isNull(this.hitDetectionFramebuffer_)){this.initHitDetectionFramebuffer_()}return this.hitDetectionFramebuffer_};ol.webgl.Context.prototype.getShader=function(shaderObject){var shaderKey=goog.getUid(shaderObject);if(shaderKey in this.shaderCache_){return this.shaderCache_[shaderKey]}else{var gl=this.getGL();var shader=gl.createShader(shaderObject.getType());gl.shaderSource(shader,shaderObject.getSource());gl.compileShader(shader);if(goog.DEBUG){if(!gl.getShaderParameter(shader,goog.webgl.COMPILE_STATUS)&&!gl.isContextLost()){goog.log.error(this.logger_,gl.getShaderInfoLog(shader))}}goog.asserts.assert(gl.getShaderParameter(shader,goog.webgl.COMPILE_STATUS)||gl.isContextLost(),"illegal state, shader not compiled or context lost");this.shaderCache_[shaderKey]=shader;return shader}};ol.webgl.Context.prototype.getProgram=function(fragmentShaderObject,vertexShaderObject){var programKey=goog.getUid(fragmentShaderObject)+"/"+goog.getUid(vertexShaderObject);if(programKey in this.programCache_){return this.programCache_[programKey]}else{var gl=this.getGL();var program=gl.createProgram();gl.attachShader(program,this.getShader(fragmentShaderObject));gl.attachShader(program,this.getShader(vertexShaderObject));gl.linkProgram(program);if(goog.DEBUG){if(!gl.getProgramParameter(program,goog.webgl.LINK_STATUS)&&!gl.isContextLost()){goog.log.error(this.logger_,gl.getProgramInfoLog(program))}}goog.asserts.assert(gl.getProgramParameter(program,goog.webgl.LINK_STATUS)||gl.isContextLost(),"illegal state, shader not linked or context lost");this.programCache_[programKey]=program;return program}};ol.webgl.Context.prototype.handleWebGLContextLost=function(){goog.object.clear(this.bufferCache_);goog.object.clear(this.shaderCache_);goog.object.clear(this.programCache_);this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null};ol.webgl.Context.prototype.handleWebGLContextRestored=function(){};ol.webgl.Context.prototype.initHitDetectionFramebuffer_=function(){var gl=this.gl_;var framebuffer=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer);var texture=ol.webgl.Context.createEmptyTexture(gl,1,1);var renderbuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,renderbuffer);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,1,1);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,texture,0);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,renderbuffer);gl.bindTexture(gl.TEXTURE_2D,null);gl.bindRenderbuffer(gl.RENDERBUFFER,null);gl.bindFramebuffer(gl.FRAMEBUFFER,null);this.hitDetectionFramebuffer_=framebuffer;this.hitDetectionTexture_=texture;this.hitDetectionRenderbuffer_=renderbuffer};ol.webgl.Context.prototype.useProgram=function(program){if(program==this.currentProgram_){return false}else{var gl=this.getGL();gl.useProgram(program);this.currentProgram_=program;return true}};ol.webgl.Context.prototype.logger_=goog.log.getLogger("ol.webgl.Context");ol.webgl.Context.createTexture_=function(gl,opt_wrapS,opt_wrapT){var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);if(goog.isDef(opt_wrapS)){gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,opt_wrapS)}if(goog.isDef(opt_wrapT)){gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,opt_wrapT)}return texture};ol.webgl.Context.createEmptyTexture=function(gl,width,height,opt_wrapS,opt_wrapT){var texture=ol.webgl.Context.createTexture_(gl,opt_wrapS,opt_wrapT);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width,height,0,gl.RGBA,gl.UNSIGNED_BYTE,null);return texture};ol.webgl.Context.createTexture=function(gl,image,opt_wrapS,opt_wrapT){var texture=ol.webgl.Context.createTexture_(gl,opt_wrapS,opt_wrapT);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image);return texture};goog.provide("ol.render.webgl.ImageReplay");goog.provide("ol.render.webgl.ReplayGroup");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.color.Matrix");goog.require("ol.extent");goog.require("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");goog.require("ol.render.webgl.imagereplay.shader.Color");goog.require("ol.render.webgl.imagereplay.shader.Color.Locations");goog.require("ol.render.webgl.imagereplay.shader.ColorFragment");goog.require("ol.render.webgl.imagereplay.shader.ColorVertex");goog.require("ol.render.webgl.imagereplay.shader.Default");goog.require("ol.render.webgl.imagereplay.shader.Default.Locations");goog.require("ol.render.webgl.imagereplay.shader.DefaultFragment");goog.require("ol.render.webgl.imagereplay.shader.DefaultVertex");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.Context");ol.render.webgl.ImageReplay=function(tolerance,maxExtent){goog.base(this);this.anchorX_=undefined;this.anchorY_=undefined;this.colorMatrix_=new ol.color.Matrix();this.origin_=ol.extent.getCenter(maxExtent);this.groupIndices_=[];this.hitDetectionGroupIndices_=[];this.height_=undefined;this.images_=[];this.hitDetectionImages_=[];this.imageHeight_=undefined;this.imageWidth_=undefined;this.indices_=[];this.indicesBuffer_=null;this.colorLocations_=null;this.defaultLocations_=null;this.opacity_=undefined;this.offsetRotateMatrix_=goog.vec.Mat4.createNumberIdentity();this.offsetScaleMatrix_=goog.vec.Mat4.createNumberIdentity();this.originX_=undefined;this.originY_=undefined;this.projectionMatrix_=goog.vec.Mat4.createNumberIdentity();this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.textures_=[];this.hitDetectionTextures_=[];this.vertices_=[];this.verticesBuffer_=null;this.startIndices_=[];this.startIndicesFeature_=[];this.width_=undefined};goog.inherits(ol.render.webgl.ImageReplay,ol.render.VectorContext);ol.render.webgl.ImageReplay.prototype.getDeleteResourcesFunction=function(context){goog.asserts.assert(!goog.isNull(this.verticesBuffer_),"verticesBuffer must not be null");goog.asserts.assert(!goog.isNull(this.indicesBuffer_),"indicesBuffer must not be null");var verticesBuffer=this.verticesBuffer_;var indicesBuffer=this.indicesBuffer_;var textures=this.textures_;var hitDetectionTextures=this.hitDetectionTextures_;var gl=context.getGL();return function(){if(!gl.isContextLost()){var i,ii;for(i=0,ii=textures.length;i<ii;++i){gl.deleteTexture(textures[i])}for(i=0,ii=hitDetectionTextures.length;i<ii;++i){gl.deleteTexture(hitDetectionTextures[i])}}context.deleteBuffer(verticesBuffer);context.deleteBuffer(indicesBuffer)}};ol.render.webgl.ImageReplay.prototype.drawAsync=goog.abstractMethod;ol.render.webgl.ImageReplay.prototype.drawCoordinates_=function(flatCoordinates,offset,end,stride){goog.asserts.assert(goog.isDef(this.anchorX_),"anchorX is defined");goog.asserts.assert(goog.isDef(this.anchorY_),"anchorY is defined");goog.asserts.assert(goog.isDef(this.height_),"height is defined");goog.asserts.assert(goog.isDef(this.imageHeight_),"imageHeight is defined");goog.asserts.assert(goog.isDef(this.imageWidth_),"imageWidth is defined");goog.asserts.assert(goog.isDef(this.opacity_),"opacity is defined");goog.asserts.assert(goog.isDef(this.originX_),"originX is defined");goog.asserts.assert(goog.isDef(this.originY_),"originY is defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"rotateWithView is defined");goog.asserts.assert(goog.isDef(this.rotation_),"rotation is defined");goog.asserts.assert(goog.isDef(this.scale_),"scale is defined");goog.asserts.assert(goog.isDef(this.width_),"width is defined");var anchorX=this.anchorX_;var anchorY=this.anchorY_;var height=this.height_;var imageHeight=this.imageHeight_;var imageWidth=this.imageWidth_;var opacity=this.opacity_;var originX=this.originX_;var originY=this.originY_;var rotateWithView=this.rotateWithView_?1:0;var rotation=this.rotation_;var scale=this.scale_;var width=this.width_;var cos=Math.cos(rotation);var sin=Math.sin(rotation);var numIndices=this.indices_.length;var numVertices=this.vertices_.length;var i,n,offsetX,offsetY,x,y;for(i=offset;i<end;i+=stride){x=flatCoordinates[i]-this.origin_[0];y=flatCoordinates[i+1]-this.origin_[1];n=numVertices/8;offsetX=-scale*anchorX;offsetY=-scale*(height-anchorY);this.vertices_[numVertices++]=x;this.vertices_[numVertices++]=y;this.vertices_[numVertices++]=offsetX*cos-offsetY*sin;this.vertices_[numVertices++]=offsetX*sin+offsetY*cos;this.vertices_[numVertices++]=originX/imageWidth;this.vertices_[numVertices++]=(originY+height)/imageHeight;this.vertices_[numVertices++]=opacity;this.vertices_[numVertices++]=rotateWithView;offsetX=scale*(width-anchorX);offsetY=-scale*(height-anchorY);this.vertices_[numVertices++]=x;this.vertices_[numVertices++]=y;this.vertices_[numVertices++]=offsetX*cos-offsetY*sin;this.vertices_[numVertices++]=offsetX*sin+offsetY*cos;this.vertices_[numVertices++]=(originX+width)/imageWidth;this.vertices_[numVertices++]=(originY+height)/imageHeight;this.vertices_[numVertices++]=opacity;this.vertices_[numVertices++]=rotateWithView;offsetX=scale*(width-anchorX);offsetY=scale*anchorY;this.vertices_[numVertices++]=x;this.vertices_[numVertices++]=y;this.vertices_[numVertices++]=offsetX*cos-offsetY*sin;this.vertices_[numVertices++]=offsetX*sin+offsetY*cos;this.vertices_[numVertices++]=(originX+width)/imageWidth;this.vertices_[numVertices++]=originY/imageHeight;this.vertices_[numVertices++]=opacity;this.vertices_[numVertices++]=rotateWithView;offsetX=-scale*anchorX;offsetY=scale*anchorY;this.vertices_[numVertices++]=x;this.vertices_[numVertices++]=y;this.vertices_[numVertices++]=offsetX*cos-offsetY*sin;this.vertices_[numVertices++]=offsetX*sin+offsetY*cos;this.vertices_[numVertices++]=originX/imageWidth;this.vertices_[numVertices++]=originY/imageHeight;this.vertices_[numVertices++]=opacity;this.vertices_[numVertices++]=rotateWithView;this.indices_[numIndices++]=n;this.indices_[numIndices++]=n+1;this.indices_[numIndices++]=n+2;this.indices_[numIndices++]=n;this.indices_[numIndices++]=n+2;this.indices_[numIndices++]=n+3}return numVertices};ol.render.webgl.ImageReplay.prototype.drawMultiPointGeometry=function(multiPointGeometry,feature){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(feature);var flatCoordinates=multiPointGeometry.getFlatCoordinates();var stride=multiPointGeometry.getStride();this.drawCoordinates_(flatCoordinates,0,flatCoordinates.length,stride)};ol.render.webgl.ImageReplay.prototype.drawPointGeometry=function(pointGeometry,feature){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(feature);var flatCoordinates=pointGeometry.getFlatCoordinates();var stride=pointGeometry.getStride();this.drawCoordinates_(flatCoordinates,0,flatCoordinates.length,stride)};ol.render.webgl.ImageReplay.prototype.finish=function(context){var gl=context.getGL();this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.images_.length===this.groupIndices_.length,"number of images and groupIndices match");this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionImages_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionImages and hitDetectionGroupIndices match");this.verticesBuffer_=new ol.webgl.Buffer(this.vertices_);context.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);var indices=this.indices_;var bits=context.hasOESElementIndexUint?32:16;goog.asserts.assert(indices[indices.length-1]<Math.pow(2,bits),'Too large element index detected [%s] (OES_element_index_uint "%s")',indices[indices.length-1],context.hasOESElementIndexUint);this.indicesBuffer_=new ol.webgl.Buffer(indices);context.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var texturePerImage={};this.createTextures_(this.textures_,this.images_,texturePerImage,gl);goog.asserts.assert(this.textures_.length===this.groupIndices_.length,"number of textures and groupIndices match");this.createTextures_(this.hitDetectionTextures_,this.hitDetectionImages_,texturePerImage,gl);goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.images_=null;this.hitDetectionImages_=null;this.imageHeight_=undefined;this.imageWidth_=undefined;this.indices_=null;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.vertices_=null;this.width_=undefined};ol.render.webgl.ImageReplay.prototype.createTextures_=function(textures,images,texturePerImage,gl){goog.asserts.assert(textures.length===0,"upon creation, textures is empty");var texture,image,uid,i;var ii=images.length;for(i=0;i<ii;++i){image=images[i];uid=goog.getUid(image).toString();if(goog.object.containsKey(texturePerImage,uid)){texture=texturePerImage[uid]}else{texture=ol.webgl.Context.createTexture(gl,image,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE);texturePerImage[uid]=texture}textures[i]=texture}};ol.render.webgl.ImageReplay.prototype.replay=function(context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,featureCallback,oneByOne,opt_hitExtent){var gl=context.getGL();goog.asserts.assert(!goog.isNull(this.verticesBuffer_),"verticesBuffer must not be null");context.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);goog.asserts.assert(!goog.isNull(this.indicesBuffer_),"indecesBuffer must not be null");context.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var useColor=brightness||contrast!=1||hue||saturation!=1;var fragmentShader,vertexShader;if(useColor){fragmentShader=ol.render.webgl.imagereplay.shader.ColorFragment.getInstance();vertexShader=ol.render.webgl.imagereplay.shader.ColorVertex.getInstance()}else{fragmentShader=ol.render.webgl.imagereplay.shader.DefaultFragment.getInstance();vertexShader=ol.render.webgl.imagereplay.shader.DefaultVertex.getInstance()}var program=context.getProgram(fragmentShader,vertexShader);var locations;if(useColor){if(goog.isNull(this.colorLocations_)){locations=new ol.render.webgl.imagereplay.shader.Color.Locations(gl,program);this.colorLocations_=locations}else{locations=this.colorLocations_}}else{if(goog.isNull(this.defaultLocations_)){locations=new ol.render.webgl.imagereplay.shader.Default.Locations(gl,program);this.defaultLocations_=locations}else{locations=this.defaultLocations_}}context.useProgram(program);gl.enableVertexAttribArray(locations.a_position);gl.vertexAttribPointer(locations.a_position,2,goog.webgl.FLOAT,false,32,0);gl.enableVertexAttribArray(locations.a_offsets);gl.vertexAttribPointer(locations.a_offsets,2,goog.webgl.FLOAT,false,32,8);gl.enableVertexAttribArray(locations.a_texCoord);gl.vertexAttribPointer(locations.a_texCoord,2,goog.webgl.FLOAT,false,32,16);gl.enableVertexAttribArray(locations.a_opacity);gl.vertexAttribPointer(locations.a_opacity,1,goog.webgl.FLOAT,false,32,24);gl.enableVertexAttribArray(locations.a_rotateWithView);gl.vertexAttribPointer(locations.a_rotateWithView,1,goog.webgl.FLOAT,false,32,28);var projectionMatrix=this.projectionMatrix_;ol.vec.Mat4.makeTransform2D(projectionMatrix,0,0,2/(resolution*size[0]),2/(resolution*size[1]),-rotation,-(center[0]-this.origin_[0]),-(center[1]-this.origin_[1]));var offsetScaleMatrix=this.offsetScaleMatrix_;goog.vec.Mat4.makeScale(offsetScaleMatrix,2/size[0],2/size[1],1);var offsetRotateMatrix=this.offsetRotateMatrix_;goog.vec.Mat4.makeIdentity(offsetRotateMatrix);if(rotation!==0){goog.vec.Mat4.rotateZ(offsetRotateMatrix,-rotation)}gl.uniformMatrix4fv(locations.u_projectionMatrix,false,projectionMatrix);gl.uniformMatrix4fv(locations.u_offsetScaleMatrix,false,offsetScaleMatrix);gl.uniformMatrix4fv(locations.u_offsetRotateMatrix,false,offsetRotateMatrix);gl.uniform1f(locations.u_opacity,opacity);if(useColor){gl.uniformMatrix4fv(locations.u_colorMatrix,false,this.colorMatrix_.getMatrix(brightness,contrast,hue,saturation))}var result;if(!goog.isDef(featureCallback)){this.drawReplay_(gl,context,skippedFeaturesHash,this.textures_,this.groupIndices_)}else{result=this.drawHitDetectionReplay_(gl,context,skippedFeaturesHash,featureCallback,oneByOne,opt_hitExtent)}gl.disableVertexAttribArray(locations.a_position);gl.disableVertexAttribArray(locations.a_offsets);gl.disableVertexAttribArray(locations.a_texCoord);gl.disableVertexAttribArray(locations.a_opacity);gl.disableVertexAttribArray(locations.a_rotateWithView);return result};ol.render.webgl.ImageReplay.prototype.drawReplay_=function(gl,context,skippedFeaturesHash,textures,groupIndices){goog.asserts.assert(textures.length===groupIndices.length,"number of textures and groupIndeces match");var elementType=context.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;var elementSize=context.hasOESElementIndexUint?4:2;if(!goog.object.isEmpty(skippedFeaturesHash)){this.drawReplaySkipping_(gl,skippedFeaturesHash,textures,groupIndices,elementType,elementSize)}else{var i,ii,start;for(i=0,ii=textures.length,start=0;i<ii;++i){gl.bindTexture(goog.webgl.TEXTURE_2D,textures[i]);var end=groupIndices[i];this.drawElements_(gl,start,end,elementType,elementSize);start=end}}};ol.render.webgl.ImageReplay.prototype.drawReplaySkipping_=function(gl,skippedFeaturesHash,textures,groupIndices,elementType,elementSize){var featureIndex=0;var i,ii;for(i=0,ii=textures.length;i<ii;++i){gl.bindTexture(goog.webgl.TEXTURE_2D,textures[i]);var groupStart=(i>0)?groupIndices[i-1]:0;var groupEnd=groupIndices[i];var start=groupStart;var end=groupStart;while(featureIndex<this.startIndices_.length&&this.startIndices_[featureIndex]<=groupEnd){var feature=this.startIndicesFeature_[featureIndex];var featureUid=goog.getUid(feature).toString();if(goog.isDef(skippedFeaturesHash[featureUid])){if(start!==end){this.drawElements_(gl,start,end,elementType,elementSize)}start=(featureIndex===this.startIndices_.length-1)?groupEnd:this.startIndices_[featureIndex+1];end=start}else{end=(featureIndex===this.startIndices_.length-1)?groupEnd:this.startIndices_[featureIndex+1]}featureIndex++}if(start!==end){this.drawElements_(gl,start,end,elementType,elementSize)}}};ol.render.webgl.ImageReplay.prototype.drawElements_=function(gl,start,end,elementType,elementSize){var numItems=end-start;var offsetInBytes=start*elementSize;gl.drawElements(goog.webgl.TRIANGLES,numItems,elementType,offsetInBytes)};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplay_=function(gl,context,skippedFeaturesHash,featureCallback,oneByOne,opt_hitExtent){if(!oneByOne){return this.drawHitDetectionReplayAll_(gl,context,skippedFeaturesHash,featureCallback)}else{return this.drawHitDetectionReplayOneByOne_(gl,context,skippedFeaturesHash,featureCallback,opt_hitExtent)}};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayAll_=function(gl,context,skippedFeaturesHash,featureCallback){gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);this.drawReplay_(gl,context,skippedFeaturesHash,this.hitDetectionTextures_,this.hitDetectionGroupIndices_);var result=featureCallback(null);if(result){return result}else{return undefined}};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayOneByOne_=function(gl,context,skippedFeaturesHash,featureCallback,opt_hitExtent){goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");var elementType=context.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;var elementSize=context.hasOESElementIndexUint?4:2;var i,groupStart,start,end,feature,featureUid;var featureIndex=this.startIndices_.length-1;for(i=this.hitDetectionTextures_.length-1;i>=0;--i){gl.bindTexture(goog.webgl.TEXTURE_2D,this.hitDetectionTextures_[i]);groupStart=(i>0)?this.hitDetectionGroupIndices_[i-1]:0;end=this.hitDetectionGroupIndices_[i];while(featureIndex>=0&&this.startIndices_[featureIndex]>=groupStart){start=this.startIndices_[featureIndex];feature=this.startIndicesFeature_[featureIndex];featureUid=goog.getUid(feature).toString();if(!goog.isDef(skippedFeaturesHash[featureUid])&&goog.isDefAndNotNull(feature.getGeometry())&&(!goog.isDef(opt_hitExtent)||ol.extent.intersects(opt_hitExtent,feature.getGeometry().getExtent()))){gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);this.drawElements_(gl,start,end,elementType,elementSize);var result=featureCallback(feature);if(result){return result}}end=start;featureIndex--}}return undefined};ol.render.webgl.ImageReplay.prototype.setFillStrokeStyle=goog.abstractMethod;ol.render.webgl.ImageReplay.prototype.setImageStyle=function(imageStyle){var anchor=imageStyle.getAnchor();var image=imageStyle.getImage(1);var imageSize=imageStyle.getImageSize();var hitDetectionImage=imageStyle.getHitDetectionImage(1);var hitDetectionImageSize=imageStyle.getHitDetectionImageSize();var opacity=imageStyle.getOpacity();var origin=imageStyle.getOrigin();var rotateWithView=imageStyle.getRotateWithView();var rotation=imageStyle.getRotation();var size=imageStyle.getSize();var scale=imageStyle.getScale();goog.asserts.assert(!goog.isNull(anchor),"imageStyle anchor is not null");goog.asserts.assert(!goog.isNull(image),"imageStyle image is not null");goog.asserts.assert(!goog.isNull(imageSize),"imageStyle imageSize is not null");goog.asserts.assert(!goog.isNull(hitDetectionImage),"imageStyle hitDetectionImage is not null");goog.asserts.assert(!goog.isNull(hitDetectionImageSize),"imageStyle hitDetectionImageSize is not null");goog.asserts.assert(goog.isDef(opacity),"imageStyle opacity is defined");goog.asserts.assert(!goog.isNull(origin),"imageStyle origin is not null");goog.asserts.assert(goog.isDef(rotateWithView),"imageStyle rotateWithView is defined");goog.asserts.assert(goog.isDef(rotation),"imageStyle rotation is defined");goog.asserts.assert(!goog.isNull(size),"imageStyle size is not null");goog.asserts.assert(goog.isDef(scale),"imageStyle scale is defined");var currentImage;if(this.images_.length===0){this.images_.push(image)}else{currentImage=this.images_[this.images_.length-1];if(goog.getUid(currentImage)!=goog.getUid(image)){this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.groupIndices_.length===this.images_.length,"number of groupIndices and images match");this.images_.push(image)}}if(this.hitDetectionImages_.length===0){this.hitDetectionImages_.push(hitDetectionImage)}else{currentImage=this.hitDetectionImages_[this.hitDetectionImages_.length-1];if(goog.getUid(currentImage)!=goog.getUid(hitDetectionImage)){this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionGroupIndices_.length===this.hitDetectionImages_.length,"number of hitDetectionGroupIndices and hitDetectionImages match");this.hitDetectionImages_.push(hitDetectionImage)}}this.anchorX_=anchor[0];this.anchorY_=anchor[1];this.height_=size[1];this.imageHeight_=imageSize[1];this.imageWidth_=imageSize[0];this.opacity_=opacity;this.originX_=origin[0];this.originY_=origin[1];this.rotation_=rotation;this.rotateWithView_=rotateWithView;this.scale_=scale;this.width_=size[0]};ol.render.webgl.ReplayGroup=function(tolerance,maxExtent,opt_renderBuffer){this.maxExtent_=maxExtent;this.tolerance_=tolerance;this.renderBuffer_=opt_renderBuffer;this.replays_={}};ol.render.webgl.ReplayGroup.prototype.getDeleteResourcesFunction=function(context){var functions=[];var replayKey;for(replayKey in this.replays_){functions.push(this.replays_[replayKey].getDeleteResourcesFunction(context))}return goog.functions.sequence.apply(null,functions)};ol.render.webgl.ReplayGroup.prototype.finish=function(context){var replayKey;for(replayKey in this.replays_){this.replays_[replayKey].finish(context)}};ol.render.webgl.ReplayGroup.prototype.getReplay=function(zIndex,replayType){var replay=this.replays_[replayType];if(!goog.isDef(replay)){var constructor=ol.render.webgl.BATCH_CONSTRUCTORS_[replayType];goog.asserts.assert(goog.isDef(constructor),replayType+" constructor missing from ol.render.webgl.BATCH_CONSTRUCTORS_");replay=new constructor(this.tolerance_,this.maxExtent_);this.replays_[replayType]=replay}return replay};ol.render.webgl.ReplayGroup.prototype.isEmpty=function(){return goog.object.isEmpty(this.replays_)};ol.render.webgl.ReplayGroup.prototype.replay=function(context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash){var i,ii,replay,result;for(i=0,ii=ol.render.REPLAY_ORDER.length;i<ii;++i){replay=this.replays_[ol.render.REPLAY_ORDER[i]];if(goog.isDef(replay)){replay.replay(context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,undefined,false)}}};ol.render.webgl.ReplayGroup.prototype.replayHitDetection_=function(context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,featureCallback,oneByOne,opt_hitExtent){var i,replay,result;for(i=ol.render.REPLAY_ORDER.length-1;i>=0;--i){replay=this.replays_[ol.render.REPLAY_ORDER[i]];if(goog.isDef(replay)){result=replay.replay(context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,featureCallback,oneByOne,opt_hitExtent);if(result){return result}}}return undefined};ol.render.webgl.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(coordinate,context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,callback){var gl=context.getGL();gl.bindFramebuffer(gl.FRAMEBUFFER,context.getHitDetectionFramebuffer());var hitExtent;if(goog.isDef(this.renderBuffer_)){hitExtent=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(coordinate),resolution*this.renderBuffer_)}return this.replayHitDetection_(context,coordinate,resolution,rotation,ol.render.webgl.HIT_DETECTION_SIZE_,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,function(feature){var imageData=new Uint8Array(4);gl.readPixels(0,0,1,1,gl.RGBA,gl.UNSIGNED_BYTE,imageData);if(imageData[3]>0){var result=callback(feature);if(result){return result}}},true,hitExtent)};ol.render.webgl.ReplayGroup.prototype.hasFeatureAtCoordinate=function(coordinate,context,center,resolution,rotation,size,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash){var gl=context.getGL();gl.bindFramebuffer(gl.FRAMEBUFFER,context.getHitDetectionFramebuffer());var hasFeature=this.replayHitDetection_(context,coordinate,resolution,rotation,ol.render.webgl.HIT_DETECTION_SIZE_,pixelRatio,opacity,brightness,contrast,hue,saturation,skippedFeaturesHash,function(feature){var imageData=new Uint8Array(4);gl.readPixels(0,0,1,1,gl.RGBA,gl.UNSIGNED_BYTE,imageData);return imageData[3]>0},false);return goog.isDef(hasFeature)};ol.render.webgl.BATCH_CONSTRUCTORS_={Image:ol.render.webgl.ImageReplay};ol.render.webgl.HIT_DETECTION_SIZE_=[1,1];goog.provide("ol.render.webgl.Immediate");goog.require("goog.array");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.render.VectorContext");goog.require("ol.render.webgl.ImageReplay");goog.require("ol.render.webgl.ReplayGroup");ol.render.webgl.Immediate=function(context,center,resolution,rotation,size,extent,pixelRatio){goog.base(this);this.context_=context;this.center_=center;this.extent_=extent;this.pixelRatio_=pixelRatio;this.size_=size;this.rotation_=rotation;this.resolution_=resolution;this.imageStyle_=null;this.callbacksByZIndex_={}};goog.inherits(ol.render.webgl.Immediate,ol.render.VectorContext);ol.render.webgl.Immediate.prototype.flush=function(){var zs=goog.array.map(goog.object.getKeys(this.callbacksByZIndex_),Number);goog.array.sort(zs);var i,ii,callbacks,j,jj;for(i=0,ii=zs.length;i<ii;++i){callbacks=this.callbacksByZIndex_[zs[i].toString()];for(j=0,jj=callbacks.length;j<jj;++j){callbacks[j](this)}}};ol.render.webgl.Immediate.prototype.drawAsync=function(zIndex,callback){var zIndexKey=zIndex.toString();var callbacks=this.callbacksByZIndex_[zIndexKey];if(goog.isDef(callbacks)){callbacks.push(callback)}else{this.callbacksByZIndex_[zIndexKey]=[callback]}};ol.render.webgl.Immediate.prototype.drawCircleGeometry=function(circleGeometry,data){};ol.render.webgl.Immediate.prototype.drawFeature=function(feature,style){var geometry=style.getGeometryFunction()(feature);if(!goog.isDefAndNotNull(geometry)||!ol.extent.intersects(this.extent_,geometry.getExtent())){return}var zIndex=style.getZIndex();if(!goog.isDef(zIndex)){zIndex=0}this.drawAsync(zIndex,function(render){render.setFillStrokeStyle(style.getFill(),style.getStroke());render.setImageStyle(style.getImage());render.setTextStyle(style.getText());var type=geometry.getType();var renderGeometry=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_[type];if(renderGeometry){renderGeometry.call(render,geometry,null)}})};ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry=function(geometryCollectionGeometry,data){var geometries=geometryCollectionGeometry.getGeometriesArray();var renderers=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_;var i,ii;for(i=0,ii=geometries.length;i<ii;++i){var geometry=geometries[i];var geometryRenderer=renderers[geometry.getType()];if(geometryRenderer){geometryRenderer.call(this,geometry,data)}}};ol.render.webgl.Immediate.prototype.drawPointGeometry=function(pointGeometry,data){var context=this.context_;var replayGroup=new ol.render.webgl.ReplayGroup(1,this.extent_);var replay=(replayGroup.getReplay(0,ol.render.ReplayType.IMAGE));replay.setImageStyle(this.imageStyle_);replay.drawPointGeometry(pointGeometry,data);replay.finish(context);var opacity=1;var brightness=0;var contrast=1;var hue=0;var saturation=1;var skippedFeatures={};var featureCallback;var oneByOne=false;replay.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,opacity,brightness,contrast,hue,saturation,skippedFeatures,featureCallback,oneByOne);replay.getDeleteResourcesFunction(context)()};ol.render.webgl.Immediate.prototype.drawLineStringGeometry=function(lineStringGeometry,data){};ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry=function(multiLineStringGeometry,data){};ol.render.webgl.Immediate.prototype.drawMultiPointGeometry=function(multiPointGeometry,data){var context=this.context_;var replayGroup=new ol.render.webgl.ReplayGroup(1,this.extent_);var replay=(replayGroup.getReplay(0,ol.render.ReplayType.IMAGE));replay.setImageStyle(this.imageStyle_);replay.drawMultiPointGeometry(multiPointGeometry,data);replay.finish(context);var opacity=1;var brightness=0;var contrast=1;var hue=0;var saturation=1;var skippedFeatures={};var featureCallback;var oneByOne=false;replay.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,opacity,brightness,contrast,hue,saturation,skippedFeatures,featureCallback,oneByOne);replay.getDeleteResourcesFunction(context)()};ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry=function(multiPolygonGeometry,data){};ol.render.webgl.Immediate.prototype.drawPolygonGeometry=function(polygonGeometry,data){};ol.render.webgl.Immediate.prototype.drawText=function(flatCoordinates,offset,end,stride,geometry,data){};ol.render.webgl.Immediate.prototype.setFillStrokeStyle=function(fillStyle,strokeStyle){};ol.render.webgl.Immediate.prototype.setImageStyle=function(imageStyle){this.imageStyle_=imageStyle};ol.render.webgl.Immediate.prototype.setTextStyle=function(textStyle){};ol.render.webgl.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.webgl.Immediate.prototype.drawPointGeometry,MultiPoint:ol.render.webgl.Immediate.prototype.drawMultiPointGeometry,GeometryCollection:ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry};goog.provide("ol.renderer.webgl.map.shader.Color");goog.provide("ol.renderer.webgl.map.shader.Color.Locations");goog.provide("ol.renderer.webgl.map.shader.ColorFragment");goog.provide("ol.renderer.webgl.map.shader.ColorVertex");goog.require("ol.webgl.shader");ol.renderer.webgl.map.shader.ColorFragment=function(){goog.base(this,ol.renderer.webgl.map.shader.ColorFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.ColorFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.ColorFragment);ol.renderer.webgl.map.shader.ColorFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\n// @see https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/filters/skia/SkiaImageFilterBuilder.cpp\nuniform mat4 u_colorMatrix;\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = (u_colorMatrix * vec4(texColor.rgb, 1.)).rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.ColorFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform mat4 f;uniform float g;uniform sampler2D h;void main(void){vec4 texColor=texture2D(h,a);gl_FragColor.rgb=(f*vec4(texColor.rgb,1.)).rgb;gl_FragColor.a=texColor.a*g;}";ol.renderer.webgl.map.shader.ColorFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.ColorFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.ColorFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.ColorVertex=function(){goog.base(this,ol.renderer.webgl.map.shader.ColorVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.ColorVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.ColorVertex);ol.renderer.webgl.map.shader.ColorVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.ColorVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.ColorVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.ColorVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.ColorVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Color.Locations=function(gl,program){this.u_colorMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_colorMatrix":"f");this.u_opacity=gl.getUniformLocation(program,goog.DEBUG?"u_opacity":"g");this.u_projectionMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=gl.getUniformLocation(program,goog.DEBUG?"u_texture":"h");this.a_position=gl.getAttribLocation(program,goog.DEBUG?"a_position":"b");this.a_texCoord=gl.getAttribLocation(program,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.map.shader.Default");goog.provide("ol.renderer.webgl.map.shader.Default.Locations");goog.provide("ol.renderer.webgl.map.shader.DefaultFragment");goog.provide("ol.renderer.webgl.map.shader.DefaultVertex");goog.require("ol.webgl.shader");ol.renderer.webgl.map.shader.DefaultFragment=function(){goog.base(this,ol.renderer.webgl.map.shader.DefaultFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultFragment);ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}";ol.renderer.webgl.map.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.DefaultVertex=function(){goog.base(this,ol.renderer.webgl.map.shader.DefaultVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultVertex);ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Default.Locations=function(gl,program){this.u_opacity=gl.getUniformLocation(program,goog.DEBUG?"u_opacity":"f");this.u_projectionMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=gl.getUniformLocation(program,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=gl.getUniformLocation(program,goog.DEBUG?"u_texture":"g");this.a_position=gl.getAttribLocation(program,goog.DEBUG?"a_position":"b");this.a_texCoord=gl.getAttribLocation(program,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.Layer");goog.require("goog.vec.Mat4");goog.require("goog.webgl");goog.require("ol.color.Matrix");goog.require("ol.layer.Layer");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.webgl.Immediate");goog.require("ol.renderer.Layer");goog.require("ol.renderer.webgl.map.shader.Color");goog.require("ol.renderer.webgl.map.shader.Color.Locations");goog.require("ol.renderer.webgl.map.shader.ColorFragment");goog.require("ol.renderer.webgl.map.shader.ColorVertex");goog.require("ol.renderer.webgl.map.shader.Default");goog.require("ol.renderer.webgl.map.shader.Default.Locations");goog.require("ol.renderer.webgl.map.shader.DefaultFragment");goog.require("ol.renderer.webgl.map.shader.DefaultVertex");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.Context");ol.renderer.webgl.Layer=function(mapRenderer,layer){goog.base(this,layer);this.mapRenderer=mapRenderer;this.arrayBuffer_=new ol.webgl.Buffer([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined;this.texCoordMatrix=goog.vec.Mat4.createNumber();this.projectionMatrix=goog.vec.Mat4.createNumberIdentity();this.colorMatrix_=new ol.color.Matrix();this.colorLocations_=null;this.defaultLocations_=null};goog.inherits(ol.renderer.webgl.Layer,ol.renderer.Layer);ol.renderer.webgl.Layer.prototype.bindFramebuffer=function(frameState,framebufferDimension){var gl=this.mapRenderer.getGL();if(!goog.isDef(this.framebufferDimension)||this.framebufferDimension!=framebufferDimension){frameState.postRenderFunctions.push(goog.partial(function(gl,framebuffer,texture){if(!gl.isContextLost()){gl.deleteFramebuffer(framebuffer);gl.deleteTexture(texture)}},gl,this.framebuffer,this.texture));var texture=ol.webgl.Context.createEmptyTexture(gl,framebufferDimension,framebufferDimension);var framebuffer=gl.createFramebuffer();gl.bindFramebuffer(goog.webgl.FRAMEBUFFER,framebuffer);gl.framebufferTexture2D(goog.webgl.FRAMEBUFFER,goog.webgl.COLOR_ATTACHMENT0,goog.webgl.TEXTURE_2D,texture,0);this.texture=texture;this.framebuffer=framebuffer;this.framebufferDimension=framebufferDimension}else{gl.bindFramebuffer(goog.webgl.FRAMEBUFFER,this.framebuffer)}};ol.renderer.webgl.Layer.prototype.composeFrame=function(frameState,layerState,context){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,context,frameState);context.bindBuffer(goog.webgl.ARRAY_BUFFER,this.arrayBuffer_);var gl=context.getGL();var useColor=layerState.brightness||layerState.contrast!=1||layerState.hue||layerState.saturation!=1;var fragmentShader,vertexShader;if(useColor){fragmentShader=ol.renderer.webgl.map.shader.ColorFragment.getInstance();vertexShader=ol.renderer.webgl.map.shader.ColorVertex.getInstance()}else{fragmentShader=ol.renderer.webgl.map.shader.DefaultFragment.getInstance();vertexShader=ol.renderer.webgl.map.shader.DefaultVertex.getInstance()}var program=context.getProgram(fragmentShader,vertexShader);var locations;if(useColor){if(goog.isNull(this.colorLocations_)){locations=new ol.renderer.webgl.map.shader.Color.Locations(gl,program);this.colorLocations_=locations}else{locations=this.colorLocations_}}else{if(goog.isNull(this.defaultLocations_)){locations=new ol.renderer.webgl.map.shader.Default.Locations(gl,program);this.defaultLocations_=locations}else{locations=this.defaultLocations_}}if(context.useProgram(program)){gl.enableVertexAttribArray(locations.a_position);gl.vertexAttribPointer(locations.a_position,2,goog.webgl.FLOAT,false,16,0);gl.enableVertexAttribArray(locations.a_texCoord);gl.vertexAttribPointer(locations.a_texCoord,2,goog.webgl.FLOAT,false,16,8);gl.uniform1i(locations.u_texture,0)}gl.uniformMatrix4fv(locations.u_texCoordMatrix,false,this.getTexCoordMatrix());gl.uniformMatrix4fv(locations.u_projectionMatrix,false,this.getProjectionMatrix());if(useColor){gl.uniformMatrix4fv(locations.u_colorMatrix,false,this.colorMatrix_.getMatrix(layerState.brightness,layerState.contrast,layerState.hue,layerState.saturation))}gl.uniform1f(locations.u_opacity,layerState.opacity);gl.bindTexture(goog.webgl.TEXTURE_2D,this.getTexture());gl.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,context,frameState)};ol.renderer.webgl.Layer.prototype.dispatchComposeEvent_=function(type,context,frameState){var layer=this.getLayer();if(layer.hasListener(type)){var viewState=frameState.viewState;var resolution=viewState.resolution;var pixelRatio=frameState.pixelRatio;var extent=frameState.extent;var center=viewState.center;var rotation=viewState.rotation;var size=frameState.size;var render=new ol.render.webgl.Immediate(context,center,resolution,rotation,size,extent,pixelRatio);var composeEvent=new ol.render.Event(type,layer,render,frameState,null,context);layer.dispatchEvent(composeEvent)}};ol.renderer.webgl.Layer.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix};ol.renderer.webgl.Layer.prototype.getTexture=function(){return this.texture};ol.renderer.webgl.Layer.prototype.getProjectionMatrix=function(){return this.projectionMatrix};ol.renderer.webgl.Layer.prototype.handleWebGLContextLost=function(){this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined};ol.renderer.webgl.Layer.prototype.prepareFrame=goog.abstractMethod;goog.provide("ol.renderer.webgl.ImageLayer");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("goog.webgl");goog.require("ol.Coordinate");goog.require("ol.Extent");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.webgl.Layer");goog.require("ol.source.ImageVector");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Context");ol.renderer.webgl.ImageLayer=function(mapRenderer,imageLayer){goog.base(this,mapRenderer,imageLayer);this.image_=null;this.hitCanvasContext_=null;this.hitTransformationMatrix_=null};goog.inherits(ol.renderer.webgl.ImageLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.ImageLayer.prototype.createTexture_=function(image){var imageElement=image.getImage();var gl=this.mapRenderer.getGL();return ol.webgl.Context.createTexture(gl,imageElement,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE)};ol.renderer.webgl.ImageLayer.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg){var layer=this.getLayer();var source=layer.getSource();var resolution=frameState.viewState.resolution;var rotation=frameState.viewState.rotation;var skippedFeatureUids=frameState.skippedFeatureUids;return source.forEachFeatureAtCoordinate(coordinate,resolution,rotation,skippedFeatureUids,function(feature){return callback.call(thisArg,feature,layer)})};ol.renderer.webgl.ImageLayer.prototype.prepareFrame=function(frameState,layerState,context){var gl=this.mapRenderer.getGL();var pixelRatio=frameState.pixelRatio;var viewState=frameState.viewState;var viewCenter=viewState.center;var viewResolution=viewState.resolution;var viewRotation=viewState.rotation;var image=this.image_;var texture=this.texture;var imageLayer=this.getLayer();goog.asserts.assertInstanceof(imageLayer,ol.layer.Image,"layer is an instance of ol.layer.Image");var imageSource=imageLayer.getSource();var hints=frameState.viewHints;var renderedExtent=frameState.extent;if(goog.isDef(layerState.extent)){renderedExtent=ol.extent.getIntersection(renderedExtent,layerState.extent)}if(!hints[ol.ViewHint.ANIMATING]&&!hints[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(renderedExtent)){var projection=viewState.projection;var sourceProjection=imageSource.getProjection();if(!goog.isNull(sourceProjection)){goog.asserts.assert(ol.proj.equivalent(projection,sourceProjection),"projection and sourceProjection are equivalent");projection=sourceProjection}var image_=imageSource.getImage(renderedExtent,viewResolution,pixelRatio,projection);if(!goog.isNull(image_)){var loaded=this.loadImage(image_);if(loaded){image=image_;texture=this.createTexture_(image_);if(!goog.isNull(this.texture)){frameState.postRenderFunctions.push(goog.partial(function(gl,texture){if(!gl.isContextLost()){gl.deleteTexture(texture)}},gl,this.texture))}}}}if(!goog.isNull(image)){goog.asserts.assert(!goog.isNull(texture),"texture is not null");var canvas=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(canvas.width,canvas.height,pixelRatio,viewCenter,viewResolution,viewRotation,image.getExtent());this.hitTransformationMatrix_=null;var texCoordMatrix=this.texCoordMatrix;goog.vec.Mat4.makeIdentity(texCoordMatrix);goog.vec.Mat4.scale(texCoordMatrix,1,-1,1);goog.vec.Mat4.translate(texCoordMatrix,0,-1,0);this.image_=image;this.texture=texture;this.updateAttributions(frameState.attributions,image.getAttributions());this.updateLogos(frameState,imageSource)}return true};ol.renderer.webgl.ImageLayer.prototype.updateProjectionMatrix_=function(canvasWidth,canvasHeight,pixelRatio,viewCenter,viewResolution,viewRotation,imageExtent){var canvasExtentWidth=canvasWidth*viewResolution;var canvasExtentHeight=canvasHeight*viewResolution;var projectionMatrix=this.projectionMatrix;goog.vec.Mat4.makeIdentity(projectionMatrix);goog.vec.Mat4.scale(projectionMatrix,pixelRatio*2/canvasExtentWidth,pixelRatio*2/canvasExtentHeight,1);goog.vec.Mat4.rotateZ(projectionMatrix,-viewRotation);goog.vec.Mat4.translate(projectionMatrix,imageExtent[0]-viewCenter[0],imageExtent[1]-viewCenter[1],0);goog.vec.Mat4.scale(projectionMatrix,(imageExtent[2]-imageExtent[0])/2,(imageExtent[3]-imageExtent[1])/2,1);goog.vec.Mat4.translate(projectionMatrix,1,1,0)};ol.renderer.webgl.ImageLayer.prototype.hasFeatureAtCoordinate=function(coordinate,frameState){var hasFeature=this.forEachFeatureAtCoordinate(coordinate,frameState,goog.functions.TRUE,this);return goog.isDef(hasFeature)};ol.renderer.webgl.ImageLayer.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg){if(goog.isNull(this.image_)||goog.isNull(this.image_.getImage())){return undefined}if(this.getLayer().getSource() instanceof ol.source.ImageVector){var coordinate=pixel.slice();ol.vec.Mat4.multVec2(frameState.pixelToCoordinateMatrix,coordinate,coordinate);var hasFeature=this.forEachFeatureAtCoordinate(coordinate,frameState,goog.functions.TRUE,this);if(hasFeature){return callback.call(thisArg,this.getLayer())}else{return undefined}}else{var imageSize=[this.image_.getImage().width,this.image_.getImage().height];if(goog.isNull(this.hitTransformationMatrix_)){this.hitTransformationMatrix_=this.getHitTransformationMatrix_(frameState.size,imageSize)}var pixelOnFrameBuffer=[0,0];ol.vec.Mat4.multVec2(this.hitTransformationMatrix_,pixel,pixelOnFrameBuffer);if(pixelOnFrameBuffer[0]<0||pixelOnFrameBuffer[0]>imageSize[0]||pixelOnFrameBuffer[1]<0||pixelOnFrameBuffer[1]>imageSize[1]){return undefined}if(goog.isNull(this.hitCanvasContext_)){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.image_.getImage(),pixelOnFrameBuffer[0],pixelOnFrameBuffer[1],1,1,0,0,1,1);var imageData=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(imageData[3]>0){return callback.call(thisArg,this.getLayer())}else{return undefined}}};ol.renderer.webgl.ImageLayer.prototype.getHitTransformationMatrix_=function(mapSize,imageSize){var mapCoordMatrix=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(mapCoordMatrix);goog.vec.Mat4.translate(mapCoordMatrix,-1,-1,0);goog.vec.Mat4.scale(mapCoordMatrix,2/mapSize[0],2/mapSize[1],1);goog.vec.Mat4.translate(mapCoordMatrix,0,mapSize[1],0);goog.vec.Mat4.scale(mapCoordMatrix,1,-1,1);var projectionMatrixInv=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.projectionMatrix,projectionMatrixInv);var imageCoordMatrix=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(imageCoordMatrix);goog.vec.Mat4.translate(imageCoordMatrix,0,imageSize[1],0);goog.vec.Mat4.scale(imageCoordMatrix,1,-1,1);goog.vec.Mat4.scale(imageCoordMatrix,imageSize[0]/2,imageSize[1]/2,1);goog.vec.Mat4.translate(imageCoordMatrix,1,1,0);var transformMatrix=goog.vec.Mat4.createNumber();goog.vec.Mat4.multMat(imageCoordMatrix,projectionMatrixInv,transformMatrix);goog.vec.Mat4.multMat(transformMatrix,mapCoordMatrix,transformMatrix);return transformMatrix};goog.provide("ol.renderer.webgl.tilelayer.shader");goog.provide("ol.renderer.webgl.tilelayer.shader.Locations");goog.provide("ol.renderer.webgl.tilelayer.shader.Fragment");goog.provide("ol.renderer.webgl.tilelayer.shader.Vertex");goog.require("ol.webgl.shader");ol.renderer.webgl.tilelayer.shader.Fragment=function(){goog.base(this,ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Fragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Fragment);ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n";ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}";ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Vertex=function(){goog.base(this,ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Vertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Vertex);ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n";ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}";ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Locations=function(gl,program){this.u_texture=gl.getUniformLocation(program,goog.DEBUG?"u_texture":"e");this.u_tileOffset=gl.getUniformLocation(program,goog.DEBUG?"u_tileOffset":"d");this.a_position=gl.getAttribLocation(program,goog.DEBUG?"a_position":"b");this.a_texCoord=gl.getAttribLocation(program,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.TileLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("goog.vec.Vec4");goog.require("goog.webgl");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.math");goog.require("ol.renderer.webgl.Layer");goog.require("ol.renderer.webgl.tilelayer.shader.Fragment");goog.require("ol.renderer.webgl.tilelayer.shader.Locations");goog.require("ol.renderer.webgl.tilelayer.shader.Vertex");goog.require("ol.size");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Buffer");ol.renderer.webgl.TileLayer=function(mapRenderer,tileLayer){goog.base(this,mapRenderer,tileLayer);this.fragmentShader_=ol.renderer.webgl.tilelayer.shader.Fragment.getInstance();this.vertexShader_=ol.renderer.webgl.tilelayer.shader.Vertex.getInstance();this.locations_=null;this.renderArrayBuffer_=new ol.webgl.Buffer([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.webgl.TileLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.TileLayer.prototype.disposeInternal=function(){var context=this.mapRenderer.getContext();context.deleteBuffer(this.renderArrayBuffer_);goog.base(this,"disposeInternal")};ol.renderer.webgl.TileLayer.prototype.createLoadedTileFinder=function(source,tiles){var mapRenderer=this.mapRenderer;return(function(zoom,tileRange){return source.forEachLoadedTile(zoom,tileRange,function(tile){var loaded=mapRenderer.isTileTextureLoaded(tile);if(loaded){if(!tiles[zoom]){tiles[zoom]={}}tiles[zoom][tile.tileCoord.toString()]=tile}return loaded})})};ol.renderer.webgl.TileLayer.prototype.handleWebGLContextLost=function(){goog.base(this,"handleWebGLContextLost");this.locations_=null};ol.renderer.webgl.TileLayer.prototype.prepareFrame=function(frameState,layerState,context){var mapRenderer=this.mapRenderer;var gl=context.getGL();var viewState=frameState.viewState;var projection=viewState.projection;var tileLayer=this.getLayer();goog.asserts.assertInstanceof(tileLayer,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var tileSource=tileLayer.getSource();var tileGrid=tileSource.getTileGridForProjection(projection);var z=tileGrid.getZForResolution(viewState.resolution);var tileResolution=tileGrid.getResolution(z);var tilePixelSize=tileSource.getTilePixelSize(z,frameState.pixelRatio,projection);var pixelRatio=tilePixelSize[0]/ol.size.toSize(tileGrid.getTileSize(z),this.tmpSize_)[0];var tilePixelResolution=tileResolution/pixelRatio;var tileGutter=tileSource.getGutter();var center=viewState.center;var extent;if(tileResolution==viewState.resolution){center=this.snapCenterToPixel(center,tileResolution,frameState.size);extent=ol.extent.getForViewAndSize(center,tileResolution,viewState.rotation,frameState.size)}else{extent=frameState.extent}var tileRange=tileGrid.getTileRangeForExtentAndResolution(extent,tileResolution);var framebufferExtent;if(!goog.isNull(this.renderedTileRange_)&&this.renderedTileRange_.equals(tileRange)&&this.renderedRevision_==tileSource.getRevision()){framebufferExtent=this.renderedFramebufferExtent_}else{var tileRangeSize=tileRange.getSize();var maxDimension=Math.max(tileRangeSize[0]*tilePixelSize[0],tileRangeSize[1]*tilePixelSize[1]);var framebufferDimension=ol.math.roundUpToPowerOfTwo(maxDimension);var framebufferExtentDimension=tilePixelResolution*framebufferDimension;var origin=tileGrid.getOrigin(z);var minX=origin[0]+tileRange.minX*tilePixelSize[0]*tilePixelResolution;var minY=origin[1]+tileRange.minY*tilePixelSize[1]*tilePixelResolution;framebufferExtent=[minX,minY,minX+framebufferExtentDimension,minY+framebufferExtentDimension];this.bindFramebuffer(frameState,framebufferDimension);gl.viewport(0,0,framebufferDimension,framebufferDimension);gl.clearColor(0,0,0,0);gl.clear(goog.webgl.COLOR_BUFFER_BIT);gl.disable(goog.webgl.BLEND);var program=context.getProgram(this.fragmentShader_,this.vertexShader_);context.useProgram(program);if(goog.isNull(this.locations_)){this.locations_=new ol.renderer.webgl.tilelayer.shader.Locations(gl,program)}context.bindBuffer(goog.webgl.ARRAY_BUFFER,this.renderArrayBuffer_);gl.enableVertexAttribArray(this.locations_.a_position);gl.vertexAttribPointer(this.locations_.a_position,2,goog.webgl.FLOAT,false,16,0);gl.enableVertexAttribArray(this.locations_.a_texCoord);gl.vertexAttribPointer(this.locations_.a_texCoord,2,goog.webgl.FLOAT,false,16,8);gl.uniform1i(this.locations_.u_texture,0);var tilesToDrawByZ={};tilesToDrawByZ[z]={};var findLoadedTiles=this.createLoadedTileFinder(tileSource,tilesToDrawByZ);var useInterimTilesOnError=tileLayer.getUseInterimTilesOnError();var allTilesLoaded=true;var tmpExtent=ol.extent.createEmpty();var tmpTileRange=new ol.TileRange(0,0,0,0);var childTileRange,fullyLoaded,tile,tileState,x,y,tileExtent;for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){tile=tileSource.getTile(z,x,y,pixelRatio,projection);if(goog.isDef(layerState.extent)){tileExtent=tileGrid.getTileCoordExtent(tile.tileCoord,tmpExtent);if(!ol.extent.intersects(tileExtent,layerState.extent)){continue}}tileState=tile.getState();if(tileState==ol.TileState.LOADED){if(mapRenderer.isTileTextureLoaded(tile)){tilesToDrawByZ[z][ol.tilecoord.toString(tile.tileCoord)]=tile;continue}}else{if(tileState==ol.TileState.EMPTY||(tileState==ol.TileState.ERROR&&!useInterimTilesOnError)){continue}}allTilesLoaded=false;fullyLoaded=tileGrid.forEachTileCoordParentTileRange(tile.tileCoord,findLoadedTiles,null,tmpTileRange,tmpExtent);if(!fullyLoaded){childTileRange=tileGrid.getTileCoordChildTileRange(tile.tileCoord,tmpTileRange,tmpExtent);if(!goog.isNull(childTileRange)){findLoadedTiles(z+1,childTileRange)}}}}var zs=goog.array.map(goog.object.getKeys(tilesToDrawByZ),Number);goog.array.sort(zs);var u_tileOffset=goog.vec.Vec4.createFloat32();var i,ii,sx,sy,tileKey,tilesToDraw,tx,ty;for(i=0,ii=zs.length;i<ii;++i){tilesToDraw=tilesToDrawByZ[zs[i]];for(tileKey in tilesToDraw){tile=tilesToDraw[tileKey];tileExtent=tileGrid.getTileCoordExtent(tile.tileCoord,tmpExtent);sx=2*(tileExtent[2]-tileExtent[0])/framebufferExtentDimension;sy=2*(tileExtent[3]-tileExtent[1])/framebufferExtentDimension;tx=2*(tileExtent[0]-framebufferExtent[0])/framebufferExtentDimension-1;ty=2*(tileExtent[1]-framebufferExtent[1])/framebufferExtentDimension-1;goog.vec.Vec4.setFromValues(u_tileOffset,sx,sy,tx,ty);gl.uniform4fv(this.locations_.u_tileOffset,u_tileOffset);mapRenderer.bindTileTexture(tile,tilePixelSize,tileGutter*pixelRatio,goog.webgl.LINEAR,goog.webgl.LINEAR);gl.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4)}}if(allTilesLoaded){this.renderedTileRange_=tileRange;this.renderedFramebufferExtent_=framebufferExtent;this.renderedRevision_=tileSource.getRevision()}else{this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;frameState.animate=true}}this.updateUsedTiles(frameState.usedTiles,tileSource,z,tileRange);var tileTextureQueue=mapRenderer.getTileTextureQueue();this.manageTilePyramid(frameState,tileSource,tileGrid,pixelRatio,projection,extent,z,tileLayer.getPreload(),function(tile){if(tile.getState()==ol.TileState.LOADED&&!mapRenderer.isTileTextureLoaded(tile)&&!tileTextureQueue.isKeyQueued(tile.getKey())){tileTextureQueue.enqueue([tile,tileGrid.getTileCoordCenter(tile.tileCoord),tileGrid.getResolution(tile.tileCoord[0]),tilePixelSize,tileGutter*pixelRatio])}},this);this.scheduleExpireCache(frameState,tileSource);this.updateLogos(frameState,tileSource);var texCoordMatrix=this.texCoordMatrix;goog.vec.Mat4.makeIdentity(texCoordMatrix);goog.vec.Mat4.translate(texCoordMatrix,(center[0]-framebufferExtent[0])/(framebufferExtent[2]-framebufferExtent[0]),(center[1]-framebufferExtent[1])/(framebufferExtent[3]-framebufferExtent[1]),0);if(viewState.rotation!==0){goog.vec.Mat4.rotateZ(texCoordMatrix,viewState.rotation)}goog.vec.Mat4.scale(texCoordMatrix,frameState.size[0]*viewState.resolution/(framebufferExtent[2]-framebufferExtent[0]),frameState.size[1]*viewState.resolution/(framebufferExtent[3]-framebufferExtent[1]),1);goog.vec.Mat4.translate(texCoordMatrix,-0.5,-0.5,0);return true};ol.renderer.webgl.TileLayer.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg){if(goog.isNull(this.framebuffer)){return undefined}var pixelOnMapScaled=[pixel[0]/frameState.size[0],(frameState.size[1]-pixel[1])/frameState.size[1]];var pixelOnFrameBufferScaled=[0,0];ol.vec.Mat4.multVec2(this.texCoordMatrix,pixelOnMapScaled,pixelOnFrameBufferScaled);var pixelOnFrameBuffer=[pixelOnFrameBufferScaled[0]*this.framebufferDimension,pixelOnFrameBufferScaled[1]*this.framebufferDimension];var gl=this.mapRenderer.getContext().getGL();gl.bindFramebuffer(gl.FRAMEBUFFER,this.framebuffer);var imageData=new Uint8Array(4);gl.readPixels(pixelOnFrameBuffer[0],pixelOnFrameBuffer[1],1,1,gl.RGBA,gl.UNSIGNED_BYTE,imageData);if(imageData[3]>0){return callback.call(thisArg,this.getLayer())}else{return undefined}};goog.provide("ol.renderer.webgl.VectorLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("ol.ViewHint");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.webgl.ReplayGroup");goog.require("ol.renderer.vector");goog.require("ol.renderer.webgl.Layer");goog.require("ol.vec.Mat4");ol.renderer.webgl.VectorLayer=function(mapRenderer,vectorLayer){goog.base(this,mapRenderer,vectorLayer);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.layerState_=null};goog.inherits(ol.renderer.webgl.VectorLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.VectorLayer.prototype.composeFrame=function(frameState,layerState,context){this.layerState_=layerState;var viewState=frameState.viewState;var replayGroup=this.replayGroup_;if(!goog.isNull(replayGroup)&&!replayGroup.isEmpty()){replayGroup.replay(context,viewState.center,viewState.resolution,viewState.rotation,frameState.size,frameState.pixelRatio,layerState.opacity,layerState.brightness,layerState.contrast,layerState.hue,layerState.saturation,layerState.managed?frameState.skippedFeatureUids:{})}};ol.renderer.webgl.VectorLayer.prototype.disposeInternal=function(){var replayGroup=this.replayGroup_;if(!goog.isNull(replayGroup)){var context=this.mapRenderer.getContext();replayGroup.getDeleteResourcesFunction(context)();this.replayGroup_=null}goog.base(this,"disposeInternal")};ol.renderer.webgl.VectorLayer.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg){if(goog.isNull(this.replayGroup_)||goog.isNull(this.layerState_)){return undefined}else{var context=this.mapRenderer.getContext();var viewState=frameState.viewState;var layer=this.getLayer();var layerState=this.layerState_;var features={};return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,context,viewState.center,viewState.resolution,viewState.rotation,frameState.size,frameState.pixelRatio,layerState.opacity,layerState.brightness,layerState.contrast,layerState.hue,layerState.saturation,layerState.managed?frameState.skippedFeatureUids:{},function(feature){goog.asserts.assert(goog.isDef(feature),"received a feature");var key=goog.getUid(feature).toString();if(!(key in features)){features[key]=true;return callback.call(thisArg,feature,layer)}})}};ol.renderer.webgl.VectorLayer.prototype.hasFeatureAtCoordinate=function(coordinate,frameState){if(goog.isNull(this.replayGroup_)||goog.isNull(this.layerState_)){return false}else{var context=this.mapRenderer.getContext();var viewState=frameState.viewState;var layerState=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(coordinate,context,viewState.center,viewState.resolution,viewState.rotation,frameState.size,frameState.pixelRatio,layerState.opacity,layerState.brightness,layerState.contrast,layerState.hue,layerState.saturation,frameState.skippedFeatureUids)}};ol.renderer.webgl.VectorLayer.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg){var coordinate=pixel.slice();ol.vec.Mat4.multVec2(frameState.pixelToCoordinateMatrix,coordinate,coordinate);var hasFeature=this.hasFeatureAtCoordinate(coordinate,frameState);if(hasFeature){return callback.call(thisArg,this.getLayer())}else{return undefined}};ol.renderer.webgl.VectorLayer.prototype.handleStyleImageChange_=function(event){this.renderIfReadyAndVisible()};ol.renderer.webgl.VectorLayer.prototype.prepareFrame=function(frameState,layerState,context){var vectorLayer=(this.getLayer());goog.asserts.assertInstanceof(vectorLayer,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var vectorSource=vectorLayer.getSource();this.updateAttributions(frameState.attributions,vectorSource.getAttributions());this.updateLogos(frameState,vectorSource);var animating=frameState.viewHints[ol.ViewHint.ANIMATING];var interacting=frameState.viewHints[ol.ViewHint.INTERACTING];var updateWhileAnimating=vectorLayer.getUpdateWhileAnimating();var updateWhileInteracting=vectorLayer.getUpdateWhileInteracting();if(!this.dirty_&&(!updateWhileAnimating&&animating)||(!updateWhileInteracting&&interacting)){return true}var frameStateExtent=frameState.extent;var viewState=frameState.viewState;var projection=viewState.projection;var resolution=viewState.resolution;var pixelRatio=frameState.pixelRatio;var vectorLayerRevision=vectorLayer.getRevision();var vectorLayerRenderBuffer=vectorLayer.getRenderBuffer();var vectorLayerRenderOrder=vectorLayer.getRenderOrder();if(!goog.isDef(vectorLayerRenderOrder)){vectorLayerRenderOrder=ol.renderer.vector.defaultOrder}var extent=ol.extent.buffer(frameStateExtent,vectorLayerRenderBuffer*resolution);if(!this.dirty_&&this.renderedResolution_==resolution&&this.renderedRevision_==vectorLayerRevision&&this.renderedRenderOrder_==vectorLayerRenderOrder&&ol.extent.containsExtent(this.renderedExtent_,extent)){return true}if(!goog.isNull(this.replayGroup_)){frameState.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(context))}this.dirty_=false;var replayGroup=new ol.render.webgl.ReplayGroup(ol.renderer.vector.getTolerance(resolution,pixelRatio),extent,vectorLayer.getRenderBuffer());vectorSource.loadFeatures(extent,resolution,projection);var renderFeature=function(feature){var styles;if(goog.isDef(feature.getStyleFunction())){styles=feature.getStyleFunction().call(feature,resolution)}else{if(goog.isDef(vectorLayer.getStyleFunction())){styles=vectorLayer.getStyleFunction()(feature,resolution)}}if(goog.isDefAndNotNull(styles)){var dirty=this.renderFeature(feature,resolution,pixelRatio,styles,replayGroup);this.dirty_=this.dirty_||dirty}};if(!goog.isNull(vectorLayerRenderOrder)){var features=[];vectorSource.forEachFeatureInExtentAtResolution(extent,resolution,function(feature){features.push(feature)},this);goog.array.sort(features,vectorLayerRenderOrder);goog.array.forEach(features,renderFeature,this)}else{vectorSource.forEachFeatureInExtentAtResolution(extent,resolution,renderFeature,this)}replayGroup.finish(context);this.renderedResolution_=resolution;this.renderedRevision_=vectorLayerRevision;this.renderedRenderOrder_=vectorLayerRenderOrder;this.renderedExtent_=extent;this.replayGroup_=replayGroup;return true};ol.renderer.webgl.VectorLayer.prototype.renderFeature=function(feature,resolution,pixelRatio,styles,replayGroup){if(!goog.isDefAndNotNull(styles)){return false}var i,ii,loading=false;for(i=0,ii=styles.length;i<ii;++i){loading=ol.renderer.vector.renderFeature(replayGroup,feature,styles[i],ol.renderer.vector.getSquaredTolerance(resolution,pixelRatio),this.handleStyleImageChange_,this)||loading}return loading};goog.provide("ol.renderer.webgl.Map");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.log");goog.require("goog.log.Logger");goog.require("goog.object");goog.require("goog.style");goog.require("goog.webgl");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.webgl.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.webgl.ImageLayer");goog.require("ol.renderer.webgl.Layer");goog.require("ol.renderer.webgl.TileLayer");goog.require("ol.renderer.webgl.VectorLayer");goog.require("ol.source.State");goog.require("ol.structs.LRUCache");goog.require("ol.structs.PriorityQueue");goog.require("ol.webgl");goog.require("ol.webgl.Context");goog.require("ol.webgl.WebGLContextEventType");ol.renderer.webgl.TextureCacheEntry;ol.renderer.webgl.Map=function(container,map){goog.base(this,container,map);this.canvas_=(goog.dom.createElement(goog.dom.TagName.CANVAS));this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(container,this.canvas_,0);this.clipTileCanvasWidth_=0;this.clipTileCanvasHeight_=0;this.clipTileContext_=ol.dom.createCanvasContext2D();this.renderedVisible_=true;this.gl_=ol.webgl.getContext(this.canvas_,{antialias:true,depth:false,failIfMajorPerformanceCaveat:true,preserveDrawingBuffer:false,stencil:true});goog.asserts.assert(!goog.isNull(this.gl_),"got a WebGLRenderingContext");this.context_=new ol.webgl.Context(this.canvas_,this.gl_);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,false,this);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,false,this);this.textureCache_=new ol.structs.LRUCache();this.focus_=null;this.tileTextureQueue_=new ol.structs.PriorityQueue(goog.bind(function(element){var tileCenter=(element[1]);var tileResolution=(element[2]);var deltaX=tileCenter[0]-this.focus_[0];var deltaY=tileCenter[1]-this.focus_[1];return 65536*Math.log(tileResolution)+Math.sqrt(deltaX*deltaX+deltaY*deltaY)/tileResolution},this),function(element){return(element[0]).getKey()});this.loadNextTileTexture_=goog.bind(function(map,frameState){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var element=this.tileTextureQueue_.dequeue();var tile=(element[0]);var tileSize=(element[3]);var tileGutter=(element[4]);this.bindTileTexture(tile,tileSize,tileGutter,goog.webgl.LINEAR,goog.webgl.LINEAR)}},this);this.textureCacheFrameMarkerCount_=0;this.initializeGL_()};goog.inherits(ol.renderer.webgl.Map,ol.renderer.Map);ol.renderer.webgl.Map.prototype.bindTileTexture=function(tile,tileSize,tileGutter,magFilter,minFilter){var gl=this.getGL();var tileKey=tile.getKey();if(this.textureCache_.containsKey(tileKey)){var textureCacheEntry=this.textureCache_.get(tileKey);goog.asserts.assert(!goog.isNull(textureCacheEntry),"a texture cache entry exists for key %s",tileKey);gl.bindTexture(goog.webgl.TEXTURE_2D,textureCacheEntry.texture);if(textureCacheEntry.magFilter!=magFilter){gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,magFilter);textureCacheEntry.magFilter=magFilter}if(textureCacheEntry.minFilter!=minFilter){gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,minFilter);textureCacheEntry.minFilter=minFilter}}else{var texture=gl.createTexture();gl.bindTexture(goog.webgl.TEXTURE_2D,texture);if(tileGutter>0){var clipTileCanvas=this.clipTileContext_.canvas;var clipTileContext=this.clipTileContext_;if(this.clipTileCanvasWidth_!==tileSize[0]||this.clipTileCanvasHeight_!==tileSize[1]){clipTileCanvas.width=tileSize[0];clipTileCanvas.height=tileSize[1];this.clipTileCanvasWidth_=tileSize[0];this.clipTileCanvasHeight_=tileSize[1]}else{clipTileContext.clearRect(0,0,tileSize[0],tileSize[1])}clipTileContext.drawImage(tile.getImage(),tileGutter,tileGutter,tileSize[0],tileSize[1],0,0,tileSize[0],tileSize[1]);gl.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,clipTileCanvas)}else{gl.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,tile.getImage())}gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,magFilter);gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MIN_FILTER,minFilter);gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,goog.webgl.CLAMP_TO_EDGE);gl.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,goog.webgl.CLAMP_TO_EDGE);this.textureCache_.set(tileKey,{texture:texture,magFilter:magFilter,minFilter:minFilter})}};ol.renderer.webgl.Map.prototype.createLayerRenderer=function(layer){if(ol.ENABLE_IMAGE&&layer instanceof ol.layer.Image){return new ol.renderer.webgl.ImageLayer(this,layer)}else{if(ol.ENABLE_TILE&&layer instanceof ol.layer.Tile){return new ol.renderer.webgl.TileLayer(this,layer)}else{if(ol.ENABLE_VECTOR&&layer instanceof ol.layer.Vector){return new ol.renderer.webgl.VectorLayer(this,layer)}else{goog.asserts.fail("unexpected layer configuration");return null}}}};ol.renderer.webgl.Map.prototype.dispatchComposeEvent_=function(type,frameState){var map=this.getMap();if(map.hasListener(type)){var context=this.context_;var extent=frameState.extent;var size=frameState.size;var viewState=frameState.viewState;var pixelRatio=frameState.pixelRatio;var resolution=viewState.resolution;var center=viewState.center;var rotation=viewState.rotation;var vectorContext=new ol.render.webgl.Immediate(context,center,resolution,rotation,size,extent,pixelRatio);var composeEvent=new ol.render.Event(type,map,vectorContext,frameState,null,context);map.dispatchEvent(composeEvent);vectorContext.flush()}};ol.renderer.webgl.Map.prototype.disposeInternal=function(){var gl=this.getGL();if(!gl.isContextLost()){this.textureCache_.forEach(function(textureCacheEntry){if(!goog.isNull(textureCacheEntry)){gl.deleteTexture(textureCacheEntry.texture)}})}goog.dispose(this.context_);goog.base(this,"disposeInternal")};ol.renderer.webgl.Map.prototype.expireCache_=function(map,frameState){var gl=this.getGL();var textureCacheEntry;while(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){textureCacheEntry=this.textureCache_.peekLast();if(goog.isNull(textureCacheEntry)){if(+this.textureCache_.peekLastKey()==frameState.index){break}else{--this.textureCacheFrameMarkerCount_}}else{gl.deleteTexture(textureCacheEntry.texture)}this.textureCache_.pop()}};ol.renderer.webgl.Map.prototype.getContext=function(){return this.context_};ol.renderer.webgl.Map.prototype.getGL=function(){return this.gl_};ol.renderer.webgl.Map.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_};ol.renderer.webgl.Map.prototype.getType=function(){return ol.RendererType.WEBGL};ol.renderer.webgl.Map.prototype.handleWebGLContextLost=function(event){event.preventDefault();this.textureCache_.clear();this.textureCacheFrameMarkerCount_=0;goog.object.forEach(this.getLayerRenderers(),function(layerRenderer,key,object){goog.asserts.assertInstanceof(layerRenderer,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");layerRenderer.handleWebGLContextLost()})};ol.renderer.webgl.Map.prototype.handleWebGLContextRestored=function(){this.initializeGL_();this.getMap().render()};ol.renderer.webgl.Map.prototype.initializeGL_=function(){var gl=this.gl_;gl.activeTexture(goog.webgl.TEXTURE0);gl.blendFuncSeparate(goog.webgl.SRC_ALPHA,goog.webgl.ONE_MINUS_SRC_ALPHA,goog.webgl.ONE,goog.webgl.ONE_MINUS_SRC_ALPHA);gl.disable(goog.webgl.CULL_FACE);gl.disable(goog.webgl.DEPTH_TEST);gl.disable(goog.webgl.SCISSOR_TEST);gl.disable(goog.webgl.STENCIL_TEST)};ol.renderer.webgl.Map.prototype.isTileTextureLoaded=function(tile){return this.textureCache_.containsKey(tile.getKey())};ol.renderer.webgl.Map.prototype.logger_=goog.log.getLogger("ol.renderer.webgl.Map");ol.renderer.webgl.Map.prototype.renderFrame=function(frameState){var context=this.getContext();var gl=this.getGL();if(gl.isContextLost()){return false}if(goog.isNull(frameState)){if(this.renderedVisible_){goog.style.setElementShown(this.canvas_,false);this.renderedVisible_=false}return false}this.focus_=frameState.focus;this.textureCache_.set((-frameState.index).toString(),null);++this.textureCacheFrameMarkerCount_;this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,frameState);var layerStatesToDraw=[];var layerStatesArray=frameState.layerStatesArray;goog.array.stableSort(layerStatesArray,ol.renderer.Map.sortByZIndex);var viewResolution=frameState.viewState.resolution;var i,ii,layerRenderer,layerState;for(i=0,ii=layerStatesArray.length;i<ii;++i){layerState=layerStatesArray[i];if(ol.layer.Layer.visibleAtResolution(layerState,viewResolution)&&layerState.sourceState==ol.source.State.READY){layerRenderer=this.getLayerRenderer(layerState.layer);goog.asserts.assertInstanceof(layerRenderer,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");if(layerRenderer.prepareFrame(frameState,layerState,context)){layerStatesToDraw.push(layerState)}}}var width=frameState.size[0]*frameState.pixelRatio;var height=frameState.size[1]*frameState.pixelRatio;if(this.canvas_.width!=width||this.canvas_.height!=height){this.canvas_.width=width;this.canvas_.height=height}gl.bindFramebuffer(goog.webgl.FRAMEBUFFER,null);gl.clearColor(0,0,0,0);gl.clear(goog.webgl.COLOR_BUFFER_BIT);gl.enable(goog.webgl.BLEND);gl.viewport(0,0,this.canvas_.width,this.canvas_.height);for(i=0,ii=layerStatesToDraw.length;i<ii;++i){layerState=layerStatesToDraw[i];layerRenderer=this.getLayerRenderer(layerState.layer);goog.asserts.assertInstanceof(layerRenderer,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");layerRenderer.composeFrame(frameState,layerState,context)}if(!this.renderedVisible_){goog.style.setElementShown(this.canvas_,true);this.renderedVisible_=true}this.calculateMatrices2D(frameState);if(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){frameState.postRenderFunctions.push(goog.bind(this.expireCache_,this))}if(!this.tileTextureQueue_.isEmpty()){frameState.postRenderFunctions.push(this.loadNextTileTexture_);frameState.animate=true}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,frameState);this.scheduleRemoveUnusedLayerRenderers(frameState);this.scheduleExpireIconCache(frameState)};ol.renderer.webgl.Map.prototype.forEachFeatureAtCoordinate=function(coordinate,frameState,callback,thisArg,layerFilter,thisArg2){var result;if(this.getGL().isContextLost()){return false}var viewState=frameState.viewState;var layerStates=frameState.layerStatesArray;var numLayers=layerStates.length;var i;for(i=numLayers-1;i>=0;--i){var layerState=layerStates[i];var layer=layerState.layer;if(ol.layer.Layer.visibleAtResolution(layerState,viewState.resolution)&&layerFilter.call(thisArg2,layer)){var layerRenderer=this.getLayerRenderer(layer);result=layerRenderer.forEachFeatureAtCoordinate(coordinate,frameState,callback,thisArg);if(result){return result}}}return undefined};ol.renderer.webgl.Map.prototype.hasFeatureAtCoordinate=function(coordinate,frameState,layerFilter,thisArg){var hasFeature=false;if(this.getGL().isContextLost()){return false}var viewState=frameState.viewState;var layerStates=frameState.layerStatesArray;var numLayers=layerStates.length;var i;for(i=numLayers-1;i>=0;--i){var layerState=layerStates[i];var layer=layerState.layer;if(ol.layer.Layer.visibleAtResolution(layerState,viewState.resolution)&&layerFilter.call(thisArg,layer)){var layerRenderer=this.getLayerRenderer(layer);hasFeature=layerRenderer.hasFeatureAtCoordinate(coordinate,frameState);if(hasFeature){return true}}}return hasFeature};ol.renderer.webgl.Map.prototype.forEachLayerAtPixel=function(pixel,frameState,callback,thisArg,layerFilter,thisArg2){if(this.getGL().isContextLost()){return false}var viewState=frameState.viewState;var result;var layerStates=frameState.layerStatesArray;var numLayers=layerStates.length;var i;for(i=numLayers-1;i>=0;--i){var layerState=layerStates[i];var layer=layerState.layer;if(ol.layer.Layer.visibleAtResolution(layerState,viewState.resolution)&&layerFilter.call(thisArg,layer)){var layerRenderer=this.getLayerRenderer(layer);result=layerRenderer.forEachLayerAtPixel(pixel,frameState,callback,thisArg);if(result){return result}}}return undefined};goog.provide("ol.Map");goog.provide("ol.MapProperty");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.async.AnimationDelay");goog.require("goog.async.nextTick");goog.require("goog.debug.Console");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.ViewportSizeMonitor");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.events.KeyHandler");goog.require("goog.events.KeyHandler.EventType");goog.require("goog.events.MouseWheelHandler");goog.require("goog.events.MouseWheelHandler.EventType");goog.require("goog.functions");goog.require("goog.log");goog.require("goog.log.Level");goog.require("goog.object");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserEventHandler");goog.require("ol.MapEvent");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.ObjectEvent");goog.require("ol.ObjectEventType");goog.require("ol.Pixel");goog.require("ol.PostRenderFunction");goog.require("ol.PreRenderFunction");goog.require("ol.RendererType");goog.require("ol.Size");goog.require("ol.TileQueue");goog.require("ol.View");goog.require("ol.ViewHint");goog.require("ol.control");goog.require("ol.extent");goog.require("ol.has");goog.require("ol.interaction");goog.require("ol.layer.Base");goog.require("ol.layer.Group");goog.require("ol.proj");goog.require("ol.proj.common");goog.require("ol.renderer.Map");goog.require("ol.renderer.canvas.Map");goog.require("ol.renderer.dom.Map");goog.require("ol.renderer.webgl.Map");goog.require("ol.size");goog.require("ol.structs.PriorityQueue");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");ol.OL3_URL="http://openlayers.org/";ol.OL3_LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC";ol.DEFAULT_RENDERER_TYPES=[ol.RendererType.CANVAS,ol.RendererType.WEBGL,ol.RendererType.DOM];ol.MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};ol.Map=function(options){goog.base(this);var optionsInternal=ol.Map.createOptionsInternal(options);this.loadTilesWhileAnimating_=goog.isDef(options.loadTilesWhileAnimating)?options.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=goog.isDef(options.loadTilesWhileInteracting)?options.loadTilesWhileInteracting:false;this.pixelRatio_=goog.isDef(options.pixelRatio)?options.pixelRatio:ol.has.DEVICE_PIXEL_RATIO;this.logos_=optionsInternal.logos;this.animationDelay_=new goog.async.AnimationDelay(this.renderFrame_,undefined,this);this.registerDisposable(this.animationDelay_);this.coordinateToPixelMatrix_=goog.vec.Mat4.createNumber();this.pixelToCoordinateMatrix_=goog.vec.Mat4.createNumber();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=ol.extent.createEmpty();this.viewPropertyListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-viewport");this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";if(ol.has.TOUCH){goog.dom.classlist.add(this.viewport_,"ol-touch")}this.overlayContainer_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer");goog.dom.appendChild(this.viewport_,this.overlayContainer_);this.overlayContainerStopEvent_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer-stopevent");goog.events.listen(this.overlayContainerStopEvent_,[goog.events.EventType.CLICK,goog.events.EventType.DBLCLICK,goog.events.EventType.MOUSEDOWN,goog.events.EventType.TOUCHSTART,goog.events.EventType.MSPOINTERDOWN,ol.MapBrowserEvent.EventType.POINTERDOWN,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel"],goog.events.Event.stopPropagation);goog.dom.appendChild(this.viewport_,this.overlayContainerStopEvent_);var mapBrowserEventHandler=new ol.MapBrowserEventHandler(this);goog.events.listen(mapBrowserEventHandler,goog.object.getValues(ol.MapBrowserEvent.EventType),this.handleMapBrowserEvent,false,this);this.registerDisposable(mapBrowserEventHandler);this.keyboardEventTarget_=optionsInternal.keyboardEventTarget;this.keyHandler_=new goog.events.KeyHandler();goog.events.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleBrowserEvent,false,this);this.registerDisposable(this.keyHandler_);var mouseWheelHandler=new goog.events.MouseWheelHandler(this.viewport_);goog.events.listen(mouseWheelHandler,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleBrowserEvent,false,this);this.registerDisposable(mouseWheelHandler);this.controls_=optionsInternal.controls;this.interactions_=optionsInternal.interactions;this.overlays_=optionsInternal.overlays;this.renderer_=new optionsInternal.rendererConstructor(this.viewport_,this);this.registerDisposable(this.renderer_);this.viewportSizeMonitor_=new goog.dom.ViewportSizeMonitor();this.registerDisposable(this.viewportSizeMonitor_);this.viewportResizeListenerKey_=null;this.focus_=null;this.preRenderFunctions_=[];this.postRenderFunctions_=[];this.tileQueue_=new ol.TileQueue(goog.bind(this.getTilePriority,this),goog.bind(this.handleTileChange_,this));this.skippedFeatureUids_={};goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.LAYERGROUP),this.handleLayerGroupChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.VIEW),this.handleViewChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.SIZE),this.handleSizeChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.TARGET),this.handleTargetChanged_,false,this);this.setProperties(optionsInternal.values);this.controls_.forEach(function(control){control.setMap(this)},this);goog.events.listen(this.controls_,ol.CollectionEventType.ADD,function(event){event.element.setMap(this)},false,this);goog.events.listen(this.controls_,ol.CollectionEventType.REMOVE,function(event){event.element.setMap(null)},false,this);this.interactions_.forEach(function(interaction){interaction.setMap(this)},this);goog.events.listen(this.interactions_,ol.CollectionEventType.ADD,function(event){event.element.setMap(this)},false,this);goog.events.listen(this.interactions_,ol.CollectionEventType.REMOVE,function(event){event.element.setMap(null)},false,this);this.overlays_.forEach(function(overlay){overlay.setMap(this)},this);goog.events.listen(this.overlays_,ol.CollectionEventType.ADD,function(event){event.element.setMap(this)},false,this);goog.events.listen(this.overlays_,ol.CollectionEventType.REMOVE,function(event){event.element.setMap(null)},false,this)};goog.inherits(ol.Map,ol.Object);ol.Map.prototype.addControl=function(control){var controls=this.getControls();goog.asserts.assert(goog.isDef(controls),"controls should be defined");controls.push(control)};ol.Map.prototype.addInteraction=function(interaction){var interactions=this.getInteractions();goog.asserts.assert(goog.isDef(interactions),"interactions should be defined");interactions.push(interaction)};ol.Map.prototype.addLayer=function(layer){var layers=this.getLayerGroup().getLayers();layers.push(layer)};ol.Map.prototype.addOverlay=function(overlay){var overlays=this.getOverlays();goog.asserts.assert(goog.isDef(overlays),"overlays should be defined");overlays.push(overlay)};ol.Map.prototype.beforeRender=function(var_args){this.render();Array.prototype.push.apply(this.preRenderFunctions_,arguments)};ol.Map.prototype.removePreRenderFunction=function(preRenderFunction){return goog.array.remove(this.preRenderFunctions_,preRenderFunction)};ol.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.viewport_);goog.base(this,"disposeInternal")};ol.Map.prototype.forEachFeatureAtPixel=function(pixel,callback,opt_this,opt_layerFilter,opt_this2){if(goog.isNull(this.frameState_)){return}var coordinate=this.getCoordinateFromPixel(pixel);var thisArg=goog.isDef(opt_this)?opt_this:null;var layerFilter=goog.isDef(opt_layerFilter)?opt_layerFilter:goog.functions.TRUE;var thisArg2=goog.isDef(opt_this2)?opt_this2:null;return this.renderer_.forEachFeatureAtCoordinate(coordinate,this.frameState_,callback,thisArg,layerFilter,thisArg2)};ol.Map.prototype.forEachLayerAtPixel=function(pixel,callback,opt_this,opt_layerFilter,opt_this2){if(goog.isNull(this.frameState_)){return}var thisArg=goog.isDef(opt_this)?opt_this:null;var layerFilter=goog.isDef(opt_layerFilter)?opt_layerFilter:goog.functions.TRUE;var thisArg2=goog.isDef(opt_this2)?opt_this2:null;return this.renderer_.forEachLayerAtPixel(pixel,this.frameState_,callback,thisArg,layerFilter,thisArg2)};ol.Map.prototype.hasFeatureAtPixel=function(pixel,opt_layerFilter,opt_this){if(goog.isNull(this.frameState_)){return false}var coordinate=this.getCoordinateFromPixel(pixel);var layerFilter=goog.isDef(opt_layerFilter)?opt_layerFilter:goog.functions.TRUE;var thisArg=goog.isDef(opt_this)?opt_this:null;return this.renderer_.hasFeatureAtCoordinate(coordinate,this.frameState_,layerFilter,thisArg)};ol.Map.prototype.getEventCoordinate=function(event){return this.getCoordinateFromPixel(this.getEventPixel(event))};ol.Map.prototype.getEventPixel=function(event){var eventPosition=goog.style.getRelativePosition(event,this.viewport_);return[eventPosition.x,eventPosition.y]};ol.Map.prototype.getTarget=function(){return(this.get(ol.MapProperty.TARGET))};ol.Map.prototype.getTargetElement=function(){var target=this.getTarget();return goog.isDef(target)?goog.dom.getElement(target):null};ol.Map.prototype.getCoordinateFromPixel=function(pixel){var frameState=this.frameState_;if(goog.isNull(frameState)){return null}else{var vec2=pixel.slice();return ol.vec.Mat4.multVec2(frameState.pixelToCoordinateMatrix,vec2,vec2)}};ol.Map.prototype.getControls=function(){return this.controls_};ol.Map.prototype.getOverlays=function(){return this.overlays_};ol.Map.prototype.getInteractions=function(){return this.interactions_};ol.Map.prototype.getLayerGroup=function(){return(this.get(ol.MapProperty.LAYERGROUP))};ol.Map.prototype.getLayers=function(){var layers=this.getLayerGroup().getLayers();return layers};ol.Map.prototype.getPixelFromCoordinate=function(coordinate){var frameState=this.frameState_;if(goog.isNull(frameState)){return null}else{var vec2=coordinate.slice(0,2);return ol.vec.Mat4.multVec2(frameState.coordinateToPixelMatrix,vec2,vec2)}};ol.Map.prototype.getRenderer=function(){return this.renderer_};ol.Map.prototype.getSize=function(){return(this.get(ol.MapProperty.SIZE))};ol.Map.prototype.getView=function(){return(this.get(ol.MapProperty.VIEW))};ol.Map.prototype.getViewport=function(){return this.viewport_};ol.Map.prototype.getOverlayContainer=function(){return this.overlayContainer_};ol.Map.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};ol.Map.prototype.getTilePriority=function(tile,tileSourceKey,tileCenter,tileResolution){var frameState=this.frameState_;if(goog.isNull(frameState)||!(tileSourceKey in frameState.wantedTiles)){return ol.structs.PriorityQueue.DROP}var coordKey=ol.tilecoord.toString(tile.tileCoord);if(!frameState.wantedTiles[tileSourceKey][coordKey]){return ol.structs.PriorityQueue.DROP}var deltaX=tileCenter[0]-frameState.focus[0];var deltaY=tileCenter[1]-frameState.focus[1];return 65536*Math.log(tileResolution)+Math.sqrt(deltaX*deltaX+deltaY*deltaY)/tileResolution};ol.Map.prototype.handleBrowserEvent=function(browserEvent,opt_type){var type=opt_type||browserEvent.type;var mapBrowserEvent=new ol.MapBrowserEvent(type,this,browserEvent);this.handleMapBrowserEvent(mapBrowserEvent)};ol.Map.prototype.handleMapBrowserEvent=function(mapBrowserEvent){if(goog.isNull(this.frameState_)){return}this.focus_=mapBrowserEvent.coordinate;mapBrowserEvent.frameState=this.frameState_;var interactions=this.getInteractions();goog.asserts.assert(goog.isDef(interactions),"interactions should be defined");var interactionsArray=interactions.getArray();var i;if(this.dispatchEvent(mapBrowserEvent)!==false){for(i=interactionsArray.length-1;i>=0;i--){var interaction=interactionsArray[i];if(!interaction.getActive()){continue}var cont=interaction.handleEvent(mapBrowserEvent);if(!cont){break}}}};ol.Map.prototype.handlePostRender=function(){var frameState=this.frameState_;var tileQueue=this.tileQueue_;if(!tileQueue.isEmpty()){var maxTotalLoading=16;var maxNewLoads=maxTotalLoading;var tileSourceCount=0;if(!goog.isNull(frameState)){var hints=frameState.viewHints;if(hints[ol.ViewHint.ANIMATING]){maxTotalLoading=this.loadTilesWhileAnimating_?8:0;maxNewLoads=2}if(hints[ol.ViewHint.INTERACTING]){maxTotalLoading=this.loadTilesWhileInteracting_?8:0;maxNewLoads=2}tileSourceCount=goog.object.getCount(frameState.wantedTiles)}maxTotalLoading*=tileSourceCount;maxNewLoads*=tileSourceCount;if(tileQueue.getTilesLoading()<maxTotalLoading){tileQueue.reprioritize();tileQueue.loadMoreTiles(maxTotalLoading,maxNewLoads)}}var postRenderFunctions=this.postRenderFunctions_;var i,ii;for(i=0,ii=postRenderFunctions.length;i<ii;++i){postRenderFunctions[i](this,frameState)}postRenderFunctions.length=0};ol.Map.prototype.handleSizeChanged_=function(){this.render()};ol.Map.prototype.handleTargetChanged_=function(){var targetElement=this.getTargetElement();this.keyHandler_.detach();if(goog.isNull(targetElement)){goog.dom.removeNode(this.viewport_);if(!goog.isNull(this.viewportResizeListenerKey_)){goog.events.unlistenByKey(this.viewportResizeListenerKey_);this.viewportResizeListenerKey_=null}}else{goog.dom.appendChild(targetElement,this.viewport_);var keyboardEventTarget=goog.isNull(this.keyboardEventTarget_)?targetElement:this.keyboardEventTarget_;this.keyHandler_.attach(keyboardEventTarget);if(goog.isNull(this.viewportResizeListenerKey_)){this.viewportResizeListenerKey_=goog.events.listen(this.viewportSizeMonitor_,goog.events.EventType.RESIZE,this.updateSize,false,this)}}this.updateSize()};ol.Map.prototype.handleTileChange_=function(){this.render()};ol.Map.prototype.handleViewPropertyChanged_=function(){this.render()};ol.Map.prototype.handleViewChanged_=function(){if(!goog.isNull(this.viewPropertyListenerKey_)){goog.events.unlistenByKey(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}var view=this.getView();if(!goog.isNull(view)){this.viewPropertyListenerKey_=goog.events.listen(view,ol.ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,false,this)}this.render()};ol.Map.prototype.handleLayerGroupMemberChanged_=function(event){goog.asserts.assertInstanceof(event,goog.events.Event,"event should be an Event");this.render()};ol.Map.prototype.handleLayerGroupPropertyChanged_=function(event){goog.asserts.assertInstanceof(event,ol.ObjectEvent,"event should be an ol.ObjectEvent");this.render()};ol.Map.prototype.handleLayerGroupChanged_=function(){if(!goog.isNull(this.layerGroupPropertyListenerKeys_)){var length=this.layerGroupPropertyListenerKeys_.length;for(var i=0;i<length;++i){goog.events.unlistenByKey(this.layerGroupPropertyListenerKeys_[i])}this.layerGroupPropertyListenerKeys_=null}var layerGroup=this.getLayerGroup();if(goog.isDefAndNotNull(layerGroup)){this.layerGroupPropertyListenerKeys_=[goog.events.listen(layerGroup,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerGroupPropertyChanged_,false,this),goog.events.listen(layerGroup,goog.events.EventType.CHANGE,this.handleLayerGroupMemberChanged_,false,this)]}this.render()};ol.Map.prototype.isDef=function(){if(!goog.dom.contains(document,this.viewport_)){return false}if(!goog.style.isElementShown(this.viewport_)){return false}var size=this.getSize();if(!goog.isDefAndNotNull(size)||size[0]<=0||size[1]<=0){return false}var view=this.getView();if(goog.isNull(view)||!view.isDef()){return false}return true};ol.Map.prototype.isRendered=function(){return !goog.isNull(this.frameState_)};ol.Map.prototype.renderSync=function(){this.animationDelay_.fire()};ol.Map.prototype.render=function(){if(!this.animationDelay_.isActive()){this.animationDelay_.start()}};ol.Map.prototype.removeControl=function(control){var controls=this.getControls();goog.asserts.assert(goog.isDef(controls),"controls should be defined");if(goog.isDef(controls.remove(control))){return control}return undefined};ol.Map.prototype.removeInteraction=function(interaction){var removed;var interactions=this.getInteractions();goog.asserts.assert(goog.isDef(interactions),"interactions should be defined");if(goog.isDef(interactions.remove(interaction))){removed=interaction}return removed};ol.Map.prototype.removeLayer=function(layer){var layers=this.getLayerGroup().getLayers();return layers.remove(layer)};ol.Map.prototype.removeOverlay=function(overlay){var overlays=this.getOverlays();goog.asserts.assert(goog.isDef(overlays),"overlays should be defined");if(goog.isDef(overlays.remove(overlay))){return overlay}return undefined};ol.Map.prototype.renderFrame_=function(time){var i,ii,viewState;var size=this.getSize();var view=this.getView();var frameState=null;if(goog.isDef(size)&&ol.size.hasArea(size)&&!goog.isNull(view)&&view.isDef()){var viewHints=view.getHints();var layerStatesArray=this.getLayerGroup().getLayerStatesArray();var layerStates={};for(i=0,ii=layerStatesArray.length;i<ii;++i){layerStates[goog.getUid(layerStatesArray[i].layer)]=layerStatesArray[i]}viewState=view.getState();frameState=({animate:false,attributions:{},coordinateToPixelMatrix:this.coordinateToPixelMatrix_,extent:null,focus:goog.isNull(this.focus_)?viewState.center:this.focus_,index:this.frameIndex_++,layerStates:layerStates,layerStatesArray:layerStatesArray,logos:goog.object.clone(this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateMatrix:this.pixelToCoordinateMatrix_,postRenderFunctions:[],size:size,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:time,usedTiles:{},viewState:viewState,viewHints:viewHints,wantedTiles:{}})}if(!goog.isNull(frameState)){var preRenderFunctions=this.preRenderFunctions_;var n=0,preRenderFunction;for(i=0,ii=preRenderFunctions.length;i<ii;++i){preRenderFunction=preRenderFunctions[i];if(preRenderFunction(this,frameState)){preRenderFunctions[n++]=preRenderFunction}}preRenderFunctions.length=n;frameState.extent=ol.extent.getForViewAndSize(viewState.center,viewState.resolution,viewState.rotation,frameState.size)}this.frameState_=frameState;this.renderer_.renderFrame(frameState);if(!goog.isNull(frameState)){if(frameState.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,frameState.postRenderFunctions);var idle=this.preRenderFunctions_.length===0&&!frameState.viewHints[ol.ViewHint.ANIMATING]&&!frameState.viewHints[ol.ViewHint.INTERACTING]&&!ol.extent.equals(frameState.extent,this.previousExtent_);if(idle){this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND,this,frameState));ol.extent.clone(frameState.extent,this.previousExtent_)}}this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER,this,frameState));goog.async.nextTick(this.handlePostRender,this)};ol.Map.prototype.setLayerGroup=function(layerGroup){this.set(ol.MapProperty.LAYERGROUP,layerGroup)};ol.Map.prototype.setSize=function(size){this.set(ol.MapProperty.SIZE,size)};ol.Map.prototype.setTarget=function(target){this.set(ol.MapProperty.TARGET,target)};ol.Map.prototype.setView=function(view){this.set(ol.MapProperty.VIEW,view)};ol.Map.prototype.skipFeature=function(feature){var featureUid=goog.getUid(feature).toString();this.skippedFeatureUids_[featureUid]=true;this.render()};ol.Map.prototype.updateSize=function(){var targetElement=this.getTargetElement();if(goog.isNull(targetElement)){this.setSize(undefined)}else{var size=goog.style.getContentBoxSize(targetElement);this.setSize([size.width,size.height])}};ol.Map.prototype.unskipFeature=function(feature){var featureUid=goog.getUid(feature).toString();delete this.skippedFeatureUids_[featureUid];this.render()};ol.MapOptionsInternal;ol.Map.createOptionsInternal=function(options){var keyboardEventTarget=null;if(goog.isDef(options.keyboardEventTarget)){keyboardEventTarget=goog.isString(options.keyboardEventTarget)?document.getElementById(options.keyboardEventTarget):options.keyboardEventTarget}var values={};var logos={};if(!goog.isDef(options.logo)||(goog.isBoolean(options.logo)&&options.logo)){logos[ol.OL3_LOGO_URL]=ol.OL3_URL}else{var logo=options.logo;if(goog.isString(logo)){logos[logo]=""}else{if(goog.isObject(logo)){goog.asserts.assertString(logo.href,"logo.href should be a string");goog.asserts.assertString(logo.src,"logo.src should be a string");logos[logo.src]=logo.href}}}var layerGroup=(options.layers instanceof ol.layer.Group)?options.layers:new ol.layer.Group({layers:options.layers});values[ol.MapProperty.LAYERGROUP]=layerGroup;values[ol.MapProperty.TARGET]=options.target;values[ol.MapProperty.VIEW]=goog.isDef(options.view)?options.view:new ol.View();var rendererConstructor=ol.renderer.Map;var rendererTypes;if(goog.isDef(options.renderer)){if(goog.isArray(options.renderer)){rendererTypes=options.renderer}else{if(goog.isString(options.renderer)){rendererTypes=[options.renderer]}else{goog.asserts.fail("Incorrect format for renderer option")}}}else{rendererTypes=ol.DEFAULT_RENDERER_TYPES}var i,ii;for(i=0,ii=rendererTypes.length;i<ii;++i){var rendererType=rendererTypes[i];if(ol.ENABLE_CANVAS&&rendererType==ol.RendererType.CANVAS){if(ol.has.CANVAS){rendererConstructor=ol.renderer.canvas.Map;break}}else{if(ol.ENABLE_DOM&&rendererType==ol.RendererType.DOM){if(ol.has.DOM){rendererConstructor=ol.renderer.dom.Map;break}}else{if(ol.ENABLE_WEBGL&&rendererType==ol.RendererType.WEBGL){if(ol.has.WEBGL){rendererConstructor=ol.renderer.webgl.Map;break}}}}}var controls;if(goog.isDef(options.controls)){if(goog.isArray(options.controls)){controls=new ol.Collection(options.controls.slice())}else{goog.asserts.assertInstanceof(options.controls,ol.Collection,"options.controls should be an ol.Collection");controls=options.controls}}else{controls=ol.control.defaults()}var interactions;if(goog.isDef(options.interactions)){if(goog.isArray(options.interactions)){interactions=new ol.Collection(options.interactions.slice())}else{goog.asserts.assertInstanceof(options.interactions,ol.Collection,"options.interactions should be an ol.Collection");interactions=options.interactions}}else{interactions=ol.interaction.defaults()}var overlays;if(goog.isDef(options.overlays)){if(goog.isArray(options.overlays)){overlays=new ol.Collection(options.overlays.slice())}else{goog.asserts.assertInstanceof(options.overlays,ol.Collection,"options.overlays should be an ol.Collection");overlays=options.overlays}}else{overlays=new ol.Collection()}return{controls:controls,interactions:interactions,keyboardEventTarget:keyboardEventTarget,logos:logos,overlays:overlays,rendererConstructor:rendererConstructor,values:values}};ol.proj.common.add();if(goog.DEBUG){(function(){goog.debug.Console.autoInstall();var logger=goog.log.getLogger("ol");logger.setLevel(goog.log.Level.FINEST)})()}goog.provide("ol.Overlay");goog.provide("ol.OverlayPositioning");goog.provide("ol.OverlayProperty");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.Map");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.animation");goog.require("ol.dom");goog.require("ol.extent");ol.OverlayProperty={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};ol.OverlayPositioning={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};ol.Overlay=function(options){goog.base(this);this.insertFirst_=goog.isDef(options.insertFirst)?options.insertFirst:true;this.stopEvent_=goog.isDef(options.stopEvent)?options.stopEvent:true;this.element_=goog.dom.createDom(goog.dom.TagName.DIV,{"class":"ol-overlay-container"});this.element_.style.position="absolute";this.autoPan=goog.isDef(options.autoPan)?options.autoPan:false;this.autoPanAnimation_=goog.isDef(options.autoPanAnimation)?options.autoPanAnimation:({});this.autoPanMargin_=goog.isDef(options.autoPanMargin)?options.autoPanMargin:20;this.rendered_={bottom_:"",left_:"",right_:"",top_:"",visible:true};this.mapPostrenderListenerKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.ELEMENT),this.handleElementChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.MAP),this.handleMapChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.OFFSET),this.handleOffsetChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITION),this.handlePositionChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITIONING),this.handlePositioningChanged,false,this);if(goog.isDef(options.element)){this.setElement(options.element)}this.setOffset(goog.isDef(options.offset)?options.offset:[0,0]);this.setPositioning(goog.isDef(options.positioning)?(options.positioning):ol.OverlayPositioning.TOP_LEFT);if(goog.isDef(options.position)){this.setPosition(options.position)}};goog.inherits(ol.Overlay,ol.Object);ol.Overlay.prototype.getElement=function(){return(this.get(ol.OverlayProperty.ELEMENT))};ol.Overlay.prototype.getMap=function(){return(this.get(ol.OverlayProperty.MAP))};ol.Overlay.prototype.getOffset=function(){return(this.get(ol.OverlayProperty.OFFSET))};ol.Overlay.prototype.getPosition=function(){return(this.get(ol.OverlayProperty.POSITION))};ol.Overlay.prototype.getPositioning=function(){return(this.get(ol.OverlayProperty.POSITIONING))};ol.Overlay.prototype.handleElementChanged=function(){goog.dom.removeChildren(this.element_);var element=this.getElement();if(goog.isDefAndNotNull(element)){goog.dom.append((this.element_),element)}};ol.Overlay.prototype.handleMapChanged=function(){if(!goog.isNull(this.mapPostrenderListenerKey_)){goog.dom.removeNode(this.element_);goog.events.unlistenByKey(this.mapPostrenderListenerKey_);this.mapPostrenderListenerKey_=null}var map=this.getMap();if(goog.isDefAndNotNull(map)){this.mapPostrenderListenerKey_=goog.events.listen(map,ol.MapEventType.POSTRENDER,this.render,false,this);this.updatePixelPosition();var container=this.stopEvent_?map.getOverlayContainerStopEvent():map.getOverlayContainer();if(this.insertFirst_){goog.dom.insertChildAt((container),this.element_,0)}else{goog.dom.append((container),this.element_)}}};ol.Overlay.prototype.render=function(){this.updatePixelPosition()};ol.Overlay.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.handlePositionChanged=function(){this.updatePixelPosition();if(goog.isDef(this.get(ol.OverlayProperty.POSITION))&&this.autoPan){this.panIntoView_()}};ol.Overlay.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.setElement=function(element){this.set(ol.OverlayProperty.ELEMENT,element)};ol.Overlay.prototype.setMap=function(map){this.set(ol.OverlayProperty.MAP,map)};ol.Overlay.prototype.setOffset=function(offset){this.set(ol.OverlayProperty.OFFSET,offset)};ol.Overlay.prototype.setPosition=function(position){this.set(ol.OverlayProperty.POSITION,position)};ol.Overlay.prototype.panIntoView_=function(){goog.asserts.assert(this.autoPan,"this.autoPan should be true");var map=this.getMap();if(!goog.isDef(map)||goog.isNull(map.getTargetElement())){return}var mapRect=this.getRect_(map.getTargetElement(),map.getSize());var element=this.getElement();goog.asserts.assert(goog.isDefAndNotNull(element),"element should be defined");var overlayRect=this.getRect_(element,[ol.dom.outerWidth(element),ol.dom.outerHeight(element)]);var margin=this.autoPanMargin_;if(!ol.extent.containsExtent(mapRect,overlayRect)){var offsetLeft=overlayRect[0]-mapRect[0];var offsetRight=mapRect[2]-overlayRect[2];var offsetTop=overlayRect[1]-mapRect[1];var offsetBottom=mapRect[3]-overlayRect[3];var delta=[0,0];if(offsetLeft<0){delta[0]=offsetLeft-margin}else{if(offsetRight<0){delta[0]=Math.abs(offsetRight)+margin}}if(offsetTop<0){delta[1]=offsetTop-margin}else{if(offsetBottom<0){delta[1]=Math.abs(offsetBottom)+margin}}if(delta[0]!==0||delta[1]!==0){var center=map.getView().getCenter();goog.asserts.assert(goog.isDef(center),"center should be defined");var centerPx=map.getPixelFromCoordinate(center);var newCenterPx=[centerPx[0]+delta[0],centerPx[1]+delta[1]];if(!goog.isNull(this.autoPanAnimation_)){this.autoPanAnimation_.source=center;map.beforeRender(ol.animation.pan(this.autoPanAnimation_))}map.getView().setCenter(map.getCoordinateFromPixel(newCenterPx))}}};ol.Overlay.prototype.getRect_=function(element,size){goog.asserts.assert(goog.isDefAndNotNull(element),"element should be defined");goog.asserts.assert(goog.isDef(size),"size should be defined");var offset=goog.style.getPageOffset(element);return[offset.x,offset.y,offset.x+size[0],offset.y+size[1]]};ol.Overlay.prototype.setPositioning=function(positioning){this.set(ol.OverlayProperty.POSITIONING,positioning)};ol.Overlay.prototype.setVisible=function(visible){if(this.rendered_.visible!==visible){goog.style.setElementShown(this.element_,visible);this.rendered_.visible=visible}};ol.Overlay.prototype.updatePixelPosition=function(){var map=this.getMap();var position=this.getPosition();if(!goog.isDef(map)||!map.isRendered()||!goog.isDef(position)){this.setVisible(false);return}var pixel=map.getPixelFromCoordinate(position);var mapSize=map.getSize();this.updateRenderedPosition(pixel,mapSize)};ol.Overlay.prototype.updateRenderedPosition=function(pixel,mapSize){goog.asserts.assert(!goog.isNull(pixel),"pixel should not be null");goog.asserts.assert(goog.isDef(mapSize),"mapSize should be defined");var style=this.element_.style;var offset=this.getOffset();goog.asserts.assert(goog.isArray(offset),"offset should be an array");var positioning=this.getPositioning();goog.asserts.assert(goog.isDef(positioning),"positioning should be defined");var offsetX=offset[0];var offsetY=offset[1];if(positioning==ol.OverlayPositioning.BOTTOM_RIGHT||positioning==ol.OverlayPositioning.CENTER_RIGHT||positioning==ol.OverlayPositioning.TOP_RIGHT){if(this.rendered_.left_!==""){this.rendered_.left_=style.left=""}var right=Math.round(mapSize[0]-pixel[0]-offsetX)+"px";if(this.rendered_.right_!=right){this.rendered_.right_=style.right=right}}else{if(this.rendered_.right_!==""){this.rendered_.right_=style.right=""}if(positioning==ol.OverlayPositioning.BOTTOM_CENTER||positioning==ol.OverlayPositioning.CENTER_CENTER||positioning==ol.OverlayPositioning.TOP_CENTER){offsetX-=goog.style.getSize(this.element_).width/2}var left=Math.round(pixel[0]+offsetX)+"px";if(this.rendered_.left_!=left){this.rendered_.left_=style.left=left}}if(positioning==ol.OverlayPositioning.BOTTOM_LEFT||positioning==ol.OverlayPositioning.BOTTOM_CENTER||positioning==ol.OverlayPositioning.BOTTOM_RIGHT){if(this.rendered_.top_!==""){this.rendered_.top_=style.top=""}var bottom=Math.round(mapSize[1]-pixel[1]-offsetY)+"px";if(this.rendered_.bottom_!=bottom){this.rendered_.bottom_=style.bottom=bottom}}else{if(this.rendered_.bottom_!==""){this.rendered_.bottom_=style.bottom=""}if(positioning==ol.OverlayPositioning.CENTER_LEFT||positioning==ol.OverlayPositioning.CENTER_CENTER||positioning==ol.OverlayPositioning.CENTER_RIGHT){offsetY-=goog.style.getSize(this.element_).height/2}var top=Math.round(pixel[1]+offsetY)+"px";if(this.rendered_.top_!=top){this.rendered_.top_=style.top=top}}this.setVisible(true)};goog.provide("ol.control.OverviewMap");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math.Size");goog.require("goog.style");goog.require("ol.Collection");goog.require("ol.Map");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.ObjectEventType");goog.require("ol.Overlay");goog.require("ol.OverlayPositioning");goog.require("ol.View");goog.require("ol.ViewProperty");goog.require("ol.control.Control");goog.require("ol.coordinate");goog.require("ol.css");goog.require("ol.extent");ol.control.OverviewMap=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.collapsed_=goog.isDef(options.collapsed)?options.collapsed:true;this.collapsible_=goog.isDef(options.collapsible)?options.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var className=goog.isDef(options.className)?options.className:"ol-overviewmap";var tipLabel=goog.isDef(options.tipLabel)?options.tipLabel:"Overview map";var collapseLabel=goog.isDef(options.collapseLabel)?options.collapseLabel:"\u00AB";this.collapseLabel_=(goog.isString(collapseLabel)?goog.dom.createDom(goog.dom.TagName.SPAN,{},collapseLabel):collapseLabel);var label=goog.isDef(options.label)?options.label:"\u00BB";this.label_=(goog.isString(label)?goog.dom.createDom(goog.dom.TagName.SPAN,{},label):label);var activeLabel=(this.collapsible_&&!this.collapsed_)?this.collapseLabel_:this.label_;var button=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:tipLabel},activeLabel);goog.events.listen(button,goog.events.EventType.CLICK,this.handleClick_,false,this);var ovmapDiv=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overviewmap-map");this.ovmap_=new ol.Map({controls:new ol.Collection(),interactions:new ol.Collection(),target:ovmapDiv});var ovmap=this.ovmap_;if(goog.isDef(options.layers)){options.layers.forEach(function(layer){ovmap.addLayer(layer)},this)}var box=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overviewmap-box");this.boxOverlay_=new ol.Overlay({position:[0,0],positioning:ol.OverlayPositioning.BOTTOM_LEFT,element:box});this.ovmap_.addOverlay(this.boxOverlay_);var cssClasses=className+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible");var element=goog.dom.createDom(goog.dom.TagName.DIV,cssClasses,ovmapDiv,button);var render=goog.isDef(options.render)?options.render:ol.control.OverviewMap.render;goog.base(this,{element:element,render:render,target:options.target})};goog.inherits(ol.control.OverviewMap,ol.control.Control);ol.control.OverviewMap.prototype.setMap=function(map){var oldMap=this.getMap();if(map===oldMap){return}if(oldMap){var oldView=oldMap.getView();if(oldView){this.unbindView_(oldView)}}goog.base(this,"setMap",map);if(map){this.listenerKeys.push(goog.events.listen(map,ol.ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,false,this));if(this.ovmap_.getLayers().getLength()===0){this.ovmap_.setLayerGroup(map.getLayerGroup())}var view=map.getView();if(view){this.bindView_(view);if(view.isDef()){this.ovmap_.updateSize();this.resetExtent_()}}}};ol.control.OverviewMap.prototype.handleMapPropertyChange_=function(event){if(event.key===ol.MapProperty.VIEW){var oldView=(event.oldValue);if(oldView){this.unbindView_(oldView)}var newView=this.getMap().getView();this.bindView_(newView)}};ol.control.OverviewMap.prototype.bindView_=function(view){goog.events.listen(view,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,false,this)};ol.control.OverviewMap.prototype.unbindView_=function(view){goog.events.unlisten(view,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,false,this)};ol.control.OverviewMap.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};ol.control.OverviewMap.render=function(mapEvent){this.validateExtent_();this.updateBox_()};ol.control.OverviewMap.prototype.validateExtent_=function(){var map=this.getMap();var ovmap=this.ovmap_;if(!map.isRendered()||!ovmap.isRendered()){return}var mapSize=map.getSize();goog.asserts.assertArray(mapSize,"mapSize should be an array");var view=map.getView();goog.asserts.assert(goog.isDef(view),"view should be defined");var extent=view.calculateExtent(mapSize);var ovmapSize=ovmap.getSize();goog.asserts.assertArray(ovmapSize,"ovmapSize should be an array");var ovview=ovmap.getView();goog.asserts.assert(goog.isDef(ovview),"ovview should be defined");var ovextent=ovview.calculateExtent(ovmapSize);var topLeftPixel=ovmap.getPixelFromCoordinate(ol.extent.getTopLeft(extent));var bottomRightPixel=ovmap.getPixelFromCoordinate(ol.extent.getBottomRight(extent));var boxSize=new goog.math.Size(Math.abs(topLeftPixel[0]-bottomRightPixel[0]),Math.abs(topLeftPixel[1]-bottomRightPixel[1]));var ovmapWidth=ovmapSize[0];var ovmapHeight=ovmapSize[1];if(boxSize.width<ovmapWidth*ol.OVERVIEWMAP_MIN_RATIO||boxSize.height<ovmapHeight*ol.OVERVIEWMAP_MIN_RATIO||boxSize.width>ovmapWidth*ol.OVERVIEWMAP_MAX_RATIO||boxSize.height>ovmapHeight*ol.OVERVIEWMAP_MAX_RATIO){this.resetExtent_()}else{if(!ol.extent.containsExtent(ovextent,extent)){this.recenter_()}}};ol.control.OverviewMap.prototype.resetExtent_=function(){if(ol.OVERVIEWMAP_MAX_RATIO===0||ol.OVERVIEWMAP_MIN_RATIO===0){return}var map=this.getMap();var ovmap=this.ovmap_;var mapSize=map.getSize();goog.asserts.assertArray(mapSize,"mapSize should be an array");var view=map.getView();goog.asserts.assert(goog.isDef(view),"view should be defined");var extent=view.calculateExtent(mapSize);var ovmapSize=ovmap.getSize();goog.asserts.assertArray(ovmapSize,"ovmapSize should be an array");var ovview=ovmap.getView();goog.asserts.assert(goog.isDef(ovview),"ovview should be defined");var steps=Math.log(ol.OVERVIEWMAP_MAX_RATIO/ol.OVERVIEWMAP_MIN_RATIO)/Math.LN2;var ratio=1/(Math.pow(2,steps/2)*ol.OVERVIEWMAP_MIN_RATIO);ol.extent.scaleFromCenter(extent,ratio);ovview.fit(extent,ovmapSize)};ol.control.OverviewMap.prototype.recenter_=function(){var map=this.getMap();var ovmap=this.ovmap_;var view=map.getView();goog.asserts.assert(goog.isDef(view),"view should be defined");var ovview=ovmap.getView();goog.asserts.assert(goog.isDef(ovview),"ovview should be defined");ovview.setCenter(view.getCenter())};ol.control.OverviewMap.prototype.updateBox_=function(){var map=this.getMap();var ovmap=this.ovmap_;if(!map.isRendered()||!ovmap.isRendered()){return}var mapSize=map.getSize();goog.asserts.assertArray(mapSize,"mapSize should be an array");var view=map.getView();goog.asserts.assert(goog.isDef(view),"view should be defined");var ovview=ovmap.getView();goog.asserts.assert(goog.isDef(ovview),"ovview should be defined");var ovmapSize=ovmap.getSize();goog.asserts.assertArray(ovmapSize,"ovmapSize should be an array");var rotation=view.getRotation();goog.asserts.assert(goog.isDef(rotation),"rotation should be defined");var overlay=this.boxOverlay_;var box=this.boxOverlay_.getElement();var extent=view.calculateExtent(mapSize);var ovresolution=ovview.getResolution();var bottomLeft=ol.extent.getBottomLeft(extent);var topRight=ol.extent.getTopRight(extent);var rotateBottomLeft=this.calculateCoordinateRotate_(rotation,bottomLeft);overlay.setPosition(rotateBottomLeft);if(goog.isDefAndNotNull(box)){var boxWidth=Math.abs((bottomLeft[0]-topRight[0])/ovresolution);var boxHeight=Math.abs((topRight[1]-bottomLeft[1])/ovresolution);goog.style.setBorderBoxSize(box,new goog.math.Size(boxWidth,boxHeight))}};ol.control.OverviewMap.prototype.calculateCoordinateRotate_=function(rotation,coordinate){var coordinateRotate;var map=this.getMap();var view=map.getView();goog.asserts.assert(goog.isDef(view),"view should be defined");var currentCenter=view.getCenter();if(goog.isDef(currentCenter)){coordinateRotate=[coordinate[0]-currentCenter[0],coordinate[1]-currentCenter[1]];ol.coordinate.rotate(coordinateRotate,rotation);ol.coordinate.add(coordinateRotate,currentCenter)}return coordinateRotate};ol.control.OverviewMap.prototype.handleClick_=function(event){event.preventDefault();this.handleToggle_()};ol.control.OverviewMap.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");if(this.collapsed_){goog.dom.replaceNode(this.collapseLabel_,this.label_)}else{goog.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_;var ovmap=this.ovmap_;if(!this.collapsed_&&!ovmap.isRendered()){ovmap.updateSize();this.resetExtent_();goog.events.listenOnce(ovmap,ol.MapEventType.POSTRENDER,function(event){this.updateBox_()},false,this)}};ol.control.OverviewMap.prototype.getCollapsible=function(){return this.collapsible_};ol.control.OverviewMap.prototype.setCollapsible=function(collapsible){if(this.collapsible_===collapsible){return}this.collapsible_=collapsible;goog.dom.classlist.toggle(this.element,"ol-uncollapsible");if(!collapsible&&this.collapsed_){this.handleToggle_()}};ol.control.OverviewMap.prototype.setCollapsed=function(collapsed){if(!this.collapsible_||this.collapsed_===collapsed){return}this.handleToggle_()};ol.control.OverviewMap.prototype.getCollapsed=function(){return this.collapsed_};goog.provide("ol.control.ScaleLine");goog.provide("ol.control.ScaleLineProperty");goog.provide("ol.control.ScaleLineUnits");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.math");goog.require("goog.style");goog.require("ol.Object");goog.require("ol.TransformFunction");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Units");goog.require("ol.sphere.NORMAL");ol.control.ScaleLineProperty={UNITS:"units"};ol.control.ScaleLineUnits={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};ol.control.ScaleLine=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var className=goog.isDef(options.className)?options.className:"ol-scale-line";this.innerElement_=goog.dom.createDom(goog.dom.TagName.DIV,className+"-inner");this.element_=goog.dom.createDom(goog.dom.TagName.DIV,className+" "+ol.css.CLASS_UNSELECTABLE,this.innerElement_);this.viewState_=null;this.minWidth_=goog.isDef(options.minWidth)?options.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_="";this.toEPSG4326_=null;var render=goog.isDef(options.render)?options.render:ol.control.ScaleLine.render;goog.base(this,{element:this.element_,render:render,target:options.target});goog.events.listen(this,ol.Object.getChangeEventType(ol.control.ScaleLineProperty.UNITS),this.handleUnitsChanged_,false,this);this.setUnits((options.units)||ol.control.ScaleLineUnits.METRIC)};goog.inherits(ol.control.ScaleLine,ol.control.Control);ol.control.ScaleLine.LEADING_DIGITS=[1,2,5];ol.control.ScaleLine.prototype.getUnits=function(){return(this.get(ol.control.ScaleLineProperty.UNITS))};ol.control.ScaleLine.render=function(mapEvent){var frameState=mapEvent.frameState;if(goog.isNull(frameState)){this.viewState_=null}else{this.viewState_=frameState.viewState}this.updateElement_()};ol.control.ScaleLine.prototype.handleUnitsChanged_=function(){this.updateElement_()};ol.control.ScaleLine.prototype.setUnits=function(units){this.set(ol.control.ScaleLineProperty.UNITS,units)};ol.control.ScaleLine.prototype.updateElement_=function(){var viewState=this.viewState_;if(goog.isNull(viewState)){if(this.renderedVisible_){goog.style.setElementShown(this.element_,false);this.renderedVisible_=false}return}var center=viewState.center;var projection=viewState.projection;var pointResolution=projection.getPointResolution(viewState.resolution,center);var projectionUnits=projection.getUnits();var cosLatitude;var units=this.getUnits();if(projectionUnits==ol.proj.Units.DEGREES&&(units==ol.control.ScaleLineUnits.METRIC||units==ol.control.ScaleLineUnits.IMPERIAL||units==ol.control.ScaleLineUnits.US||units==ol.control.ScaleLineUnits.NAUTICAL)){this.toEPSG4326_=null;cosLatitude=Math.cos(goog.math.toRadians(center[1]));pointResolution*=Math.PI*cosLatitude*ol.sphere.NORMAL.radius/180;projectionUnits=ol.proj.Units.METERS}else{if(projectionUnits!=ol.proj.Units.DEGREES&&units==ol.control.ScaleLineUnits.DEGREES){if(goog.isNull(this.toEPSG4326_)){this.toEPSG4326_=ol.proj.getTransformFromProjections(projection,ol.proj.get("EPSG:4326"))}cosLatitude=Math.cos(goog.math.toRadians(this.toEPSG4326_(center)[1]));var radius=ol.sphere.NORMAL.radius;goog.asserts.assert(goog.isDef(ol.proj.METERS_PER_UNIT[projectionUnits]),"Meters per unit should be defined for the projection unit");radius/=ol.proj.METERS_PER_UNIT[projectionUnits];pointResolution*=180/(Math.PI*cosLatitude*radius);projectionUnits=ol.proj.Units.DEGREES}else{this.toEPSG4326_=null}}goog.asserts.assert(((units==ol.control.ScaleLineUnits.METRIC||units==ol.control.ScaleLineUnits.IMPERIAL||units==ol.control.ScaleLineUnits.US||units==ol.control.ScaleLineUnits.NAUTICAL)&&projectionUnits==ol.proj.Units.METERS)||(units==ol.control.ScaleLineUnits.DEGREES&&projectionUnits==ol.proj.Units.DEGREES),"Scale line units and projection units should match");var nominalCount=this.minWidth_*pointResolution;var suffix="";if(units==ol.control.ScaleLineUnits.DEGREES){if(nominalCount<1/60){suffix="\u2033";pointResolution*=3600}else{if(nominalCount<1){suffix="\u2032";pointResolution*=60}else{suffix="\u00b0"}}}else{if(units==ol.control.ScaleLineUnits.IMPERIAL){if(nominalCount<0.9144){suffix="in";pointResolution/=0.0254}else{if(nominalCount<1609.344){suffix="ft";pointResolution/=0.3048}else{suffix="mi";pointResolution/=1609.344}}}else{if(units==ol.control.ScaleLineUnits.NAUTICAL){pointResolution/=1852;suffix="nm"}else{if(units==ol.control.ScaleLineUnits.METRIC){if(nominalCount<1){suffix="mm";pointResolution*=1000}else{if(nominalCount<1000){suffix="m"}else{suffix="km";pointResolution/=1000}}}else{if(units==ol.control.ScaleLineUnits.US){if(nominalCount<0.9144){suffix="in";pointResolution*=39.37}else{if(nominalCount<1609.344){suffix="ft";pointResolution/=0.30480061}else{suffix="mi";pointResolution/=1609.3472}}}else{goog.asserts.fail("Scale line element cannot be updated")}}}}}var i=3*Math.floor(Math.log(this.minWidth_*pointResolution)/Math.log(10));var count,width;while(true){count=ol.control.ScaleLine.LEADING_DIGITS[i%3]*Math.pow(10,Math.floor(i/3));width=Math.round(count/pointResolution);if(isNaN(width)){goog.style.setElementShown(this.element_,false);this.renderedVisible_=false;return}else{if(width>=this.minWidth_){break}}++i}var html=count+" "+suffix;if(this.renderedHTML_!=html){this.innerElement_.innerHTML=html;this.renderedHTML_=html}if(this.renderedWidth_!=width){this.innerElement_.style.width=width+"px";this.renderedWidth_=width}if(!this.renderedVisible_){goog.style.setElementShown(this.element_,true);this.renderedVisible_=true}};goog.provide("goog.events.EventHandler");goog.require("goog.Disposable");goog.require("goog.events");goog.require("goog.object");goog.forwardDeclare("goog.events.EventWrapper");goog.events.EventHandler=function(opt_scope){goog.Disposable.call(this);this.handler_=opt_scope;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(src,type,opt_fn,opt_capture){return this.listen_(src,type,opt_fn,opt_capture)};goog.events.EventHandler.prototype.listenWithScope=function(src,type,fn,capture,scope){return this.listen_(src,type,fn,capture,scope)};goog.events.EventHandler.prototype.listen_=function(src,type,opt_fn,opt_capture,opt_scope){if(!goog.isArray(type)){if(type){goog.events.EventHandler.typeArray_[0]=type.toString()}type=goog.events.EventHandler.typeArray_}for(var i=0;i<type.length;i++){var listenerObj=goog.events.listen(src,type[i],opt_fn||this.handleEvent,opt_capture||false,opt_scope||this.handler_||this);if(!listenerObj){return this}var key=listenerObj.key;this.keys_[key]=listenerObj}return this};goog.events.EventHandler.prototype.listenOnce=function(src,type,opt_fn,opt_capture){return this.listenOnce_(src,type,opt_fn,opt_capture)};goog.events.EventHandler.prototype.listenOnceWithScope=function(src,type,fn,capture,scope){return this.listenOnce_(src,type,fn,capture,scope)};goog.events.EventHandler.prototype.listenOnce_=function(src,type,opt_fn,opt_capture,opt_scope){if(goog.isArray(type)){for(var i=0;i<type.length;i++){this.listenOnce_(src,type[i],opt_fn,opt_capture,opt_scope)}}else{var listenerObj=goog.events.listenOnce(src,type,opt_fn||this.handleEvent,opt_capture,opt_scope||this.handler_||this);if(!listenerObj){return this}var key=listenerObj.key;this.keys_[key]=listenerObj}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(src,wrapper,listener,opt_capt){return this.listenWithWrapper_(src,wrapper,listener,opt_capt)};goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(src,wrapper,listener,capture,scope){return this.listenWithWrapper_(src,wrapper,listener,capture,scope)};goog.events.EventHandler.prototype.listenWithWrapper_=function(src,wrapper,listener,opt_capt,opt_scope){wrapper.listen(src,listener,opt_capt,opt_scope||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var count=0;for(var key in this.keys_){if(Object.prototype.hasOwnProperty.call(this.keys_,key)){count++}}return count};goog.events.EventHandler.prototype.unlisten=function(src,type,opt_fn,opt_capture,opt_scope){if(goog.isArray(type)){for(var i=0;i<type.length;i++){this.unlisten(src,type[i],opt_fn,opt_capture,opt_scope)}}else{var listener=goog.events.getListener(src,type,opt_fn||this.handleEvent,opt_capture,opt_scope||this.handler_||this);if(listener){goog.events.unlistenByKey(listener);delete this.keys_[listener.key]}}return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_scope){wrapper.unlisten(src,listener,opt_capt,opt_scope||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(listenerObj,key){if(this.keys_.hasOwnProperty(key)){goog.events.unlistenByKey(listenerObj)}},this);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(e){throw Error("EventHandler.handleEvent not implemented")};goog.provide("goog.style.bidi");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.userAgent");goog.style.bidi.getScrollLeft=function(element){var isRtl=goog.style.isRightToLeft(element);if(isRtl&&goog.userAgent.GECKO){return -element.scrollLeft}else{if(isRtl&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8"))){var overflowX=goog.style.getComputedOverflowX(element);if(overflowX=="visible"){return element.scrollLeft}else{return element.scrollWidth-element.clientWidth-element.scrollLeft}}}return element.scrollLeft};goog.style.bidi.getOffsetStart=function(element){element=(element);var offsetLeftForReal=element.offsetLeft;var bestParent=element.offsetParent;if(!bestParent&&goog.style.getComputedPosition(element)=="fixed"){bestParent=goog.dom.getOwnerDocument(element).documentElement}if(!bestParent){return offsetLeftForReal}if(goog.userAgent.GECKO){var borderWidths=goog.style.getBorderBox(bestParent);offsetLeftForReal+=borderWidths.left}else{if(goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)){var borderWidths=goog.style.getBorderBox(bestParent);offsetLeftForReal-=borderWidths.left}}if(goog.style.isRightToLeft(bestParent)){var elementRightOffset=offsetLeftForReal+element.offsetWidth;return bestParent.clientWidth-elementRightOffset}return offsetLeftForReal};goog.style.bidi.setScrollOffset=function(element,offsetStart){offsetStart=Math.max(offsetStart,0);if(!goog.style.isRightToLeft(element)){element.scrollLeft=offsetStart}else{if(goog.userAgent.GECKO){element.scrollLeft=-offsetStart}else{if(!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8"))){element.scrollLeft=element.scrollWidth-offsetStart-element.clientWidth}else{element.scrollLeft=offsetStart}}}};goog.style.bidi.setPosition=function(elem,left,top,isRtl){if(!goog.isNull(top)){elem.style.top=top+"px"}if(isRtl){elem.style.right=left+"px";elem.style.left=""}else{elem.style.left=left+"px";elem.style.right=""}};goog.provide("goog.fx.DragEvent");goog.provide("goog.fx.Dragger");goog.provide("goog.fx.Dragger.EventType");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.style");goog.require("goog.style.bidi");goog.require("goog.userAgent");goog.fx.Dragger=function(target,opt_handle,opt_limits){goog.fx.Dragger.base(this,"constructor");this.target=target;this.handle=opt_handle||target;this.limits=opt_limits||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(target);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.rightToLeft_;this.clientX=0;this.clientY=0;this.screenX=0;this.screenY=0;this.startX=0;this.startY=0;this.deltaX=0;this.deltaY=0;this.pageScroll;this.enabled_=true;this.dragging_=false;this.preventMouseDown_=true;this.hysteresisDistanceSquared_=0;this.scrollTarget_;this.ieDragStartCancellingOn_=false;this.useRightPositioningForRtl_=false;goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,false,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.tagUnsealableClass(goog.fx.Dragger);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");goog.fx.Dragger.cloneNode=function(sourceEl){var clonedEl=(sourceEl.cloneNode(true)),origTexts=sourceEl.getElementsByTagName(goog.dom.TagName.TEXTAREA),dragTexts=clonedEl.getElementsByTagName(goog.dom.TagName.TEXTAREA);for(var i=0;i<origTexts.length;i++){dragTexts[i].value=origTexts[i].value}switch(sourceEl.tagName){case goog.dom.TagName.TR:return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,clonedEl));case goog.dom.TagName.TD:case goog.dom.TagName.TH:return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,goog.dom.createDom(goog.dom.TagName.TR,null,clonedEl)));case goog.dom.TagName.TEXTAREA:clonedEl.value=sourceEl.value;default:return clonedEl}};goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(useRightPositioningForRtl){this.useRightPositioningForRtl_=useRightPositioningForRtl};goog.fx.Dragger.prototype.getHandler=function(){var self=(this);return self.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(limits){this.limits=limits||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(distance){this.hysteresisDistanceSquared_=Math.pow(distance,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(scrollTarget){this.scrollTarget_=scrollTarget};goog.fx.Dragger.prototype.setCancelIeDragStart=function(cancelIeDragStart){this.ieDragStartCancellingOn_=cancelIeDragStart};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(enabled){this.enabled_=enabled};goog.fx.Dragger.prototype.setPreventMouseDown=function(preventMouseDown){this.preventMouseDown_=preventMouseDown};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,false,this);this.cleanUpAfterDragging_();this.target=null;this.handle=null};goog.fx.Dragger.prototype.isRightToLeft_=function(){if(!goog.isDef(this.rightToLeft_)){this.rightToLeft_=goog.style.isRightToLeft(this.target)}return this.rightToLeft_};goog.fx.Dragger.prototype.startDrag=function(e){var isMouseDown=e.type==goog.events.EventType.MOUSEDOWN;if(this.enabled_&&!this.dragging_&&(!isMouseDown||e.isMouseActionButton())){if(this.hysteresisDistanceSquared_==0){if(this.fireDragStart_(e)){this.dragging_=true;if(this.preventMouseDown_){e.preventDefault()}}else{return}}else{if(this.preventMouseDown_){e.preventDefault()}}this.setupDragHandlers();this.clientX=this.startX=e.clientX;this.clientY=this.startY=e.clientY;this.screenX=e.screenX;this.screenY=e.screenY;this.computeInitialPosition();this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}else{this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)}};goog.fx.Dragger.prototype.setupDragHandlers=function(){var doc=this.document_;var docEl=doc.documentElement;var useCapture=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(doc,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,useCapture);this.eventHandler_.listen(doc,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,useCapture);if(goog.fx.Dragger.HAS_SET_CAPTURE_){docEl.setCapture(false);this.eventHandler_.listen(docEl,goog.events.EventType.LOSECAPTURE,this.endDrag)}else{this.eventHandler_.listen(goog.dom.getWindow(doc),goog.events.EventType.BLUR,this.endDrag)}if(goog.userAgent.IE&&this.ieDragStartCancellingOn_){this.eventHandler_.listen(doc,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault)}if(this.scrollTarget_){this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,useCapture)}};goog.fx.Dragger.prototype.fireDragStart_=function(e){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,e.clientX,e.clientY,e))};goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();if(goog.fx.Dragger.HAS_SET_CAPTURE_){this.document_.releaseCapture()}};goog.fx.Dragger.prototype.endDrag=function(e,opt_dragCanceled){this.cleanUpAfterDragging_();if(this.dragging_){this.dragging_=false;var x=this.limitX(this.deltaX);var y=this.limitY(this.deltaY);var dragCanceled=opt_dragCanceled||e.type==goog.events.EventType.TOUCHCANCEL;this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,e.clientX,e.clientY,e,x,y,dragCanceled))}else{this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)}};goog.fx.Dragger.prototype.endDragCancel=function(e){this.endDrag(e,true)};goog.fx.Dragger.prototype.handleMove_=function(e){if(this.enabled_){var sign=this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1;var dx=sign*(e.clientX-this.clientX);var dy=e.clientY-this.clientY;this.clientX=e.clientX;this.clientY=e.clientY;this.screenX=e.screenX;this.screenY=e.screenY;if(!this.dragging_){var diffX=this.startX-this.clientX;var diffY=this.startY-this.clientY;var distance=diffX*diffX+diffY*diffY;if(distance>this.hysteresisDistanceSquared_){if(this.fireDragStart_(e)){this.dragging_=true}else{if(!this.isDisposed()){this.endDrag(e)}return}}}var pos=this.calculatePosition_(dx,dy);var x=pos.x;var y=pos.y;if(this.dragging_){var rv=this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,e.clientX,e.clientY,e,x,y));if(rv){this.doDrag(e,x,y,false);e.preventDefault()}}}};goog.fx.Dragger.prototype.calculatePosition_=function(dx,dy){var pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();dx+=pageScroll.x-this.pageScroll.x;dy+=pageScroll.y-this.pageScroll.y;this.pageScroll=pageScroll;this.deltaX+=dx;this.deltaY+=dy;var x=this.limitX(this.deltaX);var y=this.limitY(this.deltaY);return new goog.math.Coordinate(x,y)};goog.fx.Dragger.prototype.onScroll_=function(e){var pos=this.calculatePosition_(0,0);e.clientX=this.clientX;e.clientY=this.clientY;this.doDrag(e,pos.x,pos.y,true)};goog.fx.Dragger.prototype.doDrag=function(e,x,y,dragFromScroll){this.defaultAction(x,y);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,x,y))};goog.fx.Dragger.prototype.limitX=function(x){var rect=this.limits;var left=!isNaN(rect.left)?rect.left:null;var width=!isNaN(rect.width)?rect.width:0;var maxX=left!=null?left+width:Infinity;var minX=left!=null?left:-Infinity;return Math.min(maxX,Math.max(minX,x))};goog.fx.Dragger.prototype.limitY=function(y){var rect=this.limits;var top=!isNaN(rect.top)?rect.top:null;var height=!isNaN(rect.height)?rect.height:0;var maxY=top!=null?top+height:Infinity;var minY=top!=null?top:-Infinity;return Math.min(maxY,Math.max(minY,y))};goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):(this.target).offsetLeft;this.deltaY=(this.target).offsetTop};goog.fx.Dragger.prototype.defaultAction=function(x,y){if(this.useRightPositioningForRtl_&&this.isRightToLeft_()){this.target.style.right=x+"px"}else{this.target.style.left=x+"px"}this.target.style.top=y+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};goog.fx.DragEvent=function(type,dragobj,clientX,clientY,browserEvent,opt_actX,opt_actY,opt_dragCanceled){goog.events.Event.call(this,type);this.clientX=clientX;this.clientY=clientY;this.browserEvent=browserEvent;this.left=goog.isDef(opt_actX)?opt_actX:dragobj.deltaX;this.top=goog.isDef(opt_actY)?opt_actY:dragobj.deltaY;this.dragger=dragobj;this.dragCanceled=!!opt_dragCanceled};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.provide("ol.control.ZoomSlider");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.fx.DragEvent");goog.require("goog.fx.Dragger");goog.require("goog.fx.Dragger.EventType");goog.require("goog.math");goog.require("goog.math.Rect");goog.require("goog.style");goog.require("ol.Size");goog.require("ol.ViewHint");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.ZoomSlider=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.currentResolution_=undefined;this.direction_=ol.control.ZoomSlider.direction.VERTICAL;this.thumbSize_=null;this.sliderInitialized_=false;this.duration_=goog.isDef(options.duration)?options.duration:200;var className=goog.isDef(options.className)?options.className:"ol-zoomslider";var thumbElement=goog.dom.createDom(goog.dom.TagName.DIV,[className+"-thumb",ol.css.CLASS_UNSELECTABLE]);var containerElement=goog.dom.createDom(goog.dom.TagName.DIV,[className,ol.css.CLASS_UNSELECTABLE,ol.css.CLASS_CONTROL],thumbElement);this.dragger_=new goog.fx.Dragger(thumbElement);this.registerDisposable(this.dragger_);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.handleDraggerStart_,false,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.handleDraggerDrag_,false,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.END,this.handleDraggerEnd_,false,this);goog.events.listen(containerElement,goog.events.EventType.CLICK,this.handleContainerClick_,false,this);goog.events.listen(thumbElement,goog.events.EventType.CLICK,goog.events.Event.stopPropagation);var render=goog.isDef(options.render)?options.render:ol.control.ZoomSlider.render;goog.base(this,{element:containerElement,render:render})};goog.inherits(ol.control.ZoomSlider,ol.control.Control);ol.control.ZoomSlider.direction={VERTICAL:0,HORIZONTAL:1};ol.control.ZoomSlider.prototype.setMap=function(map){goog.base(this,"setMap",map);if(!goog.isNull(map)){map.render()}};ol.control.ZoomSlider.prototype.initSlider_=function(){var container=this.element;var containerSize=goog.style.getSize(container);var thumb=goog.dom.getFirstElementChild(container);var thumbMargins=goog.style.getMarginBox(thumb);var thumbBorderBoxSize=goog.style.getBorderBoxSize(thumb);var thumbWidth=thumbBorderBoxSize.width+thumbMargins.right+thumbMargins.left;var thumbHeight=thumbBorderBoxSize.height+thumbMargins.top+thumbMargins.bottom;this.thumbSize_=[thumbWidth,thumbHeight];var width=containerSize.width-thumbWidth;var height=containerSize.height-thumbHeight;var limits;if(containerSize.width>containerSize.height){this.direction_=ol.control.ZoomSlider.direction.HORIZONTAL;limits=new goog.math.Rect(0,0,width,0)}else{this.direction_=ol.control.ZoomSlider.direction.VERTICAL;limits=new goog.math.Rect(0,0,0,height)}this.dragger_.setLimits(limits);this.sliderInitialized_=true};ol.control.ZoomSlider.render=function(mapEvent){if(goog.isNull(mapEvent.frameState)){return}goog.asserts.assert(goog.isDefAndNotNull(mapEvent.frameState.viewState),"viewState should be defined");if(!this.sliderInitialized_){this.initSlider_()}var res=mapEvent.frameState.viewState.resolution;if(res!==this.currentResolution_){this.currentResolution_=res;this.setThumbPosition_(res)}};ol.control.ZoomSlider.prototype.handleContainerClick_=function(browserEvent){var map=this.getMap();var view=map.getView();var currentResolution=view.getResolution();goog.asserts.assert(goog.isDef(currentResolution),"currentResolution should be defined");map.beforeRender(ol.animation.zoom({resolution:currentResolution,duration:this.duration_,easing:ol.easing.easeOut}));var relativePosition=this.getRelativePosition_(browserEvent.offsetX-this.thumbSize_[0]/2,browserEvent.offsetY-this.thumbSize_[1]/2);var resolution=this.getResolutionForPosition_(relativePosition);view.setResolution(view.constrainResolution(resolution))};ol.control.ZoomSlider.prototype.handleDraggerStart_=function(event){this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1)};ol.control.ZoomSlider.prototype.handleDraggerDrag_=function(event){var relativePosition=this.getRelativePosition_(event.left,event.top);this.currentResolution_=this.getResolutionForPosition_(relativePosition);this.getMap().getView().setResolution(this.currentResolution_)};ol.control.ZoomSlider.prototype.handleDraggerEnd_=function(event){var map=this.getMap();var view=map.getView();view.setHint(ol.ViewHint.INTERACTING,-1);goog.asserts.assert(goog.isDef(this.currentResolution_),"this.currentResolution_ should be defined");map.beforeRender(ol.animation.zoom({resolution:this.currentResolution_,duration:this.duration_,easing:ol.easing.easeOut}));var resolution=view.constrainResolution(this.currentResolution_);view.setResolution(resolution)};ol.control.ZoomSlider.prototype.setThumbPosition_=function(res){var position=this.getPositionForResolution_(res);var dragger=this.dragger_;var thumb=goog.dom.getFirstElementChild(this.element);if(this.direction_==ol.control.ZoomSlider.direction.HORIZONTAL){var left=dragger.limits.left+dragger.limits.width*position;goog.style.setPosition(thumb,left)}else{var top=dragger.limits.top+dragger.limits.height*position;goog.style.setPosition(thumb,dragger.limits.left,top)}};ol.control.ZoomSlider.prototype.getRelativePosition_=function(x,y){var draggerLimits=this.dragger_.limits;var amount;if(this.direction_===ol.control.ZoomSlider.direction.HORIZONTAL){amount=(x-draggerLimits.left)/draggerLimits.width}else{amount=(y-draggerLimits.top)/draggerLimits.height}return goog.math.clamp(amount,0,1)};ol.control.ZoomSlider.prototype.getResolutionForPosition_=function(position){var fn=this.getMap().getView().getResolutionForValueFunction();return fn(1-position)};ol.control.ZoomSlider.prototype.getPositionForResolution_=function(res){var fn=this.getMap().getView().getValueForResolutionFunction();return 1-fn(res)};goog.provide("ol.control.ZoomToExtent");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.control.Control");goog.require("ol.css");ol.control.ZoomToExtent=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.extent_=goog.isDef(options.extent)?options.extent:null;var className=goog.isDef(options.className)?options.className:"ol-zoom-extent";var label=goog.isDef(options.label)?options.label:"E";var tipLabel=goog.isDef(options.tipLabel)?options.tipLabel:"Fit to extent";var button=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:tipLabel},label);goog.events.listen(button,goog.events.EventType.CLICK,this.handleClick_,false,this);var cssClasses=className+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var element=goog.dom.createDom(goog.dom.TagName.DIV,cssClasses,button);goog.base(this,{element:element,target:options.target})};goog.inherits(ol.control.ZoomToExtent,ol.control.Control);ol.control.ZoomToExtent.prototype.handleClick_=function(event){event.preventDefault();this.handleZoomToExtent_()};ol.control.ZoomToExtent.prototype.handleZoomToExtent_=function(){var map=this.getMap();var view=map.getView();var extent=goog.isNull(this.extent_)?view.getProjection().getExtent():this.extent_;var size=map.getSize();goog.asserts.assert(goog.isDef(size),"size should be defined");view.fit(extent,size)};goog.provide("ol.DeviceOrientation");goog.provide("ol.DeviceOrientationProperty");goog.require("goog.events");goog.require("goog.math");goog.require("ol.Object");goog.require("ol.has");ol.DeviceOrientationProperty={ALPHA:"alpha",BETA:"beta",GAMMA:"gamma",HEADING:"heading",TRACKING:"tracking"};ol.DeviceOrientation=function(opt_options){goog.base(this);var options=goog.isDef(opt_options)?opt_options:{};this.listenerKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.DeviceOrientationProperty.TRACKING),this.handleTrackingChanged_,false,this);this.setTracking(goog.isDef(options.tracking)?options.tracking:false)};goog.inherits(ol.DeviceOrientation,ol.Object);ol.DeviceOrientation.prototype.disposeInternal=function(){this.setTracking(false);goog.base(this,"disposeInternal")};ol.DeviceOrientation.prototype.orientationChange_=function(browserEvent){var event=(browserEvent.getBrowserEvent());if(goog.isDefAndNotNull(event.alpha)){var alpha=goog.math.toRadians(event.alpha);this.set(ol.DeviceOrientationProperty.ALPHA,alpha);if(goog.isBoolean(event.absolute)&&event.absolute){this.set(ol.DeviceOrientationProperty.HEADING,alpha)}else{if(goog.isDefAndNotNull(event.webkitCompassHeading)&&goog.isDefAndNotNull(event.webkitCompassAccuracy)&&event.webkitCompassAccuracy!=-1){var heading=goog.math.toRadians(event.webkitCompassHeading);this.set(ol.DeviceOrientationProperty.HEADING,heading)}}}if(goog.isDefAndNotNull(event.beta)){this.set(ol.DeviceOrientationProperty.BETA,goog.math.toRadians(event.beta))}if(goog.isDefAndNotNull(event.gamma)){this.set(ol.DeviceOrientationProperty.GAMMA,goog.math.toRadians(event.gamma))}this.changed()};ol.DeviceOrientation.prototype.getAlpha=function(){return(this.get(ol.DeviceOrientationProperty.ALPHA))};ol.DeviceOrientation.prototype.getBeta=function(){return(this.get(ol.DeviceOrientationProperty.BETA))};ol.DeviceOrientation.prototype.getGamma=function(){return(this.get(ol.DeviceOrientationProperty.GAMMA))};ol.DeviceOrientation.prototype.getHeading=function(){return(this.get(ol.DeviceOrientationProperty.HEADING))};ol.DeviceOrientation.prototype.getTracking=function(){return(this.get(ol.DeviceOrientationProperty.TRACKING))};ol.DeviceOrientation.prototype.handleTrackingChanged_=function(){if(ol.has.DEVICE_ORIENTATION){var tracking=this.getTracking();if(tracking&&goog.isNull(this.listenerKey_)){this.listenerKey_=goog.events.listen(goog.global,"deviceorientation",this.orientationChange_,false,this)}else{if(!tracking&&!goog.isNull(this.listenerKey_)){goog.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}}}};ol.DeviceOrientation.prototype.setTracking=function(tracking){this.set(ol.DeviceOrientationProperty.TRACKING,tracking)};goog.provide("ol.format.Feature");goog.require("ol.geom.Geometry");goog.require("ol.proj");ol.format.Feature=function(){this.defaultDataProjection=null};ol.format.Feature.prototype.getExtensions=goog.abstractMethod;ol.format.Feature.prototype.getReadOptions=function(source,opt_options){var options;if(goog.isDef(opt_options)){options={dataProjection:goog.isDef(opt_options.dataProjection)?opt_options.dataProjection:this.readProjection(source),featureProjection:opt_options.featureProjection}}return this.adaptOptions(options)};ol.format.Feature.prototype.adaptOptions=function(options){var updatedOptions;if(goog.isDef(options)){updatedOptions={featureProjection:options.featureProjection,dataProjection:goog.isDefAndNotNull(options.dataProjection)?options.dataProjection:this.defaultDataProjection,rightHanded:options.rightHanded}}return updatedOptions};ol.format.Feature.prototype.getType=goog.abstractMethod;ol.format.Feature.prototype.readFeature=goog.abstractMethod;ol.format.Feature.prototype.readFeatures=goog.abstractMethod;ol.format.Feature.prototype.readGeometry=goog.abstractMethod;ol.format.Feature.prototype.readProjection=goog.abstractMethod;ol.format.Feature.prototype.writeFeature=goog.abstractMethod;ol.format.Feature.prototype.writeFeatures=goog.abstractMethod;ol.format.Feature.prototype.writeGeometry=goog.abstractMethod;ol.format.Feature.transformWithOptions=function(geometry,write,opt_options){var featureProjection=goog.isDef(opt_options)?ol.proj.get(opt_options.featureProjection):null;var dataProjection=goog.isDef(opt_options)?ol.proj.get(opt_options.dataProjection):null;if(!goog.isNull(featureProjection)&&!goog.isNull(dataProjection)&&!ol.proj.equivalent(featureProjection,dataProjection)){if(geometry instanceof ol.geom.Geometry){return(write?geometry.clone():geometry).transform(write?featureProjection:dataProjection,write?dataProjection:featureProjection)}else{return ol.proj.transformExtent(write?geometry.slice():geometry,write?featureProjection:dataProjection,write?dataProjection:featureProjection)}}else{return geometry}};goog.provide("ol.format.JSONFeature");goog.require("goog.asserts");goog.require("goog.json");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");ol.format.JSONFeature=function(){goog.base(this)};goog.inherits(ol.format.JSONFeature,ol.format.Feature);ol.format.JSONFeature.prototype.getObject_=function(source){if(goog.isObject(source)){return source}else{if(goog.isString(source)){var object=goog.json.parse(source);return goog.isDef(object)?object:null}else{goog.asserts.fail();return null}}};ol.format.JSONFeature.prototype.getType=function(){return ol.format.FormatType.JSON};ol.format.JSONFeature.prototype.readFeature=function(source,opt_options){return this.readFeatureFromObject(this.getObject_(source),this.getReadOptions(source,opt_options))};ol.format.JSONFeature.prototype.readFeatures=function(source,opt_options){return this.readFeaturesFromObject(this.getObject_(source),this.getReadOptions(source,opt_options))};ol.format.JSONFeature.prototype.readFeatureFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readFeaturesFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readGeometry=function(source,opt_options){return this.readGeometryFromObject(this.getObject_(source),this.getReadOptions(source,opt_options))};ol.format.JSONFeature.prototype.readGeometryFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readProjection=function(source){return this.readProjectionFromObject(this.getObject_(source))};ol.format.JSONFeature.prototype.readProjectionFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeFeature=function(feature,opt_options){return goog.json.serialize(this.writeFeatureObject(feature,opt_options))};ol.format.JSONFeature.prototype.writeFeatureObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeFeatures=function(features,opt_options){return goog.json.serialize(this.writeFeaturesObject(features,opt_options))};ol.format.JSONFeature.prototype.writeFeaturesObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeGeometry=function(geometry,opt_options){return goog.json.serialize(this.writeGeometryObject(geometry,opt_options))};ol.format.JSONFeature.prototype.writeGeometryObject=goog.abstractMethod;goog.provide("ol.format.EsriJSON");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.extent");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.flat.orient");goog.require("ol.proj");ol.format.EsriJSON=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.geometryName_=options.geometryName};goog.inherits(ol.format.EsriJSON,ol.format.JSONFeature);ol.format.EsriJSON.readGeometry_=function(object,opt_options){if(goog.isNull(object)){return null}var type;if(goog.isNumber(object.x)&&goog.isNumber(object.y)){type=ol.geom.GeometryType.POINT}else{if(goog.isDefAndNotNull(object.points)){type=ol.geom.GeometryType.MULTI_POINT}else{if(goog.isDefAndNotNull(object.paths)){if(object.paths.length===1){type=ol.geom.GeometryType.LINE_STRING}else{type=ol.geom.GeometryType.MULTI_LINE_STRING}}else{if(goog.isDefAndNotNull(object.rings)){var layout=ol.format.EsriJSON.getGeometryLayout_(object);var rings=ol.format.EsriJSON.convertRings_(object.rings,layout);object=(goog.object.clone(object));if(rings.length===1){type=ol.geom.GeometryType.POLYGON;object.rings=rings[0]}else{type=ol.geom.GeometryType.MULTI_POLYGON;object.rings=rings}}}}}goog.asserts.assert(goog.isDef(type),"geometry type should be defined");var geometryReader=ol.format.EsriJSON.GEOMETRY_READERS_[type];goog.asserts.assert(goog.isDef(geometryReader),"geometryReader should be defined");return(ol.format.Feature.transformWithOptions(geometryReader(object),false,opt_options))};ol.format.EsriJSON.convertRings_=function(rings,layout){var outerRings=[];var holes=[];var i,ii;for(i=0,ii=rings.length;i<ii;++i){var flatRing=goog.array.flatten(rings[i]);var clockwise=ol.geom.flat.orient.linearRingIsClockwise(flatRing,0,flatRing.length,layout.length);if(clockwise){outerRings.push([rings[i]])}else{holes.push(rings[i])}}while(holes.length){var hole=holes.shift();var matched=false;for(i=outerRings.length-1;i>=0;i--){var outerRing=outerRings[i][0];if(ol.extent.containsExtent(new ol.geom.LinearRing(outerRing).getExtent(),new ol.geom.LinearRing(hole).getExtent())){outerRings[i].push(hole);matched=true;break}}if(!matched){outerRings.push([hole.reverse()])}}return outerRings};ol.format.EsriJSON.readPointGeometry_=function(object){goog.asserts.assert(goog.isNumber(object.x),"object.x should be number");goog.asserts.assert(goog.isNumber(object.y),"object.y should be number");var point;if(goog.isDefAndNotNull(object.m)&&goog.isDefAndNotNull(object.z)){point=new ol.geom.Point([object.x,object.y,object.z,object.m],ol.geom.GeometryLayout.XYZM)}else{if(goog.isDefAndNotNull(object.z)){point=new ol.geom.Point([object.x,object.y,object.z],ol.geom.GeometryLayout.XYZ)}else{if(goog.isDefAndNotNull(object.m)){point=new ol.geom.Point([object.x,object.y,object.m],ol.geom.GeometryLayout.XYM)}else{point=new ol.geom.Point([object.x,object.y])}}}return point};ol.format.EsriJSON.readLineStringGeometry_=function(object){goog.asserts.assert(goog.isArray(object.paths),"object.paths should be an array");goog.asserts.assert(object.paths.length===1,"object.paths array length should be 1");var layout=ol.format.EsriJSON.getGeometryLayout_(object);return new ol.geom.LineString(object.paths[0],layout)};ol.format.EsriJSON.readMultiLineStringGeometry_=function(object){goog.asserts.assert(goog.isArray(object.paths),"object.paths should be an array");goog.asserts.assert(object.paths.length>1,"object.paths array length should be more than 1");var layout=ol.format.EsriJSON.getGeometryLayout_(object);return new ol.geom.MultiLineString(object.paths,layout)};ol.format.EsriJSON.getGeometryLayout_=function(object){var layout=ol.geom.GeometryLayout.XY;if(object.hasZ===true&&object.hasM===true){layout=ol.geom.GeometryLayout.XYZM}else{if(object.hasZ===true){layout=ol.geom.GeometryLayout.XYZ}else{if(object.hasM===true){layout=ol.geom.GeometryLayout.XYM}}}return layout};ol.format.EsriJSON.readMultiPointGeometry_=function(object){goog.asserts.assert(goog.isDefAndNotNull(object.points),"object.points should be defined");var layout=ol.format.EsriJSON.getGeometryLayout_(object);return new ol.geom.MultiPoint(object.points,layout)};ol.format.EsriJSON.readMultiPolygonGeometry_=function(object){goog.asserts.assert(goog.isDefAndNotNull(object.rings));goog.asserts.assert(object.rings.length>1,"object.rings should have length larger than 1");var layout=ol.format.EsriJSON.getGeometryLayout_(object);return new ol.geom.MultiPolygon((object.rings),layout)};ol.format.EsriJSON.readPolygonGeometry_=function(object){goog.asserts.assert(goog.isDefAndNotNull(object.rings));var layout=ol.format.EsriJSON.getGeometryLayout_(object);return new ol.geom.Polygon(object.rings,layout)};ol.format.EsriJSON.writePointGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.Point,"geometry should be an ol.geom.Point");var coordinates=geometry.getCoordinates();var layout=geometry.getLayout();if(layout===ol.geom.GeometryLayout.XYZ){return({x:coordinates[0],y:coordinates[1],z:coordinates[2]})}else{if(layout===ol.geom.GeometryLayout.XYM){return({x:coordinates[0],y:coordinates[1],m:coordinates[2]})}else{if(layout===ol.geom.GeometryLayout.XYZM){return({x:coordinates[0],y:coordinates[1],z:coordinates[2],m:coordinates[3]})}else{if(layout===ol.geom.GeometryLayout.XY){return({x:coordinates[0],y:coordinates[1]})}else{goog.asserts.fail("Unknown geometry layout")}}}}};ol.format.EsriJSON.getHasZM_=function(geometry){var layout=geometry.getLayout();return{hasZ:(layout===ol.geom.GeometryLayout.XYZ||layout===ol.geom.GeometryLayout.XYZM),hasM:(layout===ol.geom.GeometryLayout.XYM||layout===ol.geom.GeometryLayout.XYZM)}};ol.format.EsriJSON.writeLineStringGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.LineString,"geometry should be an ol.geom.LineString");var hasZM=ol.format.EsriJSON.getHasZM_(geometry);return({hasZ:hasZM.hasZ,hasM:hasZM.hasM,paths:[geometry.getCoordinates()]})};ol.format.EsriJSON.writePolygonGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var hasZM=ol.format.EsriJSON.getHasZM_(geometry);return({hasZ:hasZM.hasZ,hasM:hasZM.hasM,rings:geometry.getCoordinates(false)})};ol.format.EsriJSON.writeMultiLineStringGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");var hasZM=ol.format.EsriJSON.getHasZM_(geometry);return({hasZ:hasZM.hasZ,hasM:hasZM.hasM,paths:geometry.getCoordinates()})};ol.format.EsriJSON.writeMultiPointGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");var hasZM=ol.format.EsriJSON.getHasZM_(geometry);return({hasZ:hasZM.hasZ,hasM:hasZM.hasM,points:geometry.getCoordinates()})};ol.format.EsriJSON.writeMultiPolygonGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var hasZM=ol.format.EsriJSON.getHasZM_(geometry);var coordinates=geometry.getCoordinates(false);var output=[];for(var i=0;i<coordinates.length;i++){for(var x=coordinates[i].length-1;x>=0;x--){output.push(coordinates[i][x])}}return({hasZ:hasZM.hasZ,hasM:hasZM.hasM,rings:output})};ol.format.EsriJSON.GEOMETRY_READERS_={};ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.readPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.readLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.readPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.readMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.readMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.readMultiPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_={};ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.writePointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.writeLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.writePolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.writeMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.writeMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.writeMultiPolygonGeometry_;ol.format.EsriJSON.prototype.readFeature;ol.format.EsriJSON.prototype.readFeatures;ol.format.EsriJSON.prototype.readFeatureFromObject=function(object,opt_options){var esriJSONFeature=(object);goog.asserts.assert(goog.isDefAndNotNull(esriJSONFeature.geometry)||goog.isDefAndNotNull(esriJSONFeature.compressedGeometry)||goog.isDefAndNotNull(esriJSONFeature.attributes),"geometry, compressedGeometry or attributes should be defined");var geometry=ol.format.EsriJSON.readGeometry_(esriJSONFeature.geometry,opt_options);var feature=new ol.Feature();if(goog.isDef(this.geometryName_)){feature.setGeometryName(this.geometryName_)}feature.setGeometry(geometry);if(goog.isDef(opt_options)&&goog.isDef(opt_options.idField)&&goog.isDef(esriJSONFeature.attributes[opt_options.idField])){goog.asserts.assert(goog.isNumber(esriJSONFeature.attributes[opt_options.idField]),"objectIdFieldName value should be a number");feature.setId((esriJSONFeature.attributes[opt_options.idField]))}if(goog.isDef(esriJSONFeature.attributes)){feature.setProperties(esriJSONFeature.attributes)}return feature};ol.format.EsriJSON.prototype.readFeaturesFromObject=function(object,opt_options){var esriJSONObject=(object);var options=goog.isDef(opt_options)?opt_options:{};if(goog.isDefAndNotNull(esriJSONObject.features)){var esriJSONFeatureCollection=(object);var features=[];var esriJSONFeatures=esriJSONFeatureCollection.features;var i,ii;options.idField=object.objectIdFieldName;for(i=0,ii=esriJSONFeatures.length;i<ii;++i){features.push(this.readFeatureFromObject(esriJSONFeatures[i],options))}return features}else{return[this.readFeatureFromObject(object,options)]}};ol.format.EsriJSON.prototype.readGeometry;ol.format.EsriJSON.prototype.readGeometryFromObject=function(object,opt_options){return ol.format.EsriJSON.readGeometry_((object),opt_options)};ol.format.EsriJSON.prototype.readProjection;ol.format.EsriJSON.prototype.readProjectionFromObject=function(object){var esriJSONObject=(object);if(goog.isDefAndNotNull(esriJSONObject.spatialReference)&&goog.isDefAndNotNull(esriJSONObject.spatialReference.wkid)){var crs=esriJSONObject.spatialReference.wkid;return ol.proj.get("EPSG:"+crs)}else{return null}};ol.format.EsriJSON.writeGeometry_=function(geometry,opt_options){var geometryWriter=ol.format.EsriJSON.GEOMETRY_WRITERS_[geometry.getType()];goog.asserts.assert(goog.isDef(geometryWriter),"geometryWriter should be defined");return geometryWriter((ol.format.Feature.transformWithOptions(geometry,true,opt_options)),opt_options)};ol.format.EsriJSON.prototype.writeGeometry;ol.format.EsriJSON.prototype.writeGeometryObject=function(geometry,opt_options){return ol.format.EsriJSON.writeGeometry_(geometry,this.adaptOptions(opt_options))};ol.format.EsriJSON.prototype.writeFeature;ol.format.EsriJSON.prototype.writeFeatureObject=function(feature,opt_options){opt_options=this.adaptOptions(opt_options);var object={};var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){object.geometry=ol.format.EsriJSON.writeGeometry_(geometry,opt_options)}var properties=feature.getProperties();goog.object.remove(properties,feature.getGeometryName());if(!goog.object.isEmpty(properties)){object.attributes=properties}else{object.attributes={}}if(goog.isDef(opt_options)&&goog.isDef(opt_options.featureProjection)){object.spatialReference=({wkid:ol.proj.get(opt_options.featureProjection).getCode().split(":").pop()})}return object};ol.format.EsriJSON.prototype.writeFeatures;ol.format.EsriJSON.prototype.writeFeaturesObject=function(features,opt_options){opt_options=this.adaptOptions(opt_options);var objects=[];var i,ii;for(i=0,ii=features.length;i<ii;++i){objects.push(this.writeFeatureObject(features[i],opt_options))}return({features:objects})};goog.provide("ol.format.GeoJSON");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");ol.format.GeoJSON=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.defaultDataProjection=ol.proj.get(goog.isDefAndNotNull(options.defaultDataProjection)?options.defaultDataProjection:"EPSG:4326");this.geometryName_=options.geometryName};goog.inherits(ol.format.GeoJSON,ol.format.JSONFeature);ol.format.GeoJSON.EXTENSIONS_=[".geojson"];ol.format.GeoJSON.readGeometry_=function(object,opt_options){if(goog.isNull(object)){return null}var geometryReader=ol.format.GeoJSON.GEOMETRY_READERS_[object.type];goog.asserts.assert(goog.isDef(geometryReader),"geometryReader should be defined");return(ol.format.Feature.transformWithOptions(geometryReader(object),false,opt_options))};ol.format.GeoJSON.readGeometryCollectionGeometry_=function(object,opt_options){goog.asserts.assert(object.type=="GeometryCollection","object.type should be GeometryCollection");var geometries=goog.array.map(object.geometries,function(geometry){return ol.format.GeoJSON.readGeometry_(geometry,opt_options)});return new ol.geom.GeometryCollection(geometries)};ol.format.GeoJSON.readPointGeometry_=function(object){goog.asserts.assert(object.type=="Point","object.type should be Point");return new ol.geom.Point(object.coordinates)};ol.format.GeoJSON.readLineStringGeometry_=function(object){goog.asserts.assert(object.type=="LineString","object.type should be LineString");return new ol.geom.LineString(object.coordinates)};ol.format.GeoJSON.readMultiLineStringGeometry_=function(object){goog.asserts.assert(object.type=="MultiLineString","object.type should be MultiLineString");return new ol.geom.MultiLineString(object.coordinates)};ol.format.GeoJSON.readMultiPointGeometry_=function(object){goog.asserts.assert(object.type=="MultiPoint","object.type should be MultiPoint");return new ol.geom.MultiPoint(object.coordinates)};ol.format.GeoJSON.readMultiPolygonGeometry_=function(object){goog.asserts.assert(object.type=="MultiPolygon","object.type should be MultiPolygon");return new ol.geom.MultiPolygon(object.coordinates)};ol.format.GeoJSON.readPolygonGeometry_=function(object){goog.asserts.assert(object.type=="Polygon","object.type should be Polygon");return new ol.geom.Polygon(object.coordinates)};ol.format.GeoJSON.writeGeometry_=function(geometry,opt_options){var geometryWriter=ol.format.GeoJSON.GEOMETRY_WRITERS_[geometry.getType()];goog.asserts.assert(goog.isDef(geometryWriter),"geometryWriter should be defined");return geometryWriter((ol.format.Feature.transformWithOptions(geometry,true,opt_options)),opt_options)};ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_=function(geometry){return({type:"GeometryCollection",geometries:[]})};ol.format.GeoJSON.writeGeometryCollectionGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");var geometries=goog.array.map(geometry.getGeometriesArray(),function(geometry){return ol.format.GeoJSON.writeGeometry_(geometry,opt_options)});return({type:"GeometryCollection",geometries:geometries})};ol.format.GeoJSON.writeLineStringGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.LineString,"geometry should be an ol.geom.LineString");return({type:"LineString",coordinates:geometry.getCoordinates()})};ol.format.GeoJSON.writeMultiLineStringGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");return({type:"MultiLineString",coordinates:geometry.getCoordinates()})};ol.format.GeoJSON.writeMultiPointGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");return({type:"MultiPoint",coordinates:geometry.getCoordinates()})};ol.format.GeoJSON.writeMultiPolygonGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var right;if(goog.isDef(opt_options)){right=opt_options.rightHanded}return({type:"MultiPolygon",coordinates:geometry.getCoordinates(right)})};ol.format.GeoJSON.writePointGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.Point,"geometry should be an ol.geom.Point");return({type:"Point",coordinates:geometry.getCoordinates()})};ol.format.GeoJSON.writePolygonGeometry_=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var right;if(goog.isDef(opt_options)){right=opt_options.rightHanded}return({type:"Polygon",coordinates:geometry.getCoordinates(right)})};ol.format.GeoJSON.GEOMETRY_READERS_={Point:ol.format.GeoJSON.readPointGeometry_,LineString:ol.format.GeoJSON.readLineStringGeometry_,Polygon:ol.format.GeoJSON.readPolygonGeometry_,MultiPoint:ol.format.GeoJSON.readMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.readMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.readGeometryCollectionGeometry_};ol.format.GeoJSON.GEOMETRY_WRITERS_={Point:ol.format.GeoJSON.writePointGeometry_,LineString:ol.format.GeoJSON.writeLineStringGeometry_,Polygon:ol.format.GeoJSON.writePolygonGeometry_,MultiPoint:ol.format.GeoJSON.writeMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.writeMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.writeMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.writeGeometryCollectionGeometry_,Circle:ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_};ol.format.GeoJSON.prototype.getExtensions=function(){return ol.format.GeoJSON.EXTENSIONS_};ol.format.GeoJSON.prototype.readFeature;ol.format.GeoJSON.prototype.readFeatures;ol.format.GeoJSON.prototype.readFeatureFromObject=function(object,opt_options){var geoJSONFeature=(object);goog.asserts.assert(geoJSONFeature.type=="Feature","geoJSONFeature.type should be Feature");var geometry=ol.format.GeoJSON.readGeometry_(geoJSONFeature.geometry,opt_options);var feature=new ol.Feature();if(goog.isDef(this.geometryName_)){feature.setGeometryName(this.geometryName_)}feature.setGeometry(geometry);if(goog.isDef(geoJSONFeature.id)){feature.setId(geoJSONFeature.id)}if(goog.isDef(geoJSONFeature.properties)){feature.setProperties(geoJSONFeature.properties)}return feature};ol.format.GeoJSON.prototype.readFeaturesFromObject=function(object,opt_options){var geoJSONObject=(object);if(geoJSONObject.type=="Feature"){return[this.readFeatureFromObject(object,opt_options)]}else{if(geoJSONObject.type=="FeatureCollection"){var geoJSONFeatureCollection=(object);var features=[];var geoJSONFeatures=geoJSONFeatureCollection.features;var i,ii;for(i=0,ii=geoJSONFeatures.length;i<ii;++i){features.push(this.readFeatureFromObject(geoJSONFeatures[i],opt_options))}return features}else{goog.asserts.fail("Unknown geoJSONObject.type: "+geoJSONObject.type);return[]}}};ol.format.GeoJSON.prototype.readGeometry;ol.format.GeoJSON.prototype.readGeometryFromObject=function(object,opt_options){return ol.format.GeoJSON.readGeometry_((object),opt_options)};ol.format.GeoJSON.prototype.readProjection;ol.format.GeoJSON.prototype.readProjectionFromObject=function(object){var geoJSONObject=(object);var crs=geoJSONObject.crs;if(goog.isDefAndNotNull(crs)){if(crs.type=="name"){return ol.proj.get(crs.properties.name)}else{if(crs.type=="EPSG"){return ol.proj.get("EPSG:"+crs.properties.code)}else{goog.asserts.fail("Unknown crs.type: "+crs.type);return null}}}else{return this.defaultDataProjection}};ol.format.GeoJSON.prototype.writeFeature;ol.format.GeoJSON.prototype.writeFeatureObject=function(feature,opt_options){opt_options=this.adaptOptions(opt_options);var object={type:"Feature"};var id=feature.getId();if(goog.isDefAndNotNull(id)){object.id=id}var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){object.geometry=ol.format.GeoJSON.writeGeometry_(geometry,opt_options)}else{object.geometry=null}var properties=feature.getProperties();goog.object.remove(properties,feature.getGeometryName());if(!goog.object.isEmpty(properties)){object.properties=properties}else{object.properties=null}return object};ol.format.GeoJSON.prototype.writeFeatures;ol.format.GeoJSON.prototype.writeFeaturesObject=function(features,opt_options){opt_options=this.adaptOptions(opt_options);var objects=[];var i,ii;for(i=0,ii=features.length;i<ii;++i){objects.push(this.writeFeatureObject(features[i],opt_options))}return({type:"FeatureCollection",features:objects})};ol.format.GeoJSON.prototype.writeGeometry;ol.format.GeoJSON.prototype.writeGeometryObject=function(geometry,opt_options){return ol.format.GeoJSON.writeGeometry_(geometry,this.adaptOptions(opt_options))};goog.provide("ol.format.XMLFeature");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.xml");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");goog.require("ol.proj");goog.require("ol.xml");ol.format.XMLFeature=function(){goog.base(this)};goog.inherits(ol.format.XMLFeature,ol.format.Feature);ol.format.XMLFeature.prototype.getType=function(){return ol.format.FormatType.XML};ol.format.XMLFeature.prototype.readFeature=function(source,opt_options){if(ol.xml.isDocument(source)){return this.readFeatureFromDocument((source),opt_options)}else{if(ol.xml.isNode(source)){return this.readFeatureFromNode((source),opt_options)}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readFeatureFromDocument(doc,opt_options)}else{goog.asserts.fail("Unknown source type");return null}}}};ol.format.XMLFeature.prototype.readFeatureFromDocument=function(doc,opt_options){var features=this.readFeaturesFromDocument(doc,opt_options);if(features.length>0){return features[0]}else{return null}};ol.format.XMLFeature.prototype.readFeatureFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readFeatures=function(source,opt_options){if(ol.xml.isDocument(source)){return this.readFeaturesFromDocument((source),opt_options)}else{if(ol.xml.isNode(source)){return this.readFeaturesFromNode((source),opt_options)}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readFeaturesFromDocument(doc,opt_options)}else{goog.asserts.fail("Unknown source type");return[]}}}};ol.format.XMLFeature.prototype.readFeaturesFromDocument=function(doc,opt_options){var features=[];var n;for(n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){goog.array.extend(features,this.readFeaturesFromNode(n,opt_options))}}return features};ol.format.XMLFeature.prototype.readFeaturesFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readGeometry=function(source,opt_options){if(ol.xml.isDocument(source)){return this.readGeometryFromDocument((source),opt_options)}else{if(ol.xml.isNode(source)){return this.readGeometryFromNode((source),opt_options)}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readGeometryFromDocument(doc,opt_options)}else{goog.asserts.fail("Unknown source type");return null}}}};ol.format.XMLFeature.prototype.readGeometryFromDocument=goog.abstractMethod;ol.format.XMLFeature.prototype.readGeometryFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readProjection=function(source){if(ol.xml.isDocument(source)){return this.readProjectionFromDocument((source))}else{if(ol.xml.isNode(source)){return this.readProjectionFromNode((source))}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readProjectionFromDocument(doc)}else{goog.asserts.fail("Unknown source type");return null}}}};ol.format.XMLFeature.prototype.readProjectionFromDocument=function(doc){return this.defaultDataProjection};ol.format.XMLFeature.prototype.readProjectionFromNode=function(node){return this.defaultDataProjection};ol.format.XMLFeature.prototype.writeFeature=function(feature,opt_options){var node=this.writeFeatureNode(feature,opt_options);goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize((node))};ol.format.XMLFeature.prototype.writeFeatureNode=goog.abstractMethod;ol.format.XMLFeature.prototype.writeFeatures=function(features,opt_options){var node=this.writeFeaturesNode(features,opt_options);goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize((node))};ol.format.XMLFeature.prototype.writeFeaturesNode=goog.abstractMethod;ol.format.XMLFeature.prototype.writeGeometry=function(geometry,opt_options){var node=this.writeGeometryNode(geometry,opt_options);goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize((node))};ol.format.XMLFeature.prototype.writeGeometryNode=goog.abstractMethod;goog.provide("ol.format.GMLBase");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("goog.string");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.xml");ol.format.GMLBase=function(opt_options){var options=(goog.isDef(opt_options)?opt_options:{});this.featureType=options.featureType;this.featureNS=options.featureNS;this.srsName=options.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]={featureMember:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal),featureMembers:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal)};goog.base(this)};goog.inherits(ol.format.GMLBase,ol.format.XMLFeature);ol.format.GMLBase.GMLNS="http://www.opengis.net/gml";ol.format.GMLBase.prototype.readFeaturesInternal=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var localName=ol.xml.getLocalName(node);var features;if(localName=="FeatureCollection"){if(node.namespaceURI==="http://www.opengis.net/wfs"){features=ol.xml.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,node,objectStack,this)}else{features=ol.xml.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,node,objectStack,this)}}else{if(localName=="featureMembers"||localName=="featureMember"){var context=objectStack[0];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featureType=context.featureType;var featureNS=context.featureNS;var i,ii,prefix="p",defaultPrefix="p0";if(!goog.isDef(featureType)&&goog.isDefAndNotNull(node.childNodes)){featureType=[],featureNS={};for(i=0,ii=node.childNodes.length;i<ii;++i){var child=node.childNodes[i];if(child.nodeType===1){var ft=child.nodeName.split(":").pop();if(goog.array.indexOf(featureType,ft)===-1){var key;if(!goog.object.contains(featureNS,child.namespaceURI)){key=prefix+goog.object.getCount(featureNS);featureNS[key]=child.namespaceURI}else{key=goog.object.findKey(featureNS,function(value){return value===child.namespaceURI})}featureType.push(key+":"+ft)}}}context.featureType=featureType;context.featureNS=featureNS}if(goog.isString(featureNS)){var ns=featureNS;featureNS={};featureNS[defaultPrefix]=ns}var parsersNS={};var featureTypes=goog.isArray(featureType)?featureType:[featureType];for(var p in featureNS){var parsers={};for(i=0,ii=featureTypes.length;i<ii;++i){var featurePrefix=featureTypes[i].indexOf(":")===-1?defaultPrefix:featureTypes[i].split(":")[0];if(featurePrefix===p){parsers[featureTypes[i].split(":").pop()]=(localName=="featureMembers")?ol.xml.makeArrayPusher(this.readFeatureElement,this):ol.xml.makeReplacer(this.readFeatureElement,this)}}parsersNS[featureNS[p]]=parsers}features=ol.xml.pushParseAndPop([],parsersNS,node,objectStack)}}if(!goog.isDef(features)){features=[]}return features};ol.format.GMLBase.prototype.readGeometryElement=function(node,objectStack){var context=objectStack[0];goog.asserts.assert(goog.isObject(context),"context should be an Object");context.srsName=node.firstElementChild.getAttribute("srsName");var geometry=ol.xml.pushParseAndPop((null),this.GEOMETRY_PARSERS_,node,objectStack,this);if(goog.isDefAndNotNull(geometry)){return(ol.format.Feature.transformWithOptions(geometry,false,context))}else{return undefined}};ol.format.GMLBase.prototype.readFeatureElement=function(node,objectStack){var n;var fid=node.getAttribute("fid")||ol.xml.getAttributeNS(node,ol.format.GMLBase.GMLNS,"id");var values={},geometryName;for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){var localName=ol.xml.getLocalName(n);if(n.childNodes.length===0||(n.childNodes.length===1&&(n.firstChild.nodeType===3||n.firstChild.nodeType===4))){var value=ol.xml.getAllTextContent(n,false);if(goog.string.isEmpty(value)){value=undefined}values[localName]=value}else{if(localName!=="boundedBy"){geometryName=localName}values[localName]=this.readGeometryElement(n,objectStack)}}var feature=new ol.Feature(values);if(goog.isDef(geometryName)){feature.setGeometryName(geometryName)}if(fid){feature.setId(fid)}return feature};ol.format.GMLBase.prototype.readPoint=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Point","localName should be Point");var flatCoordinates=this.readFlatCoordinatesFromNode_(node,objectStack);if(goog.isDefAndNotNull(flatCoordinates)){var point=new ol.geom.Point(null);goog.asserts.assert(flatCoordinates.length==3,"flatCoordinates should have a length of 3");point.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates);return point}};ol.format.GMLBase.prototype.readMultiPoint=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MultiPoint","localName should be MultiPoint");var coordinates=ol.xml.pushParseAndPop(([]),this.MULTIPOINT_PARSERS_,node,objectStack,this);if(goog.isDef(coordinates)){return new ol.geom.MultiPoint(coordinates)}else{return undefined}};ol.format.GMLBase.prototype.readMultiLineString=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MultiLineString","localName should be MultiLineString");var lineStrings=ol.xml.pushParseAndPop(([]),this.MULTILINESTRING_PARSERS_,node,objectStack,this);if(goog.isDef(lineStrings)){var multiLineString=new ol.geom.MultiLineString(null);multiLineString.setLineStrings(lineStrings);return multiLineString}else{return undefined}};ol.format.GMLBase.prototype.readMultiPolygon=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MultiPolygon","localName should be MultiPolygon");var polygons=ol.xml.pushParseAndPop(([]),this.MULTIPOLYGON_PARSERS_,node,objectStack,this);if(goog.isDef(polygons)){var multiPolygon=new ol.geom.MultiPolygon(null);multiPolygon.setPolygons(polygons);return multiPolygon}else{return undefined}};ol.format.GMLBase.prototype.pointMemberParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="pointMember"||node.localName=="pointMembers","localName should be pointMember or pointMembers");ol.xml.parseNode(this.POINTMEMBER_PARSERS_,node,objectStack,this)};ol.format.GMLBase.prototype.lineStringMemberParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="lineStringMember"||node.localName=="lineStringMembers","localName should be LineStringMember or LineStringMembers");ol.xml.parseNode(this.LINESTRINGMEMBER_PARSERS_,node,objectStack,this)};ol.format.GMLBase.prototype.polygonMemberParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="polygonMember"||node.localName=="polygonMembers","localName should be polygonMember or polygonMembers");ol.xml.parseNode(this.POLYGONMEMBER_PARSERS_,node,objectStack,this)};ol.format.GMLBase.prototype.readLineString=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LineString","localName should be LineString");var flatCoordinates=this.readFlatCoordinatesFromNode_(node,objectStack);if(goog.isDefAndNotNull(flatCoordinates)){var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates);return lineString}else{return undefined}};ol.format.GMLBase.prototype.readFlatLinearRing_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LinearRing","localName should be LinearRing");var ring=ol.xml.pushParseAndPop((null),this.GEOMETRY_FLAT_COORDINATES_PARSERS_,node,objectStack,this);if(goog.isDefAndNotNull(ring)){return ring}else{return undefined}};ol.format.GMLBase.prototype.readLinearRing=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LinearRing","localName should be LinearRing");var flatCoordinates=this.readFlatCoordinatesFromNode_(node,objectStack);if(goog.isDef(flatCoordinates)){var ring=new ol.geom.LinearRing(null);ring.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates);return ring}else{return undefined}};ol.format.GMLBase.prototype.readPolygon=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Polygon","localName should be Polygon");var flatLinearRings=ol.xml.pushParseAndPop(([null]),this.FLAT_LINEAR_RINGS_PARSERS_,node,objectStack,this);if(goog.isDef(flatLinearRings)&&!goog.isNull(flatLinearRings[0])){var polygon=new ol.geom.Polygon(null);var flatCoordinates=flatLinearRings[0];var ends=[flatCoordinates.length];var i,ii;for(i=1,ii=flatLinearRings.length;i<ii;++i){goog.array.extend(flatCoordinates,flatLinearRings[i]);ends.push(flatCoordinates.length)}polygon.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates,ends);return polygon}else{return undefined}};ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return(ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,node,objectStack,this))};ol.format.GMLBase.prototype.MULTIPOINT_PARSERS_=Object({"http://www.opengis.net/gml":{pointMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_),pointMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_)}});ol.format.GMLBase.prototype.MULTILINESTRING_PARSERS_=Object({"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_),lineStringMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_)}});ol.format.GMLBase.prototype.MULTIPOLYGON_PARSERS_=Object({"http://www.opengis.net/gml":{polygonMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_),polygonMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_)}});ol.format.GMLBase.prototype.POINTMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_)}});ol.format.GMLBase.prototype.LINESTRINGMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString)}});ol.format.GMLBase.prototype.POLYGONMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon)}});ol.format.GMLBase.prototype.RING_PARSERS=Object({"http://www.opengis.net/gml":{LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFlatLinearRing_)}});ol.format.GMLBase.prototype.readGeometryFromNode=function(node,opt_options){var geometry=this.readGeometryElement(node,[this.getReadOptions(node,goog.isDef(opt_options)?opt_options:{})]);return goog.isDef(geometry)?geometry:null};ol.format.GMLBase.prototype.readFeatures;ol.format.GMLBase.prototype.readFeaturesFromNode=function(node,opt_options){var options={featureType:this.featureType,featureNS:this.featureNS};if(goog.isDef(opt_options)){goog.object.extend(options,this.getReadOptions(node,opt_options))}return this.readFeaturesInternal(node,[options])};ol.format.GMLBase.prototype.readProjectionFromNode=function(node){return ol.proj.get(goog.isDef(this.srsName_)?this.srsName_:node.firstElementChild.getAttribute("srsName"))};goog.provide("ol.format.XSD");goog.require("goog.asserts");goog.require("goog.string");goog.require("ol.xml");ol.format.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema";ol.format.XSD.readBoolean=function(node){var s=ol.xml.getAllTextContent(node,false);return ol.format.XSD.readBooleanString(s)};ol.format.XSD.readBooleanString=function(string){var m=/^\s*(true|1)|(false|0)\s*$/.exec(string);if(m){return goog.isDef(m[1])||false}else{return undefined}};ol.format.XSD.readDateTime=function(node){var s=ol.xml.getAllTextContent(node,false);var re=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/;var m=re.exec(s);if(m){var year=parseInt(m[1],10);var month=parseInt(m[2],10)-1;var day=parseInt(m[3],10);var hour=parseInt(m[4],10);var minute=parseInt(m[5],10);var second=parseInt(m[6],10);var dateTime=Date.UTC(year,month,day,hour,minute,second)/1000;if(m[7]!="Z"){var sign=m[8]=="-"?-1:1;dateTime+=sign*60*parseInt(m[9],10);if(goog.isDef(m[10])){dateTime+=sign*60*60*parseInt(m[10],10)}}return dateTime}else{return undefined}};ol.format.XSD.readDecimal=function(node){var s=ol.xml.getAllTextContent(node,false);return ol.format.XSD.readDecimalString(s)};ol.format.XSD.readDecimalString=function(string){var m=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(string);if(m){return parseFloat(m[1])}else{return undefined}};ol.format.XSD.readNonNegativeInteger=function(node){var s=ol.xml.getAllTextContent(node,false);return ol.format.XSD.readNonNegativeIntegerString(s)};ol.format.XSD.readNonNegativeIntegerString=function(string){var m=/^\s*(\d+)\s*$/.exec(string);if(m){return parseInt(m[1],10)}else{return undefined}};ol.format.XSD.readString=function(node){var s=ol.xml.getAllTextContent(node,false);return goog.string.trim(s)};ol.format.XSD.writeBooleanTextNode=function(node,bool){ol.format.XSD.writeStringTextNode(node,(bool)?"1":"0")};ol.format.XSD.writeDateTimeTextNode=function(node,dateTime){var date=new Date(dateTime*1000);var string=date.getUTCFullYear()+"-"+goog.string.padNumber(date.getUTCMonth()+1,2)+"-"+goog.string.padNumber(date.getUTCDate(),2)+"T"+goog.string.padNumber(date.getUTCHours(),2)+":"+goog.string.padNumber(date.getUTCMinutes(),2)+":"+goog.string.padNumber(date.getUTCSeconds(),2)+"Z";node.appendChild(ol.xml.DOCUMENT.createTextNode(string))};ol.format.XSD.writeDecimalTextNode=function(node,decimal){var string=decimal.toPrecision();node.appendChild(ol.xml.DOCUMENT.createTextNode(string))};ol.format.XSD.writeNonNegativeIntegerTextNode=function(node,nonNegativeInteger){goog.asserts.assert(nonNegativeInteger>=0,"value should be more than 0");goog.asserts.assert(nonNegativeInteger==(nonNegativeInteger|0),"value should be an integer value");var string=nonNegativeInteger.toString();node.appendChild(ol.xml.DOCUMENT.createTextNode(string))};ol.format.XSD.writeStringTextNode=function(node,string){node.appendChild(ol.xml.DOCUMENT.createTextNode(string))};goog.provide("ol.format.GML2");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.extent");goog.require("ol.format.GMLBase");goog.require("ol.format.XSD");goog.require("ol.proj");goog.require("ol.xml");ol.format.GML2=function(opt_options){var options=(goog.isDef(opt_options)?opt_options:{});goog.base(this,options);this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]["featureMember"]=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);this.schemaLocation=goog.isDef(options.schemaLocation)?options.schemaLocation:ol.format.GML2.schemaLocation_};goog.inherits(ol.format.GML2,ol.format.GMLBase);ol.format.GML2.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";ol.format.GML2.prototype.readFlatCoordinates_=function(node,objectStack){var s=ol.xml.getAllTextContent(node,false).replace(/^\s*|\s*$/g,"");var context=objectStack[0];goog.asserts.assert(goog.isObject(context),"context should be an Object");var containerSrs=context.srsName;var containerDimension=node.parentNode.getAttribute("srsDimension");var axisOrientation="enu";if(!goog.isNull(containerSrs)){var proj=ol.proj.get(containerSrs);axisOrientation=proj.getAxisOrientation()}var coords=s.split(/[\s,]+/);var dim=2;if(!goog.isNull(node.getAttribute("srsDimension"))){dim=ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("srsDimension"))}else{if(!goog.isNull(node.getAttribute("dimension"))){dim=ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("dimension"))}else{if(!goog.isNull(containerDimension)){dim=ol.format.XSD.readNonNegativeIntegerString(containerDimension)}}}var x,y,z;var flatCoordinates=[];for(var i=0,ii=coords.length;i<ii;i+=dim){x=parseFloat(coords[i]);y=parseFloat(coords[i+1]);z=(dim===3)?parseFloat(coords[i+2]):0;if(axisOrientation.substr(0,2)==="en"){flatCoordinates.push(x,y,z)}else{flatCoordinates.push(y,x,z)}}return flatCoordinates};ol.format.GML2.prototype.readBox_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Box","localName should be Box");var flatCoordinates=ol.xml.pushParseAndPop(([null]),this.BOX_PARSERS_,node,objectStack,this);return ol.extent.createOrUpdate(flatCoordinates[1][0],flatCoordinates[1][1],flatCoordinates[1][3],flatCoordinates[1][4])};ol.format.GML2.prototype.innerBoundaryIsParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="innerBoundaryIs","localName should be innerBoundaryIs");var flatLinearRing=ol.xml.pushParseAndPop((undefined),this.RING_PARSERS,node,objectStack,this);if(goog.isDef(flatLinearRing)){var flatLinearRings=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(flatLinearRings),"flatLinearRings should be an array");goog.asserts.assert(flatLinearRings.length>0,"flatLinearRings should have an array length larger than 0");flatLinearRings.push(flatLinearRing)}};ol.format.GML2.prototype.outerBoundaryIsParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="outerBoundaryIs","localName should be outerBoundaryIs");var flatLinearRing=ol.xml.pushParseAndPop((undefined),this.RING_PARSERS,node,objectStack,this);if(goog.isDef(flatLinearRing)){var flatLinearRings=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(flatLinearRings),"flatLinearRings should be an array");goog.asserts.assert(flatLinearRings.length>0,"flatLinearRings should have an array length larger than 0");flatLinearRings[0]=flatLinearRing}};ol.format.GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_=Object({"http://www.opengis.net/gml":{coordinates:ol.xml.makeReplacer(ol.format.GML2.prototype.readFlatCoordinates_)}});ol.format.GML2.prototype.FLAT_LINEAR_RINGS_PARSERS_=Object({"http://www.opengis.net/gml":{innerBoundaryIs:ol.format.GML2.prototype.innerBoundaryIsParser_,outerBoundaryIs:ol.format.GML2.prototype.outerBoundaryIsParser_}});ol.format.GML2.prototype.BOX_PARSERS_=Object({"http://www.opengis.net/gml":{coordinates:ol.xml.makeArrayPusher(ol.format.GML2.prototype.readFlatCoordinates_)}});ol.format.GML2.prototype.GEOMETRY_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Box:ol.xml.makeReplacer(ol.format.GML2.prototype.readBox_)}});goog.provide("ol.format.GML");goog.provide("ol.format.GML3");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.extent");goog.require("ol.format.Feature");goog.require("ol.format.GMLBase");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.xml");ol.format.GML3=function(opt_options){var options=(goog.isDef(opt_options)?opt_options:{});goog.base(this,options);this.surface_=goog.isDef(options.surface)?options.surface:false;this.curve_=goog.isDef(options.curve)?options.curve:false;this.multiCurve_=goog.isDef(options.multiCurve)?options.multiCurve:true;this.multiSurface_=goog.isDef(options.multiSurface)?options.multiSurface:true;this.schemaLocation=goog.isDef(options.schemaLocation)?options.schemaLocation:ol.format.GML3.schemaLocation_};goog.inherits(ol.format.GML3,ol.format.GMLBase);ol.format.GML3.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";ol.format.GML3.prototype.readMultiCurve_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MultiCurve","localName should be MultiCurve");var lineStrings=ol.xml.pushParseAndPop(([]),this.MULTICURVE_PARSERS_,node,objectStack,this);if(goog.isDef(lineStrings)){var multiLineString=new ol.geom.MultiLineString(null);multiLineString.setLineStrings(lineStrings);return multiLineString}else{return undefined}};ol.format.GML3.prototype.readMultiSurface_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MultiSurface","localName should be MultiSurface");var polygons=ol.xml.pushParseAndPop(([]),this.MULTISURFACE_PARSERS_,node,objectStack,this);if(goog.isDef(polygons)){var multiPolygon=new ol.geom.MultiPolygon(null);multiPolygon.setPolygons(polygons);return multiPolygon}else{return undefined}};ol.format.GML3.prototype.curveMemberParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="curveMember"||node.localName=="curveMembers","localName should be curveMember or curveMembers");ol.xml.parseNode(this.CURVEMEMBER_PARSERS_,node,objectStack,this)};ol.format.GML3.prototype.surfaceMemberParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="surfaceMember"||node.localName=="surfaceMembers","localName should be surfaceMember or surfaceMembers");ol.xml.parseNode(this.SURFACEMEMBER_PARSERS_,node,objectStack,this)};ol.format.GML3.prototype.readPatch_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="patches","localName should be patches");return ol.xml.pushParseAndPop(([null]),this.PATCHES_PARSERS_,node,objectStack,this)};ol.format.GML3.prototype.readSegment_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="segments","localName should be segments");return ol.xml.pushParseAndPop(([null]),this.SEGMENTS_PARSERS_,node,objectStack,this)};ol.format.GML3.prototype.readPolygonPatch_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"npde.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="PolygonPatch","localName should be PolygonPatch");return ol.xml.pushParseAndPop(([null]),this.FLAT_LINEAR_RINGS_PARSERS_,node,objectStack,this)};ol.format.GML3.prototype.readLineStringSegment_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LineStringSegment","localName should be LineStringSegment");return ol.xml.pushParseAndPop(([null]),this.GEOMETRY_FLAT_COORDINATES_PARSERS_,node,objectStack,this)};ol.format.GML3.prototype.interiorParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="interior","localName should be interior");var flatLinearRing=ol.xml.pushParseAndPop((undefined),this.RING_PARSERS,node,objectStack,this);if(goog.isDef(flatLinearRing)){var flatLinearRings=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(flatLinearRings),"flatLinearRings should be an array");goog.asserts.assert(flatLinearRings.length>0,"flatLinearRings should have an array length of 1 or more");flatLinearRings.push(flatLinearRing)}};ol.format.GML3.prototype.exteriorParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="exterior","localName should be exterior");var flatLinearRing=ol.xml.pushParseAndPop((undefined),this.RING_PARSERS,node,objectStack,this);if(goog.isDef(flatLinearRing)){var flatLinearRings=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(flatLinearRings),"flatLinearRings should be an array");goog.asserts.assert(flatLinearRings.length>0,"flatLinearRings should have an array length of 1 or more");flatLinearRings[0]=flatLinearRing}};ol.format.GML3.prototype.readSurface_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Surface","localName should be Surface");var flatLinearRings=ol.xml.pushParseAndPop(([null]),this.SURFACE_PARSERS_,node,objectStack,this);if(goog.isDef(flatLinearRings)&&!goog.isNull(flatLinearRings[0])){var polygon=new ol.geom.Polygon(null);var flatCoordinates=flatLinearRings[0];var ends=[flatCoordinates.length];var i,ii;for(i=1,ii=flatLinearRings.length;i<ii;++i){goog.array.extend(flatCoordinates,flatLinearRings[i]);ends.push(flatCoordinates.length)}polygon.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates,ends);return polygon}else{return undefined}};ol.format.GML3.prototype.readCurve_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Curve","localName should be Curve");var flatCoordinates=ol.xml.pushParseAndPop(([null]),this.CURVE_PARSERS_,node,objectStack,this);if(goog.isDef(flatCoordinates)){var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates);return lineString}else{return undefined}};ol.format.GML3.prototype.readEnvelope_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Envelope","localName should be Envelope");var flatCoordinates=ol.xml.pushParseAndPop(([null]),this.ENVELOPE_PARSERS_,node,objectStack,this);return ol.extent.createOrUpdate(flatCoordinates[1][0],flatCoordinates[1][1],flatCoordinates[2][0],flatCoordinates[2][1])};ol.format.GML3.prototype.readFlatPos_=function(node,objectStack){var s=ol.xml.getAllTextContent(node,false);var re=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var flatCoordinates=[];var m;while((m=re.exec(s))){flatCoordinates.push(parseFloat(m[1]));s=s.substr(m[0].length)}if(s!==""){return undefined}var context=objectStack[0];goog.asserts.assert(goog.isObject(context),"context should be an Object");var containerSrs=context.srsName;var axisOrientation="enu";if(!goog.isNull(containerSrs)){var proj=ol.proj.get(containerSrs);axisOrientation=proj.getAxisOrientation()}if(axisOrientation==="neu"){var i,ii;for(i=0,ii=flatCoordinates.length;i<ii;i+=3){var y=flatCoordinates[i];var x=flatCoordinates[i+1];flatCoordinates[i]=x;flatCoordinates[i+1]=y}}var len=flatCoordinates.length;if(len==2){flatCoordinates.push(0)}if(len===0){return undefined}return flatCoordinates};ol.format.GML3.prototype.readFlatPosList_=function(node,objectStack){var s=ol.xml.getAllTextContent(node,false).replace(/^\s*|\s*$/g,"");var context=objectStack[0];goog.asserts.assert(goog.isObject(context),"context should be an Object");var containerSrs=context.srsName;var containerDimension=node.parentNode.getAttribute("srsDimension");var axisOrientation="enu";if(!goog.isNull(containerSrs)){var proj=ol.proj.get(containerSrs);axisOrientation=proj.getAxisOrientation()}var coords=s.split(/\s+/);var dim=2;if(!goog.isNull(node.getAttribute("srsDimension"))){dim=ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("srsDimension"))}else{if(!goog.isNull(node.getAttribute("dimension"))){dim=ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("dimension"))}else{if(!goog.isNull(containerDimension)){dim=ol.format.XSD.readNonNegativeIntegerString(containerDimension)}}}var x,y,z;var flatCoordinates=[];for(var i=0,ii=coords.length;i<ii;i+=dim){x=parseFloat(coords[i]);y=parseFloat(coords[i+1]);z=(dim===3)?parseFloat(coords[i+2]):0;if(axisOrientation.substr(0,2)==="en"){flatCoordinates.push(x,y,z)}else{flatCoordinates.push(y,x,z)}}return flatCoordinates};ol.format.GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_=Object({"http://www.opengis.net/gml":{pos:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPos_),posList:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPosList_)}});ol.format.GML3.prototype.FLAT_LINEAR_RINGS_PARSERS_=Object({"http://www.opengis.net/gml":{interior:ol.format.GML3.prototype.interiorParser_,exterior:ol.format.GML3.prototype.exteriorParser_}});ol.format.GML3.prototype.GEOMETRY_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Surface:ol.xml.makeReplacer(ol.format.GML3.prototype.readSurface_),MultiSurface:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiSurface_),Curve:ol.xml.makeReplacer(ol.format.GML3.prototype.readCurve_),MultiCurve:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiCurve_),Envelope:ol.xml.makeReplacer(ol.format.GML3.prototype.readEnvelope_)}});ol.format.GML3.prototype.MULTICURVE_PARSERS_=Object({"http://www.opengis.net/gml":{curveMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_),curveMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_)}});ol.format.GML3.prototype.MULTISURFACE_PARSERS_=Object({"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_),surfaceMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_)}});ol.format.GML3.prototype.CURVEMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString),Curve:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readCurve_)}});ol.format.GML3.prototype.SURFACEMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon),Surface:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readSurface_)}});ol.format.GML3.prototype.SURFACE_PARSERS_=Object({"http://www.opengis.net/gml":{patches:ol.xml.makeReplacer(ol.format.GML3.prototype.readPatch_)}});ol.format.GML3.prototype.CURVE_PARSERS_=Object({"http://www.opengis.net/gml":{segments:ol.xml.makeReplacer(ol.format.GML3.prototype.readSegment_)}});ol.format.GML3.prototype.ENVELOPE_PARSERS_=Object({"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_),upperCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_)}});ol.format.GML3.prototype.PATCHES_PARSERS_=Object({"http://www.opengis.net/gml":{PolygonPatch:ol.xml.makeReplacer(ol.format.GML3.prototype.readPolygonPatch_)}});ol.format.GML3.prototype.SEGMENTS_PARSERS_=Object({"http://www.opengis.net/gml":{LineStringSegment:ol.xml.makeReplacer(ol.format.GML3.prototype.readLineStringSegment_)}});ol.format.GML3.prototype.writePos_=function(node,value,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;var axisOrientation="enu";if(goog.isDefAndNotNull(srsName)){axisOrientation=ol.proj.get(srsName).getAxisOrientation()}var point=value.getCoordinates();var coords;if(axisOrientation.substr(0,2)==="en"){coords=(point[0]+" "+point[1])}else{coords=(point[1]+" "+point[0])}ol.format.XSD.writeStringTextNode(node,coords)};ol.format.GML3.prototype.getCoords_=function(point,opt_srsName){var axisOrientation="enu";if(goog.isDefAndNotNull(opt_srsName)){axisOrientation=ol.proj.get(opt_srsName).getAxisOrientation()}return((axisOrientation.substr(0,2)==="en")?point[0]+" "+point[1]:point[1]+" "+point[0])};ol.format.GML3.prototype.writePosList_=function(node,value,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;var points=value.getCoordinates();var len=points.length;var parts=new Array(len);var point;for(var i=0;i<len;++i){point=points[i];parts[i]=this.getCoords_(point,srsName)}ol.format.XSD.writeStringTextNode(node,parts.join(" "))};ol.format.GML3.prototype.writePoint_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;if(goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}var pos=ol.xml.createElementNS(node.namespaceURI,"pos");node.appendChild(pos);this.writePos_(pos,geometry,objectStack)};ol.format.GML3.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),upperCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.GML3.prototype.writeEnvelope=function(node,extent,objectStack){goog.asserts.assert(extent.length==4,"extent should have 4 items");var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;if(goog.isDef(srsName)){node.setAttribute("srsName",srsName)}var keys=["lowerCorner","upperCorner"];var values=[extent[0]+" "+extent[1],extent[2]+" "+extent[3]];ol.xml.pushSerializeAndPop(({node:node}),ol.format.GML3.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,keys,this)};ol.format.GML3.prototype.writeLinearRing_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;if(goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}var posList=ol.xml.createElementNS(node.namespaceURI,"posList");node.appendChild(posList);this.writePosList_(posList,geometry,objectStack)};ol.format.GML3.prototype.RING_NODE_FACTORY_=function(value,objectStack,opt_nodeName){var context=objectStack[objectStack.length-1];var parentNode=context.node;goog.asserts.assert(goog.isObject(context),"context should be an Object");var exteriorWritten=context.exteriorWritten;if(!goog.isDef(exteriorWritten)){context.exteriorWritten=true}return ol.xml.createElementNS(parentNode.namespaceURI,goog.isDef(exteriorWritten)?"interior":"exterior")};ol.format.GML3.prototype.writeSurfaceOrPolygon_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;if(node.nodeName!=="PolygonPatch"&&goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}if(node.nodeName==="Polygon"||node.nodeName==="PolygonPatch"){var rings=geometry.getLinearRings();ol.xml.pushSerializeAndPop({node:node,srsName:srsName},ol.format.GML3.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,rings,objectStack,undefined,this)}else{if(node.nodeName==="Surface"){var patches=ol.xml.createElementNS(node.namespaceURI,"patches");node.appendChild(patches);this.writeSurfacePatches_(patches,geometry,objectStack)}}};ol.format.GML3.prototype.writeCurveOrLineString_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;if(node.nodeName!=="LineStringSegment"&&goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}if(node.nodeName==="LineString"||node.nodeName==="LineStringSegment"){var posList=ol.xml.createElementNS(node.namespaceURI,"posList");node.appendChild(posList);this.writePosList_(posList,geometry,objectStack)}else{if(node.nodeName==="Curve"){var segments=ol.xml.createElementNS(node.namespaceURI,"segments");node.appendChild(segments);this.writeCurveSegments_(segments,geometry,objectStack)}}};ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;var surface=context.surface;if(goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}var polygons=geometry.getPolygons();ol.xml.pushSerializeAndPop({node:node,srsName:srsName,surface:surface},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,polygons,objectStack,undefined,this)};ol.format.GML3.prototype.writeMultiPoint_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;if(goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}var points=geometry.getPoints();ol.xml.pushSerializeAndPop({node:node,srsName:srsName},ol.format.GML3.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("pointMember"),points,objectStack,undefined,this)};ol.format.GML3.prototype.writeMultiCurveOrLineString_=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var srsName=context.srsName;var curve=context.curve;if(goog.isDefAndNotNull(srsName)){node.setAttribute("srsName",srsName)}var lines=geometry.getLineStrings();ol.xml.pushSerializeAndPop({node:node,srsName:srsName,curve:curve},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,lines,objectStack,undefined,this)};ol.format.GML3.prototype.writeRing_=function(node,ring,objectStack){var linearRing=ol.xml.createElementNS(node.namespaceURI,"LinearRing");node.appendChild(linearRing);this.writeLinearRing_(linearRing,ring,objectStack)};ol.format.GML3.prototype.writeSurfaceOrPolygonMember_=function(node,polygon,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var child=this.GEOMETRY_NODE_FACTORY_(polygon,objectStack);if(goog.isDef(child)){node.appendChild(child);this.writeSurfaceOrPolygon_(child,polygon,objectStack)}};ol.format.GML3.prototype.writePointMember_=function(node,point,objectStack){var child=ol.xml.createElementNS(node.namespaceURI,"Point");node.appendChild(child);this.writePoint_(child,point,objectStack)};ol.format.GML3.prototype.writeLineStringOrCurveMember_=function(node,line,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var child=this.GEOMETRY_NODE_FACTORY_(line,objectStack);if(goog.isDef(child)){node.appendChild(child);this.writeCurveOrLineString_(child,line,objectStack)}};ol.format.GML3.prototype.writeSurfacePatches_=function(node,polygon,objectStack){var child=ol.xml.createElementNS(node.namespaceURI,"PolygonPatch");node.appendChild(child);this.writeSurfaceOrPolygon_(child,polygon,objectStack)};ol.format.GML3.prototype.writeCurveSegments_=function(node,line,objectStack){var child=ol.xml.createElementNS(node.namespaceURI,"LineStringSegment");node.appendChild(child);this.writeCurveOrLineString_(child,line,objectStack)};ol.format.GML3.prototype.writeGeometryElement=function(node,geometry,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var item=goog.object.clone(context);item.node=node;var value;if(goog.isArray(geometry)){if(goog.isDef(context.dataProjection)){value=ol.proj.transformExtent(geometry,context.featureProjection,context.dataProjection)}else{value=geometry}}else{goog.asserts.assertInstanceof(geometry,ol.geom.Geometry,"geometry should be an ol.geom.Geometry");value=ol.format.Feature.transformWithOptions(geometry,true,context)}ol.xml.pushSerializeAndPop((item),ol.format.GML3.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[value],objectStack,undefined,this)};ol.format.GML3.prototype.writeFeatureElement=function(node,feature,objectStack){var fid=feature.getId();if(goog.isDef(fid)){node.setAttribute("fid",fid)}var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featureNS=context.featureNS;var geometryName=feature.getGeometryName();if(!goog.isDef(context.serializers)){context.serializers={};context.serializers[featureNS]={}}var properties=feature.getProperties();var keys=[],values=[];for(var key in properties){var value=properties[key];if(!goog.isNull(value)){keys.push(key);values.push(value);if(key==geometryName){if(!(key in context.serializers[featureNS])){context.serializers[featureNS][key]=ol.xml.makeChildAppender(this.writeGeometryElement,this)}}else{if(!(key in context.serializers[featureNS])){context.serializers[featureNS][key]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}}}}var item=goog.object.clone(context);item.node=node;ol.xml.pushSerializeAndPop((item),context.serializers,ol.xml.makeSimpleNodeFactory(undefined,featureNS),values,objectStack,keys)};ol.format.GML3.prototype.writeFeatureMembers_=function(node,features,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featureType=context.featureType;var featureNS=context.featureNS;var serializers={};serializers[featureNS]={};serializers[featureNS][featureType]=ol.xml.makeChildAppender(this.writeFeatureElement,this);var item=goog.object.clone(context);item.node=node;ol.xml.pushSerializeAndPop((item),serializers,ol.xml.makeSimpleNodeFactory(featureType,featureNS),features,objectStack)};ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_),polygonMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_)}};ol.format.GML3.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePointMember_)}};ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_),curveMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_)}};ol.format.GML3.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_),interior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_)}};ol.format.GML3.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiCurve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),Point:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePoint_),MultiPoint:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiPoint_),LineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiLineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),LinearRing:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLinearRing_),Polygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiPolygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Surface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiSurface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Envelope:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeEnvelope)}};ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};ol.format.GML3.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(value,objectStack,opt_nodeName){var parentNode=objectStack[objectStack.length-1].node;goog.asserts.assert(ol.xml.isNode(parentNode),"parentNode should be a node");return ol.xml.createElementNS("http://www.opengis.net/gml",ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_[parentNode.nodeName])};ol.format.GML3.prototype.GEOMETRY_NODE_FACTORY_=function(value,objectStack,opt_nodeName){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var multiSurface=context.multiSurface;var surface=context.surface;var curve=context.curve;var multiCurve=context.multiCurve;var parentNode=objectStack[objectStack.length-1].node;goog.asserts.assert(ol.xml.isNode(parentNode),"parentNode should be a node");var nodeName;if(!goog.isArray(value)){goog.asserts.assertInstanceof(value,ol.geom.Geometry,"value should be an ol.geom.Geometry");nodeName=value.getType();if(nodeName==="MultiPolygon"&&multiSurface===true){nodeName="MultiSurface"}else{if(nodeName==="Polygon"&&surface===true){nodeName="Surface"}else{if(nodeName==="LineString"&&curve===true){nodeName="Curve"}else{if(nodeName==="MultiLineString"&&multiCurve===true){nodeName="MultiCurve"}}}}}else{nodeName="Envelope"}return ol.xml.createElementNS("http://www.opengis.net/gml",nodeName)};ol.format.GML3.prototype.writeGeometryNode=function(geometry,opt_options){opt_options=this.adaptOptions(opt_options);var geom=ol.xml.createElementNS("http://www.opengis.net/gml","geom");var context={node:geom,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(goog.isDef(opt_options)){goog.object.extend(context,opt_options)}this.writeGeometryElement(geom,geometry,[context]);return geom};ol.format.GML3.prototype.writeFeatures;ol.format.GML3.prototype.writeFeaturesNode=function(features,opt_options){opt_options=this.adaptOptions(opt_options);var node=ol.xml.createElementNS("http://www.opengis.net/gml","featureMembers");ol.xml.setAttributeNS(node,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var context={srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(goog.isDef(opt_options)){goog.object.extend(context,opt_options)}this.writeFeatureMembers_(node,features,[context]);return node};ol.format.GML=ol.format.GML3;ol.format.GML.prototype.writeFeatures;ol.format.GML.prototype.writeFeaturesNode;goog.provide("ol.format.GPX");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.Point");goog.require("ol.proj");goog.require("ol.xml");ol.format.GPX=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.readExtensions_=options.readExtensions};goog.inherits(ol.format.GPX,ol.format.XMLFeature);ol.format.GPX.NAMESPACE_URIS_=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];ol.format.GPX.appendCoordinate_=function(flatCoordinates,node,values){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");flatCoordinates.push(parseFloat(node.getAttribute("lon")),parseFloat(node.getAttribute("lat")));if(goog.object.containsKey(values,"ele")){flatCoordinates.push((values.ele));goog.object.remove(values,"ele")}else{flatCoordinates.push(0)}if(goog.object.containsKey(values,"time")){flatCoordinates.push((values.time));goog.object.remove(values,"time")}else{flatCoordinates.push(0)}return flatCoordinates};ol.format.GPX.parseLink_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="link","localName should be link");var values=(objectStack[objectStack.length-1]);var href=node.getAttribute("href");if(!goog.isNull(href)){values.link=href}ol.xml.parseNode(ol.format.GPX.LINK_PARSERS_,node,objectStack)};ol.format.GPX.parseExtensions_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="extensions","localName should be extensions");var values=(objectStack[objectStack.length-1]);values.extensionsNode_=node};ol.format.GPX.parseRtePt_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="rtept","localName should be rtept");var values=ol.xml.pushParseAndPop({},ol.format.GPX.RTEPT_PARSERS_,node,objectStack);if(goog.isDef(values)){var rteValues=(objectStack[objectStack.length-1]);var flatCoordinates=(rteValues.flatCoordinates);ol.format.GPX.appendCoordinate_(flatCoordinates,node,values)}};ol.format.GPX.parseTrkPt_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="trkpt","localName should be trkpt");var values=ol.xml.pushParseAndPop({},ol.format.GPX.TRKPT_PARSERS_,node,objectStack);if(goog.isDef(values)){var trkValues=(objectStack[objectStack.length-1]);var flatCoordinates=(trkValues.flatCoordinates);ol.format.GPX.appendCoordinate_(flatCoordinates,node,values)}};ol.format.GPX.parseTrkSeg_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="trkseg","localName should be trkseg");var values=(objectStack[objectStack.length-1]);ol.xml.parseNode(ol.format.GPX.TRKSEG_PARSERS_,node,objectStack);var flatCoordinates=(values.flatCoordinates);var ends=(values.ends);ends.push(flatCoordinates.length)};ol.format.GPX.readRte_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="rte","localName should be rte");var options=(objectStack[0]);var values=ol.xml.pushParseAndPop({flatCoordinates:[]},ol.format.GPX.RTE_PARSERS_,node,objectStack);if(!goog.isDef(values)){return undefined}var flatCoordinates=(values.flatCoordinates);goog.object.remove(values,"flatCoordinates");var geometry=new ol.geom.LineString(null);geometry.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,flatCoordinates);ol.format.Feature.transformWithOptions(geometry,false,options);var feature=new ol.Feature(geometry);feature.setProperties(values);return feature};ol.format.GPX.readTrk_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="trk","localName should be trk");var options=(objectStack[0]);var values=ol.xml.pushParseAndPop({flatCoordinates:[],ends:[]},ol.format.GPX.TRK_PARSERS_,node,objectStack);if(!goog.isDef(values)){return undefined}var flatCoordinates=(values.flatCoordinates);goog.object.remove(values,"flatCoordinates");var ends=(values.ends);goog.object.remove(values,"ends");var geometry=new ol.geom.MultiLineString(null);geometry.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,flatCoordinates,ends);ol.format.Feature.transformWithOptions(geometry,false,options);var feature=new ol.Feature(geometry);feature.setProperties(values);return feature};ol.format.GPX.readWpt_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="wpt","localName should be wpt");var options=(objectStack[0]);var values=ol.xml.pushParseAndPop({},ol.format.GPX.WPT_PARSERS_,node,objectStack);if(!goog.isDef(values)){return undefined}var coordinates=ol.format.GPX.appendCoordinate_([],node,values);var geometry=new ol.geom.Point(coordinates,ol.geom.GeometryLayout.XYZM);ol.format.Feature.transformWithOptions(geometry,false,options);var feature=new ol.Feature(geometry);feature.setProperties(values);return feature};ol.format.GPX.FEATURE_READER_={rte:ol.format.GPX.readRte_,trk:ol.format.GPX.readTrk_,wpt:ol.format.GPX.readWpt_};ol.format.GPX.GPX_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeArrayPusher(ol.format.GPX.readRte_),trk:ol.xml.makeArrayPusher(ol.format.GPX.readTrk_),wpt:ol.xml.makeArrayPusher(ol.format.GPX.readWpt_)});ol.format.GPX.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkText"),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkType")});ol.format.GPX.RTE_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_,type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),rtept:ol.format.GPX.parseRtePt_});ol.format.GPX.RTEPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.TRK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),extensions:ol.format.GPX.parseExtensions_,trkseg:ol.format.GPX.parseTrkSeg_});ol.format.GPX.TRKSEG_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.format.GPX.parseTrkPt_});ol.format.GPX.TRKPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.WPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime),magvar:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),geoidheight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,sym:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),fix:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),sat:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),hdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),vdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),pdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),ageofdgpsdata:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),dgpsid:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_});ol.format.GPX.prototype.handleReadExtensions_=function(features){if(goog.isNull(features)){features=[]}for(var i=0,ii=features.length;i<ii;++i){var feature=features[i];if(goog.isDef(this.readExtensions_)){var extensionsNode=feature.get("extensionsNode_")||null;this.readExtensions_(feature,extensionsNode)}feature.set("extensionsNode_",undefined)}};ol.format.GPX.prototype.readFeature;ol.format.GPX.prototype.readFeatureFromNode=function(node,opt_options){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.GPX.NAMESPACE_URIS_,node.namespaceURI)){return null}var featureReader=ol.format.GPX.FEATURE_READER_[node.localName];if(!goog.isDef(featureReader)){return null}var feature=featureReader(node,[this.getReadOptions(node,opt_options)]);if(!goog.isDef(feature)){return null}this.handleReadExtensions_([feature]);return feature};ol.format.GPX.prototype.readFeatures;ol.format.GPX.prototype.readFeaturesFromNode=function(node,opt_options){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.GPX.NAMESPACE_URIS_,node.namespaceURI)){return[]}if(node.localName=="gpx"){var features=ol.xml.pushParseAndPop(([]),ol.format.GPX.GPX_PARSERS_,node,[this.getReadOptions(node,opt_options)]);if(goog.isDef(features)){this.handleReadExtensions_(features);return features}else{return[]}}return[]};ol.format.GPX.prototype.readProjection;ol.format.GPX.writeLink_=function(node,value,objectStack){node.setAttribute("href",value);var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var properties=context.properties;var link=[properties.linkText,properties.linkType];ol.xml.pushSerializeAndPop(({node:node}),ol.format.GPX.LINK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,link,objectStack,ol.format.GPX.LINK_SEQUENCE_)};ol.format.GPX.writeWptType_=function(node,coordinate,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var parentNode=context.node;goog.asserts.assert(ol.xml.isNode(parentNode),"parentNode should be an XML node");var namespaceURI=parentNode.namespaceURI;var properties=context.properties;ol.xml.setAttributeNS(node,null,"lat",coordinate[1]);ol.xml.setAttributeNS(node,null,"lon",coordinate[0]);var geometryLayout=context.geometryLayout;switch(geometryLayout){case ol.geom.GeometryLayout.XYZM:if(coordinate[3]!==0){properties.time=coordinate[3]}case ol.geom.GeometryLayout.XYZ:if(coordinate[2]!==0){properties.ele=coordinate[2]}break;case ol.geom.GeometryLayout.XYM:if(coordinate[2]!==0){properties.time=coordinate[2]}}var orderedKeys=ol.format.GPX.WPT_TYPE_SEQUENCE_[namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(({node:node,properties:properties}),ol.format.GPX.WPT_TYPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.GPX.writeRte_=function(node,feature,objectStack){var options=(objectStack[0]);var properties=feature.getProperties();var context={node:node,properties:properties};var geometry=feature.getGeometry();if(goog.isDef(geometry)){goog.asserts.assertInstanceof(geometry,ol.geom.LineString,"geometry should be an ol.geom.LineString");geometry=(ol.format.Feature.transformWithOptions(geometry,true,options));context.geometryLayout=geometry.getLayout();properties.rtept=geometry.getCoordinates()}var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.GPX.RTE_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop((context),ol.format.GPX.RTE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.GPX.writeTrk_=function(node,feature,objectStack){var options=(objectStack[0]);var properties=feature.getProperties();var context={node:node,properties:properties};var geometry=feature.getGeometry();if(goog.isDef(geometry)){goog.asserts.assertInstanceof(geometry,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");geometry=(ol.format.Feature.transformWithOptions(geometry,true,options));properties.trkseg=geometry.getLineStrings()}var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.GPX.TRK_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop((context),ol.format.GPX.TRK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.GPX.writeTrkSeg_=function(node,lineString,objectStack){var context={node:node,geometryLayout:lineString.getLayout(),properties:{}};ol.xml.pushSerializeAndPop((context),ol.format.GPX.TRKSEG_SERIALIZERS_,ol.format.GPX.TRKSEG_NODE_FACTORY_,lineString.getCoordinates(),objectStack)};ol.format.GPX.writeWpt_=function(node,feature,objectStack){var options=(objectStack[0]);var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");context.properties=feature.getProperties();var geometry=feature.getGeometry();if(goog.isDef(geometry)){goog.asserts.assertInstanceof(geometry,ol.geom.Point,"geometry should be an ol.geom.Point");geometry=(ol.format.Feature.transformWithOptions(geometry,true,options));context.geometryLayout=geometry.getLayout();ol.format.GPX.writeWptType_(node,geometry.getCoordinates(),objectStack)}};ol.format.GPX.LINK_SEQUENCE_=["text","type"];ol.format.GPX.LINK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)});ol.format.GPX.RTE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","rtept"]);ol.format.GPX.RTE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),rtept:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeWptType_))});ol.format.GPX.TRK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","trkseg"]);ol.format.GPX.TRK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),trkseg:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeTrkSeg_))});ol.format.GPX.TRKSEG_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("trkpt");ol.format.GPX.TRKSEG_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.xml.makeChildAppender(ol.format.GPX.writeWptType_)});ol.format.GPX.WPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]);ol.format.GPX.WPT_TYPE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),time:ol.xml.makeChildAppender(ol.format.XSD.writeDateTimeTextNode),magvar:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),geoidheight:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),sym:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),fix:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),sat:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),hdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),vdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),pdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),ageofdgpsdata:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),dgpsid:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode)});ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_={Point:"wpt",LineString:"rte",MultiLineString:"trk"};ol.format.GPX.GPX_NODE_FACTORY_=function(value,objectStack,opt_nodeName){goog.asserts.assertInstanceof(value,ol.Feature,"value should be an ol.Feature");var geometry=value.getGeometry();if(goog.isDef(geometry)){var parentNode=objectStack[objectStack.length-1].node;goog.asserts.assert(ol.xml.isNode(parentNode),"parentNode should be an XML node");return ol.xml.createElementNS(parentNode.namespaceURI,ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_[geometry.getType()])}};ol.format.GPX.GPX_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeChildAppender(ol.format.GPX.writeRte_),trk:ol.xml.makeChildAppender(ol.format.GPX.writeTrk_),wpt:ol.xml.makeChildAppender(ol.format.GPX.writeWpt_)});ol.format.GPX.prototype.writeFeatures;ol.format.GPX.prototype.writeFeaturesNode=function(features,opt_options){opt_options=this.adaptOptions(opt_options);var gpx=ol.xml.createElementNS("http://www.topografix.com/GPX/1/1","gpx");ol.xml.pushSerializeAndPop(({node:gpx}),ol.format.GPX.GPX_SERIALIZERS_,ol.format.GPX.GPX_NODE_FACTORY_,features,[opt_options]);return gpx};goog.provide("goog.string.newlines");goog.provide("goog.string.newlines.Line");goog.require("goog.array");goog.string.newlines.splitLines=function(str,opt_keepNewlines){var lines=goog.string.newlines.getLines(str);return goog.array.map(lines,function(line){return opt_keepNewlines?line.getFullLine():line.getContent()})};goog.string.newlines.Line=function(string,startLineIndex,endContentIndex,endLineIndex){this.string=string;this.startLineIndex=startLineIndex;this.endContentIndex=endContentIndex;this.endLineIndex=endLineIndex};goog.string.newlines.Line.prototype.getContent=function(){return this.string.substring(this.startLineIndex,this.endContentIndex)};goog.string.newlines.Line.prototype.getFullLine=function(){return this.string.substring(this.startLineIndex,this.endLineIndex)};goog.string.newlines.Line.prototype.getNewline=function(){return this.string.substring(this.endContentIndex,this.endLineIndex)};goog.string.newlines.getLines=function(str){var re=RegExp("\r\n|\r|\n","g");var sliceIndex=0;var result;var lines=[];while(result=re.exec(str)){var line=new goog.string.newlines.Line(str,sliceIndex,result.index,result.index+result[0].length);lines.push(line);sliceIndex=re.lastIndex}if(sliceIndex<str.length){var line=new goog.string.newlines.Line(str,sliceIndex,str.length,str.length);lines.push(line)}return lines};goog.provide("ol.format.TextFeature");goog.require("goog.asserts");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");ol.format.TextFeature=function(){goog.base(this)};goog.inherits(ol.format.TextFeature,ol.format.Feature);ol.format.TextFeature.prototype.getText_=function(source){if(goog.isString(source)){return source}else{goog.asserts.fail();return""}};ol.format.TextFeature.prototype.getType=function(){return ol.format.FormatType.TEXT};ol.format.TextFeature.prototype.readFeature=function(source,opt_options){return this.readFeatureFromText(this.getText_(source),this.adaptOptions(opt_options))};ol.format.TextFeature.prototype.readFeatureFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readFeatures=function(source,opt_options){return this.readFeaturesFromText(this.getText_(source),this.adaptOptions(opt_options))};ol.format.TextFeature.prototype.readFeaturesFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readGeometry=function(source,opt_options){return this.readGeometryFromText(this.getText_(source),this.adaptOptions(opt_options))};ol.format.TextFeature.prototype.readGeometryFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readProjection=function(source){return this.readProjectionFromText(this.getText_(source))};ol.format.TextFeature.prototype.readProjectionFromText=function(text){return this.defaultDataProjection};ol.format.TextFeature.prototype.writeFeature=function(feature,opt_options){return this.writeFeatureText(feature,this.adaptOptions(opt_options))};ol.format.TextFeature.prototype.writeFeatureText=goog.abstractMethod;ol.format.TextFeature.prototype.writeFeatures=function(features,opt_options){return this.writeFeaturesText(features,this.adaptOptions(opt_options))};ol.format.TextFeature.prototype.writeFeaturesText=goog.abstractMethod;ol.format.TextFeature.prototype.writeGeometry=function(geometry,opt_options){return this.writeGeometryText(geometry,this.adaptOptions(opt_options))};ol.format.TextFeature.prototype.writeGeometryText=goog.abstractMethod;goog.provide("ol.format.IGC");goog.provide("ol.format.IGCZ");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.newlines");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.proj");ol.format.IGCZ={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"};ol.format.IGC=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.altitudeMode_=goog.isDef(options.altitudeMode)?options.altitudeMode:ol.format.IGCZ.NONE};goog.inherits(ol.format.IGC,ol.format.TextFeature);ol.format.IGC.EXTENSIONS_=[".igc"];ol.format.IGC.B_RECORD_RE_=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/;ol.format.IGC.H_RECORD_RE_=/^H.([A-Z]{3}).*?:(.*)/;ol.format.IGC.HFDTE_RECORD_RE_=/^HFDTE(\d{2})(\d{2})(\d{2})/;ol.format.IGC.prototype.getExtensions=function(){return ol.format.IGC.EXTENSIONS_};ol.format.IGC.prototype.readFeature;ol.format.IGC.prototype.readFeatureFromText=function(text,opt_options){var altitudeMode=this.altitudeMode_;var lines=goog.string.newlines.splitLines(text);var properties={};var flatCoordinates=[];var year=2000;var month=0;var day=1;var i,ii;for(i=0,ii=lines.length;i<ii;++i){var line=lines[i];var m;if(line.charAt(0)=="B"){m=ol.format.IGC.B_RECORD_RE_.exec(line);if(m){var hour=parseInt(m[1],10);var minute=parseInt(m[2],10);var second=parseInt(m[3],10);var y=parseInt(m[4],10)+parseInt(m[5],10)/60000;if(m[6]=="S"){y=-y}var x=parseInt(m[7],10)+parseInt(m[8],10)/60000;if(m[9]=="W"){x=-x}flatCoordinates.push(x,y);if(altitudeMode!=ol.format.IGCZ.NONE){var z;if(altitudeMode==ol.format.IGCZ.GPS){z=parseInt(m[11],10)}else{if(altitudeMode==ol.format.IGCZ.BAROMETRIC){z=parseInt(m[12],10)}else{goog.asserts.fail();z=0}}flatCoordinates.push(z)}var dateTime=Date.UTC(year,month,day,hour,minute,second);flatCoordinates.push(dateTime/1000)}}else{if(line.charAt(0)=="H"){m=ol.format.IGC.HFDTE_RECORD_RE_.exec(line);if(m){day=parseInt(m[1],10);month=parseInt(m[2],10)-1;year=2000+parseInt(m[3],10)}else{m=ol.format.IGC.H_RECORD_RE_.exec(line);if(m){properties[m[1]]=goog.string.trim(m[2]);m=ol.format.IGC.HFDTE_RECORD_RE_.exec(line)}}}}}if(flatCoordinates.length===0){return null}var lineString=new ol.geom.LineString(null);var layout=altitudeMode==ol.format.IGCZ.NONE?ol.geom.GeometryLayout.XYM:ol.geom.GeometryLayout.XYZM;lineString.setFlatCoordinates(layout,flatCoordinates);var feature=new ol.Feature(ol.format.Feature.transformWithOptions(lineString,false,opt_options));feature.setProperties(properties);return feature};ol.format.IGC.prototype.readFeatures;ol.format.IGC.prototype.readFeaturesFromText=function(text,opt_options){var feature=this.readFeatureFromText(text,opt_options);if(!goog.isNull(feature)){return[feature]}else{return[]}};ol.format.IGC.prototype.readProjection;goog.provide("goog.Uri");goog.provide("goog.Uri.QueryData");goog.require("goog.array");goog.require("goog.string");goog.require("goog.structs");goog.require("goog.structs.Map");goog.require("goog.uri.utils");goog.require("goog.uri.utils.ComponentIndex");goog.require("goog.uri.utils.StandardQueryParam");goog.Uri=function(opt_uri,opt_ignoreCase){this.scheme_="";this.userInfo_="";this.domain_="";this.port_=null;this.path_="";this.fragment_="";this.isReadOnly_=false;this.ignoreCase_=false;this.queryData_;var m;if(opt_uri instanceof goog.Uri){this.ignoreCase_=goog.isDef(opt_ignoreCase)?opt_ignoreCase:opt_uri.getIgnoreCase();this.setScheme(opt_uri.getScheme());this.setUserInfo(opt_uri.getUserInfo());this.setDomain(opt_uri.getDomain());this.setPort(opt_uri.getPort());this.setPath(opt_uri.getPath());this.setQueryData(opt_uri.getQueryData().clone());this.setFragment(opt_uri.getFragment())}else{if(opt_uri&&(m=goog.uri.utils.split(String(opt_uri)))){this.ignoreCase_=!!opt_ignoreCase;this.setScheme(m[goog.uri.utils.ComponentIndex.SCHEME]||"",true);this.setUserInfo(m[goog.uri.utils.ComponentIndex.USER_INFO]||"",true);this.setDomain(m[goog.uri.utils.ComponentIndex.DOMAIN]||"",true);this.setPort(m[goog.uri.utils.ComponentIndex.PORT]);this.setPath(m[goog.uri.utils.ComponentIndex.PATH]||"",true);this.setQueryData(m[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",true);this.setFragment(m[goog.uri.utils.ComponentIndex.FRAGMENT]||"",true)}else{this.ignoreCase_=!!opt_ignoreCase;this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_)}}};goog.Uri.preserveParameterTypesCompatibilityFlag=false;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;goog.Uri.prototype.toString=function(){var out=[];var scheme=this.getScheme();if(scheme){out.push(goog.Uri.encodeSpecialChars_(scheme,goog.Uri.reDisallowedInSchemeOrUserInfo_,true),":")}var domain=this.getDomain();if(domain){out.push("//");var userInfo=this.getUserInfo();if(userInfo){out.push(goog.Uri.encodeSpecialChars_(userInfo,goog.Uri.reDisallowedInSchemeOrUserInfo_,true),"@")}out.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(domain)));var port=this.getPort();if(port!=null){out.push(":",String(port))}}var path=this.getPath();if(path){if(this.hasDomain()&&path.charAt(0)!="/"){out.push("/")}out.push(goog.Uri.encodeSpecialChars_(path,path.charAt(0)=="/"?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,true))}var query=this.getEncodedQuery();if(query){out.push("?",query)}var fragment=this.getFragment();if(fragment){out.push("#",goog.Uri.encodeSpecialChars_(fragment,goog.Uri.reDisallowedInFragment_))}return out.join("")};goog.Uri.prototype.resolve=function(relativeUri){var absoluteUri=this.clone();var overridden=relativeUri.hasScheme();if(overridden){absoluteUri.setScheme(relativeUri.getScheme())}else{overridden=relativeUri.hasUserInfo()}if(overridden){absoluteUri.setUserInfo(relativeUri.getUserInfo())}else{overridden=relativeUri.hasDomain()}if(overridden){absoluteUri.setDomain(relativeUri.getDomain())}else{overridden=relativeUri.hasPort()}var path=relativeUri.getPath();if(overridden){absoluteUri.setPort(relativeUri.getPort())}else{overridden=relativeUri.hasPath();if(overridden){if(path.charAt(0)!="/"){if(this.hasDomain()&&!this.hasPath()){path="/"+path}else{var lastSlashIndex=absoluteUri.getPath().lastIndexOf("/");if(lastSlashIndex!=-1){path=absoluteUri.getPath().substr(0,lastSlashIndex+1)+path}}}path=goog.Uri.removeDotSegments(path)}}if(overridden){absoluteUri.setPath(path)}else{overridden=relativeUri.hasQuery()}if(overridden){absoluteUri.setQueryData(relativeUri.getDecodedQuery())}else{overridden=relativeUri.hasFragment()}if(overridden){absoluteUri.setFragment(relativeUri.getFragment())}return absoluteUri};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(newScheme,opt_decode){this.enforceReadOnly();this.scheme_=opt_decode?goog.Uri.decodeOrEmpty_(newScheme,true):newScheme;if(this.scheme_){this.scheme_=this.scheme_.replace(/:$/,"")}return this};goog.Uri.prototype.hasScheme=function(){return !!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};goog.Uri.prototype.setUserInfo=function(newUserInfo,opt_decode){this.enforceReadOnly();this.userInfo_=opt_decode?goog.Uri.decodeOrEmpty_(newUserInfo):newUserInfo;return this};goog.Uri.prototype.hasUserInfo=function(){return !!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(newDomain,opt_decode){this.enforceReadOnly();this.domain_=opt_decode?goog.Uri.decodeOrEmpty_(newDomain,true):newDomain;return this};goog.Uri.prototype.hasDomain=function(){return !!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};goog.Uri.prototype.setPort=function(newPort){this.enforceReadOnly();if(newPort){newPort=Number(newPort);if(isNaN(newPort)||newPort<0){throw Error("Bad port number "+newPort)}this.port_=newPort}else{this.port_=null}return this};goog.Uri.prototype.hasPort=function(){return this.port_!=null};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(newPath,opt_decode){this.enforceReadOnly();this.path_=opt_decode?goog.Uri.decodeOrEmpty_(newPath,true):newPath;return this};goog.Uri.prototype.hasPath=function(){return !!this.path_};goog.Uri.prototype.hasQuery=function(){return this.queryData_.toString()!==""};goog.Uri.prototype.setQueryData=function(queryData,opt_decode){this.enforceReadOnly();if(queryData instanceof goog.Uri.QueryData){this.queryData_=queryData;this.queryData_.setIgnoreCase(this.ignoreCase_)}else{if(!opt_decode){queryData=goog.Uri.encodeSpecialChars_(queryData,goog.Uri.reDisallowedInQuery_)}this.queryData_=new goog.Uri.QueryData(queryData,null,this.ignoreCase_)}return this};goog.Uri.prototype.setQuery=function(newQuery,opt_decode){return this.setQueryData(newQuery,opt_decode)};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(key,value){this.enforceReadOnly();this.queryData_.set(key,value);return this};goog.Uri.prototype.setParameterValues=function(key,values){this.enforceReadOnly();if(!goog.isArray(values)){values=[String(values)]}this.queryData_.setValues(key,values);return this};goog.Uri.prototype.getParameterValues=function(name){return this.queryData_.getValues(name)};goog.Uri.prototype.getParameterValue=function(paramName){return(this.queryData_.get(paramName))};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(newFragment,opt_decode){this.enforceReadOnly();this.fragment_=opt_decode?goog.Uri.decodeOrEmpty_(newFragment):newFragment;return this};goog.Uri.prototype.hasFragment=function(){return !!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(uri2){return((!this.hasDomain()&&!uri2.hasDomain())||this.getDomain()==uri2.getDomain())&&((!this.hasPort()&&!uri2.hasPort())||this.getPort()==uri2.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(key){this.enforceReadOnly();this.queryData_.remove(key);return this};goog.Uri.prototype.setReadOnly=function(isReadOnly){this.isReadOnly_=isReadOnly;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_){throw Error("Tried to modify a read-only Uri")}};goog.Uri.prototype.setIgnoreCase=function(ignoreCase){this.ignoreCase_=ignoreCase;if(this.queryData_){this.queryData_.setIgnoreCase(ignoreCase)}return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};goog.Uri.parse=function(uri,opt_ignoreCase){return uri instanceof goog.Uri?uri.clone():new goog.Uri(uri,opt_ignoreCase)};goog.Uri.create=function(opt_scheme,opt_userInfo,opt_domain,opt_port,opt_path,opt_query,opt_fragment,opt_ignoreCase){var uri=new goog.Uri(null,opt_ignoreCase);opt_scheme&&uri.setScheme(opt_scheme);opt_userInfo&&uri.setUserInfo(opt_userInfo);opt_domain&&uri.setDomain(opt_domain);opt_port&&uri.setPort(opt_port);opt_path&&uri.setPath(opt_path);opt_query&&uri.setQueryData(opt_query);opt_fragment&&uri.setFragment(opt_fragment);return uri};goog.Uri.resolve=function(base,rel){if(!(base instanceof goog.Uri)){base=goog.Uri.parse(base)}if(!(rel instanceof goog.Uri)){rel=goog.Uri.parse(rel)}return base.resolve(rel)};goog.Uri.removeDotSegments=function(path){if(path==".."||path=="."){return""}else{if(!goog.string.contains(path,"./")&&!goog.string.contains(path,"/.")){return path}else{var leadingSlash=goog.string.startsWith(path,"/");var segments=path.split("/");var out=[];for(var pos=0;pos<segments.length;){var segment=segments[pos++];if(segment=="."){if(leadingSlash&&pos==segments.length){out.push("")}}else{if(segment==".."){if(out.length>1||out.length==1&&out[0]!=""){out.pop()}if(leadingSlash&&pos==segments.length){out.push("")}}else{out.push(segment);leadingSlash=true}}}return out.join("/")}}};goog.Uri.decodeOrEmpty_=function(val,opt_preserveReserved){if(!val){return""}return opt_preserveReserved?decodeURI(val.replace(/%25/g,"%2525")):decodeURIComponent(val)};goog.Uri.encodeSpecialChars_=function(unescapedPart,extra,opt_removeDoubleEncoding){if(goog.isString(unescapedPart)){var encoded=encodeURI(unescapedPart).replace(extra,goog.Uri.encodeChar_);if(opt_removeDoubleEncoding){encoded=goog.Uri.removeDoubleEncoding_(encoded)}return encoded}return null};goog.Uri.encodeChar_=function(ch){var n=ch.charCodeAt(0);return"%"+((n>>4)&15).toString(16)+(n&15).toString(16)};goog.Uri.removeDoubleEncoding_=function(doubleEncodedString){return doubleEncodedString.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(uri1String,uri2String){var pieces1=goog.uri.utils.split(uri1String);var pieces2=goog.uri.utils.split(uri2String);return pieces1[goog.uri.utils.ComponentIndex.DOMAIN]==pieces2[goog.uri.utils.ComponentIndex.DOMAIN]&&pieces1[goog.uri.utils.ComponentIndex.PORT]==pieces2[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(opt_query,opt_uri,opt_ignoreCase){this.keyMap_=null;this.count_=null;this.encodedQuery_=opt_query||null;this.ignoreCase_=!!opt_ignoreCase};goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_){this.keyMap_=new goog.structs.Map();this.count_=0;if(this.encodedQuery_){var self=this;goog.uri.utils.parseQueryData(this.encodedQuery_,function(name,value){self.add(goog.string.urlDecode(name),value)})}}};goog.Uri.QueryData.createFromMap=function(map,opt_uri,opt_ignoreCase){var keys=goog.structs.getKeys(map);if(typeof keys=="undefined"){throw Error("Keys are undefined")}var queryData=new goog.Uri.QueryData(null,null,opt_ignoreCase);var values=goog.structs.getValues(map);for(var i=0;i<keys.length;i++){var key=keys[i];var value=values[i];if(!goog.isArray(value)){queryData.add(key,value)}else{queryData.setValues(key,value)}}return queryData};goog.Uri.QueryData.createFromKeysValues=function(keys,values,opt_uri,opt_ignoreCase){if(keys.length!=values.length){throw Error("Mismatched lengths for keys/values")}var queryData=new goog.Uri.QueryData(null,null,opt_ignoreCase);for(var i=0;i<keys.length;i++){queryData.add(keys[i],values[i])}return queryData};goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};goog.Uri.QueryData.prototype.add=function(key,value){this.ensureKeyMapInitialized_();this.invalidateCache_();key=this.getKeyName_(key);var values=this.keyMap_.get(key);if(!values){this.keyMap_.set(key,(values=[]))}values.push(value);this.count_++;return this};goog.Uri.QueryData.prototype.remove=function(key){this.ensureKeyMapInitialized_();key=this.getKeyName_(key);if(this.keyMap_.containsKey(key)){this.invalidateCache_();this.count_-=this.keyMap_.get(key).length;return this.keyMap_.remove(key)}return false};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return this.count_==0};goog.Uri.QueryData.prototype.containsKey=function(key){this.ensureKeyMapInitialized_();key=this.getKeyName_(key);return this.keyMap_.containsKey(key)};goog.Uri.QueryData.prototype.containsValue=function(value){var vals=this.getValues();return goog.array.contains(vals,value)};goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();var vals=(this.keyMap_.getValues());var keys=this.keyMap_.getKeys();var rv=[];for(var i=0;i<keys.length;i++){var val=vals[i];for(var j=0;j<val.length;j++){rv.push(keys[i])}}return rv};goog.Uri.QueryData.prototype.getValues=function(opt_key){this.ensureKeyMapInitialized_();var rv=[];if(goog.isString(opt_key)){if(this.containsKey(opt_key)){rv=goog.array.concat(rv,this.keyMap_.get(this.getKeyName_(opt_key)))}}else{var values=this.keyMap_.getValues();for(var i=0;i<values.length;i++){rv=goog.array.concat(rv,values[i])}}return rv};goog.Uri.QueryData.prototype.set=function(key,value){this.ensureKeyMapInitialized_();this.invalidateCache_();key=this.getKeyName_(key);if(this.containsKey(key)){this.count_-=this.keyMap_.get(key).length}this.keyMap_.set(key,[value]);this.count_++;return this};goog.Uri.QueryData.prototype.get=function(key,opt_default){var values=key?this.getValues(key):[];if(goog.Uri.preserveParameterTypesCompatibilityFlag){return values.length>0?values[0]:opt_default}else{return values.length>0?String(values[0]):opt_default}};goog.Uri.QueryData.prototype.setValues=function(key,values){this.remove(key);if(values.length>0){this.invalidateCache_();this.keyMap_.set(this.getKeyName_(key),goog.array.clone(values));this.count_+=values.length}};goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_){return this.encodedQuery_}if(!this.keyMap_){return""}var sb=[];var keys=this.keyMap_.getKeys();for(var i=0;i<keys.length;i++){var key=keys[i];var encodedKey=goog.string.urlEncode(key);var val=this.getValues(key);for(var j=0;j<val.length;j++){var param=encodedKey;if(val[j]!==""){param+="="+goog.string.urlEncode(val[j])}sb.push(param)}}return this.encodedQuery_=sb.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(keys){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(value,key){if(!goog.array.contains(keys,key)){this.remove(key)}},this);return this};goog.Uri.QueryData.prototype.clone=function(){var rv=new goog.Uri.QueryData();rv.encodedQuery_=this.encodedQuery_;if(this.keyMap_){rv.keyMap_=this.keyMap_.clone();rv.count_=this.count_}return rv};goog.Uri.QueryData.prototype.getKeyName_=function(arg){var keyName=String(arg);if(this.ignoreCase_){keyName=keyName.toLowerCase()}return keyName};goog.Uri.QueryData.prototype.setIgnoreCase=function(ignoreCase){var resetKeys=ignoreCase&&!this.ignoreCase_;if(resetKeys){this.ensureKeyMapInitialized_();this.invalidateCache_();this.keyMap_.forEach(function(value,key){var lowerCase=key.toLowerCase();if(key!=lowerCase){this.remove(key);this.setValues(lowerCase,value)}},this)}this.ignoreCase_=ignoreCase};goog.Uri.QueryData.prototype.extend=function(var_args){for(var i=0;i<arguments.length;i++){var data=arguments[i];goog.structs.forEach(data,function(value,key){this.add(key,value)},this)}};goog.provide("ol.style.Text");ol.style.Text=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.font_=options.font;this.rotation_=options.rotation;this.scale_=options.scale;this.text_=options.text;this.textAlign_=options.textAlign;this.textBaseline_=options.textBaseline;this.fill_=goog.isDef(options.fill)?options.fill:null;this.stroke_=goog.isDef(options.stroke)?options.stroke:null;this.offsetX_=goog.isDef(options.offsetX)?options.offsetX:0;this.offsetY_=goog.isDef(options.offsetY)?options.offsetY:0};ol.style.Text.prototype.getFont=function(){return this.font_};ol.style.Text.prototype.getOffsetX=function(){return this.offsetX_};ol.style.Text.prototype.getOffsetY=function(){return this.offsetY_};ol.style.Text.prototype.getFill=function(){return this.fill_};ol.style.Text.prototype.getRotation=function(){return this.rotation_};ol.style.Text.prototype.getScale=function(){return this.scale_};ol.style.Text.prototype.getStroke=function(){return this.stroke_};ol.style.Text.prototype.getText=function(){return this.text_};ol.style.Text.prototype.getTextAlign=function(){return this.textAlign_};ol.style.Text.prototype.getTextBaseline=function(){return this.textBaseline_};ol.style.Text.prototype.setFont=function(font){this.font_=font};ol.style.Text.prototype.setOffsetX=function(offsetX){this.offsetX_=offsetX};ol.style.Text.prototype.setOffsetY=function(offsetY){this.offsetY_=offsetY};ol.style.Text.prototype.setFill=function(fill){this.fill_=fill};ol.style.Text.prototype.setRotation=function(rotation){this.rotation_=rotation};ol.style.Text.prototype.setScale=function(scale){this.scale_=scale};ol.style.Text.prototype.setStroke=function(stroke){this.stroke_=stroke};ol.style.Text.prototype.setText=function(text){this.text_=text};ol.style.Text.prototype.setTextAlign=function(textAlign){this.textAlign_=textAlign};ol.style.Text.prototype.setTextBaseline=function(textBaseline){this.textBaseline_=textBaseline};goog.provide("ol.format.KML");goog.require("goog.Uri");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.math");goog.require("goog.object");goog.require("goog.string");goog.require("ol.Feature");goog.require("ol.FeatureStyleFunction");goog.require("ol.color");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.style.Fill");goog.require("ol.style.Icon");goog.require("ol.style.IconAnchorUnits");goog.require("ol.style.IconOrigin");goog.require("ol.style.Image");goog.require("ol.style.Stroke");goog.require("ol.style.Style");goog.require("ol.style.Text");goog.require("ol.xml");ol.format.KMLVec2_;ol.format.KMLGxTrackObject_;ol.format.KML=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.defaultStyle_=goog.isDef(options.defaultStyle)?options.defaultStyle:ol.format.KML.DEFAULT_STYLE_ARRAY_;this.extractStyles_=goog.isDef(options.extractStyles)?options.extractStyles:true;this.sharedStyles_={}};goog.inherits(ol.format.KML,ol.format.XMLFeature);ol.format.KML.EXTENSIONS_=[".kml"];ol.format.KML.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"];ol.format.KML.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];ol.format.KML.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd";ol.format.KML.DEFAULT_COLOR_=[255,255,255,1];ol.format.KML.DEFAULT_FILL_STYLE_=new ol.style.Fill({color:ol.format.KML.DEFAULT_COLOR_});ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2];ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_=[64,64];ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";ol.format.KML.DEFAULT_IMAGE_STYLE_=new ol.style.Icon({anchor:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:0.5,size:ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,src:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_});ol.format.KML.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:ol.format.KML.DEFAULT_COLOR_,width:1});ol.format.KML.DEFAULT_TEXT_STYLE_=new ol.style.Text({font:"normal 16px Helvetica",fill:ol.format.KML.DEFAULT_FILL_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,scale:1});ol.format.KML.DEFAULT_STYLE_=new ol.style.Style({fill:ol.format.KML.DEFAULT_FILL_STYLE_,image:ol.format.KML.DEFAULT_IMAGE_STYLE_,text:ol.format.KML.DEFAULT_TEXT_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,zIndex:0});ol.format.KML.DEFAULT_STYLE_ARRAY_=[ol.format.KML.DEFAULT_STYLE_];ol.format.KML.ICON_ANCHOR_UNITS_MAP_={fraction:ol.style.IconAnchorUnits.FRACTION,pixels:ol.style.IconAnchorUnits.PIXELS};ol.format.KML.createFeatureStyleFunction_=function(style,styleUrl,defaultStyle,sharedStyles){return(function(resolution){if(goog.isDef(style)){return style}if(goog.isDef(styleUrl)){return ol.format.KML.findStyle_(styleUrl,defaultStyle,sharedStyles)}return defaultStyle})};ol.format.KML.findStyle_=function(styleValue,defaultStyle,sharedStyles){if(goog.isArray(styleValue)){return styleValue}else{if(goog.isString(styleValue)){if(!(styleValue in sharedStyles)&&("#"+styleValue in sharedStyles)){styleValue="#"+styleValue}return ol.format.KML.findStyle_(sharedStyles[styleValue],defaultStyle,sharedStyles)}else{return defaultStyle}}};ol.format.KML.readColor_=function(node){var s=ol.xml.getAllTextContent(node,false);var m=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(s);if(m){var hexColor=m[1];return[parseInt(hexColor.substr(6,2),16),parseInt(hexColor.substr(4,2),16),parseInt(hexColor.substr(2,2),16),parseInt(hexColor.substr(0,2),16)/255]}else{return undefined}};ol.format.KML.readFlatCoordinates_=function(node){var s=ol.xml.getAllTextContent(node,false);var flatCoordinates=[];var re=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var m;while((m=re.exec(s))){var x=parseFloat(m[1]);var y=parseFloat(m[2]);var z=m[3]?parseFloat(m[3]):0;flatCoordinates.push(x,y,z);s=s.substr(m[0].length)}if(s!==""){return undefined}return flatCoordinates};ol.format.KML.readStyleUrl_=function(node){var s=goog.string.trim(ol.xml.getAllTextContent(node,false));if(goog.isDefAndNotNull(node.baseURI)){return goog.Uri.resolve(node.baseURI,s).toString()}else{return s}};ol.format.KML.readURI_=function(node){var s=ol.xml.getAllTextContent(node,false);if(goog.isDefAndNotNull(node.baseURI)){return goog.Uri.resolve(node.baseURI,goog.string.trim(s)).toString()}else{return goog.string.trim(s)}};ol.format.KML.readVec2_=function(node){var xunits=node.getAttribute("xunits");var yunits=node.getAttribute("yunits");return{x:parseFloat(node.getAttribute("x")),xunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[xunits],y:parseFloat(node.getAttribute("y")),yunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[yunits]}};ol.format.KML.readScale_=function(node){var number=ol.format.XSD.readDecimal(node);if(goog.isDef(number)){return Math.sqrt(number)}else{return undefined}};ol.format.KML.readStyleMapValue_=function(node,objectStack){return ol.xml.pushParseAndPop((undefined),ol.format.KML.STYLE_MAP_PARSERS_,node,objectStack)};ol.format.KML.IconStyleParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be an ELEMENT");goog.asserts.assert(node.localName=="IconStyle","localName should be IconStyle");var object=ol.xml.pushParseAndPop({},ol.format.KML.ICON_STYLE_PARSERS_,node,objectStack);if(!goog.isDef(object)){return}var styleObject=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isObject(styleObject),"styleObject should be an Object");var IconObject=(goog.object.get(object,"Icon",{}));var src;var href=(IconObject.href);if(goog.isDef(href)){src=href}else{src=ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_}var anchor,anchorXUnits,anchorYUnits;var hotSpot=(object.hotSpot);if(goog.isDef(hotSpot)){anchor=[hotSpot.x,hotSpot.y];anchorXUnits=hotSpot.xunits;anchorYUnits=hotSpot.yunits}else{if(src===ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){anchor=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_;anchorXUnits=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_;anchorYUnits=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_}else{if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(src)){anchor=[0.5,0];anchorXUnits=ol.style.IconAnchorUnits.FRACTION;anchorYUnits=ol.style.IconAnchorUnits.FRACTION}}}var offset;var x=(IconObject.x);var y=(IconObject.y);if(goog.isDef(x)&&goog.isDef(y)){offset=[x,y]}var size;var w=(IconObject.w);var h=(IconObject.h);if(goog.isDef(w)&&goog.isDef(h)){size=[w,h]}var rotation;var heading=(object.heading);if(goog.isDef(heading)){rotation=goog.math.toRadians(heading)}var scale=(object.scale);if(src==ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){size=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_}var imageStyle=new ol.style.Icon({anchor:anchor,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:anchorXUnits,anchorYUnits:anchorYUnits,crossOrigin:"anonymous",offset:offset,offsetOrigin:ol.style.IconOrigin.BOTTOM_LEFT,rotation:rotation,scale:scale,size:size,src:src});styleObject.imageStyle=imageStyle};ol.format.KML.LabelStyleParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LabelStyle","localName should be LabelStyle");var object=ol.xml.pushParseAndPop({},ol.format.KML.LABEL_STYLE_PARSERS_,node,objectStack);if(!goog.isDef(object)){return}var styleObject=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(styleObject),"styleObject should be an Object");var textStyle=new ol.style.Text({fill:new ol.style.Fill({color:(goog.object.get(object,"color",ol.format.KML.DEFAULT_COLOR_))}),scale:(object.scale)});styleObject.textStyle=textStyle};ol.format.KML.LineStyleParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LineStyle","localName should be LineStyle");var object=ol.xml.pushParseAndPop({},ol.format.KML.LINE_STYLE_PARSERS_,node,objectStack);if(!goog.isDef(object)){return}var styleObject=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(styleObject),"styleObject should be an Object");var strokeStyle=new ol.style.Stroke({color:(goog.object.get(object,"color",ol.format.KML.DEFAULT_COLOR_)),width:(goog.object.get(object,"width",1))});styleObject.strokeStyle=strokeStyle};ol.format.KML.PolyStyleParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="PolyStyle","localName should be PolyStyle");var object=ol.xml.pushParseAndPop({},ol.format.KML.POLY_STYLE_PARSERS_,node,objectStack);if(!goog.isDef(object)){return}var styleObject=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(styleObject),"styleObject should be an Object");var fillStyle=new ol.style.Fill({color:(goog.object.get(object,"color",ol.format.KML.DEFAULT_COLOR_))});styleObject.fillStyle=fillStyle;var fill=(object.fill);if(goog.isDef(fill)){styleObject.fill=fill}var outline=(object.outline);if(goog.isDef(outline)){styleObject.outline=outline}};ol.format.KML.readFlatLinearRing_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LinearRing","localName should be LinearRing");return(ol.xml.pushParseAndPop(null,ol.format.KML.FLAT_LINEAR_RING_PARSERS_,node,objectStack))};ol.format.KML.gxCoordParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,node.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(node.localName=="coord","localName should be coord");var gxTrackObject=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isObject(gxTrackObject),"gxTrackObject should be an Object");var flatCoordinates=gxTrackObject.flatCoordinates;var s=ol.xml.getAllTextContent(node,false);var re=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var m=re.exec(s);if(m){var x=parseFloat(m[1]);var y=parseFloat(m[2]);var z=parseFloat(m[3]);flatCoordinates.push(x,y,z,0)}else{flatCoordinates.push(0,0,0,0)}};ol.format.KML.readGxMultiTrack_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,node.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(node.localName=="MultiTrack","localName should be MultiTrack");var lineStrings=ol.xml.pushParseAndPop(([]),ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_,node,objectStack);if(!goog.isDef(lineStrings)){return undefined}var multiLineString=new ol.geom.MultiLineString(null);multiLineString.setLineStrings(lineStrings);return multiLineString};ol.format.KML.readGxTrack_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,node.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(node.localName=="Track","localName should be Track");var gxTrackObject=ol.xml.pushParseAndPop(({flatCoordinates:[],whens:[]}),ol.format.KML.GX_TRACK_PARSERS_,node,objectStack);if(!goog.isDef(gxTrackObject)){return undefined}var flatCoordinates=gxTrackObject.flatCoordinates;var whens=gxTrackObject.whens;goog.asserts.assert(flatCoordinates.length/4==whens.length,"the length of the flatCoordinates array divided by 4 should be the length of the whens array");var i,ii;for(i=0,ii=Math.min(flatCoordinates.length,whens.length);i<ii;++i){flatCoordinates[4*i+3]=whens[i]}var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,flatCoordinates);return lineString};ol.format.KML.readIcon_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Icon","localName should be Icon");var iconObject=ol.xml.pushParseAndPop({},ol.format.KML.ICON_PARSERS_,node,objectStack);if(goog.isDef(iconObject)){return iconObject}else{return null}};ol.format.KML.readFlatCoordinatesFromNode_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return(ol.xml.pushParseAndPop(null,ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_,node,objectStack))};ol.format.KML.readLineString_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LineString","localName should be LineString");var properties=ol.xml.pushParseAndPop(({}),ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,node,objectStack);var flatCoordinates=ol.format.KML.readFlatCoordinatesFromNode_(node,objectStack);if(goog.isDef(flatCoordinates)){var lineString=new ol.geom.LineString(null);lineString.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates);lineString.setProperties(properties);return lineString}else{return undefined}};ol.format.KML.readLinearRing_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="LinearRing","localName should be LinearRing");var properties=ol.xml.pushParseAndPop(({}),ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,node,objectStack);var flatCoordinates=ol.format.KML.readFlatCoordinatesFromNode_(node,objectStack);if(goog.isDef(flatCoordinates)){var polygon=new ol.geom.Polygon(null);polygon.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates,[flatCoordinates.length]);polygon.setProperties(properties);return polygon}else{return undefined}};ol.format.KML.readMultiGeometry_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MultiGeometry","localName should be MultiGeometry");var geometries=ol.xml.pushParseAndPop(([]),ol.format.KML.MULTI_GEOMETRY_PARSERS_,node,objectStack);if(!goog.isDef(geometries)){return null}if(geometries.length===0){return new ol.geom.GeometryCollection(geometries)}var homogeneous=true;var type=geometries[0].getType();var geometry,i,ii;for(i=1,ii=geometries.length;i<ii;++i){geometry=geometries[i];if(geometry.getType()!=type){homogeneous=false;break}}if(homogeneous){var layout;var flatCoordinates;if(type==ol.geom.GeometryType.POINT){var point=geometries[0];goog.asserts.assertInstanceof(point,ol.geom.Point,"point should be an ol.geom.Point");layout=point.getLayout();flatCoordinates=point.getFlatCoordinates();for(i=1,ii=geometries.length;i<ii;++i){geometry=geometries[i];goog.asserts.assertInstanceof(geometry,ol.geom.Point,"geometry should be an ol.geom.Point");goog.asserts.assert(geometry.getLayout()==layout,"geometry layout should be consistent");goog.array.extend(flatCoordinates,geometry.getFlatCoordinates())}var multiPoint=new ol.geom.MultiPoint(null);multiPoint.setFlatCoordinates(layout,flatCoordinates);ol.format.KML.setCommonGeometryProperties_(multiPoint,geometries);return multiPoint}else{if(type==ol.geom.GeometryType.LINE_STRING){var multiLineString=new ol.geom.MultiLineString(null);multiLineString.setLineStrings(geometries);ol.format.KML.setCommonGeometryProperties_(multiLineString,geometries);return multiLineString}else{if(type==ol.geom.GeometryType.POLYGON){var multiPolygon=new ol.geom.MultiPolygon(null);multiPolygon.setPolygons(geometries);ol.format.KML.setCommonGeometryProperties_(multiPolygon,geometries);return multiPolygon}else{if(type==ol.geom.GeometryType.GEOMETRY_COLLECTION){return new ol.geom.GeometryCollection(geometries)}else{goog.asserts.fail("Unexpected type: "+type);return null}}}}}else{return new ol.geom.GeometryCollection(geometries)}};ol.format.KML.readPoint_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Point","localName should be Point");var properties=ol.xml.pushParseAndPop(({}),ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,node,objectStack);var flatCoordinates=ol.format.KML.readFlatCoordinatesFromNode_(node,objectStack);if(goog.isDefAndNotNull(flatCoordinates)){var point=new ol.geom.Point(null);goog.asserts.assert(flatCoordinates.length==3,"flatCoordinates should have a length of 3");point.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates);point.setProperties(properties);return point}else{return undefined}};ol.format.KML.readPolygon_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Polygon","localName should be Polygon");var properties=ol.xml.pushParseAndPop(({}),ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,node,objectStack);var flatLinearRings=ol.xml.pushParseAndPop(([null]),ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_,node,objectStack);if(goog.isDefAndNotNull(flatLinearRings)&&!goog.isNull(flatLinearRings[0])){var polygon=new ol.geom.Polygon(null);var flatCoordinates=flatLinearRings[0];var ends=[flatCoordinates.length];var i,ii;for(i=1,ii=flatLinearRings.length;i<ii;++i){goog.array.extend(flatCoordinates,flatLinearRings[i]);ends.push(flatCoordinates.length)}polygon.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,flatCoordinates,ends);polygon.setProperties(properties);return polygon}else{return undefined}};ol.format.KML.readStyle_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Style","localName should be Style");var styleObject=ol.xml.pushParseAndPop({},ol.format.KML.STYLE_PARSERS_,node,objectStack);if(!goog.isDef(styleObject)){return null}var fillStyle=(goog.object.get(styleObject,"fillStyle",ol.format.KML.DEFAULT_FILL_STYLE_));var fill=(styleObject.fill);if(goog.isDef(fill)&&!fill){fillStyle=null}var imageStyle=(goog.object.get(styleObject,"imageStyle",ol.format.KML.DEFAULT_IMAGE_STYLE_));var textStyle=(goog.object.get(styleObject,"textStyle",ol.format.KML.DEFAULT_TEXT_STYLE_));var strokeStyle=(goog.object.get(styleObject,"strokeStyle",ol.format.KML.DEFAULT_STROKE_STYLE_));var outline=(styleObject.outline);if(goog.isDef(outline)&&!outline){strokeStyle=null}return[new ol.style.Style({fill:fillStyle,image:imageStyle,stroke:strokeStyle,text:textStyle,zIndex:undefined})]};ol.format.KML.setCommonGeometryProperties_=function(multiGeometry,geometries){var ii=geometries.length;var extrudes=new Array(geometries.length);var altitudeModes=new Array(geometries.length);var geometry,i,hasExtrude,hasAltitudeMode;hasExtrude=hasAltitudeMode=false;for(i=0;i<ii;++i){geometry=geometries[i];extrudes[i]=geometry.get("extrude");altitudeModes[i]=geometry.get("altitudeMode");hasExtrude=hasExtrude||goog.isDef(extrudes[i]);hasAltitudeMode=hasAltitudeMode||goog.isDef(altitudeModes[i])}if(hasExtrude){multiGeometry.set("extrude",extrudes)}if(hasAltitudeMode){multiGeometry.set("altitudeMode",altitudeModes)}};ol.format.KML.DataParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Data","localName should be Data");var name=node.getAttribute("name");if(!goog.isNull(name)){var data=ol.xml.pushParseAndPop(undefined,ol.format.KML.DATA_PARSERS_,node,objectStack);if(goog.isDef(data)){var featureObject=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isObject(featureObject),"featureObject should be an Object");featureObject[name]=data}}};ol.format.KML.ExtendedDataParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ExtendedData","localName should be ExtendedData");ol.xml.parseNode(ol.format.KML.EXTENDED_DATA_PARSERS_,node,objectStack)};ol.format.KML.PairDataParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Pair","localName should be Pair");var pairObject=ol.xml.pushParseAndPop({},ol.format.KML.PAIR_PARSERS_,node,objectStack);if(!goog.isDef(pairObject)){return}var key=(pairObject.key);if(goog.isDef(key)&&key=="normal"){var styleUrl=(pairObject.styleUrl);if(goog.isDef(styleUrl)){objectStack[objectStack.length-1]=styleUrl}var Style=(pairObject.Style);if(goog.isDef(Style)){objectStack[objectStack.length-1]=Style}}};ol.format.KML.PlacemarkStyleMapParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="StyleMap","localName should be StyleMap");var styleMapValue=ol.format.KML.readStyleMapValue_(node,objectStack);if(!goog.isDef(styleMapValue)){return}var placemarkObject=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(placemarkObject),"placemarkObject should be an Object");if(goog.isArray(styleMapValue)){placemarkObject.Style=styleMapValue}else{if(goog.isString(styleMapValue)){placemarkObject.styleUrl=styleMapValue}else{goog.asserts.fail("styleMapValue has an unknown type")}}};ol.format.KML.SchemaDataParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="SchemaData","localName should be SchemaData");ol.xml.parseNode(ol.format.KML.SCHEMA_DATA_PARSERS_,node,objectStack)};ol.format.KML.SimpleDataParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="SimpleData","localName should be SimpleData");var name=node.getAttribute("name");if(!goog.isNull(name)){var data=ol.format.XSD.readString(node);var featureObject=(objectStack[objectStack.length-1]);featureObject[name]=data}};ol.format.KML.innerBoundaryIsParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="innerBoundaryIs","localName should be innerBoundaryIs");var flatLinearRing=ol.xml.pushParseAndPop((undefined),ol.format.KML.INNER_BOUNDARY_IS_PARSERS_,node,objectStack);if(goog.isDef(flatLinearRing)){var flatLinearRings=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(flatLinearRings),"flatLinearRings should be an array");goog.asserts.assert(flatLinearRings.length>0,"flatLinearRings array should not be empty");flatLinearRings.push(flatLinearRing)}};ol.format.KML.outerBoundaryIsParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="outerBoundaryIs","localName should be outerBoundaryIs");var flatLinearRing=ol.xml.pushParseAndPop((undefined),ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_,node,objectStack);if(goog.isDef(flatLinearRing)){var flatLinearRings=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isArray(flatLinearRings),"flatLinearRings should be an array");goog.asserts.assert(flatLinearRings.length>0,"flatLinearRings array should not be empty");flatLinearRings[0]=flatLinearRing}};ol.format.KML.LinkParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Link","localName should be Link");ol.xml.parseNode(ol.format.KML.LINK_PARSERS_,node,objectStack)};ol.format.KML.whenParser_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="when","localName should be when");var gxTrackObject=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isObject(gxTrackObject),"gxTrackObject should be an Object");var whens=gxTrackObject.whens;var s=ol.xml.getAllTextContent(node,false);var re=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/;var m=re.exec(s);if(m){var year=parseInt(m[1],10);var month=goog.isDef(m[3])?parseInt(m[3],10)-1:0;var day=goog.isDef(m[5])?parseInt(m[5],10):1;var hour=goog.isDef(m[7])?parseInt(m[7],10):0;var minute=goog.isDef(m[8])?parseInt(m[8],10):0;var second=goog.isDef(m[9])?parseInt(m[9],10):0;var when=Date.UTC(year,month,day,hour,minute,second);if(goog.isDef(m[10])&&m[10]!="Z"){var sign=m[11]=="-"?-1:1;when+=sign*60*parseInt(m[12],10);if(goog.isDef(m[13])){when+=sign*60*60*parseInt(m[13],10)}}whens.push(when)}else{whens.push(0)}};ol.format.KML.DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{value:ol.xml.makeReplacer(ol.format.XSD.readString)});ol.format.KML.EXTENDED_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Data:ol.format.KML.DataParser_,SchemaData:ol.format.KML.SchemaDataParser_});ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{extrude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),altitudeMode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.KML.FLAT_LINEAR_RING_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{innerBoundaryIs:ol.format.KML.innerBoundaryIsParser_,outerBoundaryIs:ol.format.KML.outerBoundaryIsParser_});ol.format.KML.GX_TRACK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{when:ol.format.KML.whenParser_},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{coord:ol.format.KML.gxCoordParser_}));ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.ICON_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),y:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),w:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),h:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}));ol.format.KML.ICON_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeObjectPropertySetter(ol.format.KML.readIcon_),heading:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),hotSpot:ol.xml.makeObjectPropertySetter(ol.format.KML.readVec2_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.INNER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.LABEL_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.LINE_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),width:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.MULTI_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeArrayPusher(ol.format.KML.readLineString_),LinearRing:ol.xml.makeArrayPusher(ol.format.KML.readLinearRing_),MultiGeometry:ol.xml.makeArrayPusher(ol.format.KML.readMultiGeometry_),Point:ol.xml.makeArrayPusher(ol.format.KML.readPoint_),Polygon:ol.xml.makeArrayPusher(ol.format.KML.readPolygon_)});ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{Track:ol.xml.makeArrayPusher(ol.format.KML.readGxTrack_)});ol.format.KML.NETWORK_LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,Link:ol.format.KML.LinkParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)});ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.PAIR_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),key:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyleUrl_)});ol.format.KML.PLACEMARK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,MultiGeometry:ol.xml.makeObjectPropertySetter(ol.format.KML.readMultiGeometry_,"geometry"),LineString:ol.xml.makeObjectPropertySetter(ol.format.KML.readLineString_,"geometry"),LinearRing:ol.xml.makeObjectPropertySetter(ol.format.KML.readLinearRing_,"geometry"),Point:ol.xml.makeObjectPropertySetter(ol.format.KML.readPoint_,"geometry"),Polygon:ol.xml.makeObjectPropertySetter(ol.format.KML.readPolygon_,"geometry"),Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),StyleMap:ol.format.KML.PlacemarkStyleMapParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{MultiTrack:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxMultiTrack_,"geometry"),Track:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxTrack_,"geometry")}));ol.format.KML.POLY_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),fill:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),outline:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.SCHEMA_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{SimpleData:ol.format.KML.SimpleDataParser_});ol.format.KML.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.format.KML.IconStyleParser_,LabelStyle:ol.format.KML.LabelStyleParser_,LineStyle:ol.format.KML.LineStyleParser_,PolyStyle:ol.format.KML.PolyStyleParser_});ol.format.KML.STYLE_MAP_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Pair:ol.format.KML.PairDataParser_});ol.format.KML.prototype.getExtensions=function(){return ol.format.KML.EXTENSIONS_};ol.format.KML.prototype.readDocumentOrFolder_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var localName=ol.xml.getLocalName(node);goog.asserts.assert(localName=="Document"||localName=="Folder","localName should be Document or Folder");var parsersNS=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:ol.xml.makeArrayPusher(this.readPlacemark_,this),Style:goog.bind(this.readSharedStyle_,this),StyleMap:goog.bind(this.readSharedStyleMap_,this)});var features=ol.xml.pushParseAndPop(([]),parsersNS,node,objectStack,this);if(goog.isDef(features)){return features}else{return undefined}};ol.format.KML.prototype.readPlacemark_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Placemark","localName should be Placemark");var object=ol.xml.pushParseAndPop({geometry:null},ol.format.KML.PLACEMARK_PARSERS_,node,objectStack);if(!goog.isDef(object)){return undefined}var feature=new ol.Feature();var id=node.getAttribute("id");if(!goog.isNull(id)){feature.setId(id)}var options=(objectStack[0]);var geometry=object.geometry;if(goog.isDefAndNotNull(geometry)){ol.format.Feature.transformWithOptions(geometry,false,options)}feature.setGeometry(geometry);goog.object.remove(object,"geometry");if(this.extractStyles_){var style=object.Style;var styleUrl=object.styleUrl;var styleFunction=ol.format.KML.createFeatureStyleFunction_(style,styleUrl,this.defaultStyle_,this.sharedStyles_);feature.setStyle(styleFunction)}goog.object.remove(object,"Style");feature.setProperties(object);return feature};ol.format.KML.prototype.readSharedStyle_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Style","localName should be Style");var id=node.getAttribute("id");if(!goog.isNull(id)){var style=ol.format.KML.readStyle_(node,objectStack);if(goog.isDef(style)){var styleUri;if(goog.isDefAndNotNull(node.baseURI)){styleUri=goog.Uri.resolve(node.baseURI,"#"+id).toString()}else{styleUri="#"+id}this.sharedStyles_[styleUri]=style}}};ol.format.KML.prototype.readSharedStyleMap_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="StyleMap","localName should be StyleMap");var id=node.getAttribute("id");if(goog.isNull(id)){return}var styleMapValue=ol.format.KML.readStyleMapValue_(node,objectStack);if(!goog.isDef(styleMapValue)){return}var styleUri;if(goog.isDefAndNotNull(node.baseURI)){styleUri=goog.Uri.resolve(node.baseURI,"#"+id).toString()}else{styleUri="#"+id}this.sharedStyles_[styleUri]=styleMapValue};ol.format.KML.prototype.readFeature;ol.format.KML.prototype.readFeatureFromNode=function(node,opt_options){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,node.namespaceURI)){return null}goog.asserts.assert(node.localName=="Placemark","localName should be Placemark");var feature=this.readPlacemark_(node,[this.getReadOptions(node,opt_options)]);if(goog.isDef(feature)){return feature}else{return null}};ol.format.KML.prototype.readFeatures;ol.format.KML.prototype.readFeaturesFromNode=function(node,opt_options){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,node.namespaceURI)){return[]}var features;var localName=ol.xml.getLocalName(node);if(localName=="Document"||localName=="Folder"){features=this.readDocumentOrFolder_(node,[this.getReadOptions(node,opt_options)]);if(goog.isDef(features)){return features}else{return[]}}else{if(localName=="Placemark"){var feature=this.readPlacemark_(node,[this.getReadOptions(node,opt_options)]);if(goog.isDef(feature)){return[feature]}else{return[]}}else{if(localName=="kml"){features=[];var n;for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){var fs=this.readFeaturesFromNode(n,opt_options);if(goog.isDef(fs)){goog.array.extend(features,fs)}}return features}else{return[]}}}};ol.format.KML.prototype.readName=function(source){if(ol.xml.isDocument(source)){return this.readNameFromDocument((source))}else{if(ol.xml.isNode(source)){return this.readNameFromNode((source))}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readNameFromDocument(doc)}else{goog.asserts.fail("Unknown type for source");return undefined}}}};ol.format.KML.prototype.readNameFromDocument=function(doc){var n;for(n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){var name=this.readNameFromNode(n);if(goog.isDef(name)){return name}}}return undefined};ol.format.KML.prototype.readNameFromNode=function(node){var n;for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&n.localName=="name"){return ol.format.XSD.readString(n)}}for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){var localName=ol.xml.getLocalName(n);if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&(localName=="Document"||localName=="Folder"||localName=="Placemark"||localName=="kml")){var name=this.readNameFromNode(n);if(goog.isDef(name)){return name}}}return undefined};ol.format.KML.prototype.readNetworkLinks=function(source){var networkLinks=[];if(ol.xml.isDocument(source)){goog.array.extend(networkLinks,this.readNetworkLinksFromDocument((source)))}else{if(ol.xml.isNode(source)){goog.array.extend(networkLinks,this.readNetworkLinksFromNode((source)))}else{if(goog.isString(source)){var doc=ol.xml.parse(source);goog.array.extend(networkLinks,this.readNetworkLinksFromDocument(doc))}else{goog.asserts.fail("unknown type for source")}}}return networkLinks};ol.format.KML.prototype.readNetworkLinksFromDocument=function(doc){var n,networkLinks=[];for(n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){goog.array.extend(networkLinks,this.readNetworkLinksFromNode(n))}}return networkLinks};ol.format.KML.prototype.readNetworkLinksFromNode=function(node){var n,networkLinks=[];for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&n.localName=="NetworkLink"){var obj=ol.xml.pushParseAndPop({},ol.format.KML.NETWORK_LINK_PARSERS_,n,[]);networkLinks.push(obj)}}for(n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){var localName=ol.xml.getLocalName(n);if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&(localName=="Document"||localName=="Folder"||localName=="kml")){goog.array.extend(networkLinks,this.readNetworkLinksFromNode(n))}}return networkLinks};ol.format.KML.prototype.readProjection;ol.format.KML.writeColorTextNode_=function(node,color){var rgba=ol.color.asArray(color);var opacity=(rgba.length==4)?rgba[3]:1;var abgr=[opacity*255,rgba[2],rgba[1],rgba[0]];var i;for(i=0;i<4;++i){var hex=parseInt(abgr[i],10).toString(16);abgr[i]=(hex.length==1)?"0"+hex:hex}ol.format.XSD.writeStringTextNode(node,abgr.join(""))};ol.format.KML.writeCoordinatesTextNode_=function(node,coordinates,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var layout=context.layout;var stride=context.stride;var dimension;if(layout==ol.geom.GeometryLayout.XY||layout==ol.geom.GeometryLayout.XYM){dimension=2}else{if(layout==ol.geom.GeometryLayout.XYZ||layout==ol.geom.GeometryLayout.XYZM){dimension=3}else{goog.asserts.fail("Unknown geometry layout")}}var d,i;var ii=coordinates.length;var text="";if(ii>0){text+=coordinates[0];for(d=1;d<dimension;++d){text+=","+coordinates[d]}for(i=stride;i<ii;i+=stride){text+=" "+coordinates[i];for(d=1;d<dimension;++d){text+=","+coordinates[i+d]}}}ol.format.XSD.writeStringTextNode(node,text)};ol.format.KML.writeDocument_=function(node,features,objectStack){var context={node:node};ol.xml.pushSerializeAndPop(context,ol.format.KML.DOCUMENT_SERIALIZERS_,ol.format.KML.DOCUMENT_NODE_FACTORY_,features,objectStack)};ol.format.KML.writeIcon_=function(node,icon,objectStack){var context={node:node};var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.KML.ICON_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(icon,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.ICON_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys);orderedKeys=ol.format.KML.ICON_SEQUENCE_[ol.format.KML.GX_NAMESPACE_URIS_[0]];values=ol.xml.makeSequence(icon,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.ICON_SERIALIZERS_,ol.format.KML.GX_NODE_FACTORY_,values,objectStack,orderedKeys)};ol.format.KML.writeIconStyle_=function(node,style,objectStack){var context={node:node};var properties={};var src=style.getSrc();var size=style.getSize();var iconImageSize=style.getImageSize();var iconProperties={href:src};if(!goog.isNull(size)){iconProperties.w=size[0];iconProperties.h=size[1];var anchor=style.getAnchor();var origin=style.getOrigin();if(!goog.isNull(origin)&&!goog.isNull(iconImageSize)&&origin[0]!==0&&origin[1]!==size[1]){iconProperties.x=origin[0];iconProperties.y=iconImageSize[1]-(origin[1]+size[1])}if(!goog.isNull(anchor)&&anchor[0]!==0&&anchor[1]!==size[1]){var hotSpot={x:anchor[0],xunits:ol.style.IconAnchorUnits.PIXELS,y:size[1]-anchor[1],yunits:ol.style.IconAnchorUnits.PIXELS};properties.hotSpot=hotSpot}}properties.Icon=iconProperties;var scale=style.getScale();if(scale!==1){properties.scale=scale}var rotation=style.getRotation();if(rotation!==0){properties.heading=rotation}var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.KML.ICON_STYLE_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.ICON_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.KML.writeLabelStyle_=function(node,style,objectStack){var context={node:node};var properties={};var fill=style.getFill();if(!goog.isNull(fill)){properties.color=fill.getColor()}var scale=style.getScale();if(goog.isDef(scale)&&scale!==1){properties.scale=scale}var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.KML.LABEL_STYLE_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.LABEL_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.KML.writeLineStyle_=function(node,style,objectStack){var context={node:node};var properties={color:style.getColor(),width:style.getWidth()};var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.KML.LINE_STYLE_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.LINE_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.KML.writeMultiGeometry_=function(node,geometry,objectStack){goog.asserts.assert((geometry instanceof ol.geom.MultiPoint)||(geometry instanceof ol.geom.MultiLineString)||(geometry instanceof ol.geom.MultiPolygon),"geometry should be one of: ol.geom.MultiPoint, ol.geom.MultiLineString or ol.geom.MultiPolygon");var context={node:node};var type=geometry.getType();var geometries;var factory;if(type==ol.geom.GeometryType.MULTI_POINT){geometries=((geometry)).getPoints();factory=ol.format.KML.POINT_NODE_FACTORY_}else{if(type==ol.geom.GeometryType.MULTI_LINE_STRING){geometries=((geometry)).getLineStrings();factory=ol.format.KML.LINE_STRING_NODE_FACTORY_}else{if(type==ol.geom.GeometryType.MULTI_POLYGON){geometries=((geometry)).getPolygons();factory=ol.format.KML.POLYGON_NODE_FACTORY_}else{goog.asserts.fail("Unknown geometry type: "+type)}}}ol.xml.pushSerializeAndPop(context,ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_,factory,geometries,objectStack)};ol.format.KML.writeBoundaryIs_=function(node,linearRing,objectStack){var context={node:node};ol.xml.pushSerializeAndPop(context,ol.format.KML.BOUNDARY_IS_SERIALIZERS_,ol.format.KML.LINEAR_RING_NODE_FACTORY_,[linearRing],objectStack)};ol.format.KML.writePlacemark_=function(node,feature,objectStack){var context={node:node};if(goog.isDefAndNotNull(feature.getId())){node.setAttribute("id",feature.getId())}var properties=feature.getProperties();var styleFunction=feature.getStyleFunction();if(goog.isDef(styleFunction)){var styles=styleFunction.call(feature,0);if(!goog.isNull(styles)&&styles.length>0){properties.Style=styles[0];var textStyle=styles[0].getText();if(!goog.isNull(textStyle)){properties.name=textStyle.getText()}}}var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.KML.PLACEMARK_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys);var options=(objectStack[0]);var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){geometry=ol.format.Feature.transformWithOptions(geometry,true,options)}ol.xml.pushSerializeAndPop(context,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.GEOMETRY_NODE_FACTORY_,[geometry],objectStack)};ol.format.KML.writePrimitiveGeometry_=function(node,geometry,objectStack){goog.asserts.assert((geometry instanceof ol.geom.Point)||(geometry instanceof ol.geom.LineString)||(geometry instanceof ol.geom.LinearRing),"geometry should be one of ol.geom.Point, ol.geom.LineString or ol.geom.LinearRing");var flatCoordinates=geometry.getFlatCoordinates();var context={node:node};context.layout=geometry.getLayout();context.stride=geometry.getStride();ol.xml.pushSerializeAndPop(context,ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,ol.format.KML.COORDINATES_NODE_FACTORY_,[flatCoordinates],objectStack)};ol.format.KML.writePolygon_=function(node,polygon,objectStack){goog.asserts.assertInstanceof(polygon,ol.geom.Polygon,"polygon should be an ol.geom.Polygon");var linearRings=polygon.getLinearRings();goog.asserts.assert(linearRings.length>0,"linearRings should not be empty");var outerRing=linearRings.shift();var context={node:node};ol.xml.pushSerializeAndPop(context,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_,linearRings,objectStack);ol.xml.pushSerializeAndPop(context,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_,[outerRing],objectStack)};ol.format.KML.writePolyStyle_=function(node,style,objectStack){var context={node:node};ol.xml.pushSerializeAndPop(context,ol.format.KML.POLY_STYLE_SERIALIZERS_,ol.format.KML.COLOR_NODE_FACTORY_,[style.getColor()],objectStack)};ol.format.KML.writeScaleTextNode_=function(node,scale){ol.format.XSD.writeDecimalTextNode(node,scale*scale)};ol.format.KML.writeStyle_=function(node,style,objectStack){var context={node:node};var properties={};var fillStyle=style.getFill();var strokeStyle=style.getStroke();var imageStyle=style.getImage();var textStyle=style.getText();if(!goog.isNull(imageStyle)){properties.IconStyle=imageStyle}if(!goog.isNull(textStyle)){properties.LabelStyle=textStyle}if(!goog.isNull(strokeStyle)){properties.LineStyle=strokeStyle}if(!goog.isNull(fillStyle)){properties.PolyStyle=fillStyle}var parentNode=objectStack[objectStack.length-1].node;var orderedKeys=ol.format.KML.STYLE_SEQUENCE_[parentNode.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,orderedKeys)};ol.format.KML.writeVec2_=function(node,vec2){node.setAttribute("x",vec2.x);node.setAttribute("y",vec2.y);node.setAttribute("xunits",vec2.xunits);node.setAttribute("yunits",vec2.yunits)};ol.format.KML.KML_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["Document","Placemark"]);ol.format.KML.KML_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeChildAppender(ol.format.KML.writeDocument_),Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.DOCUMENT_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"};ol.format.KML.ICON_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["href"],ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,["x","y","w","h"]));ol.format.KML.ICON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),y:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),w:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),h:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)}));ol.format.KML.ICON_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]);ol.format.KML.ICON_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeChildAppender(ol.format.KML.writeIcon_),heading:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),hotSpot:ol.xml.makeChildAppender(ol.format.KML.writeVec2_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LABEL_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","scale"]);ol.format.KML.LABEL_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LINE_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","width"]);ol.format.KML.LINE_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),width:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)});ol.format.KML.BOUNDARY_IS_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_)});ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_)});ol.format.KML.PLACEMARK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]);ol.format.KML.PLACEMARK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{MultiGeometry:ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_),LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_),Style:ol.xml.makeChildAppender(ol.format.KML.writeStyle_),address:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),description:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),open:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),phoneNumber:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),styleUrl:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),visibility:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode)});ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeChildAppender(ol.format.KML.writeCoordinatesTextNode_)});ol.format.KML.POLYGON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{outerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_),innerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_)});ol.format.KML.POLY_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_)});ol.format.KML.STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);ol.format.KML.STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.xml.makeChildAppender(ol.format.KML.writeIconStyle_),LabelStyle:ol.xml.makeChildAppender(ol.format.KML.writeLabelStyle_),LineStyle:ol.xml.makeChildAppender(ol.format.KML.writeLineStyle_),PolyStyle:ol.xml.makeChildAppender(ol.format.KML.writePolyStyle_)});ol.format.KML.GX_NODE_FACTORY_=function(value,objectStack,opt_nodeName){return ol.xml.createElementNS(ol.format.KML.GX_NAMESPACE_URIS_[0],"gx:"+opt_nodeName)};ol.format.KML.DOCUMENT_NODE_FACTORY_=function(value,objectStack,opt_nodeName){goog.asserts.assertInstanceof(value,ol.Feature,"value should be an ol.Feature");var parentNode=objectStack[objectStack.length-1].node;goog.asserts.assert(ol.xml.isNode(parentNode),"parentNode should be an XML node");return ol.xml.createElementNS(parentNode.namespaceURI,"Placemark")};ol.format.KML.GEOMETRY_NODE_FACTORY_=function(value,objectStack,opt_nodeName){if(goog.isDefAndNotNull(value)){goog.asserts.assertInstanceof(value,ol.geom.Geometry,"value should be an ol.geom.Geometry");var parentNode=objectStack[objectStack.length-1].node;goog.asserts.assert(ol.xml.isNode(parentNode),"parentNode should be an XML node");return ol.xml.createElementNS(parentNode.namespaceURI,ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_[value.getType()])}};ol.format.KML.COLOR_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("color");ol.format.KML.COORDINATES_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("coordinates");ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("innerBoundaryIs");ol.format.KML.POINT_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Point");ol.format.KML.LINE_STRING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LineString");ol.format.KML.LINEAR_RING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LinearRing");ol.format.KML.POLYGON_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Polygon");ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("outerBoundaryIs");ol.format.KML.prototype.writeFeatures;ol.format.KML.prototype.writeFeaturesNode=function(features,opt_options){opt_options=this.adaptOptions(opt_options);var kml=ol.xml.createElementNS(ol.format.KML.NAMESPACE_URIS_[4],"kml");var xmlnsUri="http://www.w3.org/2000/xmlns/";var xmlSchemaInstanceUri="http://www.w3.org/2001/XMLSchema-instance";ol.xml.setAttributeNS(kml,xmlnsUri,"xmlns:gx",ol.format.KML.GX_NAMESPACE_URIS_[0]);ol.xml.setAttributeNS(kml,xmlnsUri,"xmlns:xsi",xmlSchemaInstanceUri);ol.xml.setAttributeNS(kml,xmlSchemaInstanceUri,"xsi:schemaLocation",ol.format.KML.SCHEMA_LOCATION_);var context={node:kml};var properties={};if(features.length>1){properties.Document=features}else{if(features.length==1){properties.Placemark=features[0]}}var orderedKeys=ol.format.KML.KML_SEQUENCE_[kml.namespaceURI];var values=ol.xml.makeSequence(properties,orderedKeys);ol.xml.pushSerializeAndPop(context,ol.format.KML.KML_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,values,[opt_options],orderedKeys);return kml};goog.provide("ol.format.OSMXML");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.xml");ol.format.OSMXML=function(){goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326")};goog.inherits(ol.format.OSMXML,ol.format.XMLFeature);ol.format.OSMXML.EXTENSIONS_=[".osm"];ol.format.OSMXML.prototype.getExtensions=function(){return ol.format.OSMXML.EXTENSIONS_};ol.format.OSMXML.readNode_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="node","localName should be node");var options=(objectStack[0]);var state=(objectStack[objectStack.length-1]);var id=node.getAttribute("id");var coordinates=([parseFloat(node.getAttribute("lon")),parseFloat(node.getAttribute("lat"))]);state.nodes[id]=coordinates;var values=ol.xml.pushParseAndPop({tags:{}},ol.format.OSMXML.NODE_PARSERS_,node,objectStack);if(!goog.object.isEmpty(values.tags)){var geometry=new ol.geom.Point(coordinates);ol.format.Feature.transformWithOptions(geometry,false,options);var feature=new ol.Feature(geometry);feature.setId(id);feature.setProperties(values.tags);state.features.push(feature)}};ol.format.OSMXML.readWay_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="way","localName should be way");var options=(objectStack[0]);var id=node.getAttribute("id");var values=ol.xml.pushParseAndPop({ndrefs:[],tags:{}},ol.format.OSMXML.WAY_PARSERS_,node,objectStack);var state=(objectStack[objectStack.length-1]);var flatCoordinates=([]);for(var i=0,ii=values.ndrefs.length;i<ii;i++){var point=state.nodes[values.ndrefs[i]];goog.array.extend(flatCoordinates,point)}var geometry;if(values.ndrefs[0]==values.ndrefs[values.ndrefs.length-1]){geometry=new ol.geom.Polygon(null);geometry.setFlatCoordinates(ol.geom.GeometryLayout.XY,flatCoordinates,[flatCoordinates.length])}else{geometry=new ol.geom.LineString(null);geometry.setFlatCoordinates(ol.geom.GeometryLayout.XY,flatCoordinates)}ol.format.Feature.transformWithOptions(geometry,false,options);var feature=new ol.Feature(geometry);feature.setId(id);feature.setProperties(values.tags);state.features.push(feature)};ol.format.OSMXML.readNd_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="nd","localName should be nd");var values=(objectStack[objectStack.length-1]);values.ndrefs.push(node.getAttribute("ref"))};ol.format.OSMXML.readTag_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="tag","localName should be tag");var values=(objectStack[objectStack.length-1]);values.tags[node.getAttribute("k")]=node.getAttribute("v")};ol.format.OSMXML.NAMESPACE_URIS_=[null];ol.format.OSMXML.WAY_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{nd:ol.format.OSMXML.readNd_,tag:ol.format.OSMXML.readTag_});ol.format.OSMXML.PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{node:ol.format.OSMXML.readNode_,way:ol.format.OSMXML.readWay_});ol.format.OSMXML.NODE_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{tag:ol.format.OSMXML.readTag_});ol.format.OSMXML.prototype.readFeatures;ol.format.OSMXML.prototype.readFeaturesFromNode=function(node,opt_options){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var options=this.getReadOptions(node,opt_options);if(node.localName=="osm"){var state=ol.xml.pushParseAndPop({nodes:{},features:[]},ol.format.OSMXML.PARSERS_,node,[options]);if(goog.isDef(state.features)){return state.features}}return[]};ol.format.OSMXML.prototype.readProjection;goog.provide("ol.format.XLink");ol.format.XLink.NAMESPACE_URI="http://www.w3.org/1999/xlink";ol.format.XLink.readHref=function(node){return node.getAttributeNS(ol.format.XLink.NAMESPACE_URI,"href")};goog.provide("ol.format.XML");goog.require("goog.asserts");goog.require("ol.xml");ol.format.XML=function(){};ol.format.XML.prototype.read=function(source){if(ol.xml.isDocument(source)){return this.readFromDocument((source))}else{if(ol.xml.isNode(source)){return this.readFromNode((source))}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readFromDocument(doc)}else{goog.asserts.fail();return null}}}};ol.format.XML.prototype.readFromDocument=goog.abstractMethod;ol.format.XML.prototype.readFromNode=goog.abstractMethod;goog.provide("ol.format.OWS");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.OWS=function(){goog.base(this)};goog.inherits(ol.format.OWS,ol.format.XML);ol.format.OWS.prototype.readFromDocument=function(doc){goog.asserts.assert(doc.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(n)}}return null};ol.format.OWS.prototype.readFromNode=function(node){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var owsObject=ol.xml.pushParseAndPop({},ol.format.OWS.PARSERS_,node,[]);return goog.isDef(owsObject)?owsObject:null};ol.format.OWS.readAddress_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Address","localName should be Address");return ol.xml.pushParseAndPop({},ol.format.OWS.ADDRESS_PARSERS_,node,objectStack)};ol.format.OWS.readAllowedValues_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="AllowedValues","localName should be AllowedValues");return ol.xml.pushParseAndPop({},ol.format.OWS.ALLOWED_VALUES_PARSERS_,node,objectStack)};ol.format.OWS.readConstraint_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Constraint","localName should be Constraint");var name=node.getAttribute("name");if(!goog.isDef(name)){return undefined}return ol.xml.pushParseAndPop({name:name},ol.format.OWS.CONSTRAINT_PARSERS_,node,objectStack)};ol.format.OWS.readContactInfo_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ContactInfo","localName should be ContactInfo");return ol.xml.pushParseAndPop({},ol.format.OWS.CONTACT_INFO_PARSERS_,node,objectStack)};ol.format.OWS.readDcp_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="DCP","localName should be DCP");return ol.xml.pushParseAndPop({},ol.format.OWS.DCP_PARSERS_,node,objectStack)};ol.format.OWS.readGet_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Get","localName should be Get");var href=ol.format.XLink.readHref(node);if(!goog.isDef(href)){return undefined}return ol.xml.pushParseAndPop({href:href},ol.format.OWS.REQUEST_METHOD_PARSERS_,node,objectStack)};ol.format.OWS.readHttp_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="HTTP","localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.OWS.HTTP_PARSERS_,node,objectStack)};ol.format.OWS.readOperation_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Operation","localName should be Operation");var name=node.getAttribute("name");var value=ol.xml.pushParseAndPop({},ol.format.OWS.OPERATION_PARSERS_,node,objectStack);if(!goog.isDef(value)){return undefined}var object=(objectStack[objectStack.length-1]);goog.asserts.assert(goog.isObject(object),"object should be an Object");object[name]=value};ol.format.OWS.readOperationsMetadata_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="OperationsMetadata","localName should be OperationsMetadata");return ol.xml.pushParseAndPop({},ol.format.OWS.OPERATIONS_METADATA_PARSERS_,node,objectStack)};ol.format.OWS.readPhone_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Phone","localName should be Phone");return ol.xml.pushParseAndPop({},ol.format.OWS.PHONE_PARSERS_,node,objectStack)};ol.format.OWS.readServiceIdentification_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ServiceIdentification","localName should be ServiceIdentification");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_,node,objectStack)};ol.format.OWS.readServiceContact_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ServiceContact","localName should be ServiceContact");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_CONTACT_PARSERS_,node,objectStack)};ol.format.OWS.readServiceProvider_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ServiceProvider","localName should be ServiceProvider");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_PROVIDER_PARSERS_,node,objectStack)};ol.format.OWS.readValue_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Value","localName should be Value");return ol.format.XSD.readString(node)};ol.format.OWS.NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.OWS.PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ServiceIdentification:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceIdentification_),ServiceProvider:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceProvider_),OperationsMetadata:ol.xml.makeObjectPropertySetter(ol.format.OWS.readOperationsMetadata_)});ol.format.OWS.ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DeliveryPoint:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AdministrativeArea:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostalCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.ALLOWED_VALUES_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Value:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readValue_)});ol.format.OWS.CONSTRAINT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{AllowedValues:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAllowedValues_)});ol.format.OWS.CONTACT_INFO_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Phone:ol.xml.makeObjectPropertySetter(ol.format.OWS.readPhone_),Address:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAddress_)});ol.format.OWS.DCP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readHttp_)});ol.format.OWS.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readGet_),Post:undefined});ol.format.OWS.OPERATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DCP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readDcp_)});ol.format.OWS.OPERATIONS_METADATA_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Operation:ol.format.OWS.readOperation_});ol.format.OWS.PHONE_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Voice:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Facsimile:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.REQUEST_METHOD_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Constraint:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readConstraint_)});ol.format.OWS.SERVICE_CONTACT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{IndividualName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PositionName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactInfo:ol.xml.makeObjectPropertySetter(ol.format.OWS.readContactInfo_)});ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceTypeVersion:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.SERVICE_PROVIDER_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ProviderName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ProviderSite:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ServiceContact:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceContact_)});goog.provide("ol.geom.flat.flip");goog.require("goog.asserts");ol.geom.flat.flip.flipXY=function(flatCoordinates,offset,end,stride,opt_dest,opt_destOffset){var dest,destOffset;if(goog.isDef(opt_dest)){dest=opt_dest;destOffset=goog.isDef(opt_destOffset)?opt_destOffset:0}else{goog.asserts.assert(!goog.isDef(opt_destOffset),"opt_destOffSet should be defined");dest=[];destOffset=0}var j,k;for(j=offset;j<end;){var x=flatCoordinates[j++];dest[destOffset++]=flatCoordinates[j++];dest[destOffset++]=x;for(k=2;k<stride;++k){dest[destOffset++]=flatCoordinates[j++]}}dest.length=destOffset;return dest};goog.provide("ol.format.Polyline");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.flip");goog.require("ol.geom.flat.inflate");goog.require("ol.proj");ol.format.Polyline=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.factor_=goog.isDef(options.factor)?options.factor:100000;this.geometryLayout_=goog.isDef(options.geometryLayout)?options.geometryLayout:ol.geom.GeometryLayout.XY};goog.inherits(ol.format.Polyline,ol.format.TextFeature);ol.format.Polyline.encodeDeltas=function(numbers,stride,opt_factor){var factor=goog.isDef(opt_factor)?opt_factor:100000;var d;var lastNumbers=new Array(stride);for(d=0;d<stride;++d){lastNumbers[d]=0}var i,ii;for(i=0,ii=numbers.length;i<ii;){for(d=0;d<stride;++d,++i){var num=numbers[i];var delta=num-lastNumbers[d];lastNumbers[d]=num;numbers[i]=delta}}return ol.format.Polyline.encodeFloats(numbers,factor)};ol.format.Polyline.decodeDeltas=function(encoded,stride,opt_factor){var factor=goog.isDef(opt_factor)?opt_factor:100000;var d;var lastNumbers=new Array(stride);for(d=0;d<stride;++d){lastNumbers[d]=0}var numbers=ol.format.Polyline.decodeFloats(encoded,factor);var i,ii;for(i=0,ii=numbers.length;i<ii;){for(d=0;d<stride;++d,++i){lastNumbers[d]+=numbers[i];numbers[i]=lastNumbers[d]}}return numbers};ol.format.Polyline.encodeFloats=function(numbers,opt_factor){var factor=goog.isDef(opt_factor)?opt_factor:100000;var i,ii;for(i=0,ii=numbers.length;i<ii;++i){numbers[i]=Math.round(numbers[i]*factor)}return ol.format.Polyline.encodeSignedIntegers(numbers)};ol.format.Polyline.decodeFloats=function(encoded,opt_factor){var factor=goog.isDef(opt_factor)?opt_factor:100000;var numbers=ol.format.Polyline.decodeSignedIntegers(encoded);var i,ii;for(i=0,ii=numbers.length;i<ii;++i){numbers[i]/=factor}return numbers};ol.format.Polyline.encodeSignedIntegers=function(numbers){var i,ii;for(i=0,ii=numbers.length;i<ii;++i){var num=numbers[i];numbers[i]=(num<0)?~(num<<1):(num<<1)}return ol.format.Polyline.encodeUnsignedIntegers(numbers)};ol.format.Polyline.decodeSignedIntegers=function(encoded){var numbers=ol.format.Polyline.decodeUnsignedIntegers(encoded);var i,ii;for(i=0,ii=numbers.length;i<ii;++i){var num=numbers[i];numbers[i]=(num&1)?~(num>>1):(num>>1)}return numbers};ol.format.Polyline.encodeUnsignedIntegers=function(numbers){var encoded="";var i,ii;for(i=0,ii=numbers.length;i<ii;++i){encoded+=ol.format.Polyline.encodeUnsignedInteger(numbers[i])}return encoded};ol.format.Polyline.decodeUnsignedIntegers=function(encoded){var numbers=[];var current=0;var shift=0;var i,ii;for(i=0,ii=encoded.length;i<ii;++i){var b=encoded.charCodeAt(i)-63;current|=(b&31)<<shift;if(b<32){numbers.push(current);current=0;shift=0}else{shift+=5}}return numbers};ol.format.Polyline.encodeUnsignedInteger=function(num){var value,encoded="";while(num>=32){value=(32|(num&31))+63;encoded+=String.fromCharCode(value);num>>=5}value=num+63;encoded+=String.fromCharCode(value);return encoded};ol.format.Polyline.prototype.readFeature;ol.format.Polyline.prototype.readFeatureFromText=function(text,opt_options){var geometry=this.readGeometryFromText(text,opt_options);return new ol.Feature(geometry)};ol.format.Polyline.prototype.readFeatures;ol.format.Polyline.prototype.readFeaturesFromText=function(text,opt_options){var feature=this.readFeatureFromText(text,opt_options);return[feature]};ol.format.Polyline.prototype.readGeometry;ol.format.Polyline.prototype.readGeometryFromText=function(text,opt_options){var stride=ol.geom.SimpleGeometry.getStrideForLayout(this.geometryLayout_);var flatCoordinates=ol.format.Polyline.decodeDeltas(text,stride,this.factor_);ol.geom.flat.flip.flipXY(flatCoordinates,0,flatCoordinates.length,stride,flatCoordinates);var coordinates=ol.geom.flat.inflate.coordinates(flatCoordinates,0,flatCoordinates.length,stride);return(ol.format.Feature.transformWithOptions(new ol.geom.LineString(coordinates,this.geometryLayout_),false,this.adaptOptions(opt_options)))};ol.format.Polyline.prototype.readProjection;ol.format.Polyline.prototype.writeFeatureText=function(feature,opt_options){var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){return this.writeGeometryText(geometry,opt_options)}else{goog.asserts.fail("geometry needs to be defined");return""}};ol.format.Polyline.prototype.writeFeaturesText=function(features,opt_options){goog.asserts.assert(features.length==1,"features array should have 1 item");return this.writeFeatureText(features[0],opt_options)};ol.format.Polyline.prototype.writeGeometry;ol.format.Polyline.prototype.writeGeometryText=function(geometry,opt_options){goog.asserts.assertInstanceof(geometry,ol.geom.LineString,"geometry should be an ol.geom.LineString");geometry=(ol.format.Feature.transformWithOptions(geometry,true,this.adaptOptions(opt_options)));var flatCoordinates=geometry.getFlatCoordinates();var stride=geometry.getStride();ol.geom.flat.flip.flipXY(flatCoordinates,0,flatCoordinates.length,stride,flatCoordinates);return ol.format.Polyline.encodeDeltas(flatCoordinates,stride,this.factor_)};goog.provide("ol.format.TopoJSON");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");ol.format.TopoJSON=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.defaultDataProjection=ol.proj.get(goog.isDefAndNotNull(options.defaultDataProjection)?options.defaultDataProjection:"EPSG:4326")};goog.inherits(ol.format.TopoJSON,ol.format.JSONFeature);ol.format.TopoJSON.EXTENSIONS_=[".topojson"];ol.format.TopoJSON.concatenateArcs_=function(indices,arcs){var coordinates=[];var index,arc;var i,ii;var j,jj;for(i=0,ii=indices.length;i<ii;++i){index=indices[i];if(i>0){coordinates.pop()}if(index>=0){arc=arcs[index]}else{arc=arcs[~index].slice().reverse()}coordinates.push.apply(coordinates,arc)}for(j=0,jj=coordinates.length;j<jj;++j){coordinates[j]=coordinates[j].slice()}return coordinates};ol.format.TopoJSON.readPointGeometry_=function(object,scale,translate){var coordinates=object.coordinates;if(!goog.isNull(scale)&&!goog.isNull(translate)){ol.format.TopoJSON.transformVertex_(coordinates,scale,translate)}return new ol.geom.Point(coordinates)};ol.format.TopoJSON.readMultiPointGeometry_=function(object,scale,translate){var coordinates=object.coordinates;var i,ii;if(!goog.isNull(scale)&&!goog.isNull(translate)){for(i=0,ii=coordinates.length;i<ii;++i){ol.format.TopoJSON.transformVertex_(coordinates[i],scale,translate)}}return new ol.geom.MultiPoint(coordinates)};ol.format.TopoJSON.readLineStringGeometry_=function(object,arcs){var coordinates=ol.format.TopoJSON.concatenateArcs_(object.arcs,arcs);return new ol.geom.LineString(coordinates)};ol.format.TopoJSON.readMultiLineStringGeometry_=function(object,arcs){var coordinates=[];var i,ii;for(i=0,ii=object.arcs.length;i<ii;++i){coordinates[i]=ol.format.TopoJSON.concatenateArcs_(object.arcs[i],arcs)}return new ol.geom.MultiLineString(coordinates)};ol.format.TopoJSON.readPolygonGeometry_=function(object,arcs){var coordinates=[];var i,ii;for(i=0,ii=object.arcs.length;i<ii;++i){coordinates[i]=ol.format.TopoJSON.concatenateArcs_(object.arcs[i],arcs)}return new ol.geom.Polygon(coordinates)};ol.format.TopoJSON.readMultiPolygonGeometry_=function(object,arcs){var coordinates=[];var polyArray,ringCoords,j,jj;var i,ii;for(i=0,ii=object.arcs.length;i<ii;++i){polyArray=object.arcs[i];ringCoords=[];for(j=0,jj=polyArray.length;j<jj;++j){ringCoords[j]=ol.format.TopoJSON.concatenateArcs_(polyArray[j],arcs)}coordinates[i]=ringCoords}return new ol.geom.MultiPolygon(coordinates)};ol.format.TopoJSON.prototype.getExtensions=function(){return ol.format.TopoJSON.EXTENSIONS_};ol.format.TopoJSON.readFeaturesFromGeometryCollection_=function(collection,arcs,scale,translate,opt_options){var geometries=collection.geometries;var features=[];var i,ii;for(i=0,ii=geometries.length;i<ii;++i){features[i]=ol.format.TopoJSON.readFeatureFromGeometry_(geometries[i],arcs,scale,translate,opt_options)}return features};ol.format.TopoJSON.readFeatureFromGeometry_=function(object,arcs,scale,translate,opt_options){var geometry;var type=object.type;var geometryReader=ol.format.TopoJSON.GEOMETRY_READERS_[type];goog.asserts.assert(goog.isDef(geometryReader),"geometryReader should be defined");if((type==="Point")||(type==="MultiPoint")){geometry=geometryReader(object,scale,translate)}else{geometry=geometryReader(object,arcs)}var feature=new ol.Feature();feature.setGeometry((ol.format.Feature.transformWithOptions(geometry,false,opt_options)));if(goog.isDef(object.id)){feature.setId(object.id)}if(goog.isDef(object.properties)){feature.setProperties(object.properties)}return feature};ol.format.TopoJSON.prototype.readFeatures;ol.format.TopoJSON.prototype.readFeaturesFromObject=function(object,opt_options){if(object.type=="Topology"){var topoJSONTopology=(object);var transform,scale=null,translate=null;if(goog.isDef(topoJSONTopology.transform)){transform=topoJSONTopology.transform;scale=transform.scale;translate=transform.translate}var arcs=topoJSONTopology.arcs;if(goog.isDef(transform)){ol.format.TopoJSON.transformArcs_(arcs,scale,translate)}var features=[];var topoJSONFeatures=goog.object.getValues(topoJSONTopology.objects);var i,ii;var feature;for(i=0,ii=topoJSONFeatures.length;i<ii;++i){if(topoJSONFeatures[i].type==="GeometryCollection"){feature=(topoJSONFeatures[i]);features.push.apply(features,ol.format.TopoJSON.readFeaturesFromGeometryCollection_(feature,arcs,scale,translate,opt_options))}else{feature=(topoJSONFeatures[i]);features.push(ol.format.TopoJSON.readFeatureFromGeometry_(feature,arcs,scale,translate,opt_options))}}return features}else{return[]}};ol.format.TopoJSON.transformArcs_=function(arcs,scale,translate){var i,ii;for(i=0,ii=arcs.length;i<ii;++i){ol.format.TopoJSON.transformArc_(arcs[i],scale,translate)}};ol.format.TopoJSON.transformArc_=function(arc,scale,translate){var x=0;var y=0;var vertex;var i,ii;for(i=0,ii=arc.length;i<ii;++i){vertex=arc[i];x+=vertex[0];y+=vertex[1];vertex[0]=x;vertex[1]=y;ol.format.TopoJSON.transformVertex_(vertex,scale,translate)}};ol.format.TopoJSON.transformVertex_=function(vertex,scale,translate){vertex[0]=vertex[0]*scale[0]+translate[0];vertex[1]=vertex[1]*scale[1]+translate[1]};ol.format.TopoJSON.prototype.readProjection=function(object){return this.defaultDataProjection};ol.format.TopoJSON.GEOMETRY_READERS_={Point:ol.format.TopoJSON.readPointGeometry_,LineString:ol.format.TopoJSON.readLineStringGeometry_,Polygon:ol.format.TopoJSON.readPolygonGeometry_,MultiPoint:ol.format.TopoJSON.readMultiPointGeometry_,MultiLineString:ol.format.TopoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.TopoJSON.readMultiPolygonGeometry_};goog.provide("ol.format.WFS");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.format.GML3");goog.require("ol.format.GMLBase");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.proj");goog.require("ol.xml");ol.format.WFS=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.featureType_=options.featureType;this.featureNS_=options.featureNS;this.gmlFormat_=goog.isDef(options.gmlFormat)?options.gmlFormat:new ol.format.GML3();this.schemaLocation_=goog.isDef(options.schemaLocation)?options.schemaLocation:ol.format.WFS.SCHEMA_LOCATION;goog.base(this)};goog.inherits(ol.format.WFS,ol.format.XMLFeature);ol.format.WFS.FEATURE_PREFIX="feature";ol.format.WFS.XMLNS="http://www.w3.org/2000/xmlns/";ol.format.WFS.FeatureCollectionMetadata;ol.format.WFS.TransactionResponse;ol.format.WFS.SCHEMA_LOCATION="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd";ol.format.WFS.prototype.readFeatures;ol.format.WFS.prototype.readFeaturesFromNode=function(node,opt_options){var context={featureType:this.featureType_,featureNS:this.featureNS_};goog.object.extend(context,this.getReadOptions(node,goog.isDef(opt_options)?opt_options:{}));var objectStack=[context];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]["featureMember"]=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);var features=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,node,objectStack,this.gmlFormat_);if(!goog.isDef(features)){features=[]}return features};ol.format.WFS.prototype.readTransactionResponse=function(source){if(ol.xml.isDocument(source)){return this.readTransactionResponseFromDocument((source))}else{if(ol.xml.isNode(source)){return this.readTransactionResponseFromNode((source))}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readTransactionResponseFromDocument(doc)}else{goog.asserts.fail("Unknown source type");return undefined}}}};ol.format.WFS.prototype.readFeatureCollectionMetadata=function(source){if(ol.xml.isDocument(source)){return this.readFeatureCollectionMetadataFromDocument((source))}else{if(ol.xml.isNode(source)){return this.readFeatureCollectionMetadataFromNode((source))}else{if(goog.isString(source)){var doc=ol.xml.parse(source);return this.readFeatureCollectionMetadataFromDocument(doc)}else{goog.asserts.fail("Unknown source type");return undefined}}}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromDocument=function(doc){goog.asserts.assert(doc.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){return this.readFeatureCollectionMetadataFromNode(n)}}return undefined};ol.format.WFS.FEATURE_COLLECTION_PARSERS_={"http://www.opengis.net/gml":{boundedBy:ol.xml.makeObjectPropertySetter(ol.format.GMLBase.prototype.readGeometryElement,"bounds")}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromNode=function(node){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="FeatureCollection","localName should be FeatureCollection");var result={};var value=ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("numberOfFeatures"));result.numberOfFeatures=value;return ol.xml.pushParseAndPop((result),ol.format.WFS.FEATURE_COLLECTION_PARSERS_,node,[],this.gmlFormat_)};ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_={"http://www.opengis.net/wfs":{totalInserted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalUpdated:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalDeleted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}};ol.format.WFS.readTransactionSummary_=function(node,objectStack){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_,node,objectStack)};ol.format.WFS.OGC_FID_PARSERS_={"http://www.opengis.net/ogc":{FeatureId:ol.xml.makeArrayPusher(function(node,objectStack){return node.getAttribute("fid")})}};ol.format.WFS.fidParser_=function(node,objectStack){ol.xml.parseNode(ol.format.WFS.OGC_FID_PARSERS_,node,objectStack)};ol.format.WFS.INSERT_RESULTS_PARSERS_={"http://www.opengis.net/wfs":{Feature:ol.format.WFS.fidParser_}};ol.format.WFS.readInsertResults_=function(node,objectStack){return ol.xml.pushParseAndPop([],ol.format.WFS.INSERT_RESULTS_PARSERS_,node,objectStack)};ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_={"http://www.opengis.net/wfs":{TransactionSummary:ol.xml.makeObjectPropertySetter(ol.format.WFS.readTransactionSummary_,"transactionSummary"),InsertResults:ol.xml.makeObjectPropertySetter(ol.format.WFS.readInsertResults_,"insertIds")}};ol.format.WFS.prototype.readTransactionResponseFromDocument=function(doc){goog.asserts.assert(doc.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){return this.readTransactionResponseFromNode(n)}}return undefined};ol.format.WFS.prototype.readTransactionResponseFromNode=function(node){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should  be ELEMENT");goog.asserts.assert(node.localName=="TransactionResponse","localName should be TransactionResponse");return ol.xml.pushParseAndPop(({}),ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_,node,[])};ol.format.WFS.QUERY_SERIALIZERS_={"http://www.opengis.net/wfs":{PropertyName:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.WFS.writeFeature_=function(node,feature,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featureType=context.featureType;var featureNS=context.featureNS;var child=ol.xml.createElementNS(featureNS,featureType);node.appendChild(child);ol.format.GML3.prototype.writeFeatureElement(child,feature,objectStack)};ol.format.WFS.writeOgcFidFilter_=function(node,fid,objectStack){var filter=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");var child=ol.xml.createElementNS("http://www.opengis.net/ogc","FeatureId");filter.appendChild(child);child.setAttribute("fid",fid);node.appendChild(filter)};ol.format.WFS.writeDelete_=function(node,feature,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featureType=context.featureType;var featurePrefix=context.featurePrefix;featurePrefix=goog.isDef(featurePrefix)?featurePrefix:ol.format.WFS.FEATURE_PREFIX;var featureNS=context.featureNS;node.setAttribute("typeName",featurePrefix+":"+featureType);ol.xml.setAttributeNS(node,ol.format.WFS.XMLNS,"xmlns:"+featurePrefix,featureNS);var fid=feature.getId();if(goog.isDef(fid)){ol.format.WFS.writeOgcFidFilter_(node,fid,objectStack)}};ol.format.WFS.writeUpdate_=function(node,feature,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featureType=context.featureType;var featurePrefix=context.featurePrefix;featurePrefix=goog.isDef(featurePrefix)?featurePrefix:ol.format.WFS.FEATURE_PREFIX;var featureNS=context.featureNS;node.setAttribute("typeName",featurePrefix+":"+featureType);ol.xml.setAttributeNS(node,ol.format.WFS.XMLNS,"xmlns:"+featurePrefix,featureNS);var fid=feature.getId();if(goog.isDef(fid)){var keys=feature.getKeys();var values=[];for(var i=0,ii=keys.length;i<ii;i++){var value=feature.get(keys[i]);if(goog.isDef(value)){values.push({name:keys[i],value:value})}}ol.xml.pushSerializeAndPop({node:node,srsName:context.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Property"),values,objectStack);ol.format.WFS.writeOgcFidFilter_(node,fid,objectStack)}};ol.format.WFS.writeProperty_=function(node,pair,objectStack){var name=ol.xml.createElementNS("http://www.opengis.net/wfs","Name");node.appendChild(name);ol.format.XSD.writeStringTextNode(name,pair.name);if(goog.isDefAndNotNull(pair.value)){var value=ol.xml.createElementNS("http://www.opengis.net/wfs","Value");node.appendChild(value);if(pair.value instanceof ol.geom.Geometry){ol.format.GML3.prototype.writeGeometryElement(value,pair.value,objectStack)}else{ol.format.XSD.writeStringTextNode(value,pair.value)}}};ol.format.WFS.writeNative_=function(node,nativeElement,objectStack){if(goog.isDef(nativeElement.vendorId)){node.setAttribute("vendorId",nativeElement.vendorId)}if(goog.isDef(nativeElement.safeToIgnore)){node.setAttribute("safeToIgnore",nativeElement.safeToIgnore)}if(goog.isDef(nativeElement.value)){ol.format.XSD.writeStringTextNode(node,nativeElement.value)}};ol.format.WFS.TRANSACTION_SERIALIZERS_={"http://www.opengis.net/wfs":{Insert:ol.xml.makeChildAppender(ol.format.WFS.writeFeature_),Update:ol.xml.makeChildAppender(ol.format.WFS.writeUpdate_),Delete:ol.xml.makeChildAppender(ol.format.WFS.writeDelete_),Property:ol.xml.makeChildAppender(ol.format.WFS.writeProperty_),Native:ol.xml.makeChildAppender(ol.format.WFS.writeNative_)}};ol.format.WFS.writeQuery_=function(node,featureType,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var featurePrefix=context.featurePrefix;var featureNS=context.featureNS;var propertyNames=context.propertyNames;var srsName=context.srsName;var prefix=goog.isDef(featurePrefix)?featurePrefix+":":"";node.setAttribute("typeName",prefix+featureType);if(goog.isDef(srsName)){node.setAttribute("srsName",srsName)}if(goog.isDef(featureNS)){ol.xml.setAttributeNS(node,ol.format.WFS.XMLNS,"xmlns:"+featurePrefix,featureNS)}var item=goog.object.clone(context);item.node=node;ol.xml.pushSerializeAndPop(item,ol.format.WFS.QUERY_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("PropertyName"),propertyNames,objectStack);var bbox=context.bbox;if(goog.isDef(bbox)){var child=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");ol.format.WFS.writeOgcBBOX_(child,bbox,objectStack);node.appendChild(child)}};ol.format.WFS.writeOgcPropertyName_=function(node,value,objectStack){var property=ol.xml.createElementNS("http://www.opengis.net/ogc","PropertyName");ol.format.XSD.writeStringTextNode(property,value);node.appendChild(property)};ol.format.WFS.writeOgcBBOX_=function(node,bbox,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var geometryName=context.geometryName;var bboxNode=ol.xml.createElementNS("http://www.opengis.net/ogc","BBOX");node.appendChild(bboxNode);ol.format.WFS.writeOgcPropertyName_(bboxNode,geometryName,objectStack);ol.format.GML3.prototype.writeGeometryElement(bboxNode,bbox,objectStack)};ol.format.WFS.GETFEATURE_SERIALIZERS_={"http://www.opengis.net/wfs":{Query:ol.xml.makeChildAppender(ol.format.WFS.writeQuery_)}};ol.format.WFS.writeGetFeature_=function(node,featureTypes,objectStack){var context=objectStack[objectStack.length-1];goog.asserts.assert(goog.isObject(context),"context should be an Object");var item=goog.object.clone(context);item.node=node;ol.xml.pushSerializeAndPop(item,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Query"),featureTypes,objectStack)};ol.format.WFS.prototype.writeGetFeature=function(options){var node=ol.xml.createElementNS("http://www.opengis.net/wfs","GetFeature");node.setAttribute("service","WFS");node.setAttribute("version","1.1.0");if(goog.isDef(options)){if(goog.isDef(options.handle)){node.setAttribute("handle",options.handle)}if(goog.isDef(options.outputFormat)){node.setAttribute("outputFormat",options.outputFormat)}if(goog.isDef(options.maxFeatures)){node.setAttribute("maxFeatures",options.maxFeatures)}if(goog.isDef(options.resultType)){node.setAttribute("resultType",options.resultType)}if(goog.isDef(options.startIndex)){node.setAttribute("startIndex",options.startIndex)}if(goog.isDef(options.count)){node.setAttribute("count",options.count)}}ol.xml.setAttributeNS(node,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var context={node:node,srsName:options.srsName,featureNS:goog.isDef(options.featureNS)?options.featureNS:this.featureNS_,featurePrefix:options.featurePrefix,geometryName:options.geometryName,bbox:options.bbox,propertyNames:goog.isDef(options.propertyNames)?options.propertyNames:[]};goog.asserts.assert(goog.isArray(options.featureTypes),"options.featureTypes should be an array");ol.format.WFS.writeGetFeature_(node,options.featureTypes,[context]);return node};ol.format.WFS.prototype.writeTransaction=function(inserts,updates,deletes,options){var objectStack=[];var node=ol.xml.createElementNS("http://www.opengis.net/wfs","Transaction");node.setAttribute("service","WFS");node.setAttribute("version","1.1.0");var baseObj,obj;if(goog.isDef(options)){baseObj=goog.isDef(options.gmlOptions)?options.gmlOptions:{};if(goog.isDef(options.handle)){node.setAttribute("handle",options.handle)}}ol.xml.setAttributeNS(node,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);if(goog.isDefAndNotNull(inserts)){obj={node:node,featureNS:options.featureNS,featureType:options.featureType,featurePrefix:options.featurePrefix};goog.object.extend(obj,baseObj);ol.xml.pushSerializeAndPop(obj,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Insert"),inserts,objectStack)}if(goog.isDefAndNotNull(updates)){obj={node:node,featureNS:options.featureNS,featureType:options.featureType,featurePrefix:options.featurePrefix};goog.object.extend(obj,baseObj);ol.xml.pushSerializeAndPop(obj,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Update"),updates,objectStack)}if(goog.isDefAndNotNull(deletes)){ol.xml.pushSerializeAndPop({node:node,featureNS:options.featureNS,featureType:options.featureType,featurePrefix:options.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Delete"),deletes,objectStack)}if(goog.isDef(options.nativeElements)){ol.xml.pushSerializeAndPop({node:node,featureNS:options.featureNS,featureType:options.featureType,featurePrefix:options.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Native"),options.nativeElements,objectStack)}return node};ol.format.WFS.prototype.readProjection;ol.format.WFS.prototype.readProjectionFromDocument=function(doc){goog.asserts.assert(doc.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be a DOCUMENT");for(var n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){return this.readProjectionFromNode(n)}}return null};ol.format.WFS.prototype.readProjectionFromNode=function(node){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="FeatureCollection","localName should be FeatureCollection");if(goog.isDefAndNotNull(node.firstElementChild)&&goog.isDefAndNotNull(node.firstElementChild.firstElementChild)){node=node.firstElementChild.firstElementChild;for(var n=node.firstElementChild;!goog.isNull(n);n=n.nextElementSibling){if(!(n.childNodes.length===0||(n.childNodes.length===1&&n.firstChild.nodeType===3))){var objectStack=[{}];this.gmlFormat_.readGeometryElement(n,objectStack);return ol.proj.get(objectStack.pop().srsName)}}}return null};goog.provide("ol.format.WKT");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");ol.format.WKT=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this);this.splitCollection_=goog.isDef(options.splitCollection)?options.splitCollection:false};goog.inherits(ol.format.WKT,ol.format.TextFeature);ol.format.WKT.EMPTY="EMPTY";ol.format.WKT.encodePointGeometry_=function(geom){var coordinates=geom.getCoordinates();if(goog.array.isEmpty(coordinates)){return""}return coordinates[0]+" "+coordinates[1]};ol.format.WKT.encodeMultiPointGeometry_=function(geom){var array=[];var components=geom.getPoints();for(var i=0,ii=components.length;i<ii;++i){array.push("("+ol.format.WKT.encodePointGeometry_(components[i])+")")}return array.join(",")};ol.format.WKT.encodeGeometryCollectionGeometry_=function(geom){var array=[];var geoms=geom.getGeometries();for(var i=0,ii=geoms.length;i<ii;++i){array.push(ol.format.WKT.encode_(geoms[i]))}return array.join(",")};ol.format.WKT.encodeLineStringGeometry_=function(geom){var coordinates=geom.getCoordinates();var array=[];for(var i=0,ii=coordinates.length;i<ii;++i){array.push(coordinates[i][0]+" "+coordinates[i][1])}return array.join(",")};ol.format.WKT.encodeMultiLineStringGeometry_=function(geom){var array=[];var components=geom.getLineStrings();for(var i=0,ii=components.length;i<ii;++i){array.push("("+ol.format.WKT.encodeLineStringGeometry_(components[i])+")")}return array.join(",")};ol.format.WKT.encodePolygonGeometry_=function(geom){var array=[];var rings=geom.getLinearRings();for(var i=0,ii=rings.length;i<ii;++i){array.push("("+ol.format.WKT.encodeLineStringGeometry_(rings[i])+")")}return array.join(",")};ol.format.WKT.encodeMultiPolygonGeometry_=function(geom){var array=[];var components=geom.getPolygons();for(var i=0,ii=components.length;i<ii;++i){array.push("("+ol.format.WKT.encodePolygonGeometry_(components[i])+")")}return array.join(",")};ol.format.WKT.encode_=function(geom){var type=geom.getType();var geometryEncoder=ol.format.WKT.GeometryEncoder_[type];goog.asserts.assert(goog.isDef(geometryEncoder),"geometryEncoder should be defined");var enc=geometryEncoder(geom);type=type.toUpperCase();if(enc.length===0){return type+" "+ol.format.WKT.EMPTY}return type+"("+enc+")"};ol.format.WKT.GeometryEncoder_={Point:ol.format.WKT.encodePointGeometry_,LineString:ol.format.WKT.encodeLineStringGeometry_,Polygon:ol.format.WKT.encodePolygonGeometry_,MultiPoint:ol.format.WKT.encodeMultiPointGeometry_,MultiLineString:ol.format.WKT.encodeMultiLineStringGeometry_,MultiPolygon:ol.format.WKT.encodeMultiPolygonGeometry_,GeometryCollection:ol.format.WKT.encodeGeometryCollectionGeometry_};ol.format.WKT.prototype.parse_=function(wkt){var lexer=new ol.format.WKT.Lexer(wkt);var parser=new ol.format.WKT.Parser(lexer);return parser.parse()};ol.format.WKT.prototype.readFeature;ol.format.WKT.prototype.readFeatureFromText=function(text,opt_options){var geom=this.readGeometryFromText(text,opt_options);if(goog.isDef(geom)){var feature=new ol.Feature();feature.setGeometry(geom);return feature}return null};ol.format.WKT.prototype.readFeatures;ol.format.WKT.prototype.readFeaturesFromText=function(text,opt_options){var geometries=[];var geometry=this.readGeometryFromText(text,opt_options);if(this.splitCollection_&&geometry.getType()==ol.geom.GeometryType.GEOMETRY_COLLECTION){geometries=((geometry)).getGeometriesArray()}else{geometries=[geometry]}var feature,features=[];for(var i=0,ii=geometries.length;i<ii;++i){feature=new ol.Feature();feature.setGeometry(geometries[i]);features.push(feature)}return features};ol.format.WKT.prototype.readGeometry;ol.format.WKT.prototype.readGeometryFromText=function(text,opt_options){var geometry=this.parse_(text);if(goog.isDef(geometry)){return(ol.format.Feature.transformWithOptions(geometry,false,opt_options))}else{return null}};ol.format.WKT.prototype.writeFeature;ol.format.WKT.prototype.writeFeatureText=function(feature,opt_options){var geometry=feature.getGeometry();if(goog.isDef(geometry)){return this.writeGeometryText(geometry,opt_options)}return""};ol.format.WKT.prototype.writeFeatures;ol.format.WKT.prototype.writeFeaturesText=function(features,opt_options){if(features.length==1){return this.writeFeatureText(features[0],opt_options)}var geometries=[];for(var i=0,ii=features.length;i<ii;++i){geometries.push(features[i].getGeometry())}var collection=new ol.geom.GeometryCollection(geometries);return this.writeGeometryText(collection,opt_options)};ol.format.WKT.prototype.writeGeometry;ol.format.WKT.prototype.writeGeometryText=function(geometry,opt_options){return ol.format.WKT.encode_((ol.format.Feature.transformWithOptions(geometry,true,opt_options)))};ol.format.WKT.Token;ol.format.WKT.TokenType={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6};ol.format.WKT.Lexer=function(wkt){this.wkt=wkt;this.index_=-1};ol.format.WKT.Lexer.prototype.isAlpha_=function(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"};ol.format.WKT.Lexer.prototype.isNumeric_=function(c,opt_decimal){var decimal=goog.isDef(opt_decimal)?opt_decimal:false;return c>="0"&&c<="9"||c=="."&&!decimal};ol.format.WKT.Lexer.prototype.isWhiteSpace_=function(c){return c==" "||c=="\t"||c=="\r"||c=="\n"};ol.format.WKT.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)};ol.format.WKT.Lexer.prototype.nextToken=function(){var c=this.nextChar_();var token={position:this.index_,value:c};if(c=="("){token.type=ol.format.WKT.TokenType.LEFT_PAREN}else{if(c==","){token.type=ol.format.WKT.TokenType.COMMA}else{if(c==")"){token.type=ol.format.WKT.TokenType.RIGHT_PAREN}else{if(this.isNumeric_(c)||c=="-"){token.type=ol.format.WKT.TokenType.NUMBER;token.value=this.readNumber_()}else{if(this.isAlpha_(c)){token.type=ol.format.WKT.TokenType.TEXT;token.value=this.readText_()}else{if(this.isWhiteSpace_(c)){return this.nextToken()}else{if(c===""){token.type=ol.format.WKT.TokenType.EOF}else{throw new Error("Unexpected character: "+c)}}}}}}}return token};ol.format.WKT.Lexer.prototype.readNumber_=function(){var c,index=this.index_;var decimal=false;var scientificNotation=false;do{if(c=="."){decimal=true}else{if(c=="e"||c=="E"){scientificNotation=true}}c=this.nextChar_()}while(this.isNumeric_(c,decimal)||!scientificNotation&&(c=="e"||c=="E")||scientificNotation&&(c=="-"||c=="+"));return parseFloat(this.wkt.substring(index,this.index_--))};ol.format.WKT.Lexer.prototype.readText_=function(){var c,index=this.index_;do{c=this.nextChar_()}while(this.isAlpha_(c));return this.wkt.substring(index,this.index_--).toUpperCase()};ol.format.WKT.Parser=function(lexer){this.lexer_=lexer;this.token_;this.dimension_=2};ol.format.WKT.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()};ol.format.WKT.Parser.prototype.match=function(type){var isMatch=this.token_.type==type;if(isMatch){this.consume_()}return isMatch};ol.format.WKT.Parser.prototype.parse=function(){this.consume_();var geometry=this.parseGeometry_();goog.asserts.assert(this.token_.type==ol.format.WKT.TokenType.EOF,"token type should be end of file");return geometry};ol.format.WKT.Parser.prototype.parseGeometry_=function(){var token=this.token_;if(this.match(ol.format.WKT.TokenType.TEXT)){var geomType=token.value;if(geomType==ol.geom.GeometryType.GEOMETRY_COLLECTION.toUpperCase()){var geometries=this.parseGeometryCollectionText_();return new ol.geom.GeometryCollection(geometries)}else{var parser=ol.format.WKT.Parser.GeometryParser_[geomType];var ctor=ol.format.WKT.Parser.GeometryConstructor_[geomType];if(!goog.isDef(parser)||!goog.isDef(ctor)){throw new Error("Invalid geometry type: "+geomType)}var coordinates=parser.call(this);return new ctor(coordinates)}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var geometries=[];do{geometries.push(this.parseGeometry_())}while(this.match(ol.format.WKT.TokenType.COMMA));if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return geometries}}else{if(this.isEmptyGeometry_()){return[]}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePointText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var coordinates=this.parsePoint_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return coordinates}}else{if(this.isEmptyGeometry_()){return null}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseLineStringText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var coordinates=this.parsePointList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return coordinates}}else{if(this.isEmptyGeometry_()){return[]}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePolygonText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var coordinates=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return coordinates}}else{if(this.isEmptyGeometry_()){return[]}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiPointText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var coordinates;if(this.token_.type==ol.format.WKT.TokenType.LEFT_PAREN){coordinates=this.parsePointTextList_()}else{coordinates=this.parsePointList_()}if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return coordinates}}else{if(this.isEmptyGeometry_()){return[]}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var coordinates=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return coordinates}}else{if(this.isEmptyGeometry_()){return[]}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var coordinates=this.parsePolygonTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return coordinates}}else{if(this.isEmptyGeometry_()){return[]}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePoint_=function(){var coordinates=[];for(var i=0;i<this.dimension_;++i){var token=this.token_;if(this.match(ol.format.WKT.TokenType.NUMBER)){coordinates.push(token.value)}else{break}}if(coordinates.length==this.dimension_){return coordinates}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePointList_=function(){var coordinates=[this.parsePoint_()];while(this.match(ol.format.WKT.TokenType.COMMA)){coordinates.push(this.parsePoint_())}return coordinates};ol.format.WKT.Parser.prototype.parsePointTextList_=function(){var coordinates=[this.parsePointText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){coordinates.push(this.parsePointText_())}return coordinates};ol.format.WKT.Parser.prototype.parseLineStringTextList_=function(){var coordinates=[this.parseLineStringText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){coordinates.push(this.parseLineStringText_())}return coordinates};ol.format.WKT.Parser.prototype.parsePolygonTextList_=function(){var coordinates=[this.parsePolygonText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){coordinates.push(this.parsePolygonText_())}return coordinates};ol.format.WKT.Parser.prototype.isEmptyGeometry_=function(){var isEmpty=this.token_.type==ol.format.WKT.TokenType.TEXT&&this.token_.value==ol.format.WKT.EMPTY;if(isEmpty){this.consume_()}return isEmpty};ol.format.WKT.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"};ol.format.WKT.Parser.GeometryConstructor_={POINT:ol.geom.Point,LINESTRING:ol.geom.LineString,POLYGON:ol.geom.Polygon,MULTIPOINT:ol.geom.MultiPoint,MULTILINESTRING:ol.geom.MultiLineString,MULTIPOLYGON:ol.geom.MultiPolygon};ol.format.WKT.Parser.GeometryParser_={POINT:ol.format.WKT.Parser.prototype.parsePointText_,LINESTRING:ol.format.WKT.Parser.prototype.parseLineStringText_,POLYGON:ol.format.WKT.Parser.prototype.parsePolygonText_,MULTIPOINT:ol.format.WKT.Parser.prototype.parseMultiPointText_,MULTILINESTRING:ol.format.WKT.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:ol.format.WKT.Parser.prototype.parseMultiPolygonText_};goog.provide("ol.format.WMSCapabilities");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("goog.string");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.WMSCapabilities=function(){goog.base(this);this.version=undefined};goog.inherits(ol.format.WMSCapabilities,ol.format.XML);ol.format.WMSCapabilities.prototype.read;ol.format.WMSCapabilities.prototype.readFromDocument=function(doc){goog.asserts.assert(doc.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(n)}}return null};ol.format.WMSCapabilities.prototype.readFromNode=function(node){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="WMS_Capabilities"||node.localName=="WMT_MS_Capabilities","localName should be WMS_Capabilities or WMT_MS_Capabilities");this.version=goog.string.trim(node.getAttribute("version"));goog.asserts.assertString(this.version,"this.version should be a string");var wmsCapabilityObject=ol.xml.pushParseAndPop({version:this.version},ol.format.WMSCapabilities.PARSERS_,node,[]);return goog.isDef(wmsCapabilityObject)?wmsCapabilityObject:null};ol.format.WMSCapabilities.readAttribution_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Attribution","localName should be Attribution");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readBoundingBox_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="BoundingBox","localName should be BoundingBox");var extent=[ol.format.XSD.readDecimalString(node.getAttribute("minx")),ol.format.XSD.readDecimalString(node.getAttribute("miny")),ol.format.XSD.readDecimalString(node.getAttribute("maxx")),ol.format.XSD.readDecimalString(node.getAttribute("maxy"))];var resolutions=[ol.format.XSD.readDecimalString(node.getAttribute("resx")),ol.format.XSD.readDecimalString(node.getAttribute("resy"))];return{crs:node.getAttribute("CRS"),extent:extent,res:resolutions}};ol.format.WMSCapabilities.readEXGeographicBoundingBox_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="EX_GeographicBoundingBox","localName should be EX_GeographicBoundingBox");var geographicBoundingBox=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,node,objectStack);if(!goog.isDef(geographicBoundingBox)){return undefined}var westBoundLongitude=(geographicBoundingBox.westBoundLongitude);var southBoundLatitude=(geographicBoundingBox.southBoundLatitude);var eastBoundLongitude=(geographicBoundingBox.eastBoundLongitude);var northBoundLatitude=(geographicBoundingBox.northBoundLatitude);if(!goog.isDef(westBoundLongitude)||!goog.isDef(southBoundLatitude)||!goog.isDef(eastBoundLongitude)||!goog.isDef(northBoundLatitude)){return undefined}return([westBoundLongitude,southBoundLatitude,eastBoundLongitude,northBoundLatitude])};ol.format.WMSCapabilities.readCapability_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Capability","localName should be Capability");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CAPABILITY_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readService_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Service","localName should be Service");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.SERVICE_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readContactInformation_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType shpuld be ELEMENT");goog.asserts.assert(node.localName=="ContactInformation","localName should be ContactInformation");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readContactPersonPrimary_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ContactPersonPrimary","localName should be ContactPersonPrimary");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readContactAddress_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="ContactAddress","localName should be ContactAddress");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readException_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Exception","localName should be Exception");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.EXCEPTION_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readCapabilityLayer_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Layer","localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readLayer_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Layer","localName should be Layer");var parentLayerObject=(objectStack[objectStack.length-1]);var layerObject=(ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,node,objectStack));if(!goog.isDef(layerObject)){return undefined}var queryable=ol.format.XSD.readBooleanString(node.getAttribute("queryable"));if(!goog.isDef(queryable)){queryable=parentLayerObject.queryable}layerObject.queryable=goog.isDef(queryable)?queryable:false;var cascaded=ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("cascaded"));if(!goog.isDef(cascaded)){cascaded=parentLayerObject.cascaded}layerObject.cascaded=cascaded;var opaque=ol.format.XSD.readBooleanString(node.getAttribute("opaque"));if(!goog.isDef(opaque)){opaque=parentLayerObject.opaque}layerObject.opaque=goog.isDef(opaque)?opaque:false;var noSubsets=ol.format.XSD.readBooleanString(node.getAttribute("noSubsets"));if(!goog.isDef(noSubsets)){noSubsets=parentLayerObject.noSubsets}layerObject.noSubsets=goog.isDef(noSubsets)?noSubsets:false;var fixedWidth=ol.format.XSD.readDecimalString(node.getAttribute("fixedWidth"));if(!goog.isDef(fixedWidth)){fixedWidth=parentLayerObject.fixedWidth}layerObject.fixedWidth=fixedWidth;var fixedHeight=ol.format.XSD.readDecimalString(node.getAttribute("fixedHeight"));if(!goog.isDef(fixedHeight)){fixedHeight=parentLayerObject.fixedHeight}layerObject.fixedHeight=fixedHeight;var addKeys=["Style","CRS","AuthorityURL"];goog.array.forEach(addKeys,function(key){var parentValue=parentLayerObject[key];if(goog.isDef(parentValue)){var childValue=goog.object.setIfUndefined(layerObject,key,[]);childValue=childValue.concat(parentValue);layerObject[key]=childValue}});var replaceKeys=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];goog.array.forEach(replaceKeys,function(key){var childValue=layerObject[key];if(!goog.isDef(childValue)){var parentValue=parentLayerObject[key];layerObject[key]=parentValue}});return layerObject};ol.format.WMSCapabilities.readDimension_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Dimension","localName should be Dimension");var dimensionObject={name:node.getAttribute("name"),units:node.getAttribute("units"),unitSymbol:node.getAttribute("unitSymbol"),"default":node.getAttribute("default"),multipleValues:ol.format.XSD.readBooleanString(node.getAttribute("multipleValues")),nearestValue:ol.format.XSD.readBooleanString(node.getAttribute("nearestValue")),current:ol.format.XSD.readBooleanString(node.getAttribute("current")),values:ol.format.XSD.readString(node)};return dimensionObject};ol.format.WMSCapabilities.readFormatOnlineresource_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readRequest_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Request","localName should be Request");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.REQUEST_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readDCPType_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="DCPType","localName should be DCPType");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.DCPTYPE_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readHTTP_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="HTTP","localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.HTTP_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readOperationType_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readSizedFormatOnlineresource_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var formatOnlineresource=ol.format.WMSCapabilities.readFormatOnlineresource_(node,objectStack);if(goog.isDef(formatOnlineresource)){var size=[ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("width")),ol.format.XSD.readNonNegativeIntegerString(node.getAttribute("height"))];formatOnlineresource.size=size;return formatOnlineresource}return undefined};ol.format.WMSCapabilities.readAuthorityURL_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="AuthorityURL","localName should be AuthorityURL");var authorityObject=ol.format.WMSCapabilities.readFormatOnlineresource_(node,objectStack);if(goog.isDef(authorityObject)){authorityObject.name=node.getAttribute("name");return authorityObject}return undefined};ol.format.WMSCapabilities.readMetadataURL_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="MetadataURL","localName should be MetadataURL");var metadataObject=ol.format.WMSCapabilities.readFormatOnlineresource_(node,objectStack);if(goog.isDef(metadataObject)){metadataObject.type=node.getAttribute("type");return metadataObject}return undefined};ol.format.WMSCapabilities.readStyle_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Style","localName should be Style");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.STYLE_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.readKeywordList_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="KeywordList","localName should be KeywordList");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_,node,objectStack)};ol.format.WMSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wms"];ol.format.WMSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Service:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readService_),Capability:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapability_)});ol.format.WMSCapabilities.CAPABILITY_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Request:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readRequest_),Exception:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readException_),Layer:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapabilityLayer_)});ol.format.WMSCapabilities.SERVICE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ContactInformation:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactInformation_),Fees:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AccessConstraints:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LayerLimit:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)});ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPersonPrimary:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactPersonPrimary_),ContactPosition:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactAddress:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactAddress_),ContactVoiceTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactFacsimileTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPerson:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactOrganization:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{AddressType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),StateOrProvince:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.EXCEPTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeArrayPusher(ol.format.XSD.readString)});ol.format.WMSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),CRS:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),EX_GeographicBoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readEXGeographicBoundingBox_),BoundingBox:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readBoundingBox_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDimension_),Attribution:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readAttribution_),AuthorityURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readAuthorityURL_),Identifier:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),MetadataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readMetadataURL_),DataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),FeatureListURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),Style:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readStyle_),MinScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),MaxScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readLayer_)});ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),LogoURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readSizedFormatOnlineresource_)});ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{westBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),eastBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),southBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),northBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.WMSCapabilities.REQUEST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{GetCapabilities:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetMap:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetFeatureInfo:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_)});ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),DCPType:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDCPType_)});ol.format.WMSCapabilities.DCPTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readHTTP_)});ol.format.WMSCapabilities.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),Post:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readSizedFormatOnlineresource_),StyleSheetURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),StyleURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref)});ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Keyword:ol.xml.makeArrayPusher(ol.format.XSD.readString)});goog.provide("ol.format.WMSGetFeatureInfo");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("goog.string");goog.require("ol.format.GML2");goog.require("ol.format.XMLFeature");goog.require("ol.xml");ol.format.WMSGetFeatureInfo=function(){this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new ol.format.GML2();goog.base(this)};goog.inherits(ol.format.WMSGetFeatureInfo,ol.format.XMLFeature);ol.format.WMSGetFeatureInfo.featureIdentifier_="_feature";ol.format.WMSGetFeatureInfo.layerIdentifier_="_layer";ol.format.WMSGetFeatureInfo.prototype.readFeatures_=function(node,objectStack){node.namespaceURI=this.featureNS_;goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var localName=ol.xml.getLocalName(node);var features=[];if(node.childNodes.length===0){return features}if(localName=="msGMLOutput"){goog.array.forEach(node.childNodes,function(layer){if(layer.nodeType!==goog.dom.NodeType.ELEMENT){return}var context=objectStack[0];goog.asserts.assert(goog.isObject(context),"context should be an Object");goog.asserts.assert(layer.localName.indexOf(ol.format.WMSGetFeatureInfo.layerIdentifier_)>=0,"localName of layer node should match layerIdentifier");var featureType=goog.string.remove(layer.localName,ol.format.WMSGetFeatureInfo.layerIdentifier_)+ol.format.WMSGetFeatureInfo.featureIdentifier_;context.featureType=featureType;context.featureNS=this.featureNS_;var parsers={};parsers[featureType]=ol.xml.makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var parsersNS=ol.xml.makeStructureNS([context.featureNS,null],parsers);layer.namespaceURI=this.featureNS_;var layerFeatures=ol.xml.pushParseAndPop([],parsersNS,layer,objectStack,this.gmlFormat_);if(goog.isDef(layerFeatures)){goog.array.extend(features,layerFeatures)}},this)}if(localName=="FeatureCollection"){var gmlFeatures=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,node,[{}],this.gmlFormat_);if(goog.isDef(gmlFeatures)){features=gmlFeatures}}return features};ol.format.WMSGetFeatureInfo.prototype.readFeatures;ol.format.WMSGetFeatureInfo.prototype.readFeaturesFromNode=function(node,opt_options){var options={featureType:this.featureType,featureNS:this.featureNS};if(goog.isDef(opt_options)){goog.object.extend(options,this.getReadOptions(node,opt_options))}return this.readFeatures_(node,[options])};goog.provide("ol.format.WMTSCapabilities");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.string");goog.require("ol.extent");goog.require("ol.format.OWS");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.WMTSCapabilities=function(){goog.base(this);this.owsParser_=new ol.format.OWS()};goog.inherits(ol.format.WMTSCapabilities,ol.format.XML);ol.format.WMTSCapabilities.prototype.read;ol.format.WMTSCapabilities.prototype.readFromDocument=function(doc){goog.asserts.assert(doc.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var n=doc.firstChild;!goog.isNull(n);n=n.nextSibling){if(n.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(n)}}return null};ol.format.WMTSCapabilities.prototype.readFromNode=function(node){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Capabilities","localName should be Capabilities");this.version=goog.string.trim(node.getAttribute("version"));goog.asserts.assertString(this.version,"this.version should be a string");var WMTSCapabilityObject=this.owsParser_.readFromNode(node);if(!goog.isDef(WMTSCapabilityObject)){return null}WMTSCapabilityObject.version=this.version;WMTSCapabilityObject=ol.xml.pushParseAndPop(WMTSCapabilityObject,ol.format.WMTSCapabilities.PARSERS_,node,[]);return goog.isDef(WMTSCapabilityObject)?WMTSCapabilityObject:null};ol.format.WMTSCapabilities.readContents_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Contents","localName should be Contents");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.CONTENTS_PARSERS_,node,objectStack)};ol.format.WMTSCapabilities.readLayer_=function(node,objectStack){goog.asserts.assert(node.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(node.localName=="Layer","localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.LAYER_PARSERS_,node,objectStack)};ol.format.WMTSCapabilities.readTileMatrixSet_=function(node,objectStack){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_PARSERS_,node,objectStack)};ol.format.WMTSCapabilities.readStyle_=function(node,objectStack){var style=ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.STYLE_PARSERS_,node,objectStack);if(!goog.isDef(style)){return undefined}var isDefault=node.getAttribute("isDefault")==="true";style.isDefault=isDefault;return style};ol.format.WMTSCapabilities.readTileMatrixSetLink_=function(node,objectStack){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_,node,objectStack)};ol.format.WMTSCapabilities.readResourceUrl_=function(node,objectStack){var format=node.getAttribute("format");var template=node.getAttribute("template");var resourceType=node.getAttribute("resourceType");var resource={};if(goog.isDef(format)){resource.format=format}if(goog.isDef(template)){resource.template=template}if(goog.isDef(resourceType)){resource.resourceType=resourceType}return resource};ol.format.WMTSCapabilities.readWgs84BoundingBox_=function(node,objectStack){var coordinates=ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.WGS84_BBOX_READERS_,node,objectStack);if(coordinates.length!=2){return undefined}return ol.extent.boundingExtent(coordinates)};ol.format.WMTSCapabilities.readLegendUrl_=function(node,objectStack){var legend={};legend.format=node.getAttribute("format");legend.href=ol.format.XLink.readHref(node);return legend};ol.format.WMTSCapabilities.readCoordinates_=function(node,objectStack){var coordinates=ol.format.XSD.readString(node).split(" ");if(!goog.isDef(coordinates)||coordinates.length!=2){return undefined}var x=+coordinates[0];var y=+coordinates[1];if(isNaN(x)||isNaN(y)){return undefined}return[x,y]};ol.format.WMTSCapabilities.readTileMatrix_=function(node,objectStack){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TM_PARSERS_,node,objectStack)};ol.format.WMTSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wmts/1.0"];ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.WMTSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Contents:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readContents_)});ol.format.WMTSCapabilities.CONTENTS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLayer_),TileMatrixSet:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSet_)});ol.format.WMTSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readStyle_),Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),TileMatrixSetLink:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSetLink_),ResourceURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readResourceUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),WGS84BoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readWgs84BoundingBox_),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLegendUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrixSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMTSCapabilities.WGS84_BBOX_READERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{LowerCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_),UpperCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_)});ol.format.WMTSCapabilities.TMS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{WellKnownScaleSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),TileMatrix:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrix_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{SupportedCRS:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TM_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TopLeftCorner:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readCoordinates_),ScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),TileWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),TileHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));goog.provide("ol.sphere.WGS84");goog.require("ol.Sphere");ol.sphere.WGS84=new ol.Sphere(6378137);goog.provide("ol.Geolocation");goog.provide("ol.GeolocationProperty");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math");goog.require("ol.Coordinate");goog.require("ol.Object");goog.require("ol.geom.Geometry");goog.require("ol.geom.Polygon");goog.require("ol.has");goog.require("ol.proj");goog.require("ol.sphere.WGS84");ol.GeolocationProperty={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"};ol.Geolocation=function(opt_options){goog.base(this);var options=goog.isDef(opt_options)?opt_options:{};this.position_=null;this.transform_=ol.proj.identityTransform;this.watchId_=undefined;goog.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.PROJECTION),this.handleProjectionChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.TRACKING),this.handleTrackingChanged_,false,this);if(goog.isDef(options.projection)){this.setProjection(ol.proj.get(options.projection))}if(goog.isDef(options.trackingOptions)){this.setTrackingOptions(options.trackingOptions)}this.setTracking(goog.isDef(options.tracking)?options.tracking:false)};goog.inherits(ol.Geolocation,ol.Object);ol.Geolocation.prototype.disposeInternal=function(){this.setTracking(false);goog.base(this,"disposeInternal")};ol.Geolocation.prototype.handleProjectionChanged_=function(){var projection=this.getProjection();if(goog.isDefAndNotNull(projection)){this.transform_=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),projection);if(!goog.isNull(this.position_)){this.set(ol.GeolocationProperty.POSITION,this.transform_(this.position_))}}};ol.Geolocation.prototype.handleTrackingChanged_=function(){if(ol.has.GEOLOCATION){var tracking=this.getTracking();if(tracking&&!goog.isDef(this.watchId_)){this.watchId_=goog.global.navigator.geolocation.watchPosition(goog.bind(this.positionChange_,this),goog.bind(this.positionError_,this),this.getTrackingOptions())}else{if(!tracking&&goog.isDef(this.watchId_)){goog.global.navigator.geolocation.clearWatch(this.watchId_);this.watchId_=undefined}}}};ol.Geolocation.prototype.positionChange_=function(position){var coords=position.coords;this.set(ol.GeolocationProperty.ACCURACY,coords.accuracy);this.set(ol.GeolocationProperty.ALTITUDE,goog.isNull(coords.altitude)?undefined:coords.altitude);this.set(ol.GeolocationProperty.ALTITUDE_ACCURACY,goog.isNull(coords.altitudeAccuracy)?undefined:coords.altitudeAccuracy);this.set(ol.GeolocationProperty.HEADING,goog.isNull(coords.heading)?undefined:goog.math.toRadians(coords.heading));if(goog.isNull(this.position_)){this.position_=[coords.longitude,coords.latitude]}else{this.position_[0]=coords.longitude;this.position_[1]=coords.latitude}var projectedPosition=this.transform_(this.position_);this.set(ol.GeolocationProperty.POSITION,projectedPosition);this.set(ol.GeolocationProperty.SPEED,goog.isNull(coords.speed)?undefined:coords.speed);var geometry=ol.geom.Polygon.circular(ol.sphere.WGS84,this.position_,coords.accuracy);geometry.applyTransform(this.transform_);this.set(ol.GeolocationProperty.ACCURACY_GEOMETRY,geometry);this.changed()};ol.Geolocation.prototype.positionError_=function(error){error.type=goog.events.EventType.ERROR;this.setTracking(false);this.dispatchEvent(error)};ol.Geolocation.prototype.getAccuracy=function(){return(this.get(ol.GeolocationProperty.ACCURACY))};ol.Geolocation.prototype.getAccuracyGeometry=function(){return(this.get(ol.GeolocationProperty.ACCURACY_GEOMETRY)||null)};ol.Geolocation.prototype.getAltitude=function(){return(this.get(ol.GeolocationProperty.ALTITUDE))};ol.Geolocation.prototype.getAltitudeAccuracy=function(){return(this.get(ol.GeolocationProperty.ALTITUDE_ACCURACY))};ol.Geolocation.prototype.getHeading=function(){return(this.get(ol.GeolocationProperty.HEADING))};ol.Geolocation.prototype.getPosition=function(){return(this.get(ol.GeolocationProperty.POSITION))};ol.Geolocation.prototype.getProjection=function(){return(this.get(ol.GeolocationProperty.PROJECTION))};ol.Geolocation.prototype.getSpeed=function(){return(this.get(ol.GeolocationProperty.SPEED))};ol.Geolocation.prototype.getTracking=function(){return(this.get(ol.GeolocationProperty.TRACKING))};ol.Geolocation.prototype.getTrackingOptions=function(){return(this.get(ol.GeolocationProperty.TRACKING_OPTIONS))};ol.Geolocation.prototype.setProjection=function(projection){this.set(ol.GeolocationProperty.PROJECTION,projection)};ol.Geolocation.prototype.setTracking=function(tracking){this.set(ol.GeolocationProperty.TRACKING,tracking)};ol.Geolocation.prototype.setTrackingOptions=function(options){this.set(ol.GeolocationProperty.TRACKING_OPTIONS,options)};goog.provide("ol.geom.flat.geodesic");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("ol.TransformFunction");goog.require("ol.math");goog.require("ol.proj");ol.geom.flat.geodesic.line_=function(interpolate,transform,squaredTolerance){var flatCoordinates=[];var geoA=interpolate(0);var geoB=interpolate(1);var a=transform(geoA);var b=transform(geoB);var geoStack=[geoB,geoA];var stack=[b,a];var fractionStack=[1,0];var fractions={};var maxIterations=100000;var geoM,m,fracA,fracB,fracM,key;while(--maxIterations>0&&fractionStack.length>0){fracA=fractionStack.pop();geoA=geoStack.pop();a=stack.pop();key=fracA.toString();if(!goog.object.containsKey(fractions,key)){flatCoordinates.push(a[0],a[1]);fractions[key]=true}fracB=fractionStack.pop();geoB=geoStack.pop();b=stack.pop();fracM=(fracA+fracB)/2;geoM=interpolate(fracM);m=transform(geoM);if(ol.math.squaredSegmentDistance(m[0],m[1],a[0],a[1],b[0],b[1])<squaredTolerance){flatCoordinates.push(b[0],b[1]);key=fracB.toString();goog.asserts.assert(!goog.object.containsKey(fractions,key),"fractions object should contain key : "+key);fractions[key]=true}else{fractionStack.push(fracB,fracM,fracM,fracA);stack.push(b,m,m,a);geoStack.push(geoB,geoM,geoM,geoA)}}goog.asserts.assert(maxIterations>0,"maxIterations should be more than 0");return flatCoordinates};ol.geom.flat.geodesic.greatCircleArc=function(lon1,lat1,lon2,lat2,projection,squaredTolerance){var geoProjection=ol.proj.get("EPSG:4326");var cosLat1=Math.cos(goog.math.toRadians(lat1));var sinLat1=Math.sin(goog.math.toRadians(lat1));var cosLat2=Math.cos(goog.math.toRadians(lat2));var sinLat2=Math.sin(goog.math.toRadians(lat2));var cosDeltaLon=Math.cos(goog.math.toRadians(lon2-lon1));var sinDeltaLon=Math.sin(goog.math.toRadians(lon2-lon1));var d=sinLat1*sinLat2+cosLat1*cosLat2*cosDeltaLon;return ol.geom.flat.geodesic.line_(function(frac){if(1<=d){return[lon2,lat2]}var D=frac*Math.acos(d);var cosD=Math.cos(D);var sinD=Math.sin(D);var y=sinDeltaLon*cosLat2;var x=cosLat1*sinLat2-sinLat1*cosLat2*cosDeltaLon;var theta=Math.atan2(y,x);var lat=Math.asin(sinLat1*cosD+cosLat1*sinD*Math.cos(theta));var lon=goog.math.toRadians(lon1)+Math.atan2(Math.sin(theta)*sinD*cosLat1,cosD-sinLat1*Math.sin(lat));return[goog.math.toDegrees(lon),goog.math.toDegrees(lat)]},ol.proj.getTransform(geoProjection,projection),squaredTolerance)};ol.geom.flat.geodesic.meridian=function(lon,lat1,lat2,projection,squaredTolerance){var epsg4326Projection=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(frac){return[lon,lat1+((lat2-lat1)*frac)]},ol.proj.getTransform(epsg4326Projection,projection),squaredTolerance)};ol.geom.flat.geodesic.parallel=function(lat,lon1,lon2,projection,squaredTolerance){var epsg4326Projection=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(frac){return[lon1+((lon2-lon1)*frac),lat]},ol.proj.getTransform(epsg4326Projection,projection),squaredTolerance)};goog.provide("ol.Graticule");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.flat.geodesic");goog.require("ol.proj");goog.require("ol.render.EventType");goog.require("ol.style.Stroke");ol.Graticule=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.map_=null;this.projection_=null;this.maxLat_=Infinity;this.maxLon_=Infinity;this.minLat_=-Infinity;this.minLon_=-Infinity;this.maxLatP_=Infinity;this.maxLonP_=Infinity;this.minLatP_=-Infinity;this.minLonP_=-Infinity;this.targetSize_=goog.isDef(options.targetSize)?options.targetSize:100;this.maxLines_=goog.isDef(options.maxLines)?options.maxLines:100;goog.asserts.assert(this.maxLines_>0,"this.maxLines_ should be more than 0");this.meridians_=[];this.parallels_=[];this.strokeStyle_=goog.isDef(options.strokeStyle)?options.strokeStyle:ol.Graticule.DEFAULT_STROKE_STYLE_;this.fromLonLatTransform_=undefined;this.toLonLatTransform_=undefined;this.projectionCenterLonLat_=null;this.setMap(goog.isDef(options.map)?options.map:null)};ol.Graticule.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:"rgba(0,0,0,0.2)"});ol.Graticule.intervals_=[90,45,30,20,10,5,2,1,0.5,0.2,0.1,0.05,0.01,0.005,0.002,0.001];ol.Graticule.prototype.addMeridian_=function(lon,minLat,maxLat,squaredTolerance,extent,index){var lineString=this.getMeridian_(lon,minLat,maxLat,squaredTolerance,index);if(ol.extent.intersects(lineString.getExtent(),extent)){this.meridians_[index++]=lineString}return index};ol.Graticule.prototype.addParallel_=function(lat,minLon,maxLon,squaredTolerance,extent,index){var lineString=this.getParallel_(lat,minLon,maxLon,squaredTolerance,index);if(ol.extent.intersects(lineString.getExtent(),extent)){this.parallels_[index++]=lineString}return index};ol.Graticule.prototype.createGraticule_=function(extent,center,resolution,squaredTolerance){var interval=this.getInterval_(resolution);if(interval==-1){this.meridians_.length=this.parallels_.length=0;return}var centerLonLat=this.toLonLatTransform_(center);var centerLon=centerLonLat[0];var centerLat=centerLonLat[1];var maxLines=this.maxLines_;var cnt,idx,lat,lon;var validExtent=[Math.max(extent[0],this.minLonP_),Math.max(extent[1],this.minLatP_),Math.min(extent[2],this.maxLonP_),Math.min(extent[3],this.maxLatP_)];validExtent=ol.proj.transformExtent(validExtent,this.projection_,"EPSG:4326");var maxLat=validExtent[3];var maxLon=validExtent[2];var minLat=validExtent[1];var minLon=validExtent[0];centerLon=Math.floor(centerLon/interval)*interval;lon=goog.math.clamp(centerLon,this.minLon_,this.maxLon_);idx=this.addMeridian_(lon,minLat,maxLat,squaredTolerance,extent,0);cnt=0;while(lon!=this.minLon_&&cnt++<maxLines){lon=Math.max(lon-interval,this.minLon_);idx=this.addMeridian_(lon,minLat,maxLat,squaredTolerance,extent,idx)}lon=goog.math.clamp(centerLon,this.minLon_,this.maxLon_);cnt=0;while(lon!=this.maxLon_&&cnt++<maxLines){lon=Math.min(lon+interval,this.maxLon_);idx=this.addMeridian_(lon,minLat,maxLat,squaredTolerance,extent,idx)}this.meridians_.length=idx;centerLat=Math.floor(centerLat/interval)*interval;lat=goog.math.clamp(centerLat,this.minLat_,this.maxLat_);idx=this.addParallel_(lat,minLon,maxLon,squaredTolerance,extent,0);cnt=0;while(lat!=this.minLat_&&cnt++<maxLines){lat=Math.max(lat-interval,this.minLat_);idx=this.addParallel_(lat,minLon,maxLon,squaredTolerance,extent,idx)}lat=goog.math.clamp(centerLat,this.minLat_,this.maxLat_);cnt=0;while(lat!=this.maxLat_&&cnt++<maxLines){lat=Math.min(lat+interval,this.maxLat_);idx=this.addParallel_(lat,minLon,maxLon,squaredTolerance,extent,idx)}this.parallels_.length=idx};ol.Graticule.prototype.getInterval_=function(resolution){var centerLon=this.projectionCenterLonLat_[0];var centerLat=this.projectionCenterLonLat_[1];var interval=-1;var i,ii,delta,dist;var target=Math.pow(this.targetSize_*resolution,2);var p1=[];var p2=[];for(i=0,ii=ol.Graticule.intervals_.length;i<ii;++i){delta=ol.Graticule.intervals_[i]/2;p1[0]=centerLon-delta;p1[1]=centerLat-delta;p2[0]=centerLon+delta;p2[1]=centerLat+delta;this.fromLonLatTransform_(p1,p1);this.fromLonLatTransform_(p2,p2);dist=Math.pow(p2[0]-p1[0],2)+Math.pow(p2[1]-p1[1],2);if(dist<=target){break}interval=ol.Graticule.intervals_[i]}return interval};ol.Graticule.prototype.getMap=function(){return this.map_};ol.Graticule.prototype.getMeridian_=function(lon,minLat,maxLat,squaredTolerance,index){goog.asserts.assert(lon>=this.minLon_,"lon should be larger than or equal to this.minLon_");goog.asserts.assert(lon<=this.maxLon_,"lon should be smaller than or equal to this.maxLon_");var flatCoordinates=ol.geom.flat.geodesic.meridian(lon,minLat,maxLat,this.projection_,squaredTolerance);goog.asserts.assert(flatCoordinates.length>0,"flatCoordinates cannot be empty");var lineString=goog.isDef(this.meridians_[index])?this.meridians_[index]:new ol.geom.LineString(null);lineString.setFlatCoordinates(ol.geom.GeometryLayout.XY,flatCoordinates);return lineString};ol.Graticule.prototype.getMeridians=function(){return this.meridians_};ol.Graticule.prototype.getParallel_=function(lat,minLon,maxLon,squaredTolerance,index){goog.asserts.assert(lat>=this.minLat_,"lat should be larger than or equal to this.minLat_");goog.asserts.assert(lat<=this.maxLat_,"lat should be smaller than or equal to this.maxLat_");var flatCoordinates=ol.geom.flat.geodesic.parallel(lat,this.minLon_,this.maxLon_,this.projection_,squaredTolerance);goog.asserts.assert(flatCoordinates.length>0,"flatCoordinates cannot be empty");var lineString=goog.isDef(this.parallels_[index])?this.parallels_[index]:new ol.geom.LineString(null);lineString.setFlatCoordinates(ol.geom.GeometryLayout.XY,flatCoordinates);return lineString};ol.Graticule.prototype.getParallels=function(){return this.parallels_};ol.Graticule.prototype.handlePostCompose_=function(e){var vectorContext=e.vectorContext;var frameState=e.frameState;var extent=frameState.extent;var viewState=frameState.viewState;var center=viewState.center;var projection=viewState.projection;var resolution=viewState.resolution;var pixelRatio=frameState.pixelRatio;var squaredTolerance=resolution*resolution/(4*pixelRatio*pixelRatio);var updateProjectionInfo=goog.isNull(this.projection_)||!ol.proj.equivalent(this.projection_,projection);if(updateProjectionInfo){this.updateProjectionInfo_(projection)}this.createGraticule_(extent,center,resolution,squaredTolerance);vectorContext.setFillStrokeStyle(null,this.strokeStyle_);var i,l,line;for(i=0,l=this.meridians_.length;i<l;++i){line=this.meridians_[i];vectorContext.drawLineStringGeometry(line,null)}for(i=0,l=this.parallels_.length;i<l;++i){line=this.parallels_[i];vectorContext.drawLineStringGeometry(line,null)}};ol.Graticule.prototype.updateProjectionInfo_=function(projection){goog.asserts.assert(!goog.isNull(projection),"projection cannot be null");var epsg4326Projection=ol.proj.get("EPSG:4326");var extent=projection.getExtent();var worldExtent=projection.getWorldExtent();var worldExtentP=ol.proj.transformExtent(worldExtent,epsg4326Projection,projection);var maxLat=worldExtent[3];var maxLon=worldExtent[2];var minLat=worldExtent[1];var minLon=worldExtent[0];var maxLatP=worldExtentP[3];var maxLonP=worldExtentP[2];var minLatP=worldExtentP[1];var minLonP=worldExtentP[0];goog.asserts.assert(!goog.isNull(extent),"extent cannot be null");goog.asserts.assert(goog.isDef(maxLat),"maxLat should be defined");goog.asserts.assert(goog.isDef(maxLon),"maxLon should be defined");goog.asserts.assert(goog.isDef(minLat),"minLat should be defined");goog.asserts.assert(goog.isDef(minLon),"minLon should be defined");goog.asserts.assert(goog.isDef(maxLatP),"projected maxLat should be defined");goog.asserts.assert(goog.isDef(maxLonP),"projected maxLon should be defined");goog.asserts.assert(goog.isDef(minLatP),"projected minLat should be defined");goog.asserts.assert(goog.isDef(minLonP),"projected minLon should be defined");this.maxLat_=maxLat;this.maxLon_=maxLon;this.minLat_=minLat;this.minLon_=minLon;this.maxLatP_=maxLatP;this.maxLonP_=maxLonP;this.minLatP_=minLatP;this.minLonP_=minLonP;this.fromLonLatTransform_=ol.proj.getTransform(epsg4326Projection,projection);this.toLonLatTransform_=ol.proj.getTransform(projection,epsg4326Projection);this.projectionCenterLonLat_=this.toLonLatTransform_(ol.extent.getCenter(extent));this.projection_=projection};ol.Graticule.prototype.setMap=function(map){if(!goog.isNull(this.map_)){this.map_.un(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);this.map_.render()}if(!goog.isNull(map)){map.on(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);map.render()}this.map_=map};goog.provide("ol.Image");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.ImageBase");goog.require("ol.ImageState");goog.require("ol.extent");ol.Image=function(extent,resolution,pixelRatio,attributions,src,crossOrigin,imageLoadFunction){goog.base(this,extent,resolution,pixelRatio,ol.ImageState.IDLE,attributions);this.src_=src;this.image_=new Image();if(!goog.isNull(crossOrigin)){this.image_.crossOrigin=crossOrigin}this.imageByContext_={};this.imageListenerKeys_=null;this.state=ol.ImageState.IDLE;this.imageLoadFunction_=imageLoadFunction};goog.inherits(ol.Image,ol.ImageBase);ol.Image.prototype.getImage=function(opt_context){if(goog.isDef(opt_context)){var image;var key=goog.getUid(opt_context);if(key in this.imageByContext_){return this.imageByContext_[key]}else{if(goog.object.isEmpty(this.imageByContext_)){image=this.image_}else{image=(this.image_.cloneNode(false))}}this.imageByContext_[key]=image;return image}else{return this.image_}};ol.Image.prototype.handleImageError_=function(){this.state=ol.ImageState.ERROR;this.unlistenImage_();this.changed()};ol.Image.prototype.handleImageLoad_=function(){if(!goog.isDef(this.resolution)){this.resolution=ol.extent.getHeight(this.extent)/this.image_.height}this.state=ol.ImageState.LOADED;this.unlistenImage_();this.changed()};ol.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING;this.changed();goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should be null");this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,false,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,false,this)];this.imageLoadFunction_(this,this.src_)}};ol.Image.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should not be null");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};goog.provide("ol.ImageLoadFunctionType");ol.ImageLoadFunctionType;goog.provide("ol.TileLoadFunctionType");goog.provide("ol.TileVectorLoadFunctionType");ol.TileLoadFunctionType;ol.TileVectorLoadFunctionType;goog.provide("ol.ImageTile");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");ol.ImageTile=function(tileCoord,state,src,crossOrigin,tileLoadFunction){goog.base(this,tileCoord,state);this.src_=src;this.image_=new Image();if(!goog.isNull(crossOrigin)){this.image_.crossOrigin=crossOrigin}this.imageByContext_={};this.imageListenerKeys_=null;this.tileLoadFunction_=tileLoadFunction};goog.inherits(ol.ImageTile,ol.Tile);ol.ImageTile.prototype.disposeInternal=function(){if(this.state==ol.TileState.LOADING){this.unlistenImage_()}goog.base(this,"disposeInternal")};ol.ImageTile.prototype.getImage=function(opt_context){if(goog.isDef(opt_context)){var image;var key=goog.getUid(opt_context);if(key in this.imageByContext_){return this.imageByContext_[key]}else{if(goog.object.isEmpty(this.imageByContext_)){image=this.image_}else{image=(this.image_.cloneNode(false))}}this.imageByContext_[key]=image;return image}else{return this.image_}};ol.ImageTile.prototype.getKey=function(){return this.src_};ol.ImageTile.prototype.handleImageError_=function(){this.state=ol.TileState.ERROR;this.unlistenImage_();this.changed()};ol.ImageTile.prototype.handleImageLoad_=function(){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){if(!goog.isDef(this.image_.naturalWidth)){this.image_.naturalWidth=this.image_.width;this.image_.naturalHeight=this.image_.height}}if(this.image_.naturalWidth&&this.image_.naturalHeight){this.state=ol.TileState.LOADED}else{this.state=ol.TileState.EMPTY}this.unlistenImage_();this.changed()};ol.ImageTile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;this.changed();goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should be null");this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,false,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,false,this)];this.tileLoadFunction_(this,this.src_)}};ol.ImageTile.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should not be null");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};goog.provide("ol.ImageUrlFunction");goog.provide("ol.ImageUrlFunctionType");goog.require("ol.Size");ol.ImageUrlFunctionType;ol.ImageUrlFunction.createFromParamsFunction=function(baseUrl,params,paramsFunction){return(function(extent,size,projection){return paramsFunction(baseUrl,params,extent,size,projection)})};ol.ImageUrlFunction.nullImageUrlFunction=function(extent,size){return undefined};goog.provide("goog.events.FileDropHandler");goog.provide("goog.events.FileDropHandler.EventType");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.log");goog.require("goog.log.Level");goog.events.FileDropHandler=function(element,opt_preventDropOutside){goog.events.EventTarget.call(this);this.eventHandler_=new goog.events.EventHandler(this);var doc=element;if(opt_preventDropOutside){doc=goog.dom.getOwnerDocument(element)}this.eventHandler_.listen(doc,goog.events.EventType.DRAGENTER,this.onDocDragEnter_);if(doc!=element){this.eventHandler_.listen(doc,goog.events.EventType.DRAGOVER,this.onDocDragOver_)}this.eventHandler_.listen(element,goog.events.EventType.DRAGOVER,this.onElemDragOver_);this.eventHandler_.listen(element,goog.events.EventType.DROP,this.onElemDrop_)};goog.inherits(goog.events.FileDropHandler,goog.events.EventTarget);goog.events.FileDropHandler.prototype.dndContainsFiles_=false;goog.events.FileDropHandler.prototype.logger_=goog.log.getLogger("goog.events.FileDropHandler");goog.events.FileDropHandler.EventType={DROP:goog.events.EventType.DROP};goog.events.FileDropHandler.prototype.disposeInternal=function(){goog.events.FileDropHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose()};goog.events.FileDropHandler.prototype.dispatch_=function(e){goog.log.fine(this.logger_,"Firing DROP event...");var event=new goog.events.BrowserEvent(e.getBrowserEvent());event.type=goog.events.FileDropHandler.EventType.DROP;this.dispatchEvent(event)};goog.events.FileDropHandler.prototype.onDocDragEnter_=function(e){goog.log.log(this.logger_,goog.log.Level.FINER,'"'+e.target.id+'" ('+e.target+") dispatched: "+e.type);var dt=e.getBrowserEvent().dataTransfer;this.dndContainsFiles_=!!(dt&&((dt.types&&(goog.array.contains(dt.types,"Files")||goog.array.contains(dt.types,"public.file-url")))||(dt.files&&dt.files.length>0)));if(this.dndContainsFiles_){e.preventDefault()}goog.log.log(this.logger_,goog.log.Level.FINER,"dndContainsFiles_: "+this.dndContainsFiles_)};goog.events.FileDropHandler.prototype.onDocDragOver_=function(e){goog.log.log(this.logger_,goog.log.Level.FINEST,'"'+e.target.id+'" ('+e.target+") dispatched: "+e.type);if(this.dndContainsFiles_){e.preventDefault();var dt=e.getBrowserEvent().dataTransfer;dt.dropEffect="none"}};goog.events.FileDropHandler.prototype.onElemDragOver_=function(e){goog.log.log(this.logger_,goog.log.Level.FINEST,'"'+e.target.id+'" ('+e.target+") dispatched: "+e.type);if(this.dndContainsFiles_){e.preventDefault();e.stopPropagation();var dt=e.getBrowserEvent().dataTransfer;try{dt.effectAllowed="all"}catch(err){}dt.dropEffect="copy"}};goog.events.FileDropHandler.prototype.onElemDrop_=function(e){goog.log.log(this.logger_,goog.log.Level.FINER,'"'+e.target.id+'" ('+e.target+") dispatched: "+e.type);if(this.dndContainsFiles_){e.preventDefault();e.stopPropagation();this.dispatch_(e)}};goog.provide("goog.async.Deferred");goog.provide("goog.async.Deferred.AlreadyCalledError");goog.provide("goog.async.Deferred.CanceledError");goog.require("goog.Promise");goog.require("goog.Thenable");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.debug.Error");goog.async.Deferred=function(opt_onCancelFunction,opt_defaultScope){this.sequence_=[];this.onCancelFunction_=opt_onCancelFunction;this.defaultScope_=opt_defaultScope||null;this.fired_=false;this.hadError_=false;this.result_=undefined;this.blocked_=false;this.blocking_=false;this.silentlyCanceled_=false;this.unhandledErrorId_=0;this.parent_=null;this.branches_=0;if(goog.async.Deferred.LONG_STACK_TRACES){this.constructorStack_=null;if(Error.captureStackTrace){var target={stack:""};Error.captureStackTrace(target,goog.async.Deferred);if(typeof target.stack=="string"){this.constructorStack_=target.stack.replace(/^[^\n]*\n/,"")}}}};goog.define("goog.async.Deferred.STRICT_ERRORS",false);goog.define("goog.async.Deferred.LONG_STACK_TRACES",false);goog.async.Deferred.prototype.cancel=function(opt_deepCancel){if(!this.hasFired()){if(this.parent_){var parent=this.parent_;delete this.parent_;if(opt_deepCancel){parent.cancel(opt_deepCancel)}else{parent.branchCancel_()}}if(this.onCancelFunction_){this.onCancelFunction_.call(this.defaultScope_,this)}else{this.silentlyCanceled_=true}if(!this.hasFired()){this.errback(new goog.async.Deferred.CanceledError(this))}}else{if(this.result_ instanceof goog.async.Deferred){this.result_.cancel()}}};goog.async.Deferred.prototype.branchCancel_=function(){this.branches_--;if(this.branches_<=0){this.cancel()}};goog.async.Deferred.prototype.continue_=function(isSuccess,res){this.blocked_=false;this.updateResult_(isSuccess,res)};goog.async.Deferred.prototype.updateResult_=function(isSuccess,res){this.fired_=true;this.result_=res;this.hadError_=!isSuccess;this.fire_()};goog.async.Deferred.prototype.check_=function(){if(this.hasFired()){if(!this.silentlyCanceled_){throw new goog.async.Deferred.AlreadyCalledError(this)}this.silentlyCanceled_=false}};goog.async.Deferred.prototype.callback=function(opt_result){this.check_();this.assertNotDeferred_(opt_result);this.updateResult_(true,opt_result)};goog.async.Deferred.prototype.errback=function(opt_result){this.check_();this.assertNotDeferred_(opt_result);this.makeStackTraceLong_(opt_result);this.updateResult_(false,opt_result)};goog.async.Deferred.prototype.makeStackTraceLong_=function(error){if(!goog.async.Deferred.LONG_STACK_TRACES){return}if(this.constructorStack_&&goog.isObject(error)&&error.stack&&(/^[^\n]+(\n   [^\n]+)+/).test(error.stack)){error.stack=error.stack+"\nDEFERRED OPERATION:\n"+this.constructorStack_}};goog.async.Deferred.prototype.assertNotDeferred_=function(obj){goog.asserts.assert(!(obj instanceof goog.async.Deferred),"An execution sequence may not be initiated with a blocking Deferred.")};goog.async.Deferred.prototype.addCallback=function(cb,opt_scope){return this.addCallbacks(cb,null,opt_scope)};goog.async.Deferred.prototype.addErrback=function(eb,opt_scope){return this.addCallbacks(null,eb,opt_scope)};goog.async.Deferred.prototype.addBoth=function(f,opt_scope){return this.addCallbacks(f,f,opt_scope)};goog.async.Deferred.prototype.addFinally=function(f,opt_scope){var self=this;return this.addCallbacks(f,function(err){var result=f.call(self,err);if(!goog.isDef(result)){throw err}return result},opt_scope)};goog.async.Deferred.prototype.addCallbacks=function(cb,eb,opt_scope){goog.asserts.assert(!this.blocking_,"Blocking Deferreds can not be re-used");this.sequence_.push([cb,eb,opt_scope]);if(this.hasFired()){this.fire_()}return this};goog.async.Deferred.prototype.then=function(opt_onFulfilled,opt_onRejected,opt_context){var resolve,reject;var promise=new goog.Promise(function(res,rej){resolve=res;reject=rej});this.addCallbacks(resolve,function(reason){if(reason instanceof goog.async.Deferred.CanceledError){promise.cancel()}else{reject(reason)}});return promise.then(opt_onFulfilled,opt_onRejected,opt_context)};goog.Thenable.addImplementation(goog.async.Deferred);goog.async.Deferred.prototype.chainDeferred=function(otherDeferred){this.addCallbacks(otherDeferred.callback,otherDeferred.errback,otherDeferred);return this};goog.async.Deferred.prototype.awaitDeferred=function(otherDeferred){if(!(otherDeferred instanceof goog.async.Deferred)){return this.addCallback(function(){return otherDeferred})}return this.addCallback(goog.bind(otherDeferred.branch,otherDeferred))};goog.async.Deferred.prototype.branch=function(opt_propagateCancel){var d=new goog.async.Deferred();this.chainDeferred(d);if(opt_propagateCancel){d.parent_=this;this.branches_++}return d};goog.async.Deferred.prototype.hasFired=function(){return this.fired_};goog.async.Deferred.prototype.isError=function(res){return res instanceof Error};goog.async.Deferred.prototype.hasErrback_=function(){return goog.array.some(this.sequence_,function(sequenceRow){return goog.isFunction(sequenceRow[1])})};goog.async.Deferred.prototype.fire_=function(){if(this.unhandledErrorId_&&this.hasFired()&&this.hasErrback_()){goog.async.Deferred.unscheduleError_(this.unhandledErrorId_);this.unhandledErrorId_=0}if(this.parent_){this.parent_.branches_--;delete this.parent_}var res=this.result_;var unhandledException=false;var isNewlyBlocked=false;while(this.sequence_.length&&!this.blocked_){var sequenceEntry=this.sequence_.shift();var callback=sequenceEntry[0];var errback=sequenceEntry[1];var scope=sequenceEntry[2];var f=this.hadError_?errback:callback;if(f){try{var ret=f.call(scope||this.defaultScope_,res);if(goog.isDef(ret)){this.hadError_=this.hadError_&&(ret==res||this.isError(ret));this.result_=res=ret}if(goog.Thenable.isImplementedBy(res)||(typeof goog.global.Promise==="function"&&res instanceof goog.global.Promise)){isNewlyBlocked=true;this.blocked_=true}}catch(ex){res=ex;this.hadError_=true;this.makeStackTraceLong_(res);if(!this.hasErrback_()){unhandledException=true}}}}this.result_=res;if(isNewlyBlocked){var onCallback=goog.bind(this.continue_,this,true);var onErrback=goog.bind(this.continue_,this,false);if(res instanceof goog.async.Deferred){res.addCallbacks(onCallback,onErrback);res.blocking_=true}else{res.then(onCallback,onErrback)}}else{if(goog.async.Deferred.STRICT_ERRORS&&this.isError(res)&&!(res instanceof goog.async.Deferred.CanceledError)){this.hadError_=true;unhandledException=true}}if(unhandledException){this.unhandledErrorId_=goog.async.Deferred.scheduleError_(res)}};goog.async.Deferred.succeed=function(opt_result){var d=new goog.async.Deferred();d.callback(opt_result);return d};goog.async.Deferred.fromPromise=function(promise){var d=new goog.async.Deferred();d.callback();d.addCallback(function(){return promise});return d};goog.async.Deferred.fail=function(res){var d=new goog.async.Deferred();d.errback(res);return d};goog.async.Deferred.canceled=function(){var d=new goog.async.Deferred();d.cancel();return d};goog.async.Deferred.when=function(value,callback,opt_scope){if(value instanceof goog.async.Deferred){return value.branch(true).addCallback(callback,opt_scope)}else{return goog.async.Deferred.succeed(value).addCallback(callback,opt_scope)}};goog.async.Deferred.AlreadyCalledError=function(deferred){goog.debug.Error.call(this);this.deferred=deferred};goog.inherits(goog.async.Deferred.AlreadyCalledError,goog.debug.Error);goog.async.Deferred.AlreadyCalledError.prototype.message="Deferred has already fired";goog.async.Deferred.AlreadyCalledError.prototype.name="AlreadyCalledError";goog.async.Deferred.CanceledError=function(deferred){goog.debug.Error.call(this);this.deferred=deferred};goog.inherits(goog.async.Deferred.CanceledError,goog.debug.Error);goog.async.Deferred.CanceledError.prototype.message="Deferred was canceled";goog.async.Deferred.CanceledError.prototype.name="CanceledError";goog.async.Deferred.Error_=function(error){this.id_=goog.global.setTimeout(goog.bind(this.throwError,this),0);this.error_=error};goog.async.Deferred.Error_.prototype.throwError=function(){goog.asserts.assert(goog.async.Deferred.errorMap_[this.id_],"Cannot throw an error that is not scheduled.");delete goog.async.Deferred.errorMap_[this.id_];throw this.error_};goog.async.Deferred.Error_.prototype.resetTimer=function(){goog.global.clearTimeout(this.id_)};goog.async.Deferred.errorMap_={};goog.async.Deferred.scheduleError_=function(error){var deferredError=new goog.async.Deferred.Error_(error);goog.async.Deferred.errorMap_[deferredError.id_]=deferredError;return deferredError.id_};goog.async.Deferred.unscheduleError_=function(id){var error=goog.async.Deferred.errorMap_[id];if(error){error.resetTimer();delete goog.async.Deferred.errorMap_[id]}};goog.async.Deferred.assertNoErrors=function(){var map=goog.async.Deferred.errorMap_;for(var key in map){var error=map[key];error.resetTimer();error.throwError()}};goog.provide("goog.fs.Error");goog.provide("goog.fs.Error.ErrorCode");goog.require("goog.debug.Error");goog.require("goog.object");goog.require("goog.string");goog.fs.Error=function(error,action){this.name;this.code;if(goog.isDef(error.name)){this.name=error.name;this.code=goog.fs.Error.getCodeFromName_(error.name)}else{this.code=error.code;this.name=goog.fs.Error.getNameFromCode_(error.code)}goog.fs.Error.base(this,"constructor",goog.string.subs("%s %s",this.name,action))};goog.inherits(goog.fs.Error,goog.debug.Error);goog.fs.Error.ErrorName={ABORT:"AbortError",ENCODING:"EncodingError",INVALID_MODIFICATION:"InvalidModificationError",INVALID_STATE:"InvalidStateError",NOT_FOUND:"NotFoundError",NOT_READABLE:"NotReadableError",NO_MODIFICATION_ALLOWED:"NoModificationAllowedError",PATH_EXISTS:"PathExistsError",QUOTA_EXCEEDED:"QuotaExceededError",SECURITY:"SecurityError",SYNTAX:"SyntaxError",TYPE_MISMATCH:"TypeMismatchError"};goog.fs.Error.ErrorCode={NOT_FOUND:1,SECURITY:2,ABORT:3,NOT_READABLE:4,ENCODING:5,NO_MODIFICATION_ALLOWED:6,INVALID_STATE:7,SYNTAX:8,INVALID_MODIFICATION:9,QUOTA_EXCEEDED:10,TYPE_MISMATCH:11,PATH_EXISTS:12};goog.fs.Error.getNameFromCode_=function(code){var name=goog.object.findKey(goog.fs.Error.NameToCodeMap_,function(c){return code==c});if(!goog.isDef(name)){throw new Error("Invalid code: "+code)}return name};goog.fs.Error.getCodeFromName_=function(name){return goog.fs.Error.NameToCodeMap_[name]};goog.fs.Error.NameToCodeMap_=goog.object.create(goog.fs.Error.ErrorName.ABORT,goog.fs.Error.ErrorCode.ABORT,goog.fs.Error.ErrorName.ENCODING,goog.fs.Error.ErrorCode.ENCODING,goog.fs.Error.ErrorName.INVALID_MODIFICATION,goog.fs.Error.ErrorCode.INVALID_MODIFICATION,goog.fs.Error.ErrorName.INVALID_STATE,goog.fs.Error.ErrorCode.INVALID_STATE,goog.fs.Error.ErrorName.NOT_FOUND,goog.fs.Error.ErrorCode.NOT_FOUND,goog.fs.Error.ErrorName.NOT_READABLE,goog.fs.Error.ErrorCode.NOT_READABLE,goog.fs.Error.ErrorName.NO_MODIFICATION_ALLOWED,goog.fs.Error.ErrorCode.NO_MODIFICATION_ALLOWED,goog.fs.Error.ErrorName.PATH_EXISTS,goog.fs.Error.ErrorCode.PATH_EXISTS,goog.fs.Error.ErrorName.QUOTA_EXCEEDED,goog.fs.Error.ErrorCode.QUOTA_EXCEEDED,goog.fs.Error.ErrorName.SECURITY,goog.fs.Error.ErrorCode.SECURITY,goog.fs.Error.ErrorName.SYNTAX,goog.fs.Error.ErrorCode.SYNTAX,goog.fs.Error.ErrorName.TYPE_MISMATCH,goog.fs.Error.ErrorCode.TYPE_MISMATCH);goog.provide("goog.fs.ProgressEvent");goog.require("goog.events.Event");goog.fs.ProgressEvent=function(event,target){goog.fs.ProgressEvent.base(this,"constructor",event.type,target);this.event_=event};goog.inherits(goog.fs.ProgressEvent,goog.events.Event);goog.fs.ProgressEvent.prototype.isLengthComputable=function(){return this.event_.lengthComputable};goog.fs.ProgressEvent.prototype.getLoaded=function(){return this.event_.loaded};goog.fs.ProgressEvent.prototype.getTotal=function(){return this.event_.total};goog.provide("goog.fs.FileReader");goog.provide("goog.fs.FileReader.EventType");goog.provide("goog.fs.FileReader.ReadyState");goog.require("goog.async.Deferred");goog.require("goog.events.EventTarget");goog.require("goog.fs.Error");goog.require("goog.fs.ProgressEvent");goog.fs.FileReader=function(){goog.fs.FileReader.base(this,"constructor");this.reader_=new FileReader();this.reader_.onloadstart=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onprogress=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onload=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onabort=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onerror=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onloadend=goog.bind(this.dispatchProgressEvent_,this)};goog.inherits(goog.fs.FileReader,goog.events.EventTarget);goog.fs.FileReader.ReadyState={INIT:0,LOADING:1,DONE:2};goog.fs.FileReader.EventType={LOAD_START:"loadstart",PROGRESS:"progress",LOAD:"load",ABORT:"abort",ERROR:"error",LOAD_END:"loadend"};goog.fs.FileReader.prototype.abort=function(){try{this.reader_.abort()}catch(e){throw new goog.fs.Error(e,"aborting read")}};goog.fs.FileReader.prototype.getReadyState=function(){return(this.reader_.readyState)};goog.fs.FileReader.prototype.getResult=function(){return this.reader_.result};goog.fs.FileReader.prototype.getError=function(){return this.reader_.error&&new goog.fs.Error(this.reader_.error,"reading file")};goog.fs.FileReader.prototype.dispatchProgressEvent_=function(event){this.dispatchEvent(new goog.fs.ProgressEvent(event,this))};goog.fs.FileReader.prototype.disposeInternal=function(){goog.fs.FileReader.base(this,"disposeInternal");delete this.reader_};goog.fs.FileReader.prototype.readAsBinaryString=function(blob){this.reader_.readAsBinaryString(blob)};goog.fs.FileReader.readAsBinaryString=function(blob){var reader=new goog.fs.FileReader();var d=goog.fs.FileReader.createDeferred_(reader);reader.readAsBinaryString(blob);return d};goog.fs.FileReader.prototype.readAsArrayBuffer=function(blob){this.reader_.readAsArrayBuffer(blob)};goog.fs.FileReader.readAsArrayBuffer=function(blob){var reader=new goog.fs.FileReader();var d=goog.fs.FileReader.createDeferred_(reader);reader.readAsArrayBuffer(blob);return d};goog.fs.FileReader.prototype.readAsText=function(blob,opt_encoding){this.reader_.readAsText(blob,opt_encoding)};goog.fs.FileReader.readAsText=function(blob,opt_encoding){var reader=new goog.fs.FileReader();var d=goog.fs.FileReader.createDeferred_(reader);reader.readAsText(blob,opt_encoding);return d};goog.fs.FileReader.prototype.readAsDataUrl=function(blob){this.reader_.readAsDataURL(blob)};goog.fs.FileReader.readAsDataUrl=function(blob){var reader=new goog.fs.FileReader();var d=goog.fs.FileReader.createDeferred_(reader);reader.readAsDataUrl(blob);return d};goog.fs.FileReader.createDeferred_=function(reader){var deferred=new goog.async.Deferred();reader.listen(goog.fs.FileReader.EventType.LOAD_END,goog.partial(function(d,r,e){var result=r.getResult();var error=r.getError();if(result!=null&&!error){d.callback(result)}else{d.errback(error)}r.dispose()},deferred,reader));return deferred};goog.provide("ol.interaction.DragAndDrop");goog.provide("ol.interaction.DragAndDropEvent");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.FileDropHandler");goog.require("goog.events.FileDropHandler.EventType");goog.require("goog.fs.FileReader");goog.require("goog.functions");goog.require("ol.interaction.Interaction");goog.require("ol.proj");ol.interaction.DragAndDrop=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this,{handleEvent:ol.interaction.DragAndDrop.handleEvent});this.formatConstructors_=goog.isDef(options.formatConstructors)?options.formatConstructors:[];this.projection_=goog.isDef(options.projection)?ol.proj.get(options.projection):null;this.fileDropHandler_=null;this.dropListenKey_=undefined};goog.inherits(ol.interaction.DragAndDrop,ol.interaction.Interaction);ol.interaction.DragAndDrop.prototype.disposeInternal=function(){if(goog.isDef(this.dropListenKey_)){goog.events.unlistenByKey(this.dropListenKey_)}goog.base(this,"disposeInternal")};ol.interaction.DragAndDrop.prototype.handleDrop_=function(event){var files=event.getBrowserEvent().dataTransfer.files;var i,ii,file;for(i=0,ii=files.length;i<ii;++i){file=files[i];var reader=goog.fs.FileReader.readAsText(file,"");reader.addCallback(goog.partial(this.handleResult_,file),this)}};ol.interaction.DragAndDrop.prototype.handleResult_=function(file,result){var map=this.getMap();goog.asserts.assert(!goog.isNull(map),"map should not be null");var projection=this.projection_;if(goog.isNull(projection)){var view=map.getView();goog.asserts.assert(!goog.isNull(view),"view should not be null");projection=view.getProjection();goog.asserts.assert(goog.isDef(projection),"projection should be defined")}var formatConstructors=this.formatConstructors_;var features=[];var i,ii;for(i=0,ii=formatConstructors.length;i<ii;++i){var formatConstructor=formatConstructors[i];var format=new formatConstructor();var readFeatures=this.tryReadFeatures_(format,result);if(!goog.isNull(readFeatures)){var featureProjection=format.readProjection(result);var transform=ol.proj.getTransform(featureProjection,projection);var j,jj;for(j=0,jj=readFeatures.length;j<jj;++j){var feature=readFeatures[j];var geometry=feature.getGeometry();if(goog.isDefAndNotNull(geometry)){geometry.applyTransform(transform)}features.push(feature)}}}this.dispatchEvent(new ol.interaction.DragAndDropEvent(ol.interaction.DragAndDropEventType.ADD_FEATURES,this,file,features,projection))};ol.interaction.DragAndDrop.handleEvent=goog.functions.TRUE;ol.interaction.DragAndDrop.prototype.setMap=function(map){if(goog.isDef(this.dropListenKey_)){goog.events.unlistenByKey(this.dropListenKey_);this.dropListenKey_=undefined}if(!goog.isNull(this.fileDropHandler_)){goog.dispose(this.fileDropHandler_);this.fileDropHandler_=null}goog.asserts.assert(!goog.isDef(this.dropListenKey_),"this.dropListenKey_ should be undefined");goog.base(this,"setMap",map);if(!goog.isNull(map)){this.fileDropHandler_=new goog.events.FileDropHandler(map.getViewport());this.dropListenKey_=goog.events.listen(this.fileDropHandler_,goog.events.FileDropHandler.EventType.DROP,this.handleDrop_,false,this)}};ol.interaction.DragAndDrop.prototype.tryReadFeatures_=function(format,text){try{return format.readFeatures(text)}catch(e){return null}};ol.interaction.DragAndDropEventType={ADD_FEATURES:"addfeatures"};ol.interaction.DragAndDropEvent=function(type,target,file,opt_features,opt_projection){goog.base(this,type,target);this.features=opt_features;this.file=file;this.projection=opt_projection};goog.inherits(ol.interaction.DragAndDropEvent,goog.events.Event);goog.provide("goog.math.Vec2");goog.require("goog.math");goog.require("goog.math.Coordinate");goog.math.Vec2=function(x,y){this.x=x;this.y=y};goog.inherits(goog.math.Vec2,goog.math.Coordinate);goog.math.Vec2.randomUnit=function(){var angle=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(angle),Math.sin(angle))};goog.math.Vec2.random=function(){var mag=Math.sqrt(Math.random());var angle=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(angle)*mag,Math.sin(angle)*mag)};goog.math.Vec2.fromCoordinate=function(a){return new goog.math.Vec2(a.x,a.y)};goog.math.Vec2.prototype.clone=function(){return new goog.math.Vec2(this.x,this.y)};goog.math.Vec2.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};goog.math.Vec2.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y};goog.math.Vec2.prototype.scale=(goog.math.Coordinate.prototype.scale);goog.math.Vec2.prototype.invert=function(){this.x=-this.x;this.y=-this.y;return this};goog.math.Vec2.prototype.normalize=function(){return this.scale(1/this.magnitude())};goog.math.Vec2.prototype.add=function(b){this.x+=b.x;this.y+=b.y;return this};goog.math.Vec2.prototype.subtract=function(b){this.x-=b.x;this.y-=b.y;return this};goog.math.Vec2.prototype.rotate=function(angle){var cos=Math.cos(angle);var sin=Math.sin(angle);var newX=this.x*cos-this.y*sin;var newY=this.y*cos+this.x*sin;this.x=newX;this.y=newY;return this};goog.math.Vec2.rotateAroundPoint=function(v,axisPoint,angle){var res=v.clone();return res.subtract(axisPoint).rotate(angle).add(axisPoint)};goog.math.Vec2.prototype.equals=function(b){return this==b||!!b&&this.x==b.x&&this.y==b.y};goog.math.Vec2.distance=goog.math.Coordinate.distance;goog.math.Vec2.squaredDistance=goog.math.Coordinate.squaredDistance;goog.math.Vec2.equals=goog.math.Coordinate.equals;goog.math.Vec2.sum=function(a,b){return new goog.math.Vec2(a.x+b.x,a.y+b.y)};goog.math.Vec2.difference=function(a,b){return new goog.math.Vec2(a.x-b.x,a.y-b.y)};goog.math.Vec2.dot=function(a,b){return a.x*b.x+a.y*b.y};goog.math.Vec2.determinant=function(a,b){return a.x*b.y-a.y*b.x};goog.math.Vec2.lerp=function(a,b,x){return new goog.math.Vec2(goog.math.lerp(a.x,b.x,x),goog.math.lerp(a.y,b.y,x))};goog.provide("ol.interaction.DragRotateAndZoom");goog.require("goog.math.Vec2");goog.require("ol.ViewHint");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.DragRotateAndZoom=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this,{handleDownEvent:ol.interaction.DragRotateAndZoom.handleDownEvent_,handleDragEvent:ol.interaction.DragRotateAndZoom.handleDragEvent_,handleUpEvent:ol.interaction.DragRotateAndZoom.handleUpEvent_});this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.shiftKeyOnly;this.lastAngle_=undefined;this.lastMagnitude_=undefined;this.lastScaleDelta_=0;this.duration_=goog.isDef(options.duration)?options.duration:400};goog.inherits(ol.interaction.DragRotateAndZoom,ol.interaction.Pointer);ol.interaction.DragRotateAndZoom.handleDragEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return}var map=mapBrowserEvent.map;var size=map.getSize();var offset=mapBrowserEvent.pixel;var delta=new goog.math.Vec2(offset[0]-size[0]/2,size[1]/2-offset[1]);var theta=Math.atan2(delta.y,delta.x);var magnitude=delta.magnitude();var view=map.getView();map.render();if(goog.isDef(this.lastAngle_)){var angleDelta=theta-this.lastAngle_;ol.interaction.Interaction.rotateWithoutConstraints(map,view,view.getRotation()-angleDelta)}this.lastAngle_=theta;if(goog.isDef(this.lastMagnitude_)){var resolution=this.lastMagnitude_*(view.getResolution()/magnitude);ol.interaction.Interaction.zoomWithoutConstraints(map,view,resolution)}if(goog.isDef(this.lastMagnitude_)){this.lastScaleDelta_=this.lastMagnitude_/magnitude}this.lastMagnitude_=magnitude};ol.interaction.DragRotateAndZoom.handleUpEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return true}var map=mapBrowserEvent.map;var view=map.getView();view.setHint(ol.ViewHint.INTERACTING,-1);var direction=this.lastScaleDelta_-1;ol.interaction.Interaction.rotate(map,view,view.getRotation());ol.interaction.Interaction.zoom(map,view,view.getResolution(),undefined,this.duration_,direction);this.lastScaleDelta_=0;return false};ol.interaction.DragRotateAndZoom.handleDownEvent_=function(mapBrowserEvent){if(!ol.events.condition.mouseOnly(mapBrowserEvent)){return false}if(this.condition_(mapBrowserEvent)){mapBrowserEvent.map.getView().setHint(ol.ViewHint.INTERACTING,1);this.lastAngle_=undefined;this.lastMagnitude_=undefined;return true}else{return false}};goog.provide("ol.interaction.Draw");goog.provide("ol.interaction.DrawEvent");goog.provide("ol.interaction.DrawEventType");goog.provide("ol.interaction.DrawGeometryFunctionType");goog.provide("ol.interaction.DrawMode");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("ol.Collection");goog.require("ol.Coordinate");goog.require("ol.Feature");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.Object");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.geom.Circle");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.interaction.InteractionProperty");goog.require("ol.interaction.Pointer");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");ol.interaction.DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend"};ol.interaction.DrawEvent=function(type,feature){goog.base(this,type);this.feature=feature};goog.inherits(ol.interaction.DrawEvent,goog.events.Event);ol.interaction.Draw=function(options){goog.base(this,{handleDownEvent:ol.interaction.Draw.handleDownEvent_,handleEvent:ol.interaction.Draw.handleEvent,handleUpEvent:ol.interaction.Draw.handleUpEvent_});this.downPx_=null;this.freehand_=false;this.source_=goog.isDef(options.source)?options.source:null;this.features_=goog.isDef(options.features)?options.features:null;this.snapTolerance_=goog.isDef(options.snapTolerance)?options.snapTolerance:12;this.type_=options.type;this.mode_=ol.interaction.Draw.getMode_(this.type_);this.minPoints_=goog.isDef(options.minPoints)?options.minPoints:(this.mode_===ol.interaction.DrawMode.POLYGON?3:2);this.maxPoints_=goog.isDef(options.maxPoints)?options.maxPoints:Infinity;var geometryFunction=options.geometryFunction;if(!goog.isDef(geometryFunction)){if(this.type_===ol.geom.GeometryType.CIRCLE){geometryFunction=function(coordinates,opt_geometry){var circle=goog.isDef(opt_geometry)?opt_geometry:new ol.geom.Circle([NaN,NaN]);goog.asserts.assertInstanceof(circle,ol.geom.Circle,"geometry must be an ol.geom.Circle");var squaredLength=ol.coordinate.squaredDistance(coordinates[0],coordinates[1]);circle.setCenterAndRadius(coordinates[0],Math.sqrt(squaredLength));return circle}}else{var Constructor;var mode=this.mode_;if(mode===ol.interaction.DrawMode.POINT){Constructor=ol.geom.Point}else{if(mode===ol.interaction.DrawMode.LINE_STRING){Constructor=ol.geom.LineString}else{if(mode===ol.interaction.DrawMode.POLYGON){Constructor=ol.geom.Polygon}}}geometryFunction=function(coordinates,opt_geometry){var geometry=opt_geometry;if(goog.isDef(geometry)){geometry.setCoordinates(coordinates)}else{geometry=new Constructor(coordinates)}return geometry}}}this.geometryFunction_=geometryFunction;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=goog.isDef(options.clickTolerance)?options.clickTolerance*options.clickTolerance:36;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:goog.isDef(options.wrapX)?options.wrapX:false}),style:goog.isDef(options.style)?options.style:ol.interaction.Draw.getDefaultStyleFunction()});this.geometryName_=options.geometryName;this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.noModifierKeys;this.freehandCondition_=goog.isDef(options.freehandCondition)?options.freehandCondition:ol.events.condition.shiftKeyOnly;goog.events.listen(this,ol.Object.getChangeEventType(ol.interaction.InteractionProperty.ACTIVE),this.updateState_,false,this)};goog.inherits(ol.interaction.Draw,ol.interaction.Pointer);ol.interaction.Draw.getDefaultStyleFunction=function(){var styles=ol.style.createDefaultEditingStyles();return function(feature,resolution){return styles[feature.getGeometry().getType()]}};ol.interaction.Draw.prototype.setMap=function(map){goog.base(this,"setMap",map);this.updateState_()};ol.interaction.Draw.handleEvent=function(mapBrowserEvent){var pass=!this.freehand_;if(this.freehand_&&mapBrowserEvent.type===ol.MapBrowserEvent.EventType.POINTERDRAG){this.addToDrawing_(mapBrowserEvent);pass=false}else{if(mapBrowserEvent.type===ol.MapBrowserEvent.EventType.POINTERMOVE){pass=this.handlePointerMove_(mapBrowserEvent)}else{if(mapBrowserEvent.type===ol.MapBrowserEvent.EventType.DBLCLICK){pass=false}}}return ol.interaction.Pointer.handleEvent.call(this,mapBrowserEvent)&&pass};ol.interaction.Draw.handleDownEvent_=function(event){if(this.condition_(event)){this.downPx_=event.pixel;return true}else{if((this.mode_===ol.interaction.DrawMode.LINE_STRING||this.mode_===ol.interaction.DrawMode.POLYGON)&&this.freehandCondition_(event)){this.downPx_=event.pixel;this.freehand_=true;if(goog.isNull(this.finishCoordinate_)){this.startDrawing_(event)}return true}else{return false}}};ol.interaction.Draw.handleUpEvent_=function(event){this.freehand_=false;var downPx=this.downPx_;var clickPx=event.pixel;var dx=downPx[0]-clickPx[0];var dy=downPx[1]-clickPx[1];var squaredDistance=dx*dx+dy*dy;var pass=true;if(squaredDistance<=this.squaredClickTolerance_){this.handlePointerMove_(event);if(goog.isNull(this.finishCoordinate_)){this.startDrawing_(event);if(this.mode_===ol.interaction.DrawMode.POINT){this.finishDrawing()}}else{if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.finishDrawing()}else{if(this.atFinish_(event)){this.finishDrawing()}else{this.addToDrawing_(event)}}}pass=false}return pass};ol.interaction.Draw.prototype.handlePointerMove_=function(event){if(!goog.isNull(this.finishCoordinate_)){this.modifyDrawing_(event)}else{this.createOrUpdateSketchPoint_(event)}return true};ol.interaction.Draw.prototype.atFinish_=function(event){var at=false;if(!goog.isNull(this.sketchFeature_)){var potentiallyDone=false;var potentiallyFinishCoordinates=[this.finishCoordinate_];if(this.mode_===ol.interaction.DrawMode.LINE_STRING){potentiallyDone=this.sketchCoords_.length>this.minPoints_}else{if(this.mode_===ol.interaction.DrawMode.POLYGON){potentiallyDone=this.sketchCoords_[0].length>this.minPoints_;potentiallyFinishCoordinates=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}}if(potentiallyDone){var map=event.map;for(var i=0,ii=potentiallyFinishCoordinates.length;i<ii;i++){var finishCoordinate=potentiallyFinishCoordinates[i];var finishPixel=map.getPixelFromCoordinate(finishCoordinate);var pixel=event.pixel;var dx=pixel[0]-finishPixel[0];var dy=pixel[1]-finishPixel[1];var freehand=this.freehand_&&this.freehandCondition_(event);var snapTolerance=freehand?1:this.snapTolerance_;at=Math.sqrt(dx*dx+dy*dy)<=snapTolerance;if(at){this.finishCoordinate_=finishCoordinate;break}}}}return at};ol.interaction.Draw.prototype.createOrUpdateSketchPoint_=function(event){var coordinates=event.coordinate.slice();if(goog.isNull(this.sketchPoint_)){this.sketchPoint_=new ol.Feature(new ol.geom.Point(coordinates));this.updateSketchFeatures_()}else{var sketchPointGeom=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(sketchPointGeom,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");sketchPointGeom.setCoordinates(coordinates)}};ol.interaction.Draw.prototype.startDrawing_=function(event){var start=event.coordinate;this.finishCoordinate_=start;if(this.mode_===ol.interaction.DrawMode.POINT){this.sketchCoords_=start.slice()}else{if(this.mode_===ol.interaction.DrawMode.POLYGON){this.sketchCoords_=[[start.slice(),start.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[start.slice(),start.slice()];if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.sketchLineCoords_=this.sketchCoords_}}}if(!goog.isNull(this.sketchLineCoords_)){this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_))}var geometry=this.geometryFunction_(this.sketchCoords_);goog.asserts.assert(goog.isDef(geometry),"geometry should be defined");this.sketchFeature_=new ol.Feature();if(goog.isDef(this.geometryName_)){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(geometry);this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.modifyDrawing_=function(event){var coordinate=event.coordinate;var geometry=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(geometry,ol.geom.SimpleGeometry,"geometry should be ol.geom.SimpleGeometry or subclass");var coordinates,last;if(this.mode_===ol.interaction.DrawMode.POINT){last=this.sketchCoords_}else{if(this.mode_===ol.interaction.DrawMode.POLYGON){coordinates=this.sketchCoords_[0];last=coordinates[coordinates.length-1];if(this.atFinish_(event)){coordinate=this.finishCoordinate_.slice()}}else{coordinates=this.sketchCoords_;last=coordinates[coordinates.length-1]}}last[0]=coordinate[0];last[1]=coordinate[1];goog.asserts.assert(!goog.isNull(this.sketchCoords_),"sketchCoords_ must not be null");this.geometryFunction_(this.sketchCoords_,geometry);if(!goog.isNull(this.sketchPoint_)){var sketchPointGeom=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(sketchPointGeom,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");sketchPointGeom.setCoordinates(coordinate)}var sketchLineGeom;if(geometry instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.DrawMode.POLYGON){if(goog.isNull(this.sketchLine_)){this.sketchLine_=new ol.Feature(new ol.geom.LineString(null))}var ring=geometry.getLinearRing(0);sketchLineGeom=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(sketchLineGeom,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");sketchLineGeom.setFlatCoordinates(ring.getLayout(),ring.getFlatCoordinates())}else{if(!goog.isNull(this.sketchLineCoords_)){sketchLineGeom=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(sketchLineGeom,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");sketchLineGeom.setCoordinates(this.sketchLineCoords_)}}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.addToDrawing_=function(event){var coordinate=event.coordinate;var geometry=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(geometry,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var done;var coordinates;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){this.finishCoordinate_=coordinate.slice();coordinates=this.sketchCoords_;coordinates.push(coordinate.slice());done=coordinates.length>this.maxPoints_;this.geometryFunction_(coordinates,geometry)}else{if(this.mode_===ol.interaction.DrawMode.POLYGON){coordinates=this.sketchCoords_[0];coordinates.push(coordinate.slice());done=coordinates.length>this.maxPoints_;if(done){this.finishCoordinate_=coordinates[0]}this.geometryFunction_(this.sketchCoords_,geometry)}}this.updateSketchFeatures_();if(done){this.finishDrawing()}};ol.interaction.Draw.prototype.removeLastPoint=function(){var geometry=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(geometry,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var coordinates,sketchLineGeom;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){coordinates=this.sketchCoords_;coordinates.splice(-2,1);this.geometryFunction_(coordinates,geometry)}else{if(this.mode_===ol.interaction.DrawMode.POLYGON){coordinates=this.sketchCoords_[0];coordinates.splice(-2,1);sketchLineGeom=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(sketchLineGeom,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");sketchLineGeom.setCoordinates(coordinates);this.geometryFunction_(this.sketchCoords_,geometry)}}if(coordinates.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.finishDrawing=function(){var sketchFeature=this.abortDrawing_();goog.asserts.assert(!goog.isNull(sketchFeature),"sketchFeature should not be null");var coordinates=this.sketchCoords_;var geometry=sketchFeature.getGeometry();goog.asserts.assertInstanceof(geometry,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");if(this.mode_===ol.interaction.DrawMode.LINE_STRING){coordinates.pop();this.geometryFunction_(coordinates,geometry)}else{if(this.mode_===ol.interaction.DrawMode.POLYGON){coordinates[0].pop();coordinates[0].push(coordinates[0][0]);this.geometryFunction_(coordinates,geometry)}}if(this.type_===ol.geom.GeometryType.MULTI_POINT){sketchFeature.setGeometry(new ol.geom.MultiPoint([coordinates]))}else{if(this.type_===ol.geom.GeometryType.MULTI_LINE_STRING){sketchFeature.setGeometry(new ol.geom.MultiLineString([coordinates]))}else{if(this.type_===ol.geom.GeometryType.MULTI_POLYGON){sketchFeature.setGeometry(new ol.geom.MultiPolygon([coordinates]))}}}this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWEND,sketchFeature));if(!goog.isNull(this.features_)){this.features_.push(sketchFeature)}if(!goog.isNull(this.source_)){this.source_.addFeature(sketchFeature)}};ol.interaction.Draw.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var sketchFeature=this.sketchFeature_;if(!goog.isNull(sketchFeature)){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return sketchFeature};ol.interaction.Draw.prototype.extend=function(feature){var geometry=feature.getGeometry();goog.asserts.assert(this.mode_==ol.interaction.DrawMode.LINE_STRING,'interaction mode must be "line"');goog.asserts.assert(goog.isDefAndNotNull(geometry),"feature must have a geometry");goog.asserts.assert(geometry.getType()==ol.geom.GeometryType.LINE_STRING,"feature geometry must be a line string");var lineString=(geometry);this.sketchFeature_=feature;this.sketchCoords_=lineString.getCoordinates();var last=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=last.slice();this.sketchCoords_.push(last.slice());this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Draw.prototype.updateSketchFeatures_=function(){var sketchFeatures=[];if(!goog.isNull(this.sketchFeature_)){sketchFeatures.push(this.sketchFeature_)}if(!goog.isNull(this.sketchLine_)){sketchFeatures.push(this.sketchLine_)}if(!goog.isNull(this.sketchPoint_)){sketchFeatures.push(this.sketchPoint_)}var overlaySource=this.overlay_.getSource();overlaySource.clear(true);overlaySource.addFeatures(sketchFeatures)};ol.interaction.Draw.prototype.updateState_=function(){var map=this.getMap();var active=this.getActive();if(goog.isNull(map)||!active){this.abortDrawing_()}this.overlay_.setMap(active?map:null)};ol.interaction.Draw.createRegularPolygon=function(opt_sides,opt_angle){return(function(coordinates,opt_geometry){var center=coordinates[0];var end=coordinates[1];var radius=Math.sqrt(ol.coordinate.squaredDistance(center,end));var geometry=goog.isDef(opt_geometry)?opt_geometry:ol.geom.Polygon.fromCircle(new ol.geom.Circle(center),opt_sides);goog.asserts.assertInstanceof(geometry,ol.geom.Polygon,"geometry must be a polygon");var angle=goog.isDef(opt_angle)?opt_angle:Math.atan((end[1]-center[1])/(end[0]-center[0]));ol.geom.Polygon.makeRegular(geometry,center,radius,angle);return geometry})};ol.interaction.Draw.getMode_=function(type){var mode;if(type===ol.geom.GeometryType.POINT||type===ol.geom.GeometryType.MULTI_POINT){mode=ol.interaction.DrawMode.POINT}else{if(type===ol.geom.GeometryType.LINE_STRING||type===ol.geom.GeometryType.MULTI_LINE_STRING){mode=ol.interaction.DrawMode.LINE_STRING}else{if(type===ol.geom.GeometryType.POLYGON||type===ol.geom.GeometryType.MULTI_POLYGON){mode=ol.interaction.DrawMode.POLYGON}else{if(type===ol.geom.GeometryType.CIRCLE){mode=ol.interaction.DrawMode.CIRCLE}}}}goog.asserts.assert(goog.isDef(mode),"mode should be defined");return mode};ol.interaction.DrawGeometryFunctionType;ol.interaction.DrawMode={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};goog.provide("ol.interaction.Modify");goog.provide("ol.interaction.ModifyEvent");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.Feature");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.interaction.Pointer");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");goog.require("ol.structs.RBush");ol.ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};ol.interaction.ModifyEvent=function(type,features,mapBrowserPointerEvent){goog.base(this,type);this.features=features;this.mapBrowserPointerEvent=mapBrowserPointerEvent};goog.inherits(ol.interaction.ModifyEvent,goog.events.Event);ol.interaction.SegmentDataType;ol.interaction.Modify=function(options){goog.base(this,{handleDownEvent:ol.interaction.Modify.handleDownEvent_,handleDragEvent:ol.interaction.Modify.handleDragEvent_,handleEvent:ol.interaction.Modify.handleEvent,handleUpEvent:ol.interaction.Modify.handleUpEvent_});this.deleteCondition_=goog.isDef(options.deleteCondition)?options.deleteCondition:(goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.singleClick));this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.rBush_=new ol.structs.RBush();this.pixelTolerance_=goog.isDef(options.pixelTolerance)?options.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=null;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:goog.isDef(options.wrapX)?options.wrapX:false}),style:goog.isDef(options.style)?options.style:ol.interaction.Modify.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_};this.features_=options.features;this.features_.forEach(this.addFeature_,this);goog.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,false,this);goog.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,false,this)};goog.inherits(ol.interaction.Modify,ol.interaction.Pointer);ol.interaction.Modify.prototype.addFeature_=function(feature){var geometry=feature.getGeometry();if(goog.isDef(this.SEGMENT_WRITERS_[geometry.getType()])){this.SEGMENT_WRITERS_[geometry.getType()].call(this,feature,geometry)}var map=this.getMap();if(!goog.isNull(map)){this.handlePointerAtPixel_(this.lastPixel_,map)}goog.events.listen(feature,goog.events.EventType.CHANGE,this.handleFeatureChange_,false,this)};ol.interaction.Modify.prototype.removeFeature_=function(feature){this.removeFeatureSegmentData_(feature);if(!goog.isNull(this.vertexFeature_)&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}goog.events.unlisten(feature,goog.events.EventType.CHANGE,this.handleFeatureChange_,false,this)};ol.interaction.Modify.prototype.removeFeatureSegmentData_=function(feature){var rBush=this.rBush_;var nodesToRemove=[];rBush.forEach(function(node){if(feature===node.feature){nodesToRemove.push(node)}});for(var i=nodesToRemove.length-1;i>=0;--i){rBush.remove(nodesToRemove[i])}};ol.interaction.Modify.prototype.setMap=function(map){this.overlay_.setMap(map);goog.base(this,"setMap",map)};ol.interaction.Modify.prototype.handleFeatureAdd_=function(evt){var feature=evt.element;goog.asserts.assertInstanceof(feature,ol.Feature,"feature should be an ol.Feature");this.addFeature_(feature)};ol.interaction.Modify.prototype.handleFeatureChange_=function(evt){if(!this.changingFeature_){var feature=(evt.target);this.removeFeature_(feature);this.addFeature_(feature)}};ol.interaction.Modify.prototype.handleFeatureRemove_=function(evt){var feature=(evt.element);this.removeFeature_(feature)};ol.interaction.Modify.prototype.writePointGeometry_=function(feature,geometry){var coordinates=geometry.getCoordinates();var segmentData=({feature:feature,geometry:geometry,segment:[coordinates,coordinates]});this.rBush_.insert(geometry.getExtent(),segmentData)};ol.interaction.Modify.prototype.writeMultiPointGeometry_=function(feature,geometry){var points=geometry.getCoordinates();var coordinates,i,ii,segmentData;for(i=0,ii=points.length;i<ii;++i){coordinates=points[i];segmentData=({feature:feature,geometry:geometry,depth:[i],index:i,segment:[coordinates,coordinates]});this.rBush_.insert(geometry.getExtent(),segmentData)}};ol.interaction.Modify.prototype.writeLineStringGeometry_=function(feature,geometry){var coordinates=geometry.getCoordinates();var i,ii,segment,segmentData;for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,geometry:geometry,index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}};ol.interaction.Modify.prototype.writeMultiLineStringGeometry_=function(feature,geometry){var lines=geometry.getCoordinates();var coordinates,i,ii,j,jj,segment,segmentData;for(j=0,jj=lines.length;j<jj;++j){coordinates=lines[j];for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,geometry:geometry,depth:[j],index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Modify.prototype.writePolygonGeometry_=function(feature,geometry){var rings=geometry.getCoordinates();var coordinates,i,ii,j,jj,segment,segmentData;for(j=0,jj=rings.length;j<jj;++j){coordinates=rings[j];for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,geometry:geometry,depth:[j],index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Modify.prototype.writeMultiPolygonGeometry_=function(feature,geometry){var polygons=geometry.getCoordinates();var coordinates,i,ii,j,jj,k,kk,rings,segment,segmentData;for(k=0,kk=polygons.length;k<kk;++k){rings=polygons[k];for(j=0,jj=rings.length;j<jj;++j){coordinates=rings[j];for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,geometry:geometry,depth:[j,k],index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}}};ol.interaction.Modify.prototype.writeGeometryCollectionGeometry_=function(feature,geometry){var i,geometries=geometry.getGeometriesArray();for(i=0;i<geometries.length;++i){this.SEGMENT_WRITERS_[geometries[i].getType()].call(this,feature,geometries[i])}};ol.interaction.Modify.prototype.createOrUpdateVertexFeature_=function(coordinates){var vertexFeature=this.vertexFeature_;if(goog.isNull(vertexFeature)){vertexFeature=new ol.Feature(new ol.geom.Point(coordinates));this.vertexFeature_=vertexFeature;this.overlay_.getSource().addFeature(vertexFeature)}else{var geometry=(vertexFeature.getGeometry());geometry.setCoordinates(coordinates)}return vertexFeature};ol.interaction.Modify.compareIndexes_=function(a,b){return a.index-b.index};ol.interaction.Modify.handleDownEvent_=function(evt){this.handlePointerAtPixel_(evt.pixel,evt.map);this.dragSegments_=[];var vertexFeature=this.vertexFeature_;if(!goog.isNull(vertexFeature)){var insertVertices=[];var geometry=(vertexFeature.getGeometry());var vertex=geometry.getCoordinates();var vertexExtent=ol.extent.boundingExtent([vertex]);var segmentDataMatches=this.rBush_.getInExtent(vertexExtent);var componentSegments={};segmentDataMatches.sort(ol.interaction.Modify.compareIndexes_);for(var i=0,ii=segmentDataMatches.length;i<ii;++i){var segmentDataMatch=segmentDataMatches[i];var segment=segmentDataMatch.segment;var uid=goog.getUid(segmentDataMatch.feature);var depth=segmentDataMatch.depth;if(depth){uid+="-"+depth.join("-")}if(!componentSegments[uid]){componentSegments[uid]=new Array(2)}if(ol.coordinate.equals(segment[0],vertex)&&!componentSegments[uid][0]){this.dragSegments_.push([segmentDataMatch,0]);componentSegments[uid][0]=segmentDataMatch}else{if(ol.coordinate.equals(segment[1],vertex)&&!componentSegments[uid][1]){if((segmentDataMatch.geometry.getType()===ol.geom.GeometryType.LINE_STRING||segmentDataMatch.geometry.getType()===ol.geom.GeometryType.MULTI_LINE_STRING)&&componentSegments[uid][0]&&componentSegments[uid][0].index===0){continue}this.dragSegments_.push([segmentDataMatch,1]);componentSegments[uid][1]=segmentDataMatch}else{if(goog.getUid(segment) in this.vertexSegments_&&(!componentSegments[uid][0]&&!componentSegments[uid][1])){insertVertices.push([segmentDataMatch,vertex])}}}}for(i=insertVertices.length-1;i>=0;--i){this.insertVertex_.apply(this,insertVertices[i])}this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYSTART,this.features_,evt))}return !goog.isNull(this.vertexFeature_)};ol.interaction.Modify.handleDragEvent_=function(evt){this.ignoreNextSingleClick_=false;var vertex=evt.coordinate;for(var i=0,ii=this.dragSegments_.length;i<ii;++i){var dragSegment=this.dragSegments_[i];var segmentData=dragSegment[0];var depth=segmentData.depth;var geometry=segmentData.geometry;var coordinates=geometry.getCoordinates();var segment=segmentData.segment;var index=dragSegment[1];while(vertex.length<geometry.getStride()){vertex.push(0)}switch(geometry.getType()){case ol.geom.GeometryType.POINT:coordinates=vertex;segment[0]=segment[1]=vertex;break;case ol.geom.GeometryType.MULTI_POINT:coordinates[segmentData.index]=vertex;segment[0]=segment[1]=vertex;break;case ol.geom.GeometryType.LINE_STRING:coordinates[segmentData.index+index]=vertex;segment[index]=vertex;break;case ol.geom.GeometryType.MULTI_LINE_STRING:coordinates[depth[0]][segmentData.index+index]=vertex;segment[index]=vertex;break;case ol.geom.GeometryType.POLYGON:coordinates[depth[0]][segmentData.index+index]=vertex;segment[index]=vertex;break;case ol.geom.GeometryType.MULTI_POLYGON:coordinates[depth[1]][depth[0]][segmentData.index+index]=vertex;segment[index]=vertex;break}this.setGeometryCoordinates_(geometry,coordinates)}this.createOrUpdateVertexFeature_(vertex)};ol.interaction.Modify.handleUpEvent_=function(evt){var segmentData;for(var i=this.dragSegments_.length-1;i>=0;--i){segmentData=this.dragSegments_[i][0];this.rBush_.update(ol.extent.boundingExtent(segmentData.segment),segmentData)}this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYEND,this.features_,evt));return false};ol.interaction.Modify.handleEvent=function(mapBrowserEvent){var handled;if(!mapBrowserEvent.map.getView().getHints()[ol.ViewHint.INTERACTING]&&mapBrowserEvent.type==ol.MapBrowserEvent.EventType.POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(mapBrowserEvent)}if(!goog.isNull(this.vertexFeature_)&&this.deleteCondition_(mapBrowserEvent)){if(mapBrowserEvent.type!=ol.MapBrowserEvent.EventType.SINGLECLICK||!this.ignoreNextSingleClick_){var geometry=this.vertexFeature_.getGeometry();goog.asserts.assertInstanceof(geometry,ol.geom.Point,"geometry should be an ol.geom.Point");handled=this.removeVertex_()}else{handled=true}}if(mapBrowserEvent.type==ol.MapBrowserEvent.EventType.SINGLECLICK){this.ignoreNextSingleClick_=false}return ol.interaction.Pointer.handleEvent.call(this,mapBrowserEvent)&&!handled};ol.interaction.Modify.prototype.handlePointerMove_=function(evt){this.lastPixel_=evt.pixel;this.handlePointerAtPixel_(evt.pixel,evt.map)};ol.interaction.Modify.prototype.handlePointerAtPixel_=function(pixel,map){var pixelCoordinate=map.getCoordinateFromPixel(pixel);var sortByDistance=function(a,b){return ol.coordinate.squaredDistanceToSegment(pixelCoordinate,a.segment)-ol.coordinate.squaredDistanceToSegment(pixelCoordinate,b.segment)};var lowerLeft=map.getCoordinateFromPixel([pixel[0]-this.pixelTolerance_,pixel[1]+this.pixelTolerance_]);var upperRight=map.getCoordinateFromPixel([pixel[0]+this.pixelTolerance_,pixel[1]-this.pixelTolerance_]);var box=ol.extent.boundingExtent([lowerLeft,upperRight]);var rBush=this.rBush_;var nodes=rBush.getInExtent(box);if(nodes.length>0){nodes.sort(sortByDistance);var node=nodes[0];var closestSegment=node.segment;var vertex=(ol.coordinate.closestOnSegment(pixelCoordinate,closestSegment));var vertexPixel=map.getPixelFromCoordinate(vertex);if(Math.sqrt(ol.coordinate.squaredDistance(pixel,vertexPixel))<=this.pixelTolerance_){var pixel1=map.getPixelFromCoordinate(closestSegment[0]);var pixel2=map.getPixelFromCoordinate(closestSegment[1]);var squaredDist1=ol.coordinate.squaredDistance(vertexPixel,pixel1);var squaredDist2=ol.coordinate.squaredDistance(vertexPixel,pixel2);var dist=Math.sqrt(Math.min(squaredDist1,squaredDist2));this.snappedToVertex_=dist<=this.pixelTolerance_;if(this.snappedToVertex_){vertex=squaredDist1>squaredDist2?closestSegment[1]:closestSegment[0]}this.createOrUpdateVertexFeature_(vertex);var vertexSegments={};vertexSegments[goog.getUid(closestSegment)]=true;var segment;for(var i=1,ii=nodes.length;i<ii;++i){segment=nodes[i].segment;if((ol.coordinate.equals(closestSegment[0],segment[0])&&ol.coordinate.equals(closestSegment[1],segment[1])||(ol.coordinate.equals(closestSegment[0],segment[1])&&ol.coordinate.equals(closestSegment[1],segment[0])))){vertexSegments[goog.getUid(segment)]=true}else{break}}this.vertexSegments_=vertexSegments;return}}if(!goog.isNull(this.vertexFeature_)){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};ol.interaction.Modify.prototype.insertVertex_=function(segmentData,vertex){var segment=segmentData.segment;var feature=segmentData.feature;var geometry=segmentData.geometry;var depth=segmentData.depth;var index=segmentData.index;var coordinates;while(vertex.length<geometry.getStride()){vertex.push(0)}switch(geometry.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:goog.asserts.assertInstanceof(geometry,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");coordinates=geometry.getCoordinates();coordinates[depth[0]].splice(index+1,0,vertex);break;case ol.geom.GeometryType.POLYGON:goog.asserts.assertInstanceof(geometry,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");coordinates=geometry.getCoordinates();coordinates[depth[0]].splice(index+1,0,vertex);break;case ol.geom.GeometryType.MULTI_POLYGON:goog.asserts.assertInstanceof(geometry,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");coordinates=geometry.getCoordinates();coordinates[depth[1]][depth[0]].splice(index+1,0,vertex);break;case ol.geom.GeometryType.LINE_STRING:goog.asserts.assertInstanceof(geometry,ol.geom.LineString,"geometry should be an ol.geom.LineString");coordinates=geometry.getCoordinates();coordinates.splice(index+1,0,vertex);break;default:return}this.setGeometryCoordinates_(geometry,coordinates);var rTree=this.rBush_;goog.asserts.assert(goog.isDef(segment),"segment should be defined");rTree.remove(segmentData);goog.asserts.assert(goog.isDef(index),"index should be defined");this.updateSegmentIndices_(geometry,index,depth,1);var newSegmentData=({segment:[segment[0],vertex],feature:feature,geometry:geometry,depth:depth,index:index});rTree.insert(ol.extent.boundingExtent(newSegmentData.segment),newSegmentData);this.dragSegments_.push([newSegmentData,1]);var newSegmentData2=({segment:[vertex,segment[1]],feature:feature,geometry:geometry,depth:depth,index:index+1});rTree.insert(ol.extent.boundingExtent(newSegmentData2.segment),newSegmentData2);this.dragSegments_.push([newSegmentData2,0]);this.ignoreNextSingleClick_=true};ol.interaction.Modify.prototype.removeVertex_=function(){var dragSegments=this.dragSegments_;var segmentsByFeature={};var component,coordinates,dragSegment,geometry,i,index,left;var newIndex,newSegment,right,segmentData,uid,deleted;for(i=dragSegments.length-1;i>=0;--i){dragSegment=dragSegments[i];segmentData=dragSegment[0];geometry=segmentData.geometry;coordinates=geometry.getCoordinates();uid=goog.getUid(segmentData.feature);if(segmentData.depth){uid+="-"+segmentData.depth.join("-")}left=right=index=undefined;if(dragSegment[1]===0){right=segmentData;index=segmentData.index}else{if(dragSegment[1]==1){left=segmentData;index=segmentData.index+1}}if(!(uid in segmentsByFeature)){segmentsByFeature[uid]=[left,right,index]}newSegment=segmentsByFeature[uid];if(goog.isDef(left)){newSegment[0]=left}if(goog.isDef(right)){newSegment[1]=right}if(goog.isDef(newSegment[0])&&goog.isDef(newSegment[1])){component=coordinates;deleted=false;newIndex=index-1;switch(geometry.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:coordinates[segmentData.depth[0]].splice(index,1);deleted=true;break;case ol.geom.GeometryType.LINE_STRING:coordinates.splice(index,1);deleted=true;break;case ol.geom.GeometryType.MULTI_POLYGON:component=component[segmentData.depth[1]];case ol.geom.GeometryType.POLYGON:component=component[segmentData.depth[0]];if(component.length>4){if(index==component.length-1){index=0}component.splice(index,1);deleted=true;if(index===0){component.pop();component.push(component[0]);newIndex=component.length-1}}break}if(deleted){this.rBush_.remove(newSegment[0]);this.rBush_.remove(newSegment[1]);this.setGeometryCoordinates_(geometry,coordinates);goog.asserts.assert(newIndex>=0,"newIndex should be larger than 0");var newSegmentData=({depth:segmentData.depth,feature:segmentData.feature,geometry:segmentData.geometry,index:newIndex,segment:[newSegment[0].segment[0],newSegment[1].segment[1]]});this.rBush_.insert(ol.extent.boundingExtent(newSegmentData.segment),newSegmentData);this.updateSegmentIndices_(geometry,index,segmentData.depth,-1);if(!goog.isNull(this.vertexFeature_)){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}}}}return true};ol.interaction.Modify.prototype.setGeometryCoordinates_=function(geometry,coordinates){this.changingFeature_=true;geometry.setCoordinates(coordinates);this.changingFeature_=false};ol.interaction.Modify.prototype.updateSegmentIndices_=function(geometry,index,depth,delta){this.rBush_.forEachInExtent(geometry.getExtent(),function(segmentDataMatch){goog.asserts.assert(goog.isDef(segmentDataMatch.depth));if(segmentDataMatch.geometry===geometry&&(!goog.isDef(depth)||goog.array.equals(segmentDataMatch.depth,depth))&&segmentDataMatch.index>index){segmentDataMatch.index+=delta}})};ol.interaction.Modify.getDefaultStyleFunction=function(){var style=ol.style.createDefaultEditingStyles();return function(feature,resolution){return style[ol.geom.GeometryType.POINT]}};goog.provide("ol.interaction.Select");goog.provide("ol.interaction.SelectEvent");goog.provide("ol.interaction.SelectEventType");goog.provide("ol.interaction.SelectFilterFunction");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.functions");goog.require("ol.CollectionEventType");goog.require("ol.Feature");goog.require("ol.events.condition");goog.require("ol.geom.GeometryType");goog.require("ol.interaction.Interaction");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");ol.interaction.SelectEventType={SELECT:"select"};ol.interaction.SelectFilterFunction;ol.interaction.SelectEvent=function(type,selected,deselected,mapBrowserEvent){goog.base(this,type);this.selected=selected;this.deselected=deselected;this.mapBrowserEvent=mapBrowserEvent};goog.inherits(ol.interaction.SelectEvent,goog.events.Event);ol.interaction.Select=function(opt_options){goog.base(this,{handleEvent:ol.interaction.Select.handleEvent});var options=goog.isDef(opt_options)?opt_options:{};this.condition_=goog.isDef(options.condition)?options.condition:ol.events.condition.singleClick;this.addCondition_=goog.isDef(options.addCondition)?options.addCondition:ol.events.condition.never;this.removeCondition_=goog.isDef(options.removeCondition)?options.removeCondition:ol.events.condition.never;this.toggleCondition_=goog.isDef(options.toggleCondition)?options.toggleCondition:ol.events.condition.shiftKeyOnly;this.multi_=goog.isDef(options.multi)?options.multi:false;this.filter_=goog.isDef(options.filter)?options.filter:goog.functions.TRUE;var layerFilter;if(goog.isDef(options.layers)){if(goog.isFunction(options.layers)){layerFilter=options.layers}else{var layers=options.layers;layerFilter=function(layer){return goog.array.contains(layers,layer)}}}else{layerFilter=goog.functions.TRUE}this.layerFilter_=layerFilter;this.featureOverlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:options.wrapX}),style:goog.isDef(options.style)?options.style:ol.interaction.Select.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});var features=this.featureOverlay_.getSource().getFeaturesCollection();goog.events.listen(features,ol.CollectionEventType.ADD,this.addFeature_,false,this);goog.events.listen(features,ol.CollectionEventType.REMOVE,this.removeFeature_,false,this)};goog.inherits(ol.interaction.Select,ol.interaction.Interaction);ol.interaction.Select.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()};ol.interaction.Select.handleEvent=function(mapBrowserEvent){if(!this.condition_(mapBrowserEvent)){return true}var add=this.addCondition_(mapBrowserEvent);var remove=this.removeCondition_(mapBrowserEvent);var toggle=this.toggleCondition_(mapBrowserEvent);var set=!add&&!remove&&!toggle;var map=mapBrowserEvent.map;var features=this.featureOverlay_.getSource().getFeaturesCollection();var deselected=[];var selected=[];var change=false;if(set){map.forEachFeatureAtPixel(mapBrowserEvent.pixel,function(feature,layer){if(this.filter_(feature,layer)){selected.push(feature);return !this.multi_}},this,this.layerFilter_);if(selected.length>0&&features.getLength()==1&&features.item(0)==selected[0]){}else{change=true;if(features.getLength()!==0){deselected=Array.prototype.concat(features.getArray());features.clear()}features.extend(selected)}}else{map.forEachFeatureAtPixel(mapBrowserEvent.pixel,function(feature,layer){var index=goog.array.indexOf(features.getArray(),feature);if(index==-1){if(add||toggle){if(this.filter_(feature,layer)){selected.push(feature)}}}else{if(remove||toggle){deselected.push(feature)}}},this,this.layerFilter_);var i;for(i=deselected.length-1;i>=0;--i){features.remove(deselected[i])}features.extend(selected);if(selected.length>0||deselected.length>0){change=true}}if(change){this.dispatchEvent(new ol.interaction.SelectEvent(ol.interaction.SelectEventType.SELECT,selected,deselected,mapBrowserEvent))}return ol.events.condition.pointerMove(mapBrowserEvent)};ol.interaction.Select.prototype.setMap=function(map){var currentMap=this.getMap();var selectedFeatures=this.featureOverlay_.getSource().getFeaturesCollection();if(!goog.isNull(currentMap)){selectedFeatures.forEach(currentMap.unskipFeature,currentMap)}goog.base(this,"setMap",map);this.featureOverlay_.setMap(map);if(!goog.isNull(map)){selectedFeatures.forEach(map.skipFeature,map)}};ol.interaction.Select.getDefaultStyleFunction=function(){var styles=ol.style.createDefaultEditingStyles();goog.array.extend(styles[ol.geom.GeometryType.POLYGON],styles[ol.geom.GeometryType.LINE_STRING]);goog.array.extend(styles[ol.geom.GeometryType.GEOMETRY_COLLECTION],styles[ol.geom.GeometryType.LINE_STRING]);return function(feature,resolution){return styles[feature.getGeometry().getType()]}};ol.interaction.Select.prototype.addFeature_=function(evt){var feature=evt.element;var map=this.getMap();goog.asserts.assertInstanceof(feature,ol.Feature,"feature should be an ol.Feature");if(!goog.isNull(map)){map.skipFeature(feature)}};ol.interaction.Select.prototype.removeFeature_=function(evt){var feature=evt.element;var map=this.getMap();goog.asserts.assertInstanceof(feature,ol.Feature,"feature should be an ol.Feature");if(!goog.isNull(map)){map.unskipFeature(feature)}};goog.provide("ol.interaction.Snap");goog.provide("ol.interaction.SnapProperty");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.Object");goog.require("ol.Observable");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.interaction.Pointer");goog.require("ol.source.Vector");goog.require("ol.source.VectorEvent");goog.require("ol.source.VectorEventType");goog.require("ol.structs.RBush");ol.interaction.Snap=function(opt_options){goog.base(this,{handleEvent:ol.interaction.Snap.handleEvent_,handleDownEvent:goog.functions.TRUE,handleUpEvent:ol.interaction.Snap.handleUpEvent_});var options=goog.isDef(opt_options)?opt_options:{};this.source_=goog.isDef(options.source)?options.source:null;this.features_=goog.isDef(options.features)?options.features:null;this.featuresListenerKeys_=[];this.geometryChangeListenerKeys_={};this.geometryModifyListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=goog.isDef(options.pixelTolerance)?options.pixelTolerance:10;this.sortByDistance_=goog.bind(ol.interaction.Snap.sortByDistance,this);this.rBush_=new ol.structs.RBush();this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_}};goog.inherits(ol.interaction.Snap,ol.interaction.Pointer);ol.interaction.Snap.prototype.addFeature=function(feature,opt_listen){var listen=goog.isDef(opt_listen)?opt_listen:true;var geometry=feature.getGeometry();var segmentWriter=this.SEGMENT_WRITERS_[geometry.getType()];if(goog.isDef(segmentWriter)){var feature_uid=goog.getUid(feature);this.indexedFeaturesExtents_[feature_uid]=geometry.getExtent(ol.extent.createEmpty());segmentWriter.call(this,feature,geometry);if(listen){this.geometryModifyListenerKeys_[feature_uid]=geometry.on(goog.events.EventType.CHANGE,goog.bind(this.handleGeometryModify_,this,feature),this);this.geometryChangeListenerKeys_[feature_uid]=feature.on(ol.Object.getChangeEventType(feature.getGeometryName()),this.handleGeometryChange_,this)}}};ol.interaction.Snap.prototype.forEachFeatureAdd_=function(feature){this.addFeature(feature)};ol.interaction.Snap.prototype.forEachFeatureRemove_=function(feature){this.removeFeature(feature)};ol.interaction.Snap.prototype.getFeatures_=function(){var features;if(!goog.isNull(this.features_)){features=this.features_}else{if(!goog.isNull(this.source_)){features=this.source_.getFeatures()}}goog.asserts.assert(goog.isDef(features),"features should be defined");return features};ol.interaction.Snap.prototype.handleFeatureAdd_=function(evt){var feature;if(evt instanceof ol.source.VectorEvent){feature=evt.feature}else{if(evt instanceof ol.CollectionEvent){feature=evt.element}}goog.asserts.assertInstanceof(feature,ol.Feature,"feature should be an ol.Feature");this.addFeature(feature)};ol.interaction.Snap.prototype.handleFeatureRemove_=function(evt){var feature;if(evt instanceof ol.source.VectorEvent){feature=evt.feature}else{if(evt instanceof ol.CollectionEvent){feature=evt.element}}goog.asserts.assertInstanceof(feature,ol.Feature,"feature should be an ol.Feature");this.removeFeature(feature)};ol.interaction.Snap.prototype.handleGeometryChange_=function(evt){var feature=evt.currentTarget;goog.asserts.assertInstanceof(feature,ol.Feature);this.removeFeature(feature,true);this.addFeature(feature,true)};ol.interaction.Snap.prototype.handleGeometryModify_=function(feature,evt){if(this.handlingDownUpSequence){var uid=goog.getUid(feature);if(!(uid in this.pendingFeatures_)){this.pendingFeatures_[uid]=feature}}else{this.updateFeature_(feature)}};ol.interaction.Snap.prototype.removeFeature=function(feature,opt_unlisten){var unlisten=goog.isDef(opt_unlisten)?opt_unlisten:true;var feature_uid=goog.getUid(feature);var extent=this.indexedFeaturesExtents_[feature_uid];if(extent){var rBush=this.rBush_;var i,nodesToRemove=[];rBush.forEachInExtent(extent,function(node){if(feature===node.feature){nodesToRemove.push(node)}});for(i=nodesToRemove.length-1;i>=0;--i){rBush.remove(nodesToRemove[i])}if(unlisten){ol.Observable.unByKey(this.geometryModifyListenerKeys_[feature_uid]);delete this.geometryModifyListenerKeys_[feature_uid];ol.Observable.unByKey(this.geometryChangeListenerKeys_[feature_uid]);delete this.geometryChangeListenerKeys_[feature_uid]}}};ol.interaction.Snap.prototype.setMap=function(map){var currentMap=this.getMap();var keys=this.featuresListenerKeys_;var features=this.getFeatures_();if(currentMap){goog.array.forEach(keys,ol.Observable.unByKey);keys.length=0;features.forEach(this.forEachFeatureRemove_,this)}goog.base(this,"setMap",map);if(map){if(!goog.isNull(this.features_)){keys.push(this.features_.on(ol.CollectionEventType.ADD,this.handleFeatureAdd_,this));keys.push(this.features_.on(ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this))}else{if(!goog.isNull(this.source_)){keys.push(this.source_.on(ol.source.VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this));keys.push(this.source_.on(ol.source.VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this))}}features.forEach(this.forEachFeatureAdd_,this)}};ol.interaction.Snap.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Snap.prototype.snapTo=function(pixel,pixelCoordinate,map){var lowerLeft=map.getCoordinateFromPixel([pixel[0]-this.pixelTolerance_,pixel[1]+this.pixelTolerance_]);var upperRight=map.getCoordinateFromPixel([pixel[0]+this.pixelTolerance_,pixel[1]-this.pixelTolerance_]);var box=ol.extent.boundingExtent([lowerLeft,upperRight]);var segments=this.rBush_.getInExtent(box);var snappedToVertex=false;var snapped=false;var vertex=null;var vertexPixel=null;if(segments.length>0){this.pixelCoordinate_=pixelCoordinate;segments.sort(this.sortByDistance_);var closestSegment=segments[0].segment;vertex=(ol.coordinate.closestOnSegment(pixelCoordinate,closestSegment));vertexPixel=map.getPixelFromCoordinate(vertex);if(Math.sqrt(ol.coordinate.squaredDistance(pixel,vertexPixel))<=this.pixelTolerance_){snapped=true;var pixel1=map.getPixelFromCoordinate(closestSegment[0]);var pixel2=map.getPixelFromCoordinate(closestSegment[1]);var squaredDist1=ol.coordinate.squaredDistance(vertexPixel,pixel1);var squaredDist2=ol.coordinate.squaredDistance(vertexPixel,pixel2);var dist=Math.sqrt(Math.min(squaredDist1,squaredDist2));snappedToVertex=dist<=this.pixelTolerance_;if(snappedToVertex){vertex=squaredDist1>squaredDist2?closestSegment[1]:closestSegment[0];vertexPixel=map.getPixelFromCoordinate(vertex);vertexPixel=[Math.round(vertexPixel[0]),Math.round(vertexPixel[1])]}}}return({snapped:snapped,vertex:vertex,vertexPixel:vertexPixel})};ol.interaction.Snap.prototype.updateFeature_=function(feature){this.removeFeature(feature,false);this.addFeature(feature,false)};ol.interaction.Snap.prototype.writeGeometryCollectionGeometry_=function(feature,geometry){var i,geometries=geometry.getGeometriesArray();for(i=0;i<geometries.length;++i){this.SEGMENT_WRITERS_[geometries[i].getType()].call(this,feature,geometries[i])}};ol.interaction.Snap.prototype.writeLineStringGeometry_=function(feature,geometry){var coordinates=geometry.getCoordinates();var i,ii,segment,segmentData;for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}};ol.interaction.Snap.prototype.writeMultiLineStringGeometry_=function(feature,geometry){var lines=geometry.getCoordinates();var coordinates,i,ii,j,jj,segment,segmentData;for(j=0,jj=lines.length;j<jj;++j){coordinates=lines[j];for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Snap.prototype.writeMultiPointGeometry_=function(feature,geometry){var points=geometry.getCoordinates();var coordinates,i,ii,segmentData;for(i=0,ii=points.length;i<ii;++i){coordinates=points[i];segmentData=({feature:feature,segment:[coordinates,coordinates]});this.rBush_.insert(geometry.getExtent(),segmentData)}};ol.interaction.Snap.prototype.writeMultiPolygonGeometry_=function(feature,geometry){var polygons=geometry.getCoordinates();var coordinates,i,ii,j,jj,k,kk,rings,segment,segmentData;for(k=0,kk=polygons.length;k<kk;++k){rings=polygons[k];for(j=0,jj=rings.length;j<jj;++j){coordinates=rings[j];for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}}};ol.interaction.Snap.prototype.writePointGeometry_=function(feature,geometry){var coordinates=geometry.getCoordinates();var segmentData=({feature:feature,segment:[coordinates,coordinates]});this.rBush_.insert(geometry.getExtent(),segmentData)};ol.interaction.Snap.prototype.writePolygonGeometry_=function(feature,geometry){var rings=geometry.getCoordinates();var coordinates,i,ii,j,jj,segment,segmentData;for(j=0,jj=rings.length;j<jj;++j){coordinates=rings[j];for(i=0,ii=coordinates.length-1;i<ii;++i){segment=coordinates.slice(i,i+2);segmentData=({feature:feature,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Snap.ResultType;ol.interaction.Snap.SegmentDataType;ol.interaction.Snap.handleEvent_=function(evt){var result=this.snapTo(evt.pixel,evt.coordinate,evt.map);if(result.snapped){evt.coordinate=result.vertex.slice(0,2);evt.pixel=result.vertexPixel}return ol.interaction.Pointer.handleEvent.call(this,evt)};ol.interaction.Snap.handleUpEvent_=function(evt){var featuresToUpdate=goog.object.getValues(this.pendingFeatures_);if(featuresToUpdate.length){goog.array.forEach(featuresToUpdate,this.updateFeature_,this);this.pendingFeatures_={}}return false};ol.interaction.Snap.sortByDistance=function(a,b){return ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,a.segment)-ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,b.segment)};goog.provide("ol.interaction.Translate");goog.require("goog.array");goog.require("ol.interaction.Pointer");ol.interaction.Translate=function(options){goog.base(this,{handleDownEvent:ol.interaction.Translate.handleDownEvent_,handleDragEvent:ol.interaction.Translate.handleDragEvent_,handleMoveEvent:ol.interaction.Translate.handleMoveEvent_,handleUpEvent:ol.interaction.Translate.handleUpEvent_});this.previousCursor_=undefined;this.lastCoordinate_=null;this.features_=goog.isDef(options.features)?options.features:null;this.lastFeature_=null};goog.inherits(ol.interaction.Translate,ol.interaction.Pointer);ol.interaction.Translate.handleDownEvent_=function(event){this.lastFeature_=this.featuresAtPixel_(event.pixel,event.map);if(goog.isNull(this.lastCoordinate_)&&!goog.isNull(this.lastFeature_)){this.lastCoordinate_=event.coordinate;ol.interaction.Translate.handleMoveEvent_.call(this,event);return true}return false};ol.interaction.Translate.handleUpEvent_=function(event){if(!goog.isNull(this.lastCoordinate_)){this.lastCoordinate_=null;ol.interaction.Translate.handleMoveEvent_.call(this,event);return true}return false};ol.interaction.Translate.handleDragEvent_=function(event){if(!goog.isNull(this.lastCoordinate_)){var newCoordinate=event.coordinate;var deltaX=newCoordinate[0]-this.lastCoordinate_[0];var deltaY=newCoordinate[1]-this.lastCoordinate_[1];if(!goog.isNull(this.features_)){this.features_.forEach(function(feature){var geom=feature.getGeometry();geom.translate(deltaX,deltaY);feature.setGeometry(geom)})}else{if(goog.isNull(this.lastFeature_)){var geom=this.lastFeature_.getGeometry();geom.translate(deltaX,deltaY);this.lastFeature_.setGeometry(geom)}}this.lastCoordinate_=newCoordinate}};ol.interaction.Translate.handleMoveEvent_=function(event){var elem=event.map.getTargetElement();var intersectingFeature=event.map.forEachFeatureAtPixel(event.pixel,function(feature){return feature});if(intersectingFeature){var isSelected=false;if(!goog.isNull(this.features_)&&goog.array.contains(this.features_.getArray(),intersectingFeature)){isSelected=true}this.previousCursor_=elem.style.cursor;elem.style.cursor=!goog.isNull(this.lastCoordinate_)?"-webkit-grabbing":(isSelected?"-webkit-grab":"pointer");elem.style.cursor=goog.isNull(this.lastCoordinate_)?"grabbing":(isSelected?"grab":"pointer")}else{elem.style.cursor=goog.isDef(this.previousCursor_)?this.previousCursor_:"";this.previousCursor_=undefined}};ol.interaction.Translate.prototype.featuresAtPixel_=function(pixel,map){var found=null;var intersectingFeature=map.forEachFeatureAtPixel(pixel,function(feature){return feature});if(!goog.isNull(this.features_)&&goog.array.contains(this.features_.getArray(),intersectingFeature)){found=intersectingFeature}return found};goog.provide("ol.layer.Heatmap");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.math");goog.require("goog.object");goog.require("ol.Object");goog.require("ol.dom");goog.require("ol.layer.Vector");goog.require("ol.render.EventType");goog.require("ol.style.Icon");goog.require("ol.style.Style");ol.layer.HeatmapLayerProperty={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"};ol.layer.Heatmap=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var baseOptions=goog.object.clone(options);delete baseOptions.gradient;delete baseOptions.radius;delete baseOptions.blur;delete baseOptions.shadow;delete baseOptions.weight;goog.base(this,(baseOptions));this.gradient_=null;this.shadow_=goog.isDef(options.shadow)?options.shadow:250;this.circleImage_=undefined;this.styleCache_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.GRADIENT),this.handleGradientChanged_,false,this);this.setGradient(goog.isDef(options.gradient)?options.gradient:ol.layer.Heatmap.DEFAULT_GRADIENT);this.setBlur(goog.isDef(options.blur)?options.blur:15);this.setRadius(goog.isDef(options.radius)?options.radius:8);goog.events.listen(this,[ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.BLUR),ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.RADIUS)],this.handleStyleChanged_,false,this);this.handleStyleChanged_();var weight=goog.isDef(options.weight)?options.weight:"weight";var weightFunction;if(goog.isString(weight)){weightFunction=function(feature){return feature.get(weight)}}else{weightFunction=weight}goog.asserts.assert(goog.isFunction(weightFunction),"weightFunction should be a function");this.setStyle(goog.bind(function(feature,resolution){goog.asserts.assert(!goog.isNull(this.styleCache_),"this.styleCache_ should not be null");goog.asserts.assert(goog.isDef(this.circleImage_),"this.circleImage_ should be defined");var weight=weightFunction(feature);var opacity=goog.isDef(weight)?goog.math.clamp(weight,0,1):1;var index=(255*opacity)|0;var style=this.styleCache_[index];if(!goog.isDef(style)){style=[new ol.style.Style({image:new ol.style.Icon({opacity:opacity,src:this.circleImage_})})];this.styleCache_[index]=style}return style},this));this.setRenderOrder(null);goog.events.listen(this,ol.render.EventType.RENDER,this.handleRender_,false,this)};goog.inherits(ol.layer.Heatmap,ol.layer.Vector);ol.layer.Heatmap.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"];ol.layer.Heatmap.createGradient_=function(colors){var width=1;var height=256;var context=ol.dom.createCanvasContext2D(width,height);var gradient=context.createLinearGradient(0,0,width,height);var step=1/(colors.length-1);for(var i=0,ii=colors.length;i<ii;++i){gradient.addColorStop(i*step,colors[i])}context.fillStyle=gradient;context.fillRect(0,0,width,height);return context.getImageData(0,0,width,height).data};ol.layer.Heatmap.prototype.createCircle_=function(){var radius=this.getRadius();var blur=this.getBlur();goog.asserts.assert(goog.isDef(radius)&&goog.isDef(blur),"radius and blur should be defined");var halfSize=radius+blur+1;var size=2*halfSize;var context=ol.dom.createCanvasContext2D(size,size);context.shadowOffsetX=context.shadowOffsetY=this.shadow_;context.shadowBlur=blur;context.shadowColor="#000";context.beginPath();var center=halfSize-this.shadow_;context.arc(center,center,radius,0,Math.PI*2,true);context.fill();return context.canvas.toDataURL()};ol.layer.Heatmap.prototype.getBlur=function(){return(this.get(ol.layer.HeatmapLayerProperty.BLUR))};ol.layer.Heatmap.prototype.getGradient=function(){return(this.get(ol.layer.HeatmapLayerProperty.GRADIENT))};ol.layer.Heatmap.prototype.getRadius=function(){return(this.get(ol.layer.HeatmapLayerProperty.RADIUS))};ol.layer.Heatmap.prototype.handleGradientChanged_=function(){this.gradient_=ol.layer.Heatmap.createGradient_(this.getGradient())};ol.layer.Heatmap.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_();this.styleCache_=new Array(256);this.changed()};ol.layer.Heatmap.prototype.handleRender_=function(event){goog.asserts.assert(event.type==ol.render.EventType.RENDER,"event.type should be RENDER");goog.asserts.assert(!goog.isNull(this.gradient_),"this.gradient_ should not be null");var context=event.context;var canvas=context.canvas;var image=context.getImageData(0,0,canvas.width,canvas.height);var view8=image.data;var i,ii,alpha,offset;for(i=0,ii=view8.length;i<ii;i+=4){alpha=view8[i+3]*4;if(alpha){view8[i]=this.gradient_[alpha];view8[i+1]=this.gradient_[alpha+1];view8[i+2]=this.gradient_[alpha+2]}}context.putImageData(image,0,0)};ol.layer.Heatmap.prototype.setBlur=function(blur){this.set(ol.layer.HeatmapLayerProperty.BLUR,blur)};ol.layer.Heatmap.prototype.setGradient=function(colors){this.set(ol.layer.HeatmapLayerProperty.GRADIENT,colors)};ol.layer.Heatmap.prototype.setRadius=function(radius){this.set(ol.layer.HeatmapLayerProperty.RADIUS,radius)};goog.provide("ol.raster.Operation");goog.provide("ol.raster.OperationType");ol.raster.OperationType={PIXEL:"pixel",IMAGE:"image"};ol.raster.Operation;goog.provide("ol.raster.Pixel");ol.raster.Pixel;goog.provide("goog.net.jsloader");goog.provide("goog.net.jsloader.Error");goog.provide("goog.net.jsloader.ErrorCode");goog.provide("goog.net.jsloader.Options");goog.require("goog.array");goog.require("goog.async.Deferred");goog.require("goog.debug.Error");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.object");goog.net.jsloader.GLOBAL_VERIFY_OBJS_="closure_verification";goog.net.jsloader.DEFAULT_TIMEOUT=5000;goog.net.jsloader.Options;goog.net.jsloader.scriptsToLoad_=[];goog.net.jsloader.loadMany=function(uris,opt_options){if(!uris.length){return}var isAnotherModuleLoading=goog.net.jsloader.scriptsToLoad_.length;goog.array.extend(goog.net.jsloader.scriptsToLoad_,uris);if(isAnotherModuleLoading){return}uris=goog.net.jsloader.scriptsToLoad_;var popAndLoadNextScript=function(){var uri=uris.shift();var deferred=goog.net.jsloader.load(uri,opt_options);if(uris.length){deferred.addBoth(popAndLoadNextScript)}};popAndLoadNextScript()};goog.net.jsloader.load=function(uri,opt_options){var options=opt_options||{};var doc=options.document||document;var script=goog.dom.createElement(goog.dom.TagName.SCRIPT);var request={script_:script,timeout_:undefined};var deferred=new goog.async.Deferred(goog.net.jsloader.cancel_,request);var timeout=null;var timeoutDuration=goog.isDefAndNotNull(options.timeout)?options.timeout:goog.net.jsloader.DEFAULT_TIMEOUT;if(timeoutDuration>0){timeout=window.setTimeout(function(){goog.net.jsloader.cleanup_(script,true);deferred.errback(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.TIMEOUT,"Timeout reached for loading script "+uri))},timeoutDuration);request.timeout_=timeout}script.onload=script.onreadystatechange=function(){if(!script.readyState||script.readyState=="loaded"||script.readyState=="complete"){var removeScriptNode=options.cleanupWhenDone||false;goog.net.jsloader.cleanup_(script,removeScriptNode,timeout);deferred.callback(null)}};script.onerror=function(){goog.net.jsloader.cleanup_(script,true,timeout);deferred.errback(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.LOAD_ERROR,"Error while loading script "+uri))};var properties=options.attributes||{};goog.object.extend(properties,{type:"text/javascript",charset:"UTF-8",src:uri});goog.dom.setProperties(script,properties);var scriptParent=goog.net.jsloader.getScriptParentElement_(doc);scriptParent.appendChild(script);return deferred};goog.net.jsloader.loadAndVerify=function(uri,verificationObjName,options){if(!goog.global[goog.net.jsloader.GLOBAL_VERIFY_OBJS_]){goog.global[goog.net.jsloader.GLOBAL_VERIFY_OBJS_]={}}var verifyObjs=goog.global[goog.net.jsloader.GLOBAL_VERIFY_OBJS_];if(goog.isDef(verifyObjs[verificationObjName])){return goog.async.Deferred.fail(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.VERIFY_OBJECT_ALREADY_EXISTS,"Verification object "+verificationObjName+" already defined."))}var sendDeferred=goog.net.jsloader.load(uri,options);var deferred=new goog.async.Deferred(goog.bind(sendDeferred.cancel,sendDeferred));sendDeferred.addCallback(function(){var result=verifyObjs[verificationObjName];if(goog.isDef(result)){deferred.callback(result);delete verifyObjs[verificationObjName]}else{deferred.errback(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.VERIFY_ERROR,"Script "+uri+" loaded, but verification object "+verificationObjName+" was not defined."))}});sendDeferred.addErrback(function(error){if(goog.isDef(verifyObjs[verificationObjName])){delete verifyObjs[verificationObjName]}deferred.errback(error)});return deferred};goog.net.jsloader.getScriptParentElement_=function(doc){var headElements=doc.getElementsByTagName(goog.dom.TagName.HEAD);if(!headElements||goog.array.isEmpty(headElements)){return doc.documentElement}else{return headElements[0]}};goog.net.jsloader.cancel_=function(){var request=this;if(request&&request.script_){var scriptNode=request.script_;if(scriptNode&&scriptNode.tagName==goog.dom.TagName.SCRIPT){goog.net.jsloader.cleanup_(scriptNode,true,request.timeout_)}}};goog.net.jsloader.cleanup_=function(scriptNode,removeScriptNode,opt_timeout){if(goog.isDefAndNotNull(opt_timeout)){goog.global.clearTimeout(opt_timeout)}scriptNode.onload=goog.nullFunction;scriptNode.onerror=goog.nullFunction;scriptNode.onreadystatechange=goog.nullFunction;if(removeScriptNode){window.setTimeout(function(){goog.dom.removeNode(scriptNode)},0)}};goog.net.jsloader.ErrorCode={LOAD_ERROR:0,TIMEOUT:1,VERIFY_ERROR:2,VERIFY_OBJECT_ALREADY_EXISTS:3};goog.net.jsloader.Error=function(code,opt_message){var msg="Jsloader error (code #"+code+")";if(opt_message){msg+=": "+opt_message}goog.net.jsloader.Error.base(this,"constructor",msg);this.code=code};goog.inherits(goog.net.jsloader.Error,goog.debug.Error);goog.provide("goog.net.Jsonp");goog.require("goog.Uri");goog.require("goog.net.jsloader");goog.net.Jsonp=function(uri,opt_callbackParamName){this.uri_=new goog.Uri(uri);this.callbackParamName_=opt_callbackParamName?opt_callbackParamName:"callback";this.timeout_=5000};goog.net.Jsonp.CALLBACKS="_callbacks_";goog.net.Jsonp.scriptCounter_=0;goog.net.Jsonp.prototype.setRequestTimeout=function(timeout){this.timeout_=timeout};goog.net.Jsonp.prototype.getRequestTimeout=function(){return this.timeout_};goog.net.Jsonp.prototype.send=function(opt_payload,opt_replyCallback,opt_errorCallback,opt_callbackParamValue){var payload=opt_payload||null;var id=opt_callbackParamValue||"_"+(goog.net.Jsonp.scriptCounter_++).toString(36)+goog.now().toString(36);if(!goog.global[goog.net.Jsonp.CALLBACKS]){goog.global[goog.net.Jsonp.CALLBACKS]={}}var uri=this.uri_.clone();if(payload){goog.net.Jsonp.addPayloadToUri_(payload,uri)}if(opt_replyCallback){var reply=goog.net.Jsonp.newReplyHandler_(id,opt_replyCallback);goog.global[goog.net.Jsonp.CALLBACKS][id]=reply;uri.setParameterValues(this.callbackParamName_,goog.net.Jsonp.CALLBACKS+"."+id)}var deferred=goog.net.jsloader.load(uri.toString(),{timeout:this.timeout_,cleanupWhenDone:true});var error=goog.net.Jsonp.newErrorHandler_(id,payload,opt_errorCallback);deferred.addErrback(error);return{id_:id,deferred_:deferred}};goog.net.Jsonp.prototype.cancel=function(request){if(request){if(request.deferred_){request.deferred_.cancel()}if(request.id_){goog.net.Jsonp.cleanup_(request.id_,false)}}};goog.net.Jsonp.newErrorHandler_=function(id,payload,opt_errorCallback){return function(){goog.net.Jsonp.cleanup_(id,false);if(opt_errorCallback){opt_errorCallback(payload)}}};goog.net.Jsonp.newReplyHandler_=function(id,replyCallback){var handler=function(var_args){goog.net.Jsonp.cleanup_(id,true);replyCallback.apply(undefined,arguments)};return handler};goog.net.Jsonp.cleanup_=function(id,deleteReplyHandler){if(goog.global[goog.net.Jsonp.CALLBACKS][id]){if(deleteReplyHandler){delete goog.global[goog.net.Jsonp.CALLBACKS][id]}else{goog.global[goog.net.Jsonp.CALLBACKS][id]=goog.nullFunction}}};goog.net.Jsonp.addPayloadToUri_=function(payload,uri){for(var name in payload){if(!payload.hasOwnProperty||payload.hasOwnProperty(name)){uri.setParameterValues(name,payload[name])}}return uri};goog.provide("ol.TileUrlFunction");goog.provide("ol.TileUrlFunctionType");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.TileCoord");goog.require("ol.tilecoord");ol.TileUrlFunctionType;ol.TileCoordTransformType;ol.TileUrlFunction.createFromTemplate=function(template){var zRegEx=/\{z\}/g;var xRegEx=/\{x\}/g;var yRegEx=/\{y\}/g;var dashYRegEx=/\{-y\}/g;return(function(tileCoord,pixelRatio,projection){if(goog.isNull(tileCoord)){return undefined}else{return template.replace(zRegEx,tileCoord[0].toString()).replace(xRegEx,tileCoord[1].toString()).replace(yRegEx,function(){var y=-tileCoord[2]-1;return y.toString()}).replace(dashYRegEx,function(){var y=(1<<tileCoord[0])+tileCoord[2];return y.toString()})}})};ol.TileUrlFunction.createFromTemplates=function(templates){return ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(templates,ol.TileUrlFunction.createFromTemplate))};ol.TileUrlFunction.createFromTileUrlFunctions=function(tileUrlFunctions){goog.asserts.assert(tileUrlFunctions.length>0,"Length of tile url functions should be greater than 0");if(tileUrlFunctions.length===1){return tileUrlFunctions[0]}return(function(tileCoord,pixelRatio,projection){if(goog.isNull(tileCoord)){return undefined}else{var h=ol.tilecoord.hash(tileCoord);var index=goog.math.modulo(h,tileUrlFunctions.length);return tileUrlFunctions[index](tileCoord,pixelRatio,projection)}})};ol.TileUrlFunction.nullTileUrlFunction=function(tileCoord,pixelRatio,projection){return undefined};ol.TileUrlFunction.expandUrl=function(url){var urls=[];var match=/\{(\d)-(\d)\}/.exec(url)||/\{([a-z])-([a-z])\}/.exec(url);if(match){var startCharCode=match[1].charCodeAt(0);var stopCharCode=match[2].charCodeAt(0);var charCode;for(charCode=startCharCode;charCode<=stopCharCode;++charCode){urls.push(url.replace(match[0],String.fromCharCode(charCode)))}}else{urls.push(url)}return urls};goog.provide("ol.source.TileImage");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.ImageTile");goog.require("ol.TileCoord");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");goog.require("ol.TileUrlFunction");goog.require("ol.TileUrlFunctionType");goog.require("ol.source.Tile");goog.require("ol.source.TileEvent");ol.source.TileImage=function(options){goog.base(this,{attributions:options.attributions,extent:options.extent,logo:options.logo,opaque:options.opaque,projection:options.projection,state:goog.isDef(options.state)?(options.state):undefined,tileGrid:options.tileGrid,tilePixelRatio:options.tilePixelRatio,wrapX:options.wrapX});this.tileUrlFunction=goog.isDef(options.tileUrlFunction)?options.tileUrlFunction:ol.TileUrlFunction.nullTileUrlFunction;this.crossOrigin=goog.isDef(options.crossOrigin)?options.crossOrigin:null;this.tileLoadFunction=goog.isDef(options.tileLoadFunction)?options.tileLoadFunction:ol.source.TileImage.defaultTileLoadFunction;this.tileClass=goog.isDef(options.tileClass)?options.tileClass:ol.ImageTile};goog.inherits(ol.source.TileImage,ol.source.Tile);ol.source.TileImage.defaultTileLoadFunction=function(imageTile,src){imageTile.getImage().src=src};ol.source.TileImage.prototype.getTile=function(z,x,y,pixelRatio,projection){var tileCoordKey=this.getKeyZXY(z,x,y);if(this.tileCache.containsKey(tileCoordKey)){return(this.tileCache.get(tileCoordKey))}else{goog.asserts.assert(projection,"argument projection is truthy");var tileCoord=[z,x,y];var urlTileCoord=this.getTileCoordForTileUrlFunction(tileCoord,projection);var tileUrl=goog.isNull(urlTileCoord)?undefined:this.tileUrlFunction(urlTileCoord,pixelRatio,projection);var tile=new this.tileClass(tileCoord,goog.isDef(tileUrl)?ol.TileState.IDLE:ol.TileState.EMPTY,goog.isDef(tileUrl)?tileUrl:"",this.crossOrigin,this.tileLoadFunction);goog.events.listen(tile,goog.events.EventType.CHANGE,this.handleTileChange_,false,this);this.tileCache.set(tileCoordKey,tile);return tile}};ol.source.TileImage.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};ol.source.TileImage.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};ol.source.TileImage.prototype.handleTileChange_=function(event){var tile=(event.target);switch(tile.getState()){case ol.TileState.LOADING:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADSTART,tile));break;case ol.TileState.LOADED:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADEND,tile));break;case ol.TileState.ERROR:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADERROR,tile));break}};ol.source.TileImage.prototype.setTileLoadFunction=function(tileLoadFunction){this.tileCache.clear();this.tileLoadFunction=tileLoadFunction;this.changed()};ol.source.TileImage.prototype.setTileUrlFunction=function(tileUrlFunction){this.tileCache.clear();this.tileUrlFunction=tileUrlFunction;this.changed()};ol.source.TileImage.prototype.useTile=function(z,x,y){var tileCoordKey=this.getKeyZXY(z,x,y);if(this.tileCache.containsKey(tileCoordKey)){this.tileCache.get(tileCoordKey)}};goog.provide("ol.source.BingMaps");goog.require("goog.Uri");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.net.Jsonp");goog.require("ol.Attribution");goog.require("ol.TileRange");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.TileImage");goog.require("ol.tilecoord");ol.source.BingMaps=function(options){goog.base(this,{crossOrigin:"anonymous",opaque:true,projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING,tileLoadFunction:options.tileLoadFunction,wrapX:goog.isDef(options.wrapX)?options.wrapX:true});this.culture_=goog.isDef(options.culture)?options.culture:"en-us";this.maxZoom_=goog.isDef(options.maxZoom)?options.maxZoom:-1;var uri=new goog.Uri("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+options.imagerySet);var jsonp=new goog.net.Jsonp(uri,"jsonp");jsonp.send({include:"ImageryProviders",uriScheme:"https",key:options.key},goog.bind(this.handleImageryMetadataResponse,this))};goog.inherits(ol.source.BingMaps,ol.source.TileImage);ol.source.BingMaps.TOS_ATTRIBUTION=new ol.Attribution({html:'<a class="ol-attribution-bing-tos" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'});ol.source.BingMaps.prototype.handleImageryMetadataResponse=function(response){if(response.statusCode!=200||response.statusDescription!="OK"||response.authenticationResultCode!="ValidCredentials"||response.resourceSets.length!=1||response.resourceSets[0].resources.length!=1){this.setState(ol.source.State.ERROR);return}var brandLogoUri=response.brandLogoUri;if(brandLogoUri.indexOf("https")==-1){brandLogoUri=brandLogoUri.replace("http","https")}var resource=response.resourceSets[0].resources[0];goog.asserts.assert(resource.imageWidth==resource.imageHeight,"resource has imageWidth equal to imageHeight, i.e. is square");var maxZoom=this.maxZoom_==-1?resource.zoomMax:this.maxZoom_;var sourceProjection=this.getProjection();var extent=ol.tilegrid.extentFromProjection(sourceProjection);var tileSize=resource.imageWidth==resource.imageHeight?resource.imageWidth:[resource.imageWidth,resource.imageHeight];var tileGrid=ol.tilegrid.createXYZ({extent:extent,minZoom:resource.zoomMin,maxZoom:maxZoom,tileSize:tileSize});this.tileGrid=tileGrid;var culture=this.culture_;this.tileUrlFunction=ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(resource.imageUrlSubdomains,function(subdomain){var quadKeyTileCoord=[0,0,0];var imageUrl=resource.imageUrl.replace("{subdomain}",subdomain).replace("{culture}",culture);return(function(tileCoord,pixelRatio,projection){goog.asserts.assert(ol.proj.equivalent(projection,sourceProjection),"projections are equivalent");if(goog.isNull(tileCoord)){return undefined}else{ol.tilecoord.createOrUpdate(tileCoord[0],tileCoord[1],-tileCoord[2]-1,quadKeyTileCoord);return imageUrl.replace("{quadkey}",ol.tilecoord.quadKey(quadKeyTileCoord))}})}));if(resource.imageryProviders){var transform=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),this.getProjection());var attributions=goog.array.map(resource.imageryProviders,function(imageryProvider){var html=imageryProvider.attribution;var tileRanges={};goog.array.forEach(imageryProvider.coverageAreas,function(coverageArea){var minZ=coverageArea.zoomMin;var maxZ=Math.min(coverageArea.zoomMax,maxZoom);var bbox=coverageArea.bbox;var epsg4326Extent=[bbox[1],bbox[0],bbox[3],bbox[2]];var extent=ol.extent.applyTransform(epsg4326Extent,transform);var tileRange,z,zKey;for(z=minZ;z<=maxZ;++z){zKey=z.toString();tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z);if(zKey in tileRanges){tileRanges[zKey].push(tileRange)}else{tileRanges[zKey]=[tileRange]}}});return new ol.Attribution({html:html,tileRanges:tileRanges})});attributions.push(ol.source.BingMaps.TOS_ATTRIBUTION);this.setAttributions(attributions)}this.setLogo(brandLogoUri);this.setState(ol.source.State.READY)};goog.provide("ol.source.Cluster");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Point");goog.require("ol.source.Vector");ol.source.Cluster=function(options){goog.base(this,{attributions:options.attributions,extent:options.extent,logo:options.logo,projection:options.projection});this.resolution_=undefined;this.distance_=goog.isDef(options.distance)?options.distance:20;this.features_=[];this.source_=options.source;this.source_.on(goog.events.EventType.CHANGE,ol.source.Cluster.prototype.onSourceChange_,this)};goog.inherits(ol.source.Cluster,ol.source.Vector);ol.source.Cluster.prototype.getSource=function(){return this.source_};ol.source.Cluster.prototype.loadFeatures=function(extent,resolution,projection){this.source_.loadFeatures(extent,resolution,projection);if(resolution!==this.resolution_){this.clear();this.resolution_=resolution;this.cluster_();this.addFeatures(this.features_)}};ol.source.Cluster.prototype.onSourceChange_=function(){this.clear();this.cluster_();this.addFeatures(this.features_);this.changed()};ol.source.Cluster.prototype.cluster_=function(){if(!goog.isDef(this.resolution_)){return}this.features_.length=0;var extent=ol.extent.createEmpty();var mapDistance=this.distance_*this.resolution_;var features=this.source_.getFeatures();var clustered={};for(var i=0,ii=features.length;i<ii;i++){var feature=features[i];if(!goog.object.containsKey(clustered,goog.getUid(feature).toString())){var geometry=feature.getGeometry();goog.asserts.assert(geometry instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");var coordinates=geometry.getCoordinates();ol.extent.createOrUpdateFromCoordinate(coordinates,extent);ol.extent.buffer(extent,mapDistance,extent);var neighbors=this.source_.getFeaturesInExtent(extent);goog.asserts.assert(neighbors.length>=1,"at least one neighbor found");neighbors=goog.array.filter(neighbors,function(neighbor){var uid=goog.getUid(neighbor).toString();if(!goog.object.containsKey(clustered,uid)){clustered[uid]=true;return true}else{return false}});this.features_.push(this.createCluster_(neighbors))}}goog.asserts.assert(goog.object.getCount(clustered)==this.source_.getFeatures().length,"number of clustered equals number of features in the source")};ol.source.Cluster.prototype.createCluster_=function(features){var length=features.length;var centroid=[0,0];for(var i=0;i<length;i++){var geometry=features[i].getGeometry();goog.asserts.assert(geometry instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");var coordinates=geometry.getCoordinates();ol.coordinate.add(centroid,coordinates)}ol.coordinate.scale(centroid,1/length);var cluster=new ol.Feature(new ol.geom.Point(centroid));cluster.set("features",features);return cluster};goog.provide("ol.source.ImageMapGuide");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("goog.uri.utils");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.ImageUrlFunction");goog.require("ol.extent");goog.require("ol.source.Image");ol.source.ImageMapGuide=function(options){goog.base(this,{projection:options.projection,resolutions:options.resolutions});this.crossOrigin_=goog.isDef(options.crossOrigin)?options.crossOrigin:null;this.displayDpi_=goog.isDef(options.displayDpi)?options.displayDpi:96;this.params_=goog.isDef(options.params)?options.params:{};var imageUrlFunction;if(goog.isDef(options.url)){imageUrlFunction=ol.ImageUrlFunction.createFromParamsFunction(options.url,this.params_,goog.bind(this.getUrl,this))}else{imageUrlFunction=ol.ImageUrlFunction.nullImageUrlFunction}this.imageUrlFunction_=imageUrlFunction;this.imageLoadFunction_=goog.isDef(options.imageLoadFunction)?options.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.hidpi_=goog.isDef(options.hidpi)?options.hidpi:true;this.metersPerUnit_=goog.isDef(options.metersPerUnit)?options.metersPerUnit:1;this.ratio_=goog.isDef(options.ratio)?options.ratio:1;this.useOverlay_=goog.isDef(options.useOverlay)?options.useOverlay:false;this.image_=null;this.renderedRevision_=0};goog.inherits(ol.source.ImageMapGuide,ol.source.Image);ol.source.ImageMapGuide.prototype.getParams=function(){return this.params_};ol.source.ImageMapGuide.prototype.getImage=function(extent,resolution,pixelRatio,projection){resolution=this.findNearestResolution(resolution);pixelRatio=this.hidpi_?pixelRatio:1;var image=this.image_;if(!goog.isNull(image)&&this.renderedRevision_==this.getRevision()&&image.getResolution()==resolution&&image.getPixelRatio()==pixelRatio&&ol.extent.containsExtent(image.getExtent(),extent)){return image}if(this.ratio_!=1){extent=extent.slice();ol.extent.scaleFromCenter(extent,this.ratio_)}var width=ol.extent.getWidth(extent)/resolution;var height=ol.extent.getHeight(extent)/resolution;var size=[width*pixelRatio,height*pixelRatio];var imageUrl=this.imageUrlFunction_(extent,size,projection);if(goog.isDef(imageUrl)){image=new ol.Image(extent,resolution,pixelRatio,this.getAttributions(),imageUrl,this.crossOrigin_,this.imageLoadFunction_);goog.events.listen(image,goog.events.EventType.CHANGE,this.handleImageChange,false,this)}else{image=null}this.image_=image;this.renderedRevision_=this.getRevision();return image};ol.source.ImageMapGuide.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageMapGuide.getScale=function(extent,size,metersPerUnit,dpi){var mcsW=ol.extent.getWidth(extent);var mcsH=ol.extent.getHeight(extent);var devW=size[0];var devH=size[1];var mpp=0.0254/dpi;if(devH*mcsW>devW*mcsH){return mcsW*metersPerUnit/(devW*mpp)}else{return mcsH*metersPerUnit/(devH*mpp)}};ol.source.ImageMapGuide.prototype.updateParams=function(params){goog.object.extend(this.params_,params);this.changed()};ol.source.ImageMapGuide.prototype.getUrl=function(baseUrl,params,extent,size,projection){var scale=ol.source.ImageMapGuide.getScale(extent,size,this.metersPerUnit_,this.displayDpi_);var center=ol.extent.getCenter(extent);var baseParams={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(size[0]),SETDISPLAYHEIGHT:Math.round(size[1]),SETVIEWSCALE:scale,SETVIEWCENTERX:center[0],SETVIEWCENTERY:center[1]};goog.object.extend(baseParams,params);return goog.uri.utils.appendParamsFromMap(baseUrl,baseParams)};ol.source.ImageMapGuide.prototype.setImageLoadFunction=function(imageLoadFunction){this.image_=null;this.imageLoadFunction_=imageLoadFunction;this.changed()};goog.provide("ol.source.ImageStatic");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.Image");ol.source.ImageStatic=function(options){var attributions=goog.isDef(options.attributions)?options.attributions:null;var imageExtent=options.imageExtent;var resolution,resolutions;if(goog.isDef(options.imageSize)){resolution=ol.extent.getHeight(imageExtent)/options.imageSize[1];resolutions=[resolution]}var crossOrigin=goog.isDef(options.crossOrigin)?options.crossOrigin:null;var imageLoadFunction=goog.isDef(options.imageLoadFunction)?options.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;goog.base(this,{attributions:attributions,logo:options.logo,projection:ol.proj.get(options.projection),resolutions:resolutions});this.image_=new ol.Image(imageExtent,resolution,1,attributions,options.url,crossOrigin,imageLoadFunction);goog.events.listen(this.image_,goog.events.EventType.CHANGE,this.handleImageChange,false,this)};goog.inherits(ol.source.ImageStatic,ol.source.Image);ol.source.ImageStatic.prototype.getImage=function(extent,resolution,pixelRatio,projection){if(ol.extent.intersects(extent,this.image_.getExtent())){return this.image_}return null};goog.provide("ol.source.wms");goog.provide("ol.source.wms.ServerType");ol.source.wms.ServerType={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};goog.provide("ol.source.ImageWMS");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.Image");goog.require("ol.source.wms");goog.require("ol.source.wms.ServerType");ol.source.ImageWMS=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.base(this,{attributions:options.attributions,logo:options.logo,projection:options.projection,resolutions:options.resolutions});this.crossOrigin_=goog.isDef(options.crossOrigin)?options.crossOrigin:null;this.url_=options.url;this.imageLoadFunction_=goog.isDef(options.imageLoadFunction)?options.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.params_=options.params;this.v13_=true;this.updateV13_();this.serverType_=(options.serverType);this.hidpi_=goog.isDef(options.hidpi)?options.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=goog.isDef(options.ratio)?options.ratio:1.5};goog.inherits(ol.source.ImageWMS,ol.source.Image);ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_=[101,101];ol.source.ImageWMS.prototype.getGetFeatureInfoUrl=function(coordinate,resolution,projection,params){goog.asserts.assert(!("VERSION" in params),"key VERSION is not allowed in params");if(!goog.isDef(this.url_)){return undefined}var extent=ol.extent.getForViewAndSize(coordinate,resolution,0,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);var baseParams={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_.LAYERS};goog.object.extend(baseParams,this.params_,params);var x=Math.floor((coordinate[0]-extent[0])/resolution);var y=Math.floor((extent[3]-coordinate[1])/resolution);baseParams[this.v13_?"I":"X"]=x;baseParams[this.v13_?"J":"Y"]=y;return this.getRequestUrl_(extent,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,1,ol.proj.get(projection),baseParams)};ol.source.ImageWMS.prototype.getParams=function(){return this.params_};ol.source.ImageWMS.prototype.getImage=function(extent,resolution,pixelRatio,projection){if(!goog.isDef(this.url_)){return null}resolution=this.findNearestResolution(resolution);if(pixelRatio!=1&&(!this.hidpi_||!goog.isDef(this.serverType_))){pixelRatio=1}extent=extent.slice();var centerX=(extent[0]+extent[2])/2;var centerY=(extent[1]+extent[3])/2;if(this.ratio_!=1){var halfWidth=this.ratio_*ol.extent.getWidth(extent)/2;var halfHeight=this.ratio_*ol.extent.getHeight(extent)/2;extent[0]=centerX-halfWidth;extent[1]=centerY-halfHeight;extent[2]=centerX+halfWidth;extent[3]=centerY+halfHeight}var imageResolution=resolution/pixelRatio;var width=Math.ceil(ol.extent.getWidth(extent)/imageResolution);var height=Math.ceil(ol.extent.getHeight(extent)/imageResolution);extent[0]=centerX-imageResolution*width/2;extent[2]=centerX+imageResolution*width/2;extent[1]=centerY-imageResolution*height/2;extent[3]=centerY+imageResolution*height/2;var image=this.image_;if(!goog.isNull(image)&&this.renderedRevision_==this.getRevision()&&image.getResolution()==resolution&&image.getPixelRatio()==pixelRatio&&ol.extent.containsExtent(image.getExtent(),extent)){return image}var params={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};goog.object.extend(params,this.params_);this.imageSize_[0]=width;this.imageSize_[1]=height;var url=this.getRequestUrl_(extent,this.imageSize_,pixelRatio,projection,params);this.image_=new ol.Image(extent,resolution,pixelRatio,this.getAttributions(),url,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();goog.events.listen(this.image_,goog.events.EventType.CHANGE,this.handleImageChange,false,this);return this.image_};ol.source.ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageWMS.prototype.getRequestUrl_=function(extent,size,pixelRatio,projection,params){goog.asserts.assert(goog.isDef(this.url_),"url is defined");params[this.v13_?"CRS":"SRS"]=projection.getCode();if(!("STYLES" in this.params_)){params.STYLES=new String("")}if(pixelRatio!=1){switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:var dpi=(90*pixelRatio+0.5)|0;if(goog.isDef(params.FORMAT_OPTIONS)){params.FORMAT_OPTIONS+=";dpi:"+dpi}else{params.FORMAT_OPTIONS="dpi:"+dpi}break;case ol.source.wms.ServerType.MAPSERVER:params.MAP_RESOLUTION=90*pixelRatio;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:params.DPI=90*pixelRatio;break;default:goog.asserts.fail("unknown serverType configured");break}}params.WIDTH=size[0];params.HEIGHT=size[1];var axisOrientation=projection.getAxisOrientation();var bbox;if(this.v13_&&axisOrientation.substr(0,2)=="ne"){bbox=[extent[1],extent[0],extent[3],extent[2]]}else{bbox=extent}params.BBOX=bbox.join(",");return goog.uri.utils.appendParamsFromMap(this.url_,params)};ol.source.ImageWMS.prototype.getUrl=function(){return this.url_};ol.source.ImageWMS.prototype.setImageLoadFunction=function(imageLoadFunction){this.image_=null;this.imageLoadFunction_=imageLoadFunction;this.changed()};ol.source.ImageWMS.prototype.setUrl=function(url){if(url!=this.url_){this.url_=url;this.image_=null;this.changed()}};ol.source.ImageWMS.prototype.updateParams=function(params){goog.object.extend(this.params_,params);this.updateV13_();this.image_=null;this.changed()};ol.source.ImageWMS.prototype.updateV13_=function(){var version=goog.object.get(this.params_,"VERSION",ol.DEFAULT_WMS_VERSION);this.v13_=goog.string.compareVersions(version,"1.3")>=0};goog.provide("ol.source.XYZ");goog.require("ol.TileUrlFunction");goog.require("ol.source.TileImage");ol.source.XYZ=function(options){var projection=goog.isDef(options.projection)?options.projection:"EPSG:3857";var tileGrid=goog.isDef(options.tileGrid)?options.tileGrid:ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(projection),maxZoom:options.maxZoom,tileSize:options.tileSize});this.urls_=null;goog.base(this,{attributions:options.attributions,crossOrigin:options.crossOrigin,logo:options.logo,projection:projection,tileGrid:tileGrid,tileLoadFunction:options.tileLoadFunction,tilePixelRatio:options.tilePixelRatio,tileUrlFunction:ol.TileUrlFunction.nullTileUrlFunction,wrapX:goog.isDef(options.wrapX)?options.wrapX:true});if(goog.isDef(options.tileUrlFunction)){this.setTileUrlFunction(options.tileUrlFunction)}else{if(goog.isDef(options.urls)){this.setUrls(options.urls)}else{if(goog.isDef(options.url)){this.setUrl(options.url)}}}};goog.inherits(ol.source.XYZ,ol.source.TileImage);ol.source.XYZ.prototype.getUrls=function(){return this.urls_};ol.source.XYZ.prototype.setUrl=function(url){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(ol.TileUrlFunction.expandUrl(url)));this.urls_=[url]};ol.source.XYZ.prototype.setUrls=function(urls){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(urls));this.urls_=urls};goog.provide("ol.source.OSM");goog.require("ol.Attribution");goog.require("ol.source.XYZ");ol.source.OSM=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var attributions;if(goog.isDef(options.attributions)){attributions=options.attributions}else{attributions=[ol.source.OSM.ATTRIBUTION]}var crossOrigin=goog.isDef(options.crossOrigin)?options.crossOrigin:"anonymous";var url=goog.isDef(options.url)?options.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";goog.base(this,{attributions:attributions,crossOrigin:crossOrigin,opaque:true,maxZoom:goog.isDef(options.maxZoom)?options.maxZoom:19,tileLoadFunction:options.tileLoadFunction,url:url,wrapX:options.wrapX})};goog.inherits(ol.source.OSM,ol.source.XYZ);ol.source.OSM.ATTRIBUTION=new ol.Attribution({html:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});goog.provide("ol.source.MapQuest");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.source.OSM");goog.require("ol.source.XYZ");ol.source.MapQuest=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};goog.asserts.assert(options.layer in ol.source.MapQuestConfig,"known layer configured");var layerConfig=ol.source.MapQuestConfig[options.layer];this.layer_=options.layer;var url=goog.isDef(options.url)?options.url:"https://otile{1-4}-s.mqcdn.com/tiles/1.0.0/"+this.layer_+"/{z}/{x}/{y}.jpg";goog.base(this,{attributions:layerConfig.attributions,crossOrigin:"anonymous",logo:"https://developer.mapquest.com/content/osm/mq_logo.png",maxZoom:layerConfig.maxZoom,opaque:true,tileLoadFunction:options.tileLoadFunction,url:url})};goog.inherits(ol.source.MapQuest,ol.source.XYZ);ol.source.MapQuest.TILE_ATTRIBUTION=new ol.Attribution({html:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a>'});ol.source.MapQuestConfig={osm:{maxZoom:19,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,ol.source.OSM.ATTRIBUTION]},sat:{maxZoom:18,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,new ol.Attribution({html:"Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency"})]},hyb:{maxZoom:18,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,ol.source.OSM.ATTRIBUTION]}};ol.source.MapQuest.prototype.getLayer=function(){return this.layer_};goog.provide("ol.ext.pixelworks");ol.ext.pixelworks;(function(){var exports={};var module={exports:exports};var define;(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}g.pixelworks=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){var Processor=require("./processor");exports.Processor=Processor},{"./processor":2}],2:[function(require,module,exports){function createMinion(operation){return function(data){var buffers=data.buffers;var meta=data.meta;var imageOps=data.imageOps;var width=data.width;var height=data.height;var numBuffers=buffers.length;var numBytes=buffers[0].byteLength;var output,b;if(imageOps){var images=new Array(numBuffers);for(b=0;b<numBuffers;++b){images[b]=new ImageData(new Uint8ClampedArray(buffers[b]),width,height)}output=operation(images,meta).data}else{output=new Uint8ClampedArray(numBytes);var arrays=new Array(numBuffers);var pixels=new Array(numBuffers);for(b=0;b<numBuffers;++b){arrays[b]=new Uint8ClampedArray(buffers[b]);pixels[b]=[0,0,0,0]}for(var i=0;i<numBytes;i+=4){for(var j=0;j<numBuffers;++j){var array=arrays[j];pixels[j][0]=array[i];pixels[j][1]=array[i+1];pixels[j][2]=array[i+2];pixels[j][3]=array[i+3]}var pixel=operation(pixels,meta);output[i]=pixel[0];output[i+1]=pixel[1];output[i+2]=pixel[2];output[i+3]=pixel[3]}}return output.buffer}}function createWorker(config,onMessage){var lib=Object.keys(config.lib||{}).map(function(name){return"var "+name+" = "+config.lib[name].toString()+";"});var lines=lib.concat(["var __minion__ = ("+createMinion.toString()+")(",config.operation.toString(),");",'self.addEventListener("message", function(__event__) {',"var buffer = __minion__(__event__.data);","self.postMessage({buffer: buffer, meta: __event__.data.meta}, [buffer]);","});"]);var blob=new Blob(lines,{type:"text/javascript"});var source=URL.createObjectURL(blob);var worker=new Worker(source);worker.addEventListener("message",onMessage);return worker}function createFauxWorker(config,onMessage){var minion=createMinion(config.operation);return{postMessage:function(data){setTimeout(function(){onMessage({data:{buffer:minion(data),meta:data.meta}})},0)}}}function Processor(config){this._imageOps=!!config.imageOps;var threads;if(config.threads===0){threads=0}else{if(this._imageOps){threads=1}else{threads=config.threads||1}}var workers=[];if(threads){for(var i=0;i<threads;++i){workers[i]=createWorker(config,this._onWorkerMessage.bind(this,i))}}else{workers[0]=createFauxWorker(config,this._onWorkerMessage.bind(this,0))}this._workers=workers;this._queue=[];this._maxQueueLength=config.queue||Infinity;this._running=0;this._dataLookup={};this._job=null}Processor.prototype.process=function(inputs,meta,callback){this._enqueue({inputs:inputs,meta:meta,callback:callback});this._dispatch()};Processor.prototype.destroy=function(){for(var key in this){this[key]=null}this._destroyed=true};Processor.prototype._enqueue=function(job){this._queue.push(job);while(this._queue.length>this._maxQueueLength){this._queue.shift().callback(null,null)}};Processor.prototype._dispatch=function(){if(this._running===0&&this._queue.length>0){var job=this._job=this._queue.shift();var width=job.inputs[0].width;var height=job.inputs[0].height;var buffers=job.inputs.map(function(input){return input.data.buffer});var threads=this._workers.length;this._running=threads;if(threads===1){this._workers[0].postMessage({buffers:buffers,meta:job.meta,imageOps:this._imageOps,width:width,height:height},buffers)}else{var length=job.inputs[0].data.length;var segmentLength=4*Math.ceil(length/4/threads);for(var i=0;i<threads;++i){var offset=i*segmentLength;var slices=[];for(var j=0,jj=buffers.length;j<jj;++j){slices.push(buffers[i].slice(offset,offset+segmentLength))}this._workers[i].postMessage({buffers:slices,meta:job.meta,imageOps:this._imageOps,width:width,height:height},slices)}}}};Processor.prototype._onWorkerMessage=function(index,event){if(this._destroyed){return}this._dataLookup[index]=event.data;--this._running;if(this._running===0){this._resolveJob()}};Processor.prototype._resolveJob=function(){var job=this._job;var threads=this._workers.length;var data,meta;if(threads===1){data=new Uint8ClampedArray(this._dataLookup[0]["buffer"]);meta=this._dataLookup[0]["meta"]}else{var length=job.inputs[0].data.length;data=new Uint8ClampedArray(length);meta=new Array(length);var segmentLength=4*Math.ceil(length/4/threads);for(var i=0;i<threads;++i){var buffer=this._dataLookup[i]["buffer"];var offset=i*segmentLength;data.set(new Uint8ClampedArray(buffer),offset);meta[i]=this._dataLookup[i]["meta"]}}this._job=null;this._dataLookup={};job.callback(null,new ImageData(data,job.inputs[0].width,job.inputs[0].height),meta);this._dispatch()};module.exports=Processor},{}]},{},[1])(1)});ol.ext.pixelworks=module.exports})();goog.provide("ol.source.Raster");goog.provide("ol.source.RasterEvent");goog.provide("ol.source.RasterEventType");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.ImageCanvas");goog.require("ol.TileQueue");goog.require("ol.dom");goog.require("ol.ext.pixelworks");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.layer.Tile");goog.require("ol.raster.OperationType");goog.require("ol.renderer.canvas.ImageLayer");goog.require("ol.renderer.canvas.TileLayer");goog.require("ol.source.Image");goog.require("ol.source.State");goog.require("ol.source.Tile");ol.source.Raster=function(options){this.worker_=null;this.operationType_=goog.isDef(options.operationType)?options.operationType:ol.raster.OperationType.PIXEL;this.threads_=goog.isDef(options.threads)?options.threads:1;this.renderers_=ol.source.Raster.createRenderers_(options.sources);for(var r=0,rr=this.renderers_.length;r<rr;++r){goog.events.listen(this.renderers_[r],goog.events.EventType.CHANGE,this.changed,false,this)}this.canvasContext_=ol.dom.createCanvasContext2D();this.tileQueue_=new ol.TileQueue(goog.functions.constant(1),goog.bind(this.changed,this));var layerStatesArray=ol.source.Raster.getLayerStatesArray_(this.renderers_);var layerStates={};for(var i=0,ii=layerStatesArray.length;i<ii;++i){layerStates[goog.getUid(layerStatesArray[i].layer)]=layerStatesArray[i]}this.renderedState_=null;this.renderedImageCanvas_=null;this.frameState_={animate:false,attributions:{},coordinateToPixelMatrix:goog.vec.Mat4.createNumber(),extent:null,focus:null,index:0,layerStates:layerStates,layerStatesArray:layerStatesArray,logos:{},pixelRatio:1,pixelToCoordinateMatrix:goog.vec.Mat4.createNumber(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:({rotation:0}),viewHints:[],wantedTiles:{}};goog.base(this,{});if(goog.isDef(options.operation)){this.setOperation(options.operation,options.lib)}};goog.inherits(ol.source.Raster,ol.source.Image);ol.source.Raster.prototype.setOperation=function(operation,opt_lib){this.worker_=new ol.ext.pixelworks.Processor({operation:operation,imageOps:this.operationType_===ol.raster.OperationType.IMAGE,queue:1,lib:opt_lib,threads:this.threads_});this.changed()};ol.source.Raster.prototype.updateFrameState_=function(extent,resolution,projection){var frameState=(goog.object.clone(this.frameState_));frameState.viewState=(goog.object.clone(frameState.viewState));var center=ol.extent.getCenter(extent);var width=Math.round(ol.extent.getWidth(extent)/resolution);var height=Math.round(ol.extent.getHeight(extent)/resolution);frameState.extent=extent;frameState.focus=ol.extent.getCenter(extent);frameState.size[0]=width;frameState.size[1]=height;var viewState=frameState.viewState;viewState.center=center;viewState.projection=projection;viewState.resolution=resolution;return frameState};ol.source.Raster.prototype.isDirty_=function(extent,resolution){var state=this.renderedState_;return !state||this.getRevision()!==state.revision||resolution!==state.resolution||!ol.extent.equals(extent,state.extent)};ol.source.Raster.prototype.getImage=function(extent,resolution,pixelRatio,projection){if(!this.allSourcesReady_()){return null}if(!this.isDirty_(extent,resolution)){return this.renderedImageCanvas_}var context=this.canvasContext_;var canvas=context.canvas;var width=Math.round(ol.extent.getWidth(extent)/resolution);var height=Math.round(ol.extent.getHeight(extent)/resolution);if(width!==canvas.width||height!==canvas.height){canvas.width=width;canvas.height=height}var frameState=this.updateFrameState_(extent,resolution,projection);var imageCanvas=new ol.ImageCanvas(extent,resolution,1,this.getAttributions(),canvas,this.composeFrame_.bind(this,frameState));this.renderedImageCanvas_=imageCanvas;this.renderedState_={extent:extent,resolution:resolution,revision:this.getRevision()};return imageCanvas};ol.source.Raster.prototype.allSourcesReady_=function(){var ready=true;var source;for(var i=0,ii=this.renderers_.length;i<ii;++i){source=this.renderers_[i].getLayer().getSource();if(source.getState()!==ol.source.State.READY){ready=false;break}}return ready};ol.source.Raster.prototype.composeFrame_=function(frameState,callback){var len=this.renderers_.length;var imageDatas=new Array(len);for(var i=0;i<len;++i){var imageData=ol.source.Raster.getImageData_(this.renderers_[i],frameState,frameState.layerStatesArray[i]);if(imageData){imageDatas[i]=imageData}else{return}}var data={};this.dispatchEvent(new ol.source.RasterEvent(ol.source.RasterEventType.BEFOREOPERATIONS,frameState,data));this.worker_.process(imageDatas,data,this.onWorkerComplete_.bind(this,frameState,callback));frameState.tileQueue.loadMoreTiles(16,16)};ol.source.Raster.prototype.onWorkerComplete_=function(frameState,callback,err,output,data){if(err){callback(err);return}if(goog.isNull(output)){return}this.dispatchEvent(new ol.source.RasterEvent(ol.source.RasterEventType.AFTEROPERATIONS,frameState,data));var resolution=frameState.viewState.resolution/frameState.pixelRatio;if(!this.isDirty_(frameState.extent,resolution)){this.canvasContext_.putImageData(output,0,0)}callback(null)};ol.source.Raster.getImageData_=function(renderer,frameState,layerState){renderer.prepareFrame(frameState,layerState);var image=renderer.getImage();if(!image){return null}var imageTransform=renderer.getImageTransform();var dx=Math.round(goog.vec.Mat4.getElement(imageTransform,0,3));var dy=Math.round(goog.vec.Mat4.getElement(imageTransform,1,3));var width=frameState.size[0];var height=frameState.size[1];if(image instanceof Image){if(!ol.source.Raster.context_){ol.source.Raster.context_=ol.dom.createCanvasContext2D(width,height)}else{var canvas=ol.source.Raster.context_.canvas;if(canvas.width!==width||canvas.height!==height){ol.source.Raster.context_=ol.dom.createCanvasContext2D(width,height)}else{ol.source.Raster.context_.clearRect(0,0,width,height)}}var dw=Math.round(image.width*goog.vec.Mat4.getElement(imageTransform,0,0));var dh=Math.round(image.height*goog.vec.Mat4.getElement(imageTransform,1,1));ol.source.Raster.context_.drawImage(image,dx,dy,dw,dh);return ol.source.Raster.context_.getImageData(0,0,width,height)}else{return image.getContext("2d").getImageData(-dx,-dy,width,height)}};ol.source.Raster.context_=null;ol.source.Raster.getLayerStatesArray_=function(renderers){return renderers.map(function(renderer){return renderer.getLayer().getLayerState()})};ol.source.Raster.createRenderers_=function(sources){var len=sources.length;var renderers=new Array(len);for(var i=0;i<len;++i){renderers[i]=ol.source.Raster.createRenderer_(sources[i])}return renderers};ol.source.Raster.createRenderer_=function(source){var renderer=null;if(source instanceof ol.source.Tile){renderer=ol.source.Raster.createTileRenderer_(source)}else{if(source instanceof ol.source.Image){renderer=ol.source.Raster.createImageRenderer_(source)}else{goog.asserts.fail("Unsupported source type: "+source)}}return renderer};ol.source.Raster.createImageRenderer_=function(source){var layer=new ol.layer.Image({source:source});return new ol.renderer.canvas.ImageLayer(layer)};ol.source.Raster.createTileRenderer_=function(source){var layer=new ol.layer.Tile({source:source});return new ol.renderer.canvas.TileLayer(layer)};ol.source.Raster.RenderedState;ol.source.RasterEvent=function(type,frameState,data){goog.base(this,type);this.extent=frameState.extent;this.resolution=frameState.viewState.resolution/frameState.pixelRatio;this.data=data};goog.inherits(ol.source.RasterEvent,goog.events.Event);ol.source.RasterEventType={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};goog.provide("ol.source.Stamen");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.source.OSM");goog.require("ol.source.XYZ");ol.source.StamenLayerConfig={terrain:{extension:"jpg",opaque:true},"terrain-background":{extension:"jpg",opaque:true},"terrain-labels":{extension:"png",opaque:false},"terrain-lines":{extension:"png",opaque:false},"toner-background":{extension:"png",opaque:true},toner:{extension:"png",opaque:true},"toner-hybrid":{extension:"png",opaque:false},"toner-labels":{extension:"png",opaque:false},"toner-lines":{extension:"png",opaque:false},"toner-lite":{extension:"png",opaque:true},watercolor:{extension:"jpg",opaque:true}};ol.source.StamenProviderConfig={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:3,maxZoom:16}};ol.source.Stamen=function(options){var i=options.layer.indexOf("-");var provider=i==-1?options.layer:options.layer.slice(0,i);goog.asserts.assert(provider in ol.source.StamenProviderConfig,"known provider configured");var providerConfig=ol.source.StamenProviderConfig[provider];goog.asserts.assert(options.layer in ol.source.StamenLayerConfig,"known layer configured");var layerConfig=ol.source.StamenLayerConfig[options.layer];var url=goog.isDef(options.url)?options.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+options.layer+"/{z}/{x}/{y}."+layerConfig.extension;goog.base(this,{attributions:ol.source.Stamen.ATTRIBUTIONS,crossOrigin:"anonymous",maxZoom:providerConfig.maxZoom,opaque:layerConfig.opaque,tileLoadFunction:options.tileLoadFunction,url:url})};goog.inherits(ol.source.Stamen,ol.source.XYZ);ol.source.Stamen.ATTRIBUTIONS=[new ol.Attribution({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.'}),ol.source.OSM.ATTRIBUTION];goog.provide("ol.source.TileArcGISRest");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.TileCoord");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.TileImage");goog.require("ol.tilecoord");ol.source.TileArcGISRest=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var params=goog.isDef(options.params)?options.params:{};goog.base(this,{attributions:options.attributions,crossOrigin:options.crossOrigin,logo:options.logo,projection:options.projection,tileGrid:options.tileGrid,tileLoadFunction:options.tileLoadFunction,tileUrlFunction:goog.bind(this.tileUrlFunction_,this),wrapX:goog.isDef(options.wrapX)?options.wrapX:true});var urls=options.urls;if(!goog.isDef(urls)&&goog.isDef(options.url)){urls=ol.TileUrlFunction.expandUrl(options.url)}this.urls_=goog.isDefAndNotNull(urls)?urls:[];this.params_=params;this.tmpExtent_=ol.extent.createEmpty()};goog.inherits(ol.source.TileArcGISRest,ol.source.TileImage);ol.source.TileArcGISRest.prototype.getParams=function(){return this.params_};ol.source.TileArcGISRest.prototype.getRequestUrl_=function(tileCoord,tileSize,tileExtent,pixelRatio,projection,params){var urls=this.urls_;if(goog.array.isEmpty(urls)){return undefined}var srid=projection.getCode().split(":").pop();params.SIZE=tileSize[0]+","+tileSize[1];params.BBOX=tileExtent.join(",");params.BBOXSR=srid;params.IMAGESR=srid;params.DPI=Math.round(90*pixelRatio);var url;if(urls.length==1){url=urls[0]}else{var index=goog.math.modulo(ol.tilecoord.hash(tileCoord),urls.length);url=urls[index]}if(!goog.string.endsWith(url,"/")){url=url+"/"}if(goog.string.endsWith(url,"MapServer/")){url=url+"export"}else{if(goog.string.endsWith(url,"ImageServer/")){url=url+"exportImage"}else{goog.asserts.fail("Unknown Rest Service",url)}}return goog.uri.utils.appendParamsFromMap(url,params)};ol.source.TileArcGISRest.prototype.getTilePixelSize=function(z,pixelRatio,projection){var tileSize=goog.base(this,"getTilePixelSize",z,pixelRatio,projection);if(pixelRatio==1){return tileSize}else{return ol.size.scale(tileSize,pixelRatio,this.tmpSize)}};ol.source.TileArcGISRest.prototype.getUrls=function(){return this.urls_};ol.source.TileArcGISRest.prototype.setUrl=function(url){var urls=goog.isDef(url)?ol.TileUrlFunction.expandUrl(url):null;this.setUrls(urls)};ol.source.TileArcGISRest.prototype.setUrls=function(urls){this.urls_=goog.isDefAndNotNull(urls)?urls:[];this.changed()};ol.source.TileArcGISRest.prototype.tileUrlFunction_=function(tileCoord,pixelRatio,projection){var tileGrid=this.getTileGrid();if(goog.isNull(tileGrid)){tileGrid=this.getTileGridForProjection(projection)}if(tileGrid.getResolutions().length<=tileCoord[0]){return undefined}var tileExtent=tileGrid.getTileCoordExtent(tileCoord,this.tmpExtent_);var tileSize=ol.size.toSize(tileGrid.getTileSize(tileCoord[0]),this.tmpSize);if(pixelRatio!=1){tileSize=ol.size.scale(tileSize,pixelRatio,this.tmpSize)}var baseParams={F:"image",FORMAT:"PNG32",TRANSPARENT:true};goog.object.extend(baseParams,this.params_);return this.getRequestUrl_(tileCoord,tileSize,tileExtent,pixelRatio,projection,baseParams)};ol.source.TileArcGISRest.prototype.updateParams=function(params){goog.object.extend(this.params_,params);this.changed()};goog.provide("ol.source.TileDebug");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.size");goog.require("ol.source.Tile");goog.require("ol.tilecoord");ol.DebugTile_=function(tileCoord,tileSize,text){goog.base(this,tileCoord,ol.TileState.LOADED);this.tileSize_=tileSize;this.text_=text;this.canvasByContext_={}};goog.inherits(ol.DebugTile_,ol.Tile);ol.DebugTile_.prototype.getImage=function(opt_context){var key=goog.isDef(opt_context)?goog.getUid(opt_context):-1;if(key in this.canvasByContext_){return this.canvasByContext_[key]}else{var tileSize=this.tileSize_;var context=ol.dom.createCanvasContext2D(tileSize[0],tileSize[1]);context.strokeStyle="black";context.strokeRect(0.5,0.5,tileSize[0]+0.5,tileSize[1]+0.5);context.fillStyle="black";context.textAlign="center";context.textBaseline="middle";context.font="24px sans-serif";context.fillText(this.text_,tileSize[0]/2,tileSize[1]/2);this.canvasByContext_[key]=context.canvas;return context.canvas}};ol.source.TileDebug=function(options){goog.base(this,{opaque:false,projection:options.projection,tileGrid:options.tileGrid,wrapX:goog.isDef(options.wrapX)?options.wrapX:true})};goog.inherits(ol.source.TileDebug,ol.source.Tile);ol.source.TileDebug.prototype.getTile=function(z,x,y){var tileCoordKey=this.getKeyZXY(z,x,y);if(this.tileCache.containsKey(tileCoordKey)){return(this.tileCache.get(tileCoordKey))}else{var tileSize=ol.size.toSize(this.tileGrid.getTileSize(z));var tileCoord=[z,x,y];var textTileCoord=this.getTileCoordForTileUrlFunction(tileCoord);var text=goog.isNull(textTileCoord)?"":ol.tilecoord.toString(this.getTileCoordForTileUrlFunction(textTileCoord));var tile=new ol.DebugTile_(tileCoord,tileSize,text);this.tileCache.set(tileCoordKey,tile);return tile}};goog.provide("ol.source.TileJSON");goog.provide("ol.tilejson");goog.require("goog.asserts");goog.require("goog.net.Jsonp");goog.require("ol.Attribution");goog.require("ol.TileRange");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.TileImage");ol.source.TileJSON=function(options){goog.base(this,{attributions:options.attributions,crossOrigin:options.crossOrigin,projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING,tileLoadFunction:options.tileLoadFunction,wrapX:goog.isDef(options.wrapX)?options.wrapX:true});var request=new goog.net.Jsonp(options.url);request.send(undefined,goog.bind(this.handleTileJSONResponse,this),goog.bind(this.handleTileJSONError,this))};goog.inherits(ol.source.TileJSON,ol.source.TileImage);ol.source.TileJSON.prototype.handleTileJSONResponse=function(tileJSON){var epsg4326Projection=ol.proj.get("EPSG:4326");var sourceProjection=this.getProjection();var extent;if(goog.isDef(tileJSON.bounds)){var transform=ol.proj.getTransformFromProjections(epsg4326Projection,sourceProjection);extent=ol.extent.applyTransform(tileJSON.bounds,transform)}if(goog.isDef(tileJSON.scheme)){goog.asserts.assert(tileJSON.scheme=="xyz",'tileJSON-scheme is "xyz"')}var minZoom=tileJSON.minzoom||0;var maxZoom=tileJSON.maxzoom||22;var tileGrid=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(sourceProjection),maxZoom:maxZoom,minZoom:minZoom});this.tileGrid=tileGrid;this.tileUrlFunction=ol.TileUrlFunction.createFromTemplates(tileJSON.tiles);if(goog.isDef(tileJSON.attribution)&&goog.isNull(this.getAttributions())){var attributionExtent=goog.isDef(extent)?extent:epsg4326Projection.getExtent();var tileRanges={};var z,zKey;for(z=minZoom;z<=maxZoom;++z){zKey=z.toString();tileRanges[zKey]=[tileGrid.getTileRangeForExtentAndZ(attributionExtent,z)]}this.setAttributions([new ol.Attribution({html:tileJSON.attribution,tileRanges:tileRanges})])}this.setState(ol.source.State.READY)};ol.source.TileJSON.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)};goog.provide("ol.source.TileUTFGrid");goog.require("goog.asserts");goog.require("goog.async.nextTick");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.net.Jsonp");goog.require("ol.Attribution");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.Tile");ol.source.TileUTFGrid=function(options){goog.base(this,{projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING});this.preemptive_=goog.isDef(options.preemptive)?options.preemptive:true;this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction;this.template_=undefined;var request=new goog.net.Jsonp(options.url);request.send(undefined,goog.bind(this.handleTileJSONResponse,this))};goog.inherits(ol.source.TileUTFGrid,ol.source.Tile);ol.source.TileUTFGrid.prototype.getTemplate=function(){return this.template_};ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution=function(coordinate,resolution,callback,opt_this,opt_request){if(!goog.isNull(this.tileGrid)){var tileCoord=this.tileGrid.getTileCoordForCoordAndResolution(coordinate,resolution);var tile=(this.getTile(tileCoord[0],tileCoord[1],tileCoord[2],1,this.getProjection()));tile.forDataAtCoordinate(coordinate,callback,opt_this,opt_request)}else{if(opt_request===true){goog.async.nextTick(function(){callback.call(opt_this,null)})}else{callback.call(opt_this,null)}}};ol.source.TileUTFGrid.prototype.handleTileJSONResponse=function(tileJSON){var epsg4326Projection=ol.proj.get("EPSG:4326");var sourceProjection=this.getProjection();var extent;if(goog.isDef(tileJSON.bounds)){var transform=ol.proj.getTransformFromProjections(epsg4326Projection,sourceProjection);extent=ol.extent.applyTransform(tileJSON.bounds,transform)}if(goog.isDef(tileJSON.scheme)){goog.asserts.assert(tileJSON.scheme=="xyz",'tileJSON-scheme is "xyz"')}var minZoom=tileJSON.minzoom||0;var maxZoom=tileJSON.maxzoom||22;var tileGrid=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(sourceProjection),maxZoom:maxZoom,minZoom:minZoom});this.tileGrid=tileGrid;this.template_=tileJSON.template;var grids=tileJSON.grids;if(!goog.isDefAndNotNull(grids)){this.setState(ol.source.State.ERROR);return}this.tileUrlFunction_=ol.TileUrlFunction.createFromTemplates(grids);if(goog.isDef(tileJSON.attribution)){var attributionExtent=goog.isDef(extent)?extent:epsg4326Projection.getExtent();var tileRanges={};var z,zKey;for(z=minZoom;z<=maxZoom;++z){zKey=z.toString();tileRanges[zKey]=[tileGrid.getTileRangeForExtentAndZ(attributionExtent,z)]}this.setAttributions([new ol.Attribution({html:tileJSON.attribution,tileRanges:tileRanges})])}this.setState(ol.source.State.READY)};ol.source.TileUTFGrid.prototype.getTile=function(z,x,y,pixelRatio,projection){var tileCoordKey=this.getKeyZXY(z,x,y);if(this.tileCache.containsKey(tileCoordKey)){return(this.tileCache.get(tileCoordKey))}else{goog.asserts.assert(projection,"argument projection is truthy");var tileCoord=[z,x,y];var urlTileCoord=this.getTileCoordForTileUrlFunction(tileCoord,projection);var tileUrl=this.tileUrlFunction_(urlTileCoord,pixelRatio,projection);var tile=new ol.source.TileUTFGridTile_(tileCoord,goog.isDef(tileUrl)?ol.TileState.IDLE:ol.TileState.EMPTY,goog.isDef(tileUrl)?tileUrl:"",this.tileGrid.getTileCoordExtent(tileCoord),this.preemptive_);this.tileCache.set(tileCoordKey,tile);return tile}};ol.source.TileUTFGrid.prototype.useTile=function(z,x,y){var tileCoordKey=this.getKeyZXY(z,x,y);if(this.tileCache.containsKey(tileCoordKey)){this.tileCache.get(tileCoordKey)}};ol.source.TileUTFGridTile_=function(tileCoord,state,src,extent,preemptive){goog.base(this,tileCoord,state);this.src_=src;this.extent_=extent;this.preemptive_=preemptive;this.grid_=null;this.keys_=null;this.data_=null};goog.inherits(ol.source.TileUTFGridTile_,ol.Tile);ol.source.TileUTFGridTile_.prototype.getImage=function(opt_context){return null};ol.source.TileUTFGridTile_.prototype.getData=function(coordinate){if(goog.isNull(this.grid_)||goog.isNull(this.keys_)||!goog.isDefAndNotNull(this.data_)){return null}var xRelative=(coordinate[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]);var yRelative=(coordinate[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]);var row=this.grid_[Math.floor((1-yRelative)*this.grid_.length)];if(!goog.isString(row)){return null}var code=row.charCodeAt(Math.floor(xRelative*row.length));if(code>=93){code--}if(code>=35){code--}code-=32;var key=this.keys_[code];return goog.isDefAndNotNull(key)?this.data_[key]:null};ol.source.TileUTFGridTile_.prototype.forDataAtCoordinate=function(coordinate,callback,opt_this,opt_request){if(this.state==ol.TileState.IDLE&&opt_request===true){goog.events.listenOnce(this,goog.events.EventType.CHANGE,function(e){callback.call(opt_this,this.getData(coordinate))},false,this);this.loadInternal_()}else{if(opt_request===true){goog.async.nextTick(function(){callback.call(opt_this,this.getData(coordinate))},this)}else{callback.call(opt_this,this.getData(coordinate))}}};ol.source.TileUTFGridTile_.prototype.getKey=function(){return this.src_};ol.source.TileUTFGridTile_.prototype.handleError_=function(){this.state=ol.TileState.ERROR;this.changed()};ol.source.TileUTFGridTile_.prototype.handleLoad_=function(json){this.grid_=json.grid;this.keys_=json.keys;this.data_=json.data;this.state=ol.TileState.EMPTY;this.changed()};ol.source.TileUTFGridTile_.prototype.loadInternal_=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;var request=new goog.net.Jsonp(this.src_);request.send(undefined,goog.bind(this.handleLoad_,this),goog.bind(this.handleError_,this))}};ol.source.TileUTFGridTile_.prototype.load=function(){if(this.preemptive_){this.loadInternal_()}};goog.provide("ol.source.TileVector");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.TileUrlFunction");goog.require("ol.featureloader");goog.require("ol.source.State");goog.require("ol.source.Vector");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");ol.source.TileVector=function(options){goog.base(this,{attributions:options.attributions,logo:options.logo,projection:undefined,state:ol.source.State.READY,wrapX:options.wrapX});this.format_=goog.isDef(options.format)?options.format:null;this.tileGrid_=options.tileGrid;this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction;this.tileLoadFunction_=goog.isDef(options.tileLoadFunction)?options.tileLoadFunction:null;goog.asserts.assert(!goog.isNull(this.format_)||!goog.isNull(this.tileLoadFunction_),"Either format or tileLoadFunction are required");this.tiles_={};if(goog.isDef(options.tileUrlFunction)){this.setTileUrlFunction(options.tileUrlFunction)}else{if(goog.isDef(options.urls)){this.setUrls(options.urls)}else{if(goog.isDef(options.url)){this.setUrl(options.url)}}}};goog.inherits(ol.source.TileVector,ol.source.Vector);ol.source.TileVector.prototype.addFeature=goog.abstractMethod;ol.source.TileVector.prototype.addFeatures=goog.abstractMethod;ol.source.TileVector.prototype.clear=function(){goog.object.clear(this.tiles_)};ol.source.TileVector.prototype.forEachFeature=goog.abstractMethod;ol.source.TileVector.prototype.forEachFeatureAtCoordinateAndResolution=function(coordinate,resolution,callback,opt_this){var tileGrid=this.tileGrid_;var tiles=this.tiles_;var tileCoord=tileGrid.getTileCoordForCoordAndResolution(coordinate,resolution);var tileKey=this.getTileKeyZXY_(tileCoord[0],tileCoord[1],tileCoord[2]);var features=tiles[tileKey];if(goog.isDef(features)){var i,ii;for(i=0,ii=features.length;i<ii;++i){var feature=features[i];var geometry=feature.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(geometry),"feature geometry is defined and not null");if(geometry.containsCoordinate(coordinate)){var result=callback.call(opt_this,feature);if(result){return result}}}}return undefined};ol.source.TileVector.prototype.forEachFeatureInExtent=goog.abstractMethod;ol.source.TileVector.prototype.forEachFeatureInExtentAtResolution=function(extent,resolution,f,opt_this){var tileGrid=this.tileGrid_;var tiles=this.tiles_;var z=tileGrid.getZForResolution(resolution);var tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z);var x,y;for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){var tileKey=this.getTileKeyZXY_(z,x,y);var features=tiles[tileKey];if(goog.isDef(features)){var i,ii;for(i=0,ii=features.length;i<ii;++i){var result=f.call(opt_this,features[i]);if(result){return result}}}}}return undefined};ol.source.TileVector.prototype.getClosestFeatureToCoordinate=goog.abstractMethod;ol.source.TileVector.prototype.getExtent=goog.abstractMethod;ol.source.TileVector.prototype.getFeatures=function(){var tiles=this.tiles_;var features=[];var tileKey;for(tileKey in tiles){goog.array.extend(features,tiles[tileKey])}return features};ol.source.TileVector.prototype.getFeaturesAtCoordinateAndResolution=function(coordinate,resolution){var features=[];this.forEachFeatureAtCoordinateAndResolution(coordinate,resolution,function(feature){features.push(feature)});return features};ol.source.TileVector.prototype.getFeaturesInExtent=goog.abstractMethod;ol.source.TileVector.prototype.getTileCoordForTileUrlFunction=function(tileCoord,projection){var tileGrid=this.tileGrid_;goog.asserts.assert(!goog.isNull(tileGrid),"tile grid needed");if(this.getWrapX()&&projection.isGlobal()){tileCoord=ol.tilecoord.wrapX(tileCoord,tileGrid,projection)}return ol.tilecoord.withinExtentAndZ(tileCoord,tileGrid)?tileCoord:null};ol.source.TileVector.prototype.getTileKeyZXY_=function(z,x,y){return z+"/"+x+"/"+y};ol.source.TileVector.prototype.loadFeatures=function(extent,resolution,projection){var tileGrid=this.tileGrid_;var tileUrlFunction=this.tileUrlFunction_;var tiles=this.tiles_;var z=tileGrid.getZForResolution(resolution);var tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z);var tileCoord=[z,0,0];var x,y;function success(tileKey,features){tiles[tileKey]=features;this.changed()}for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){var tileKey=this.getTileKeyZXY_(z,x,y);if(!(tileKey in tiles)){tileCoord[1]=x;tileCoord[2]=y;var urlTileCoord=this.getTileCoordForTileUrlFunction(tileCoord,projection);var url=goog.isNull(urlTileCoord)?undefined:tileUrlFunction(urlTileCoord,1,projection);if(goog.isDef(url)){tiles[tileKey]=[];var tileSuccess=goog.partial(success,tileKey);if(!goog.isNull(this.tileLoadFunction_)){this.tileLoadFunction_(url,goog.bind(tileSuccess,this))}else{var loader=ol.featureloader.loadFeaturesXhr(url,(this.format_),tileSuccess);loader.call(this,extent,resolution,projection)}}}}}};ol.source.TileVector.prototype.removeFeature=goog.abstractMethod;ol.source.TileVector.prototype.setTileUrlFunction=function(tileUrlFunction){this.tileUrlFunction_=tileUrlFunction;this.changed()};ol.source.TileVector.prototype.setUrl=function(url){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(ol.TileUrlFunction.expandUrl(url)))};ol.source.TileVector.prototype.setUrls=function(urls){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(urls))};goog.provide("ol.source.TileWMS");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.TileCoord");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.TileImage");goog.require("ol.source.wms");goog.require("ol.source.wms.ServerType");goog.require("ol.tilecoord");ol.source.TileWMS=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var params=goog.isDef(options.params)?options.params:{};var transparent=goog.object.get(params,"TRANSPARENT",true);goog.base(this,{attributions:options.attributions,crossOrigin:options.crossOrigin,logo:options.logo,opaque:!transparent,projection:options.projection,tileGrid:options.tileGrid,tileLoadFunction:options.tileLoadFunction,tileUrlFunction:goog.bind(this.tileUrlFunction_,this),wrapX:goog.isDef(options.wrapX)?options.wrapX:true});var urls=options.urls;if(!goog.isDef(urls)&&goog.isDef(options.url)){urls=ol.TileUrlFunction.expandUrl(options.url)}this.urls_=goog.isDefAndNotNull(urls)?urls:[];this.gutter_=goog.isDef(options.gutter)?options.gutter:0;this.params_=params;this.v13_=true;this.serverType_=(options.serverType);this.hidpi_=goog.isDef(options.hidpi)?options.hidpi:true;this.coordKeyPrefix_="";this.resetCoordKeyPrefix_();this.tmpExtent_=ol.extent.createEmpty();this.updateV13_()};goog.inherits(ol.source.TileWMS,ol.source.TileImage);ol.source.TileWMS.prototype.getGetFeatureInfoUrl=function(coordinate,resolution,projection,params){goog.asserts.assert(!("VERSION" in params),"key VERSION is not allowed in params");var projectionObj=ol.proj.get(projection);var tileGrid=this.getTileGrid();if(goog.isNull(tileGrid)){tileGrid=this.getTileGridForProjection(projectionObj)}var tileCoord=tileGrid.getTileCoordForCoordAndResolution(coordinate,resolution);if(tileGrid.getResolutions().length<=tileCoord[0]){return undefined}var tileResolution=tileGrid.getResolution(tileCoord[0]);var tileExtent=tileGrid.getTileCoordExtent(tileCoord,this.tmpExtent_);var tileSize=ol.size.toSize(tileGrid.getTileSize(tileCoord[0]),this.tmpSize);var gutter=this.gutter_;if(gutter!==0){tileSize=ol.size.buffer(tileSize,gutter,this.tmpSize);tileExtent=ol.extent.buffer(tileExtent,tileResolution*gutter,tileExtent)}var baseParams={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_.LAYERS};goog.object.extend(baseParams,this.params_,params);var x=Math.floor((coordinate[0]-tileExtent[0])/tileResolution);var y=Math.floor((tileExtent[3]-coordinate[1])/tileResolution);baseParams[this.v13_?"I":"X"]=x;baseParams[this.v13_?"J":"Y"]=y;return this.getRequestUrl_(tileCoord,tileSize,tileExtent,1,projectionObj,baseParams)};ol.source.TileWMS.prototype.getGutter=function(){return this.gutter_};ol.source.TileWMS.prototype.getKeyZXY=function(z,x,y){return this.coordKeyPrefix_+goog.base(this,"getKeyZXY",z,x,y)};ol.source.TileWMS.prototype.getParams=function(){return this.params_};ol.source.TileWMS.prototype.getRequestUrl_=function(tileCoord,tileSize,tileExtent,pixelRatio,projection,params){var urls=this.urls_;if(goog.array.isEmpty(urls)){return undefined}params.WIDTH=tileSize[0];params.HEIGHT=tileSize[1];params[this.v13_?"CRS":"SRS"]=projection.getCode();if(!("STYLES" in this.params_)){params.STYLES=new String("")}if(pixelRatio!=1){switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:var dpi=(90*pixelRatio+0.5)|0;if(goog.isDef(params.FORMAT_OPTIONS)){params.FORMAT_OPTIONS+=";dpi:"+dpi}else{params.FORMAT_OPTIONS="dpi:"+dpi}break;case ol.source.wms.ServerType.MAPSERVER:params.MAP_RESOLUTION=90*pixelRatio;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:params.DPI=90*pixelRatio;break;default:goog.asserts.fail("unknown serverType configured");break}}var axisOrientation=projection.getAxisOrientation();var bbox=tileExtent;if(this.v13_&&axisOrientation.substr(0,2)=="ne"){var tmp;tmp=tileExtent[0];bbox[0]=tileExtent[1];bbox[1]=tmp;tmp=tileExtent[2];bbox[2]=tileExtent[3];bbox[3]=tmp}params.BBOX=bbox.join(",");var url;if(urls.length==1){url=urls[0]}else{var index=goog.math.modulo(ol.tilecoord.hash(tileCoord),urls.length);url=urls[index]}return goog.uri.utils.appendParamsFromMap(url,params)};ol.source.TileWMS.prototype.getTilePixelSize=function(z,pixelRatio,projection){var tileSize=goog.base(this,"getTilePixelSize",z,pixelRatio,projection);if(pixelRatio==1||!this.hidpi_||!goog.isDef(this.serverType_)){return tileSize}else{return ol.size.scale(tileSize,pixelRatio,this.tmpSize)}};ol.source.TileWMS.prototype.getUrls=function(){return this.urls_};ol.source.TileWMS.prototype.resetCoordKeyPrefix_=function(){var i=0;var res=[];var j,jj;for(j=0,jj=this.urls_.length;j<jj;++j){res[i++]=this.urls_[j]}var key;for(key in this.params_){res[i++]=key+"-"+this.params_[key]}this.coordKeyPrefix_=res.join("#")};ol.source.TileWMS.prototype.setUrl=function(url){var urls=goog.isDef(url)?ol.TileUrlFunction.expandUrl(url):null;this.setUrls(urls)};ol.source.TileWMS.prototype.setUrls=function(urls){this.urls_=goog.isDefAndNotNull(urls)?urls:[];this.resetCoordKeyPrefix_();this.changed()};ol.source.TileWMS.prototype.tileUrlFunction_=function(tileCoord,pixelRatio,projection){var tileGrid=this.getTileGrid();if(goog.isNull(tileGrid)){tileGrid=this.getTileGridForProjection(projection)}if(tileGrid.getResolutions().length<=tileCoord[0]){return undefined}if(pixelRatio!=1&&(!this.hidpi_||!goog.isDef(this.serverType_))){pixelRatio=1}var tileResolution=tileGrid.getResolution(tileCoord[0]);var tileExtent=tileGrid.getTileCoordExtent(tileCoord,this.tmpExtent_);var tileSize=ol.size.toSize(tileGrid.getTileSize(tileCoord[0]),this.tmpSize);var gutter=this.gutter_;if(gutter!==0){tileSize=ol.size.buffer(tileSize,gutter,this.tmpSize);tileExtent=ol.extent.buffer(tileExtent,tileResolution*gutter,tileExtent)}if(pixelRatio!=1){tileSize=ol.size.scale(tileSize,pixelRatio,this.tmpSize)}var baseParams={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};goog.object.extend(baseParams,this.params_);return this.getRequestUrl_(tileCoord,tileSize,tileExtent,pixelRatio,projection,baseParams)};ol.source.TileWMS.prototype.updateParams=function(params){goog.object.extend(this.params_,params);this.resetCoordKeyPrefix_();this.updateV13_();this.changed()};ol.source.TileWMS.prototype.updateV13_=function(){var version=goog.object.get(this.params_,"VERSION",ol.DEFAULT_WMS_VERSION);this.v13_=goog.string.compareVersions(version,"1.3")>=0};goog.provide("ol.tilegrid.WMTS");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.proj");goog.require("ol.tilegrid.TileGrid");ol.tilegrid.WMTS=function(options){goog.asserts.assert(options.resolutions.length==options.matrixIds.length,"options resolutions and matrixIds must have equal length (%s == %s)",options.resolutions.length,options.matrixIds.length);this.matrixIds_=options.matrixIds;goog.base(this,{extent:options.extent,origin:options.origin,origins:options.origins,resolutions:options.resolutions,tileSize:options.tileSize,tileSizes:options.tileSizes,sizes:options.sizes})};goog.inherits(ol.tilegrid.WMTS,ol.tilegrid.TileGrid);ol.tilegrid.WMTS.prototype.getMatrixId=function(z){goog.asserts.assert(0<=z&&z<this.matrixIds_.length,"attempted to retrive matrixId for illegal z (%s)",z);return this.matrixIds_[z]};ol.tilegrid.WMTS.prototype.getMatrixIds=function(){return this.matrixIds_};ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet=function(matrixSet,opt_extent){var resolutions=[];var matrixIds=[];var origins=[];var tileSizes=[];var sizes=[];var supportedCRSPropName="SupportedCRS";var matrixIdsPropName="TileMatrix";var identifierPropName="Identifier";var scaleDenominatorPropName="ScaleDenominator";var topLeftCornerPropName="TopLeftCorner";var tileWidthPropName="TileWidth";var tileHeightPropName="TileHeight";var projection;projection=ol.proj.get(matrixSet[supportedCRSPropName].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var metersPerUnit=projection.getMetersPerUnit();var switchOriginXY=projection.getAxisOrientation().substr(0,2)=="ne";goog.array.sort(matrixSet[matrixIdsPropName],function(a,b){return b[scaleDenominatorPropName]-a[scaleDenominatorPropName]});goog.array.forEach(matrixSet[matrixIdsPropName],function(elt,index,array){matrixIds.push(elt[identifierPropName]);var resolution=elt[scaleDenominatorPropName]*0.00028/metersPerUnit;var tileWidth=elt[tileWidthPropName];var tileHeight=elt[tileHeightPropName];if(switchOriginXY){origins.push([elt[topLeftCornerPropName][1],elt[topLeftCornerPropName][0]])}else{origins.push(elt[topLeftCornerPropName])}resolutions.push(resolution);tileSizes.push(tileWidth==tileHeight?tileWidth:[tileWidth,tileHeight]);sizes.push([elt.MatrixWidth,-elt.MatrixHeight])});return new ol.tilegrid.WMTS({extent:opt_extent,origins:origins,resolutions:resolutions,matrixIds:matrixIds,tileSizes:tileSizes,sizes:sizes})};goog.provide("ol.source.WMTS");goog.provide("ol.source.WMTSRequestEncoding");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol.TileUrlFunction");goog.require("ol.TileUrlFunctionType");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.TileImage");goog.require("ol.tilegrid.WMTS");ol.source.WMTSRequestEncoding={KVP:"KVP",REST:"REST"};ol.source.WMTS=function(options){this.version_=goog.isDef(options.version)?options.version:"1.0.0";this.format_=goog.isDef(options.format)?options.format:"image/jpeg";this.dimensions_=goog.isDef(options.dimensions)?options.dimensions:{};this.coordKeyPrefix_="";this.resetCoordKeyPrefix_();this.layer_=options.layer;this.matrixSet_=options.matrixSet;this.style_=options.style;var urls=options.urls;if(!goog.isDef(urls)&&goog.isDef(options.url)){urls=ol.TileUrlFunction.expandUrl(options.url)}this.urls_=goog.isDefAndNotNull(urls)?urls:[];this.requestEncoding_=goog.isDef(options.requestEncoding)?(options.requestEncoding):ol.source.WMTSRequestEncoding.KVP;var requestEncoding=this.requestEncoding_;var tileGrid=options.tileGrid;var context={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};if(requestEncoding==ol.source.WMTSRequestEncoding.KVP){goog.object.extend(context,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_})}var dimensions=this.dimensions_;function createFromWMTSTemplate(template){template=(requestEncoding==ol.source.WMTSRequestEncoding.KVP)?goog.uri.utils.appendParamsFromMap(template,context):template.replace(/\{(\w+?)\}/g,function(m,p){return(p.toLowerCase() in context)?context[p.toLowerCase()]:m});return(function(tileCoord,pixelRatio,projection){if(goog.isNull(tileCoord)){return undefined}else{var localContext={TileMatrix:tileGrid.getMatrixId(tileCoord[0]),TileCol:tileCoord[1],TileRow:-tileCoord[2]-1};goog.object.extend(localContext,dimensions);var url=template;if(requestEncoding==ol.source.WMTSRequestEncoding.KVP){url=goog.uri.utils.appendParamsFromMap(url,localContext)}else{url=url.replace(/\{(\w+?)\}/g,function(m,p){return localContext[p]})}return url}})}var tileUrlFunction=this.urls_.length>0?ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(this.urls_,createFromWMTSTemplate)):ol.TileUrlFunction.nullTileUrlFunction;goog.base(this,{attributions:options.attributions,crossOrigin:options.crossOrigin,logo:options.logo,projection:options.projection,tileClass:options.tileClass,tileGrid:tileGrid,tileLoadFunction:options.tileLoadFunction,tilePixelRatio:options.tilePixelRatio,tileUrlFunction:tileUrlFunction,wrapX:goog.isDef(options.wrapX)?options.wrapX:false})};goog.inherits(ol.source.WMTS,ol.source.TileImage);ol.source.WMTS.prototype.getDimensions=function(){return this.dimensions_};ol.source.WMTS.prototype.getFormat=function(){return this.format_};ol.source.WMTS.prototype.getKeyZXY=function(z,x,y){return this.coordKeyPrefix_+goog.base(this,"getKeyZXY",z,x,y)};ol.source.WMTS.prototype.getLayer=function(){return this.layer_};ol.source.WMTS.prototype.getMatrixSet=function(){return this.matrixSet_};ol.source.WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_};ol.source.WMTS.prototype.getStyle=function(){return this.style_};ol.source.WMTS.prototype.getUrls=function(){return this.urls_};ol.source.WMTS.prototype.getVersion=function(){return this.version_};ol.source.WMTS.prototype.resetCoordKeyPrefix_=function(){var i=0;var res=[];for(var key in this.dimensions_){res[i++]=key+"-"+this.dimensions_[key]}this.coordKeyPrefix_=res.join("/")};ol.source.WMTS.prototype.updateDimensions=function(dimensions){goog.object.extend(this.dimensions_,dimensions);this.resetCoordKeyPrefix_();this.changed()};ol.source.WMTS.optionsFromCapabilities=function(wmtsCap,config){goog.asserts.assert(!goog.isNull(config.layer),'config "layer" must not be null');var layers=wmtsCap.Contents["Layer"];var l=goog.array.find(layers,function(elt,index,array){return elt.Identifier==config.layer});goog.asserts.assert(!goog.isNull(l),"found a matching layer in Contents/Layer");goog.asserts.assert(l.TileMatrixSetLink.length>0,"layer has TileMatrixSetLink");var tileMatrixSets=wmtsCap.Contents["TileMatrixSet"];var idx,matrixSet;if(l.TileMatrixSetLink.length>1){if(goog.isDef(config.projection)){idx=goog.array.findIndex(l.TileMatrixSetLink,function(elt,index,array){var tileMatrixSet=goog.array.find(tileMatrixSets,function(el){return el.Identifier==elt.TileMatrixSet});return tileMatrixSet.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==config.projection})}else{idx=goog.array.findIndex(l.TileMatrixSetLink,function(elt,index,array){return elt.TileMatrixSet==config.matrixSet})}}else{idx=0}if(idx<0){idx=0}matrixSet=(l.TileMatrixSetLink[idx]["TileMatrixSet"]);goog.asserts.assert(!goog.isNull(matrixSet),"TileMatrixSet must not be null");var format=(l.Format[0]);if(goog.isDef(config.format)){format=config.format}idx=goog.array.findIndex(l.Style,function(elt,index,array){if(goog.isDef(config.style)){return elt.Title==config.style}else{return elt.isDefault}});if(idx<0){idx=0}var style=(l.Style[idx]["Identifier"]);var dimensions={};if(goog.isDef(l.Dimension)){goog.array.forEach(l.Dimension,function(elt,index,array){var key=elt.Identifier;var value=elt["default"];if(goog.isDef(value)){goog.asserts.assert(goog.array.contains(elt.values,value),"default value contained in values")}else{value=elt.values[0]}goog.asserts.assert(goog.isDef(value),"value could be found");dimensions[key]=value})}var matrixSets=wmtsCap.Contents["TileMatrixSet"];var matrixSetObj=goog.array.find(matrixSets,function(elt,index,array){return elt.Identifier==matrixSet});goog.asserts.assert(!goog.isNull(matrixSetObj),"found matrixSet in Contents/TileMatrixSet");var projection;if(goog.isDef(config.projection)){projection=ol.proj.get(config.projection)}else{projection=ol.proj.get(matrixSetObj.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))}var wgs84BoundingBox=l.WGS84BoundingBox;var extent,wrapX;if(goog.isDef(wgs84BoundingBox)){var wgs84ProjectionExtent=ol.proj.get("EPSG:4326").getExtent();wrapX=(wgs84BoundingBox[0]==wgs84ProjectionExtent[0]&&wgs84BoundingBox[2]==wgs84ProjectionExtent[2]);extent=ol.proj.transformExtent(wgs84BoundingBox,"EPSG:4326",projection);var projectionExtent=projection.getExtent();if(!goog.isNull(projectionExtent)){if(!ol.extent.containsExtent(projectionExtent,extent)){extent=undefined}}}var tileGrid=ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet(matrixSetObj,extent);var urls=[];var requestEncoding=config.requestEncoding;requestEncoding=goog.isDef(requestEncoding)?requestEncoding:"";goog.asserts.assert(goog.array.contains(["REST","RESTful","KVP",""],requestEncoding),'requestEncoding (%s) is one of "REST", "RESTful", "KVP" or ""',requestEncoding);if(!wmtsCap.hasOwnProperty("OperationsMetadata")||!wmtsCap.OperationsMetadata.hasOwnProperty("GetTile")||goog.string.startsWith(requestEncoding,"REST")){requestEncoding=ol.source.WMTSRequestEncoding.REST;goog.array.forEach(l.ResourceURL,function(elt,index,array){if(elt.resourceType=="tile"){format=elt.format;urls.push((elt.template))}})}else{var gets=wmtsCap.OperationsMetadata["GetTile"]["DCP"]["HTTP"]["Get"];for(var i=0,ii=gets.length;i<ii;++i){var constraint=goog.array.find(gets[i]["Constraint"],function(elt,index,array){return elt.name=="GetEncoding"});var encodings=constraint.AllowedValues["Value"];if(encodings.length>0&&goog.array.contains(encodings,"KVP")){requestEncoding=ol.source.WMTSRequestEncoding.KVP;urls.push((gets[i]["href"]))}}}goog.asserts.assert(urls.length>0,"At least one URL found");return{urls:urls,layer:config.layer,matrixSet:matrixSet,format:format,projection:projection,requestEncoding:requestEncoding,tileGrid:tileGrid,style:style,dimensions:dimensions,wrapX:wrapX}};goog.provide("ol.source.Zoomify");goog.require("goog.asserts");goog.require("ol");goog.require("ol.ImageTile");goog.require("ol.TileCoord");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.TileImage");goog.require("ol.tilegrid.TileGrid");ol.source.ZoomifyTierSizeCalculation={DEFAULT:"default",TRUNCATED:"truncated"};ol.source.Zoomify=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};var size=options.size;var tierSizeCalculation=goog.isDef(options.tierSizeCalculation)?options.tierSizeCalculation:ol.source.ZoomifyTierSizeCalculation.DEFAULT;var imageWidth=size[0];var imageHeight=size[1];var tierSizeInTiles=[];var tileSize=ol.DEFAULT_TILE_SIZE;switch(tierSizeCalculation){case ol.source.ZoomifyTierSizeCalculation.DEFAULT:while(imageWidth>tileSize||imageHeight>tileSize){tierSizeInTiles.push([Math.ceil(imageWidth/tileSize),Math.ceil(imageHeight/tileSize)]);tileSize+=tileSize}break;case ol.source.ZoomifyTierSizeCalculation.TRUNCATED:var width=imageWidth;var height=imageHeight;while(width>tileSize||height>tileSize){tierSizeInTiles.push([Math.ceil(width/tileSize),Math.ceil(height/tileSize)]);width>>=1;height>>=1}break;default:goog.asserts.fail();break}tierSizeInTiles.push([1,1]);tierSizeInTiles.reverse();var resolutions=[1];var tileCountUpToTier=[0];var i,ii;for(i=1,ii=tierSizeInTiles.length;i<ii;i++){resolutions.push(1<<i);tileCountUpToTier.push(tierSizeInTiles[i-1][0]*tierSizeInTiles[i-1][1]+tileCountUpToTier[i-1])}resolutions.reverse();var extent=[0,-size[1],size[0],0];var tileGrid=new ol.tilegrid.TileGrid({extent:extent,origin:ol.extent.getTopLeft(extent),resolutions:resolutions});var url=options.url;function tileUrlFunction(tileCoord,pixelRatio,projection){if(goog.isNull(tileCoord)){return undefined}else{var tileCoordZ=tileCoord[0];var tileCoordX=tileCoord[1];var tileCoordY=-tileCoord[2]-1;var tileIndex=tileCoordX+tileCoordY*tierSizeInTiles[tileCoordZ][0]+tileCountUpToTier[tileCoordZ];var tileGroup=(tileIndex/ol.DEFAULT_TILE_SIZE)|0;return url+"TileGroup"+tileGroup+"/"+tileCoordZ+"-"+tileCoordX+"-"+tileCoordY+".jpg"}}goog.base(this,{attributions:options.attributions,crossOrigin:options.crossOrigin,logo:options.logo,tileClass:ol.source.ZoomifyTile_,tileGrid:tileGrid,tileUrlFunction:tileUrlFunction})};goog.inherits(ol.source.Zoomify,ol.source.TileImage);ol.source.ZoomifyTile_=function(tileCoord,state,src,crossOrigin,tileLoadFunction){goog.base(this,tileCoord,state,src,crossOrigin,tileLoadFunction);this.zoomifyImageByContext_={}};goog.inherits(ol.source.ZoomifyTile_,ol.ImageTile);ol.source.ZoomifyTile_.prototype.getImage=function(opt_context){var tileSize=ol.DEFAULT_TILE_SIZE;var key=goog.isDef(opt_context)?goog.getUid(opt_context).toString():"";if(key in this.zoomifyImageByContext_){return this.zoomifyImageByContext_[key]}else{var image=goog.base(this,"getImage",opt_context);if(this.state==ol.TileState.LOADED){if(image.width==tileSize&&image.height==tileSize){this.zoomifyImageByContext_[key]=image;return image}else{var context=ol.dom.createCanvasContext2D(tileSize,tileSize);context.drawImage(image,0,0);this.zoomifyImageByContext_[key]=context.canvas;return context.canvas}}else{return image}}};goog.provide("ol.style.Atlas");goog.provide("ol.style.AtlasManager");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("goog.object");goog.require("ol");ol.style.AtlasManagerInfo;ol.style.AtlasManager=function(opt_options){var options=goog.isDef(opt_options)?opt_options:{};this.currentSize_=goog.isDef(options.initialSize)?options.initialSize:ol.INITIAL_ATLAS_SIZE;this.maxSize_=goog.isDef(options.maxSize)?options.maxSize:ol.MAX_ATLAS_SIZE!=-1?ol.MAX_ATLAS_SIZE:goog.isDef(ol.WEBGL_MAX_TEXTURE_SIZE)?ol.WEBGL_MAX_TEXTURE_SIZE:2048;this.space_=goog.isDef(options.space)?options.space:1;this.atlases_=[new ol.style.Atlas(this.currentSize_,this.space_)];this.currentHitSize_=this.currentSize_;this.hitAtlases_=[new ol.style.Atlas(this.currentHitSize_,this.space_)]};ol.style.AtlasManager.prototype.getInfo=function(id){var info=this.getInfo_(this.atlases_,id);if(goog.isNull(info)){return null}var hitInfo=this.getInfo_(this.hitAtlases_,id);goog.asserts.assert(!goog.isNull(hitInfo),"hitInfo must not be null");return this.mergeInfos_(info,hitInfo)};ol.style.AtlasManager.prototype.getInfo_=function(atlases,id){var atlas,info,i,ii;for(i=0,ii=atlases.length;i<ii;++i){atlas=atlases[i];info=atlas.get(id);if(!goog.isNull(info)){return info}}return null};ol.style.AtlasManager.prototype.mergeInfos_=function(info,hitInfo){goog.asserts.assert(info.offsetX===hitInfo.offsetX,"in order to merge, offsetX of info and hitInfo must be equal");goog.asserts.assert(info.offsetY===hitInfo.offsetY,"in order to merge, offsetY of info and hitInfo must be equal");return({offsetX:info.offsetX,offsetY:info.offsetY,image:info.image,hitImage:hitInfo.image})};ol.style.AtlasManager.prototype.add=function(id,width,height,renderCallback,opt_renderHitCallback,opt_this){if(width+this.space_>this.maxSize_||height+this.space_>this.maxSize_){return null}var info=this.add_(false,id,width,height,renderCallback,opt_this);if(goog.isNull(info)){return null}var renderHitCallback=goog.isDef(opt_renderHitCallback)?opt_renderHitCallback:goog.functions.NULL;var hitInfo=this.add_(true,id,width,height,renderHitCallback,opt_this);goog.asserts.assert(!goog.isNull(hitInfo),"hitInfo must not be null");return this.mergeInfos_(info,hitInfo)};ol.style.AtlasManager.prototype.add_=function(isHitAtlas,id,width,height,renderCallback,opt_this){var atlases=(isHitAtlas)?this.hitAtlases_:this.atlases_;var atlas,info,i,ii;for(i=0,ii=atlases.length;i<ii;++i){atlas=atlases[i];info=atlas.add(id,width,height,renderCallback,opt_this);if(!goog.isNull(info)){return info}else{if(goog.isNull(info)&&i===ii-1){var size;if(isHitAtlas){size=Math.min(this.currentHitSize_*2,this.maxSize_);this.currentHitSize_=size}else{size=Math.min(this.currentSize_*2,this.maxSize_);this.currentSize_=size}atlas=new ol.style.Atlas(size,this.space_);atlases.push(atlas);++ii}}}goog.asserts.fail("Failed to add to atlasmanager")};ol.style.AtlasInfo;ol.style.Atlas=function(size,space){this.space_=space;this.emptyBlocks_=[{x:0,y:0,width:size,height:size}];this.entries_={};this.canvas_=(goog.dom.createElement(goog.dom.TagName.CANVAS));this.canvas_.width=size;this.canvas_.height=size;this.context_=(this.canvas_.getContext("2d"))};ol.style.Atlas.prototype.get=function(id){return(goog.object.get(this.entries_,id,null))};ol.style.Atlas.prototype.add=function(id,width,height,renderCallback,opt_this){var block,i,ii;for(i=0,ii=this.emptyBlocks_.length;i<ii;++i){block=this.emptyBlocks_[i];if(block.width>=width+this.space_&&block.height>=height+this.space_){var entry={offsetX:block.x+this.space_,offsetY:block.y+this.space_,image:this.canvas_};this.entries_[id]=entry;renderCallback.call(opt_this,this.context_,block.x+this.space_,block.y+this.space_);this.split_(i,block,width+this.space_,height+this.space_);return entry}}return null};ol.style.Atlas.prototype.split_=function(index,block,width,height){var deltaWidth=block.width-width;var deltaHeight=block.height-height;var newBlock1;var newBlock2;if(deltaWidth>deltaHeight){newBlock1={x:block.x+width,y:block.y,width:block.width-width,height:block.height};newBlock2={x:block.x,y:block.y+height,width:width,height:block.height-height};this.updateBlocks_(index,newBlock1,newBlock2)}else{newBlock1={x:block.x+width,y:block.y,width:block.width-width,height:height};newBlock2={x:block.x,y:block.y+height,width:block.width,height:block.height-height};this.updateBlocks_(index,newBlock1,newBlock2)}};ol.style.Atlas.prototype.updateBlocks_=function(index,newBlock1,newBlock2){var args=[index,1];if(newBlock1.width>0&&newBlock1.height>0){args.push(newBlock1)}if(newBlock2.width>0&&newBlock2.height>0){args.push(newBlock2)}this.emptyBlocks_.splice.apply(this.emptyBlocks_,args)};ol.style.Atlas.Block;goog.provide("ol.style.RegularShape");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("ol.color");goog.require("ol.has");goog.require("ol.render.canvas");goog.require("ol.structs.IHasChecksum");goog.require("ol.style.AtlasManager");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.Stroke");ol.style.RegularShape=function(options){goog.asserts.assert(goog.isDef(options.radius)||goog.isDef(options.radius1),'must provide either "radius" or "radius1"');this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=goog.isDef(options.fill)?options.fill:null;this.origin_=[0,0];this.points_=options.points;this.radius_=(goog.isDef(options.radius)?options.radius:options.radius1);this.radius2_=goog.isDef(options.radius2)?options.radius2:this.radius_;this.angle_=goog.isDef(options.angle)?options.angle:0;this.stroke_=goog.isDef(options.stroke)?options.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.render_(options.atlasManager);var snapToPixel=goog.isDef(options.snapToPixel)?options.snapToPixel:true;goog.base(this,{opacity:1,rotateWithView:false,rotation:goog.isDef(options.rotation)?options.rotation:0,scale:1,snapToPixel:snapToPixel})};goog.inherits(ol.style.RegularShape,ol.style.Image);ol.style.RegularShape.prototype.getAnchor=function(){return this.anchor_};ol.style.RegularShape.prototype.getAngle=function(){return this.angle_};ol.style.RegularShape.prototype.getFill=function(){return this.fill_};ol.style.RegularShape.prototype.getHitDetectionImage=function(pixelRatio){return this.hitDetectionCanvas_};ol.style.RegularShape.prototype.getImage=function(pixelRatio){return this.canvas_};ol.style.RegularShape.prototype.getImageSize=function(){return this.imageSize_};ol.style.RegularShape.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.RegularShape.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.RegularShape.prototype.getOrigin=function(){return this.origin_};ol.style.RegularShape.prototype.getPoints=function(){return this.points_};ol.style.RegularShape.prototype.getRadius=function(){return this.radius_};ol.style.RegularShape.prototype.getRadius2=function(){return this.radius2_};ol.style.RegularShape.prototype.getSize=function(){return this.size_};ol.style.RegularShape.prototype.getStroke=function(){return this.stroke_};ol.style.RegularShape.prototype.listenImageChange=goog.nullFunction;ol.style.RegularShape.prototype.load=goog.nullFunction;ol.style.RegularShape.prototype.unlistenImageChange=goog.nullFunction;ol.style.RegularShape.RenderOptions;ol.style.RegularShape.prototype.render_=function(atlasManager){var imageSize;var lineCap="";var lineJoin="";var miterLimit=0;var lineDash=null;var strokeStyle;var strokeWidth=0;if(!goog.isNull(this.stroke_)){strokeStyle=ol.color.asString(this.stroke_.getColor());strokeWidth=this.stroke_.getWidth();if(!goog.isDef(strokeWidth)){strokeWidth=ol.render.canvas.defaultLineWidth}lineDash=this.stroke_.getLineDash();if(!ol.has.CANVAS_LINE_DASH){lineDash=null}lineJoin=this.stroke_.getLineJoin();if(!goog.isDef(lineJoin)){lineJoin=ol.render.canvas.defaultLineJoin}lineCap=this.stroke_.getLineCap();if(!goog.isDef(lineCap)){lineCap=ol.render.canvas.defaultLineCap}miterLimit=this.stroke_.getMiterLimit();if(!goog.isDef(miterLimit)){miterLimit=ol.render.canvas.defaultMiterLimit}}var size=2*(this.radius_+strokeWidth)+1;var renderOptions={strokeStyle:strokeStyle,strokeWidth:strokeWidth,size:size,lineCap:lineCap,lineDash:lineDash,lineJoin:lineJoin,miterLimit:miterLimit};if(!goog.isDef(atlasManager)){this.canvas_=(goog.dom.createElement(goog.dom.TagName.CANVAS));this.canvas_.height=size;this.canvas_.width=size;size=this.canvas_.width;imageSize=size;var context=(this.canvas_.getContext("2d"));this.draw_(renderOptions,context,0,0);this.createHitDetectionCanvas_(renderOptions)}else{size=Math.round(size);var hasCustomHitDetectionImage=goog.isNull(this.fill_);var renderHitDetectionCallback;if(hasCustomHitDetectionImage){renderHitDetectionCallback=goog.bind(this.drawHitDetectionCanvas_,this,renderOptions)}var id=this.getChecksum();var info=atlasManager.add(id,size,size,goog.bind(this.draw_,this,renderOptions),renderHitDetectionCallback);goog.asserts.assert(!goog.isNull(info),"shape size is too large");this.canvas_=info.image;this.origin_=[info.offsetX,info.offsetY];imageSize=info.image.width;if(hasCustomHitDetectionImage){this.hitDetectionCanvas_=info.hitImage;this.hitDetectionImageSize_=[info.hitImage.width,info.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[imageSize,imageSize]}}this.anchor_=[size/2,size/2];this.size_=[size,size];this.imageSize_=[imageSize,imageSize]};ol.style.RegularShape.prototype.draw_=function(renderOptions,context,x,y){var i,angle0,radiusC;context.setTransform(1,0,0,1,0,0);context.translate(x,y);context.beginPath();if(this.radius2_!==this.radius_){this.points_=2*this.points_}for(i=0;i<=this.points_;i++){angle0=i*2*Math.PI/this.points_-Math.PI/2+this.angle_;radiusC=i%2===0?this.radius_:this.radius2_;context.lineTo(renderOptions.size/2+radiusC*Math.cos(angle0),renderOptions.size/2+radiusC*Math.sin(angle0))}if(!goog.isNull(this.fill_)){context.fillStyle=ol.color.asString(this.fill_.getColor());context.fill()}if(!goog.isNull(this.stroke_)){context.strokeStyle=renderOptions.strokeStyle;context.lineWidth=renderOptions.strokeWidth;if(!goog.isNull(renderOptions.lineDash)){context.setLineDash(renderOptions.lineDash)}context.lineCap=renderOptions.lineCap;context.lineJoin=renderOptions.lineJoin;context.miterLimit=renderOptions.miterLimit;context.stroke()}context.closePath()};ol.style.RegularShape.prototype.createHitDetectionCanvas_=function(renderOptions){this.hitDetectionImageSize_=[renderOptions.size,renderOptions.size];if(!goog.isNull(this.fill_)){this.hitDetectionCanvas_=this.canvas_;return}this.hitDetectionCanvas_=(goog.dom.createElement(goog.dom.TagName.CANVAS));var canvas=this.hitDetectionCanvas_;canvas.height=renderOptions.size;canvas.width=renderOptions.size;var context=(canvas.getContext("2d"));this.drawHitDetectionCanvas_(renderOptions,context,0,0)};ol.style.RegularShape.prototype.drawHitDetectionCanvas_=function(renderOptions,context,x,y){context.setTransform(1,0,0,1,0,0);context.translate(x,y);context.beginPath();if(this.radius2_!==this.radius_){this.points_=2*this.points_}var i,radiusC,angle0;for(i=0;i<=this.points_;i++){angle0=i*2*Math.PI/this.points_-Math.PI/2+this.angle_;radiusC=i%2===0?this.radius_:this.radius2_;context.lineTo(renderOptions.size/2+radiusC*Math.cos(angle0),renderOptions.size/2+radiusC*Math.sin(angle0))}context.fillStyle=ol.render.canvas.defaultFillStyle;context.fill();if(!goog.isNull(this.stroke_)){context.strokeStyle=renderOptions.strokeStyle;context.lineWidth=renderOptions.strokeWidth;if(!goog.isNull(renderOptions.lineDash)){context.setLineDash(renderOptions.lineDash)}context.stroke()}context.closePath()};ol.style.RegularShape.prototype.getChecksum=function(){var strokeChecksum=!goog.isNull(this.stroke_)?this.stroke_.getChecksum():"-";var fillChecksum=!goog.isNull(this.fill_)?this.fill_.getChecksum():"-";var recalculate=goog.isNull(this.checksums_)||(strokeChecksum!=this.checksums_[1]||fillChecksum!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]);if(recalculate){var checksum="r"+strokeChecksum+fillChecksum+(goog.isDef(this.radius_)?this.radius_.toString():"-")+(goog.isDef(this.radius2_)?this.radius2_.toString():"-")+(goog.isDef(this.angle_)?this.angle_.toString():"-")+(goog.isDef(this.points_)?this.points_.toString():"-");this.checksums_=[checksum,strokeChecksum,fillChecksum,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};goog.addDependency("demos/editor/equationeditor.js",["goog.demos.editor.EquationEditor"],["goog.ui.equation.EquationEditorDialog"]);goog.addDependency("demos/editor/helloworld.js",["goog.demos.editor.HelloWorld"],["goog.dom","goog.dom.TagName","goog.editor.Plugin"]);goog.addDependency("demos/editor/helloworlddialog.js",["goog.demos.editor.HelloWorldDialog","goog.demos.editor.HelloWorldDialog.OkEvent"],["goog.dom.TagName","goog.events.Event","goog.string","goog.ui.editor.AbstractDialog","goog.ui.editor.AbstractDialog.Builder","goog.ui.editor.AbstractDialog.EventType"]);goog.addDependency("demos/editor/helloworlddialogplugin.js",["goog.demos.editor.HelloWorldDialogPlugin","goog.demos.editor.HelloWorldDialogPlugin.Command"],["goog.demos.editor.HelloWorldDialog","goog.dom.TagName","goog.editor.plugins.AbstractDialogPlugin","goog.editor.range","goog.functions","goog.ui.editor.AbstractDialog.EventType"]);goog.require("ol");goog.require("ol.Attribution");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Color");goog.require("ol.Coordinate");goog.require("ol.CoordinateFormatType");goog.require("ol.DeviceOrientation");goog.require("ol.DeviceOrientationProperty");goog.require("ol.DragBoxEvent");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.FeatureLoader");goog.require("ol.FeatureStyleFunction");goog.require("ol.FeatureUrlFunction");goog.require("ol.Geolocation");goog.require("ol.GeolocationProperty");goog.require("ol.Graticule");goog.require("ol.Image");goog.require("ol.ImageTile");goog.require("ol.Kinetic");goog.require("ol.LoadingStrategy");goog.require("ol.Map");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserEventHandler");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.MapEvent");goog.require("ol.MapEventType");goog.require("ol.MapProperty");goog.require("ol.Object");goog.require("ol.ObjectEvent");goog.require("ol.ObjectEventType");goog.require("ol.Observable");goog.require("ol.Overlay");goog.require("ol.OverlayPositioning");goog.require("ol.OverlayProperty");goog.require("ol.Size");goog.require("ol.Sphere");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.View");goog.require("ol.ViewHint");goog.require("ol.ViewProperty");goog.require("ol.animation");goog.require("ol.color");goog.require("ol.control");goog.require("ol.control.Attribution");goog.require("ol.control.Control");goog.require("ol.control.FullScreen");goog.require("ol.control.MousePosition");goog.require("ol.control.OverviewMap");goog.require("ol.control.Rotate");goog.require("ol.control.ScaleLine");goog.require("ol.control.ScaleLineProperty");goog.require("ol.control.ScaleLineUnits");goog.require("ol.control.Zoom");goog.require("ol.control.ZoomSlider");goog.require("ol.control.ZoomToExtent");goog.require("ol.coordinate");goog.require("ol.easing");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.extent.Corner");goog.require("ol.extent.Relationship");goog.require("ol.featureloader");goog.require("ol.format.EsriJSON");goog.require("ol.format.Feature");goog.require("ol.format.GML");goog.require("ol.format.GML2");goog.require("ol.format.GML3");goog.require("ol.format.GMLBase");goog.require("ol.format.GPX");goog.require("ol.format.GeoJSON");goog.require("ol.format.IGC");goog.require("ol.format.IGCZ");goog.require("ol.format.KML");goog.require("ol.format.OSMXML");goog.require("ol.format.Polyline");goog.require("ol.format.TopoJSON");goog.require("ol.format.WFS");goog.require("ol.format.WKT");goog.require("ol.format.WMSCapabilities");goog.require("ol.format.WMSGetFeatureInfo");goog.require("ol.format.WMTSCapabilities");goog.require("ol.geom.Circle");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.has");goog.require("ol.interaction");goog.require("ol.interaction.DoubleClickZoom");goog.require("ol.interaction.DragAndDrop");goog.require("ol.interaction.DragAndDropEvent");goog.require("ol.interaction.DragBox");goog.require("ol.interaction.DragPan");goog.require("ol.interaction.DragRotate");goog.require("ol.interaction.DragRotateAndZoom");goog.require("ol.interaction.DragZoom");goog.require("ol.interaction.Draw");goog.require("ol.interaction.DrawEvent");goog.require("ol.interaction.DrawEventType");goog.require("ol.interaction.DrawGeometryFunctionType");goog.require("ol.interaction.DrawMode");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.InteractionProperty");goog.require("ol.interaction.KeyboardPan");goog.require("ol.interaction.KeyboardZoom");goog.require("ol.interaction.Modify");goog.require("ol.interaction.ModifyEvent");goog.require("ol.interaction.MouseWheelZoom");goog.require("ol.interaction.PinchRotate");goog.require("ol.interaction.PinchZoom");goog.require("ol.interaction.Pointer");goog.require("ol.interaction.Select");goog.require("ol.interaction.SelectEvent");goog.require("ol.interaction.SelectEventType");goog.require("ol.interaction.SelectFilterFunction");goog.require("ol.interaction.Snap");goog.require("ol.interaction.SnapProperty");goog.require("ol.interaction.Translate");goog.require("ol.layer.Base");goog.require("ol.layer.Group");goog.require("ol.layer.Heatmap");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.LayerProperty");goog.require("ol.layer.LayerState");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.loadingstrategy");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.ProjectionLike");goog.require("ol.proj.Units");goog.require("ol.proj.common");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas.Immediate");goog.require("ol.render.webgl.Immediate");goog.require("ol.size");goog.require("ol.source.BingMaps");goog.require("ol.source.Cluster");goog.require("ol.source.Image");goog.require("ol.source.ImageCanvas");goog.require("ol.source.ImageEvent");goog.require("ol.source.ImageMapGuide");goog.require("ol.source.ImageStatic");goog.require("ol.source.ImageVector");goog.require("ol.source.ImageWMS");goog.require("ol.source.MapQuest");goog.require("ol.source.OSM");goog.require("ol.source.Raster");goog.require("ol.source.RasterEvent");goog.require("ol.source.RasterEventType");goog.require("ol.source.Source");goog.require("ol.source.Stamen");goog.require("ol.source.State");goog.require("ol.source.Tile");goog.require("ol.source.TileArcGISRest");goog.require("ol.source.TileDebug");goog.require("ol.source.TileEvent");goog.require("ol.source.TileImage");goog.require("ol.source.TileJSON");goog.require("ol.source.TileOptions");goog.require("ol.source.TileUTFGrid");goog.require("ol.source.TileVector");goog.require("ol.source.TileWMS");goog.require("ol.source.Vector");goog.require("ol.source.VectorEvent");goog.require("ol.source.VectorEventType");goog.require("ol.source.WMTS");goog.require("ol.source.WMTSRequestEncoding");goog.require("ol.source.XYZ");goog.require("ol.source.Zoomify");goog.require("ol.style.Atlas");goog.require("ol.style.AtlasManager");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.GeometryFunction");goog.require("ol.style.Icon");goog.require("ol.style.IconAnchorUnits");goog.require("ol.style.IconImageCache");goog.require("ol.style.IconOrigin");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.RegularShape");goog.require("ol.style.Stroke");goog.require("ol.style.Style");goog.require("ol.style.StyleFunction");goog.require("ol.style.Text");goog.require("ol.style.defaultGeometryFunction");goog.require("ol.tilegrid.TileGrid");goog.require("ol.tilegrid.WMTS");goog.require("ol.tilejson");goog.require("ol.webgl.Context");goog.require("ol.xml");goog.exportSymbol("ol.animation.bounce",ol.animation.bounce,OPENLAYERS);goog.exportSymbol("ol.animation.pan",ol.animation.pan,OPENLAYERS);goog.exportSymbol("ol.animation.rotate",ol.animation.rotate,OPENLAYERS);goog.exportSymbol("ol.animation.zoom",ol.animation.zoom,OPENLAYERS);goog.exportSymbol("ol.Attribution",ol.Attribution,OPENLAYERS);goog.exportProperty(ol.Attribution.prototype,"getHTML",ol.Attribution.prototype.getHTML);goog.exportProperty(ol.CollectionEvent.prototype,"element",ol.CollectionEvent.prototype.element);goog.exportSymbol("ol.Collection",ol.Collection,OPENLAYERS);goog.exportProperty(ol.Collection.prototype,"clear",ol.Collection.prototype.clear);goog.exportProperty(ol.Collection.prototype,"extend",ol.Collection.prototype.extend);goog.exportProperty(ol.Collection.prototype,"forEach",ol.Collection.prototype.forEach);goog.exportProperty(ol.Collection.prototype,"getArray",ol.Collection.prototype.getArray);goog.exportProperty(ol.Collection.prototype,"item",ol.Collection.prototype.item);goog.exportProperty(ol.Collection.prototype,"getLength",ol.Collection.prototype.getLength);goog.exportProperty(ol.Collection.prototype,"insertAt",ol.Collection.prototype.insertAt);goog.exportProperty(ol.Collection.prototype,"pop",ol.Collection.prototype.pop);goog.exportProperty(ol.Collection.prototype,"push",ol.Collection.prototype.push);goog.exportProperty(ol.Collection.prototype,"remove",ol.Collection.prototype.remove);goog.exportProperty(ol.Collection.prototype,"removeAt",ol.Collection.prototype.removeAt);goog.exportProperty(ol.Collection.prototype,"setAt",ol.Collection.prototype.setAt);goog.exportSymbol("ol.coordinate.add",ol.coordinate.add,OPENLAYERS);goog.exportSymbol("ol.coordinate.createStringXY",ol.coordinate.createStringXY,OPENLAYERS);goog.exportSymbol("ol.coordinate.format",ol.coordinate.format,OPENLAYERS);goog.exportSymbol("ol.coordinate.rotate",ol.coordinate.rotate,OPENLAYERS);goog.exportSymbol("ol.coordinate.toStringHDMS",ol.coordinate.toStringHDMS,OPENLAYERS);goog.exportSymbol("ol.coordinate.toStringXY",ol.coordinate.toStringXY,OPENLAYERS);goog.exportSymbol("ol.DeviceOrientation",ol.DeviceOrientation,OPENLAYERS);goog.exportProperty(ol.DeviceOrientation.prototype,"getAlpha",ol.DeviceOrientation.prototype.getAlpha);goog.exportProperty(ol.DeviceOrientation.prototype,"getBeta",ol.DeviceOrientation.prototype.getBeta);goog.exportProperty(ol.DeviceOrientation.prototype,"getGamma",ol.DeviceOrientation.prototype.getGamma);goog.exportProperty(ol.DeviceOrientation.prototype,"getHeading",ol.DeviceOrientation.prototype.getHeading);goog.exportProperty(ol.DeviceOrientation.prototype,"getTracking",ol.DeviceOrientation.prototype.getTracking);goog.exportProperty(ol.DeviceOrientation.prototype,"setTracking",ol.DeviceOrientation.prototype.setTracking);goog.exportSymbol("ol.easing.easeIn",ol.easing.easeIn,OPENLAYERS);goog.exportSymbol("ol.easing.easeOut",ol.easing.easeOut,OPENLAYERS);goog.exportSymbol("ol.easing.inAndOut",ol.easing.inAndOut,OPENLAYERS);goog.exportSymbol("ol.easing.linear",ol.easing.linear,OPENLAYERS);goog.exportSymbol("ol.easing.upAndDown",ol.easing.upAndDown,OPENLAYERS);goog.exportSymbol("ol.extent.boundingExtent",ol.extent.boundingExtent,OPENLAYERS);goog.exportSymbol("ol.extent.buffer",ol.extent.buffer,OPENLAYERS);goog.exportSymbol("ol.extent.containsCoordinate",ol.extent.containsCoordinate,OPENLAYERS);goog.exportSymbol("ol.extent.containsExtent",ol.extent.containsExtent,OPENLAYERS);goog.exportSymbol("ol.extent.containsXY",ol.extent.containsXY,OPENLAYERS);goog.exportSymbol("ol.extent.createEmpty",ol.extent.createEmpty,OPENLAYERS);goog.exportSymbol("ol.extent.equals",ol.extent.equals,OPENLAYERS);goog.exportSymbol("ol.extent.extend",ol.extent.extend,OPENLAYERS);goog.exportSymbol("ol.extent.getBottomLeft",ol.extent.getBottomLeft,OPENLAYERS);goog.exportSymbol("ol.extent.getBottomRight",ol.extent.getBottomRight,OPENLAYERS);goog.exportSymbol("ol.extent.getCenter",ol.extent.getCenter,OPENLAYERS);goog.exportSymbol("ol.extent.getHeight",ol.extent.getHeight,OPENLAYERS);goog.exportSymbol("ol.extent.getIntersection",ol.extent.getIntersection,OPENLAYERS);goog.exportSymbol("ol.extent.getSize",ol.extent.getSize,OPENLAYERS);goog.exportSymbol("ol.extent.getTopLeft",ol.extent.getTopLeft,OPENLAYERS);goog.exportSymbol("ol.extent.getTopRight",ol.extent.getTopRight,OPENLAYERS);goog.exportSymbol("ol.extent.getWidth",ol.extent.getWidth,OPENLAYERS);goog.exportSymbol("ol.extent.intersects",ol.extent.intersects,OPENLAYERS);goog.exportSymbol("ol.extent.isEmpty",ol.extent.isEmpty,OPENLAYERS);goog.exportSymbol("ol.extent.applyTransform",ol.extent.applyTransform,OPENLAYERS);goog.exportSymbol("ol.Feature",ol.Feature,OPENLAYERS);goog.exportProperty(ol.Feature.prototype,"clone",ol.Feature.prototype.clone);goog.exportProperty(ol.Feature.prototype,"getGeometry",ol.Feature.prototype.getGeometry);goog.exportProperty(ol.Feature.prototype,"getId",ol.Feature.prototype.getId);goog.exportProperty(ol.Feature.prototype,"getGeometryName",ol.Feature.prototype.getGeometryName);goog.exportProperty(ol.Feature.prototype,"getStyle",ol.Feature.prototype.getStyle);goog.exportProperty(ol.Feature.prototype,"getStyleFunction",ol.Feature.prototype.getStyleFunction);goog.exportProperty(ol.Feature.prototype,"setGeometry",ol.Feature.prototype.setGeometry);goog.exportProperty(ol.Feature.prototype,"setStyle",ol.Feature.prototype.setStyle);goog.exportProperty(ol.Feature.prototype,"setId",ol.Feature.prototype.setId);goog.exportProperty(ol.Feature.prototype,"setGeometryName",ol.Feature.prototype.setGeometryName);goog.exportSymbol("ol.featureloader.xhr",ol.featureloader.xhr,OPENLAYERS);goog.exportSymbol("ol.Geolocation",ol.Geolocation,OPENLAYERS);goog.exportProperty(ol.Geolocation.prototype,"getAccuracy",ol.Geolocation.prototype.getAccuracy);goog.exportProperty(ol.Geolocation.prototype,"getAccuracyGeometry",ol.Geolocation.prototype.getAccuracyGeometry);goog.exportProperty(ol.Geolocation.prototype,"getAltitude",ol.Geolocation.prototype.getAltitude);goog.exportProperty(ol.Geolocation.prototype,"getAltitudeAccuracy",ol.Geolocation.prototype.getAltitudeAccuracy);goog.exportProperty(ol.Geolocation.prototype,"getHeading",ol.Geolocation.prototype.getHeading);goog.exportProperty(ol.Geolocation.prototype,"getPosition",ol.Geolocation.prototype.getPosition);goog.exportProperty(ol.Geolocation.prototype,"getProjection",ol.Geolocation.prototype.getProjection);goog.exportProperty(ol.Geolocation.prototype,"getSpeed",ol.Geolocation.prototype.getSpeed);goog.exportProperty(ol.Geolocation.prototype,"getTracking",ol.Geolocation.prototype.getTracking);goog.exportProperty(ol.Geolocation.prototype,"getTrackingOptions",ol.Geolocation.prototype.getTrackingOptions);goog.exportProperty(ol.Geolocation.prototype,"setProjection",ol.Geolocation.prototype.setProjection);goog.exportProperty(ol.Geolocation.prototype,"setTracking",ol.Geolocation.prototype.setTracking);goog.exportProperty(ol.Geolocation.prototype,"setTrackingOptions",ol.Geolocation.prototype.setTrackingOptions);goog.exportSymbol("ol.Graticule",ol.Graticule,OPENLAYERS);goog.exportProperty(ol.Graticule.prototype,"getMap",ol.Graticule.prototype.getMap);goog.exportProperty(ol.Graticule.prototype,"getMeridians",ol.Graticule.prototype.getMeridians);goog.exportProperty(ol.Graticule.prototype,"getParallels",ol.Graticule.prototype.getParallels);goog.exportProperty(ol.Graticule.prototype,"setMap",ol.Graticule.prototype.setMap);goog.exportSymbol("ol.has.DEVICE_PIXEL_RATIO",ol.has.DEVICE_PIXEL_RATIO,OPENLAYERS);goog.exportSymbol("ol.has.CANVAS",ol.has.CANVAS,OPENLAYERS);goog.exportSymbol("ol.has.DEVICE_ORIENTATION",ol.has.DEVICE_ORIENTATION,OPENLAYERS);goog.exportSymbol("ol.has.GEOLOCATION",ol.has.GEOLOCATION,OPENLAYERS);goog.exportSymbol("ol.has.TOUCH",ol.has.TOUCH,OPENLAYERS);goog.exportSymbol("ol.has.WEBGL",ol.has.WEBGL,OPENLAYERS);goog.exportProperty(ol.Image.prototype,"getImage",ol.Image.prototype.getImage);goog.exportProperty(ol.ImageTile.prototype,"getImage",ol.ImageTile.prototype.getImage);goog.exportSymbol("ol.Kinetic",ol.Kinetic,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.all",ol.loadingstrategy.all,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.bbox",ol.loadingstrategy.bbox,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.tile",ol.loadingstrategy.tile,OPENLAYERS);goog.exportSymbol("ol.Map",ol.Map,OPENLAYERS);goog.exportProperty(ol.Map.prototype,"addControl",ol.Map.prototype.addControl);goog.exportProperty(ol.Map.prototype,"addInteraction",ol.Map.prototype.addInteraction);goog.exportProperty(ol.Map.prototype,"addLayer",ol.Map.prototype.addLayer);goog.exportProperty(ol.Map.prototype,"addOverlay",ol.Map.prototype.addOverlay);goog.exportProperty(ol.Map.prototype,"beforeRender",ol.Map.prototype.beforeRender);goog.exportProperty(ol.Map.prototype,"forEachFeatureAtPixel",ol.Map.prototype.forEachFeatureAtPixel);goog.exportProperty(ol.Map.prototype,"forEachLayerAtPixel",ol.Map.prototype.forEachLayerAtPixel);goog.exportProperty(ol.Map.prototype,"hasFeatureAtPixel",ol.Map.prototype.hasFeatureAtPixel);goog.exportProperty(ol.Map.prototype,"getEventCoordinate",ol.Map.prototype.getEventCoordinate);goog.exportProperty(ol.Map.prototype,"getEventPixel",ol.Map.prototype.getEventPixel);goog.exportProperty(ol.Map.prototype,"getTarget",ol.Map.prototype.getTarget);goog.exportProperty(ol.Map.prototype,"getTargetElement",ol.Map.prototype.getTargetElement);goog.exportProperty(ol.Map.prototype,"getCoordinateFromPixel",ol.Map.prototype.getCoordinateFromPixel);goog.exportProperty(ol.Map.prototype,"getControls",ol.Map.prototype.getControls);goog.exportProperty(ol.Map.prototype,"getOverlays",ol.Map.prototype.getOverlays);goog.exportProperty(ol.Map.prototype,"getInteractions",ol.Map.prototype.getInteractions);goog.exportProperty(ol.Map.prototype,"getLayerGroup",ol.Map.prototype.getLayerGroup);goog.exportProperty(ol.Map.prototype,"getLayers",ol.Map.prototype.getLayers);goog.exportProperty(ol.Map.prototype,"getPixelFromCoordinate",ol.Map.prototype.getPixelFromCoordinate);goog.exportProperty(ol.Map.prototype,"getSize",ol.Map.prototype.getSize);goog.exportProperty(ol.Map.prototype,"getView",ol.Map.prototype.getView);goog.exportProperty(ol.Map.prototype,"getViewport",ol.Map.prototype.getViewport);goog.exportProperty(ol.Map.prototype,"renderSync",ol.Map.prototype.renderSync);goog.exportProperty(ol.Map.prototype,"render",ol.Map.prototype.render);goog.exportProperty(ol.Map.prototype,"removeControl",ol.Map.prototype.removeControl);goog.exportProperty(ol.Map.prototype,"removeInteraction",ol.Map.prototype.removeInteraction);goog.exportProperty(ol.Map.prototype,"removeLayer",ol.Map.prototype.removeLayer);goog.exportProperty(ol.Map.prototype,"removeOverlay",ol.Map.prototype.removeOverlay);goog.exportProperty(ol.Map.prototype,"setLayerGroup",ol.Map.prototype.setLayerGroup);goog.exportProperty(ol.Map.prototype,"setSize",ol.Map.prototype.setSize);goog.exportProperty(ol.Map.prototype,"setTarget",ol.Map.prototype.setTarget);goog.exportProperty(ol.Map.prototype,"setView",ol.Map.prototype.setView);goog.exportProperty(ol.Map.prototype,"updateSize",ol.Map.prototype.updateSize);goog.exportProperty(ol.MapBrowserEvent.prototype,"originalEvent",ol.MapBrowserEvent.prototype.originalEvent);goog.exportProperty(ol.MapBrowserEvent.prototype,"pixel",ol.MapBrowserEvent.prototype.pixel);goog.exportProperty(ol.MapBrowserEvent.prototype,"coordinate",ol.MapBrowserEvent.prototype.coordinate);goog.exportProperty(ol.MapBrowserEvent.prototype,"dragging",ol.MapBrowserEvent.prototype.dragging);goog.exportProperty(ol.MapBrowserEvent.prototype,"preventDefault",ol.MapBrowserEvent.prototype.preventDefault);goog.exportProperty(ol.MapBrowserEvent.prototype,"stopPropagation",ol.MapBrowserEvent.prototype.stopPropagation);goog.exportProperty(ol.MapEvent.prototype,"map",ol.MapEvent.prototype.map);goog.exportProperty(ol.MapEvent.prototype,"frameState",ol.MapEvent.prototype.frameState);goog.exportProperty(ol.ObjectEvent.prototype,"key",ol.ObjectEvent.prototype.key);goog.exportProperty(ol.ObjectEvent.prototype,"oldValue",ol.ObjectEvent.prototype.oldValue);goog.exportSymbol("ol.Object",ol.Object,OPENLAYERS);goog.exportProperty(ol.Object.prototype,"get",ol.Object.prototype.get);goog.exportProperty(ol.Object.prototype,"getKeys",ol.Object.prototype.getKeys);goog.exportProperty(ol.Object.prototype,"getProperties",ol.Object.prototype.getProperties);goog.exportProperty(ol.Object.prototype,"set",ol.Object.prototype.set);goog.exportProperty(ol.Object.prototype,"setProperties",ol.Object.prototype.setProperties);goog.exportProperty(ol.Object.prototype,"unset",ol.Object.prototype.unset);goog.exportSymbol("ol.Observable",ol.Observable,OPENLAYERS);goog.exportSymbol("ol.Observable.unByKey",ol.Observable.unByKey,OPENLAYERS);goog.exportProperty(ol.Observable.prototype,"changed",ol.Observable.prototype.changed);goog.exportProperty(ol.Observable.prototype,"getRevision",ol.Observable.prototype.getRevision);goog.exportProperty(ol.Observable.prototype,"on",ol.Observable.prototype.on);goog.exportProperty(ol.Observable.prototype,"once",ol.Observable.prototype.once);goog.exportProperty(ol.Observable.prototype,"un",ol.Observable.prototype.un);goog.exportProperty(ol.Observable.prototype,"unByKey",ol.Observable.prototype.unByKey);goog.exportSymbol("ol.inherits",ol.inherits,OPENLAYERS);goog.exportSymbol("ol.Overlay",ol.Overlay,OPENLAYERS);goog.exportProperty(ol.Overlay.prototype,"getElement",ol.Overlay.prototype.getElement);goog.exportProperty(ol.Overlay.prototype,"getMap",ol.Overlay.prototype.getMap);goog.exportProperty(ol.Overlay.prototype,"getOffset",ol.Overlay.prototype.getOffset);goog.exportProperty(ol.Overlay.prototype,"getPosition",ol.Overlay.prototype.getPosition);goog.exportProperty(ol.Overlay.prototype,"getPositioning",ol.Overlay.prototype.getPositioning);goog.exportProperty(ol.Overlay.prototype,"setElement",ol.Overlay.prototype.setElement);goog.exportProperty(ol.Overlay.prototype,"setMap",ol.Overlay.prototype.setMap);goog.exportProperty(ol.Overlay.prototype,"setOffset",ol.Overlay.prototype.setOffset);goog.exportProperty(ol.Overlay.prototype,"setPosition",ol.Overlay.prototype.setPosition);goog.exportProperty(ol.Overlay.prototype,"setPositioning",ol.Overlay.prototype.setPositioning);goog.exportSymbol("ol.size.toSize",ol.size.toSize,OPENLAYERS);goog.exportProperty(ol.Tile.prototype,"getTileCoord",ol.Tile.prototype.getTileCoord);goog.exportSymbol("ol.View",ol.View,OPENLAYERS);goog.exportProperty(ol.View.prototype,"constrainCenter",ol.View.prototype.constrainCenter);goog.exportProperty(ol.View.prototype,"constrainResolution",ol.View.prototype.constrainResolution);goog.exportProperty(ol.View.prototype,"constrainRotation",ol.View.prototype.constrainRotation);goog.exportProperty(ol.View.prototype,"getCenter",ol.View.prototype.getCenter);goog.exportProperty(ol.View.prototype,"calculateExtent",ol.View.prototype.calculateExtent);goog.exportProperty(ol.View.prototype,"getProjection",ol.View.prototype.getProjection);goog.exportProperty(ol.View.prototype,"getResolution",ol.View.prototype.getResolution);goog.exportProperty(ol.View.prototype,"getRotation",ol.View.prototype.getRotation);goog.exportProperty(ol.View.prototype,"getZoom",ol.View.prototype.getZoom);goog.exportProperty(ol.View.prototype,"fit",ol.View.prototype.fit);goog.exportProperty(ol.View.prototype,"centerOn",ol.View.prototype.centerOn);goog.exportProperty(ol.View.prototype,"rotate",ol.View.prototype.rotate);goog.exportProperty(ol.View.prototype,"setCenter",ol.View.prototype.setCenter);goog.exportProperty(ol.View.prototype,"setResolution",ol.View.prototype.setResolution);goog.exportProperty(ol.View.prototype,"setRotation",ol.View.prototype.setRotation);goog.exportProperty(ol.View.prototype,"setZoom",ol.View.prototype.setZoom);goog.exportSymbol("ol.xml.getAllTextContent",ol.xml.getAllTextContent,OPENLAYERS);goog.exportSymbol("ol.xml.parse",ol.xml.parse,OPENLAYERS);goog.exportSymbol("ol.webgl.Context",ol.webgl.Context,OPENLAYERS);goog.exportProperty(ol.webgl.Context.prototype,"getGL",ol.webgl.Context.prototype.getGL);goog.exportProperty(ol.webgl.Context.prototype,"getHitDetectionFramebuffer",ol.webgl.Context.prototype.getHitDetectionFramebuffer);goog.exportProperty(ol.webgl.Context.prototype,"useProgram",ol.webgl.Context.prototype.useProgram);goog.exportSymbol("ol.tilegrid.TileGrid",ol.tilegrid.TileGrid,OPENLAYERS);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMaxZoom",ol.tilegrid.TileGrid.prototype.getMaxZoom);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMinZoom",ol.tilegrid.TileGrid.prototype.getMinZoom);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getOrigin",ol.tilegrid.TileGrid.prototype.getOrigin);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolution",ol.tilegrid.TileGrid.prototype.getResolution);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolutions",ol.tilegrid.TileGrid.prototype.getResolutions);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileSize",ol.tilegrid.TileGrid.prototype.getTileSize);goog.exportSymbol("ol.tilegrid.createXYZ",ol.tilegrid.createXYZ,OPENLAYERS);goog.exportSymbol("ol.tilegrid.WMTS",ol.tilegrid.WMTS,OPENLAYERS);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMatrixIds",ol.tilegrid.WMTS.prototype.getMatrixIds);goog.exportSymbol("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet,OPENLAYERS);goog.exportSymbol("ol.style.AtlasManager",ol.style.AtlasManager,OPENLAYERS);goog.exportSymbol("ol.style.Circle",ol.style.Circle,OPENLAYERS);goog.exportProperty(ol.style.Circle.prototype,"getFill",ol.style.Circle.prototype.getFill);goog.exportProperty(ol.style.Circle.prototype,"getImage",ol.style.Circle.prototype.getImage);goog.exportProperty(ol.style.Circle.prototype,"getRadius",ol.style.Circle.prototype.getRadius);goog.exportProperty(ol.style.Circle.prototype,"getStroke",ol.style.Circle.prototype.getStroke);goog.exportSymbol("ol.style.Fill",ol.style.Fill,OPENLAYERS);goog.exportProperty(ol.style.Fill.prototype,"getColor",ol.style.Fill.prototype.getColor);goog.exportProperty(ol.style.Fill.prototype,"setColor",ol.style.Fill.prototype.setColor);goog.exportSymbol("ol.style.Icon",ol.style.Icon,OPENLAYERS);goog.exportProperty(ol.style.Icon.prototype,"getAnchor",ol.style.Icon.prototype.getAnchor);goog.exportProperty(ol.style.Icon.prototype,"getImage",ol.style.Icon.prototype.getImage);goog.exportProperty(ol.style.Icon.prototype,"getOrigin",ol.style.Icon.prototype.getOrigin);goog.exportProperty(ol.style.Icon.prototype,"getSrc",ol.style.Icon.prototype.getSrc);goog.exportProperty(ol.style.Icon.prototype,"getSize",ol.style.Icon.prototype.getSize);goog.exportProperty(ol.style.Icon.prototype,"load",ol.style.Icon.prototype.load);goog.exportSymbol("ol.style.Image",ol.style.Image,OPENLAYERS);goog.exportProperty(ol.style.Image.prototype,"getOpacity",ol.style.Image.prototype.getOpacity);goog.exportProperty(ol.style.Image.prototype,"getRotateWithView",ol.style.Image.prototype.getRotateWithView);goog.exportProperty(ol.style.Image.prototype,"getRotation",ol.style.Image.prototype.getRotation);goog.exportProperty(ol.style.Image.prototype,"getScale",ol.style.Image.prototype.getScale);goog.exportProperty(ol.style.Image.prototype,"getSnapToPixel",ol.style.Image.prototype.getSnapToPixel);goog.exportProperty(ol.style.Image.prototype,"setOpacity",ol.style.Image.prototype.setOpacity);goog.exportProperty(ol.style.Image.prototype,"setRotation",ol.style.Image.prototype.setRotation);goog.exportProperty(ol.style.Image.prototype,"setScale",ol.style.Image.prototype.setScale);goog.exportSymbol("ol.style.RegularShape",ol.style.RegularShape,OPENLAYERS);goog.exportProperty(ol.style.RegularShape.prototype,"getAnchor",ol.style.RegularShape.prototype.getAnchor);goog.exportProperty(ol.style.RegularShape.prototype,"getAngle",ol.style.RegularShape.prototype.getAngle);goog.exportProperty(ol.style.RegularShape.prototype,"getFill",ol.style.RegularShape.prototype.getFill);goog.exportProperty(ol.style.RegularShape.prototype,"getImage",ol.style.RegularShape.prototype.getImage);goog.exportProperty(ol.style.RegularShape.prototype,"getOrigin",ol.style.RegularShape.prototype.getOrigin);goog.exportProperty(ol.style.RegularShape.prototype,"getPoints",ol.style.RegularShape.prototype.getPoints);goog.exportProperty(ol.style.RegularShape.prototype,"getRadius",ol.style.RegularShape.prototype.getRadius);goog.exportProperty(ol.style.RegularShape.prototype,"getRadius2",ol.style.RegularShape.prototype.getRadius2);goog.exportProperty(ol.style.RegularShape.prototype,"getSize",ol.style.RegularShape.prototype.getSize);goog.exportProperty(ol.style.RegularShape.prototype,"getStroke",ol.style.RegularShape.prototype.getStroke);goog.exportSymbol("ol.style.Stroke",ol.style.Stroke,OPENLAYERS);goog.exportProperty(ol.style.Stroke.prototype,"getColor",ol.style.Stroke.prototype.getColor);goog.exportProperty(ol.style.Stroke.prototype,"getLineCap",ol.style.Stroke.prototype.getLineCap);goog.exportProperty(ol.style.Stroke.prototype,"getLineDash",ol.style.Stroke.prototype.getLineDash);goog.exportProperty(ol.style.Stroke.prototype,"getLineJoin",ol.style.Stroke.prototype.getLineJoin);goog.exportProperty(ol.style.Stroke.prototype,"getMiterLimit",ol.style.Stroke.prototype.getMiterLimit);goog.exportProperty(ol.style.Stroke.prototype,"getWidth",ol.style.Stroke.prototype.getWidth);goog.exportProperty(ol.style.Stroke.prototype,"setColor",ol.style.Stroke.prototype.setColor);goog.exportProperty(ol.style.Stroke.prototype,"setLineCap",ol.style.Stroke.prototype.setLineCap);goog.exportProperty(ol.style.Stroke.prototype,"setLineDash",ol.style.Stroke.prototype.setLineDash);goog.exportProperty(ol.style.Stroke.prototype,"setLineJoin",ol.style.Stroke.prototype.setLineJoin);goog.exportProperty(ol.style.Stroke.prototype,"setMiterLimit",ol.style.Stroke.prototype.setMiterLimit);goog.exportProperty(ol.style.Stroke.prototype,"setWidth",ol.style.Stroke.prototype.setWidth);goog.exportSymbol("ol.style.Style",ol.style.Style,OPENLAYERS);goog.exportProperty(ol.style.Style.prototype,"getGeometry",ol.style.Style.prototype.getGeometry);goog.exportProperty(ol.style.Style.prototype,"getGeometryFunction",ol.style.Style.prototype.getGeometryFunction);goog.exportProperty(ol.style.Style.prototype,"getFill",ol.style.Style.prototype.getFill);goog.exportProperty(ol.style.Style.prototype,"getImage",ol.style.Style.prototype.getImage);goog.exportProperty(ol.style.Style.prototype,"getStroke",ol.style.Style.prototype.getStroke);goog.exportProperty(ol.style.Style.prototype,"getText",ol.style.Style.prototype.getText);goog.exportProperty(ol.style.Style.prototype,"getZIndex",ol.style.Style.prototype.getZIndex);goog.exportProperty(ol.style.Style.prototype,"setGeometry",ol.style.Style.prototype.setGeometry);goog.exportProperty(ol.style.Style.prototype,"setZIndex",ol.style.Style.prototype.setZIndex);goog.exportSymbol("ol.style.Text",ol.style.Text,OPENLAYERS);goog.exportProperty(ol.style.Text.prototype,"getFont",ol.style.Text.prototype.getFont);goog.exportProperty(ol.style.Text.prototype,"getOffsetX",ol.style.Text.prototype.getOffsetX);goog.exportProperty(ol.style.Text.prototype,"getOffsetY",ol.style.Text.prototype.getOffsetY);goog.exportProperty(ol.style.Text.prototype,"getFill",ol.style.Text.prototype.getFill);goog.exportProperty(ol.style.Text.prototype,"getRotation",ol.style.Text.prototype.getRotation);goog.exportProperty(ol.style.Text.prototype,"getScale",ol.style.Text.prototype.getScale);goog.exportProperty(ol.style.Text.prototype,"getStroke",ol.style.Text.prototype.getStroke);goog.exportProperty(ol.style.Text.prototype,"getText",ol.style.Text.prototype.getText);goog.exportProperty(ol.style.Text.prototype,"getTextAlign",ol.style.Text.prototype.getTextAlign);goog.exportProperty(ol.style.Text.prototype,"getTextBaseline",ol.style.Text.prototype.getTextBaseline);goog.exportProperty(ol.style.Text.prototype,"setFont",ol.style.Text.prototype.setFont);goog.exportProperty(ol.style.Text.prototype,"setFill",ol.style.Text.prototype.setFill);goog.exportProperty(ol.style.Text.prototype,"setRotation",ol.style.Text.prototype.setRotation);goog.exportProperty(ol.style.Text.prototype,"setScale",ol.style.Text.prototype.setScale);goog.exportProperty(ol.style.Text.prototype,"setStroke",ol.style.Text.prototype.setStroke);goog.exportProperty(ol.style.Text.prototype,"setText",ol.style.Text.prototype.setText);goog.exportProperty(ol.style.Text.prototype,"setTextAlign",ol.style.Text.prototype.setTextAlign);goog.exportProperty(ol.style.Text.prototype,"setTextBaseline",ol.style.Text.prototype.setTextBaseline);goog.exportSymbol("ol.Sphere",ol.Sphere,OPENLAYERS);goog.exportProperty(ol.Sphere.prototype,"geodesicArea",ol.Sphere.prototype.geodesicArea);goog.exportProperty(ol.Sphere.prototype,"haversineDistance",ol.Sphere.prototype.haversineDistance);goog.exportSymbol("ol.source.BingMaps",ol.source.BingMaps,OPENLAYERS);goog.exportSymbol("ol.source.BingMaps.TOS_ATTRIBUTION",ol.source.BingMaps.TOS_ATTRIBUTION,OPENLAYERS);goog.exportSymbol("ol.source.Cluster",ol.source.Cluster,OPENLAYERS);goog.exportProperty(ol.source.Cluster.prototype,"getSource",ol.source.Cluster.prototype.getSource);goog.exportSymbol("ol.source.ImageCanvas",ol.source.ImageCanvas,OPENLAYERS);goog.exportSymbol("ol.source.ImageMapGuide",ol.source.ImageMapGuide,OPENLAYERS);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getParams",ol.source.ImageMapGuide.prototype.getParams);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getImageLoadFunction",ol.source.ImageMapGuide.prototype.getImageLoadFunction);goog.exportProperty(ol.source.ImageMapGuide.prototype,"updateParams",ol.source.ImageMapGuide.prototype.updateParams);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setImageLoadFunction",ol.source.ImageMapGuide.prototype.setImageLoadFunction);goog.exportSymbol("ol.source.Image",ol.source.Image,OPENLAYERS);goog.exportProperty(ol.source.ImageEvent.prototype,"image",ol.source.ImageEvent.prototype.image);goog.exportSymbol("ol.source.ImageStatic",ol.source.ImageStatic,OPENLAYERS);goog.exportSymbol("ol.source.ImageVector",ol.source.ImageVector,OPENLAYERS);goog.exportProperty(ol.source.ImageVector.prototype,"getSource",ol.source.ImageVector.prototype.getSource);goog.exportProperty(ol.source.ImageVector.prototype,"getStyle",ol.source.ImageVector.prototype.getStyle);goog.exportProperty(ol.source.ImageVector.prototype,"getStyleFunction",ol.source.ImageVector.prototype.getStyleFunction);goog.exportProperty(ol.source.ImageVector.prototype,"setStyle",ol.source.ImageVector.prototype.setStyle);goog.exportSymbol("ol.source.ImageWMS",ol.source.ImageWMS,OPENLAYERS);goog.exportProperty(ol.source.ImageWMS.prototype,"getGetFeatureInfoUrl",ol.source.ImageWMS.prototype.getGetFeatureInfoUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"getParams",ol.source.ImageWMS.prototype.getParams);goog.exportProperty(ol.source.ImageWMS.prototype,"getImageLoadFunction",ol.source.ImageWMS.prototype.getImageLoadFunction);goog.exportProperty(ol.source.ImageWMS.prototype,"getUrl",ol.source.ImageWMS.prototype.getUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"setImageLoadFunction",ol.source.ImageWMS.prototype.setImageLoadFunction);goog.exportProperty(ol.source.ImageWMS.prototype,"setUrl",ol.source.ImageWMS.prototype.setUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"updateParams",ol.source.ImageWMS.prototype.updateParams);goog.exportSymbol("ol.source.MapQuest",ol.source.MapQuest,OPENLAYERS);goog.exportProperty(ol.source.MapQuest.prototype,"getLayer",ol.source.MapQuest.prototype.getLayer);goog.exportSymbol("ol.source.OSM",ol.source.OSM,OPENLAYERS);goog.exportSymbol("ol.source.OSM.ATTRIBUTION",ol.source.OSM.ATTRIBUTION,OPENLAYERS);goog.exportSymbol("ol.source.Raster",ol.source.Raster,OPENLAYERS);goog.exportProperty(ol.source.Raster.prototype,"setOperation",ol.source.Raster.prototype.setOperation);goog.exportProperty(ol.source.RasterEvent.prototype,"extent",ol.source.RasterEvent.prototype.extent);goog.exportProperty(ol.source.RasterEvent.prototype,"resolution",ol.source.RasterEvent.prototype.resolution);goog.exportProperty(ol.source.RasterEvent.prototype,"data",ol.source.RasterEvent.prototype.data);goog.exportSymbol("ol.source.Source",ol.source.Source,OPENLAYERS);goog.exportProperty(ol.source.Source.prototype,"getAttributions",ol.source.Source.prototype.getAttributions);goog.exportProperty(ol.source.Source.prototype,"getLogo",ol.source.Source.prototype.getLogo);goog.exportProperty(ol.source.Source.prototype,"getProjection",ol.source.Source.prototype.getProjection);goog.exportProperty(ol.source.Source.prototype,"getState",ol.source.Source.prototype.getState);goog.exportProperty(ol.source.Source.prototype,"setAttributions",ol.source.Source.prototype.setAttributions);goog.exportSymbol("ol.source.Stamen",ol.source.Stamen,OPENLAYERS);goog.exportSymbol("ol.source.TileArcGISRest",ol.source.TileArcGISRest,OPENLAYERS);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getParams",ol.source.TileArcGISRest.prototype.getParams);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getUrls",ol.source.TileArcGISRest.prototype.getUrls);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrl",ol.source.TileArcGISRest.prototype.setUrl);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrls",ol.source.TileArcGISRest.prototype.setUrls);goog.exportProperty(ol.source.TileArcGISRest.prototype,"updateParams",ol.source.TileArcGISRest.prototype.updateParams);goog.exportSymbol("ol.source.TileDebug",ol.source.TileDebug,OPENLAYERS);goog.exportSymbol("ol.source.TileImage",ol.source.TileImage,OPENLAYERS);goog.exportProperty(ol.source.TileImage.prototype,"getTileLoadFunction",ol.source.TileImage.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileImage.prototype,"getTileUrlFunction",ol.source.TileImage.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileImage.prototype,"setTileLoadFunction",ol.source.TileImage.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileImage.prototype,"setTileUrlFunction",ol.source.TileImage.prototype.setTileUrlFunction);goog.exportSymbol("ol.source.TileJSON",ol.source.TileJSON,OPENLAYERS);goog.exportSymbol("ol.source.Tile",ol.source.Tile,OPENLAYERS);goog.exportProperty(ol.source.Tile.prototype,"getTileGrid",ol.source.Tile.prototype.getTileGrid);goog.exportProperty(ol.source.TileEvent.prototype,"tile",ol.source.TileEvent.prototype.tile);goog.exportSymbol("ol.source.TileUTFGrid",ol.source.TileUTFGrid,OPENLAYERS);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTemplate",ol.source.TileUTFGrid.prototype.getTemplate);goog.exportProperty(ol.source.TileUTFGrid.prototype,"forDataAtCoordinateAndResolution",ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution);goog.exportSymbol("ol.source.TileVector",ol.source.TileVector,OPENLAYERS);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesAtCoordinateAndResolution",ol.source.TileVector.prototype.getFeaturesAtCoordinateAndResolution);goog.exportSymbol("ol.source.TileWMS",ol.source.TileWMS,OPENLAYERS);goog.exportProperty(ol.source.TileWMS.prototype,"getGetFeatureInfoUrl",ol.source.TileWMS.prototype.getGetFeatureInfoUrl);goog.exportProperty(ol.source.TileWMS.prototype,"getParams",ol.source.TileWMS.prototype.getParams);goog.exportProperty(ol.source.TileWMS.prototype,"getUrls",ol.source.TileWMS.prototype.getUrls);goog.exportProperty(ol.source.TileWMS.prototype,"setUrl",ol.source.TileWMS.prototype.setUrl);goog.exportProperty(ol.source.TileWMS.prototype,"setUrls",ol.source.TileWMS.prototype.setUrls);goog.exportProperty(ol.source.TileWMS.prototype,"updateParams",ol.source.TileWMS.prototype.updateParams);goog.exportSymbol("ol.source.Vector",ol.source.Vector,OPENLAYERS);goog.exportProperty(ol.source.Vector.prototype,"addFeature",ol.source.Vector.prototype.addFeature);goog.exportProperty(ol.source.Vector.prototype,"addFeatures",ol.source.Vector.prototype.addFeatures);goog.exportProperty(ol.source.Vector.prototype,"clear",ol.source.Vector.prototype.clear);goog.exportProperty(ol.source.Vector.prototype,"forEachFeature",ol.source.Vector.prototype.forEachFeature);goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureInExtent",ol.source.Vector.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureIntersectingExtent",ol.source.Vector.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesCollection",ol.source.Vector.prototype.getFeaturesCollection);goog.exportProperty(ol.source.Vector.prototype,"getFeatures",ol.source.Vector.prototype.getFeatures);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesAtCoordinate",ol.source.Vector.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesInExtent",ol.source.Vector.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.Vector.prototype,"getClosestFeatureToCoordinate",ol.source.Vector.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.Vector.prototype,"getExtent",ol.source.Vector.prototype.getExtent);goog.exportProperty(ol.source.Vector.prototype,"getFeatureById",ol.source.Vector.prototype.getFeatureById);goog.exportProperty(ol.source.Vector.prototype,"removeFeature",ol.source.Vector.prototype.removeFeature);goog.exportProperty(ol.source.VectorEvent.prototype,"feature",ol.source.VectorEvent.prototype.feature);goog.exportSymbol("ol.source.WMTS",ol.source.WMTS,OPENLAYERS);goog.exportProperty(ol.source.WMTS.prototype,"getDimensions",ol.source.WMTS.prototype.getDimensions);goog.exportProperty(ol.source.WMTS.prototype,"getFormat",ol.source.WMTS.prototype.getFormat);goog.exportProperty(ol.source.WMTS.prototype,"getLayer",ol.source.WMTS.prototype.getLayer);goog.exportProperty(ol.source.WMTS.prototype,"getMatrixSet",ol.source.WMTS.prototype.getMatrixSet);goog.exportProperty(ol.source.WMTS.prototype,"getRequestEncoding",ol.source.WMTS.prototype.getRequestEncoding);goog.exportProperty(ol.source.WMTS.prototype,"getStyle",ol.source.WMTS.prototype.getStyle);goog.exportProperty(ol.source.WMTS.prototype,"getUrls",ol.source.WMTS.prototype.getUrls);goog.exportProperty(ol.source.WMTS.prototype,"getVersion",ol.source.WMTS.prototype.getVersion);goog.exportProperty(ol.source.WMTS.prototype,"updateDimensions",ol.source.WMTS.prototype.updateDimensions);goog.exportSymbol("ol.source.WMTS.optionsFromCapabilities",ol.source.WMTS.optionsFromCapabilities,OPENLAYERS);goog.exportSymbol("ol.source.XYZ",ol.source.XYZ,OPENLAYERS);goog.exportProperty(ol.source.XYZ.prototype,"getUrls",ol.source.XYZ.prototype.getUrls);goog.exportProperty(ol.source.XYZ.prototype,"setUrl",ol.source.XYZ.prototype.setUrl);goog.exportSymbol("ol.source.Zoomify",ol.source.Zoomify,OPENLAYERS);goog.exportProperty(ol.render.Event.prototype,"vectorContext",ol.render.Event.prototype.vectorContext);goog.exportProperty(ol.render.Event.prototype,"frameState",ol.render.Event.prototype.frameState);goog.exportProperty(ol.render.Event.prototype,"context",ol.render.Event.prototype.context);goog.exportProperty(ol.render.Event.prototype,"glContext",ol.render.Event.prototype.glContext);goog.exportSymbol("ol.render.VectorContext",ol.render.VectorContext,OPENLAYERS);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawAsync",ol.render.webgl.Immediate.prototype.drawAsync);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawCircleGeometry",ol.render.webgl.Immediate.prototype.drawCircleGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawFeature",ol.render.webgl.Immediate.prototype.drawFeature);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawGeometryCollectionGeometry",ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawPointGeometry",ol.render.webgl.Immediate.prototype.drawPointGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawLineStringGeometry",ol.render.webgl.Immediate.prototype.drawLineStringGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiLineStringGeometry",ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiPointGeometry",ol.render.webgl.Immediate.prototype.drawMultiPointGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiPolygonGeometry",ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawPolygonGeometry",ol.render.webgl.Immediate.prototype.drawPolygonGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawText",ol.render.webgl.Immediate.prototype.drawText);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setFillStrokeStyle",ol.render.webgl.Immediate.prototype.setFillStrokeStyle);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setImageStyle",ol.render.webgl.Immediate.prototype.setImageStyle);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setTextStyle",ol.render.webgl.Immediate.prototype.setTextStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawAsync",ol.render.canvas.Immediate.prototype.drawAsync);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawCircleGeometry",ol.render.canvas.Immediate.prototype.drawCircleGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawFeature",ol.render.canvas.Immediate.prototype.drawFeature);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawPointGeometry",ol.render.canvas.Immediate.prototype.drawPointGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiPointGeometry",ol.render.canvas.Immediate.prototype.drawMultiPointGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawLineStringGeometry",ol.render.canvas.Immediate.prototype.drawLineStringGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiLineStringGeometry",ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawPolygonGeometry",ol.render.canvas.Immediate.prototype.drawPolygonGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiPolygonGeometry",ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setFillStrokeStyle",ol.render.canvas.Immediate.prototype.setFillStrokeStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setImageStyle",ol.render.canvas.Immediate.prototype.setImageStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setTextStyle",ol.render.canvas.Immediate.prototype.setTextStyle);goog.exportSymbol("ol.proj.common.add",ol.proj.common.add,OPENLAYERS);goog.exportSymbol("ol.proj.METERS_PER_UNIT",ol.proj.METERS_PER_UNIT,OPENLAYERS);goog.exportSymbol("ol.proj.Projection",ol.proj.Projection,OPENLAYERS);goog.exportProperty(ol.proj.Projection.prototype,"getCode",ol.proj.Projection.prototype.getCode);goog.exportProperty(ol.proj.Projection.prototype,"getExtent",ol.proj.Projection.prototype.getExtent);goog.exportProperty(ol.proj.Projection.prototype,"getUnits",ol.proj.Projection.prototype.getUnits);goog.exportProperty(ol.proj.Projection.prototype,"getMetersPerUnit",ol.proj.Projection.prototype.getMetersPerUnit);goog.exportProperty(ol.proj.Projection.prototype,"getWorldExtent",ol.proj.Projection.prototype.getWorldExtent);goog.exportProperty(ol.proj.Projection.prototype,"isGlobal",ol.proj.Projection.prototype.isGlobal);goog.exportProperty(ol.proj.Projection.prototype,"setGlobal",ol.proj.Projection.prototype.setGlobal);goog.exportProperty(ol.proj.Projection.prototype,"setExtent",ol.proj.Projection.prototype.setExtent);goog.exportProperty(ol.proj.Projection.prototype,"setWorldExtent",ol.proj.Projection.prototype.setWorldExtent);goog.exportProperty(ol.proj.Projection.prototype,"setGetPointResolution",ol.proj.Projection.prototype.setGetPointResolution);goog.exportProperty(ol.proj.Projection.prototype,"getPointResolution",ol.proj.Projection.prototype.getPointResolution);goog.exportSymbol("ol.proj.addEquivalentProjections",ol.proj.addEquivalentProjections,OPENLAYERS);goog.exportSymbol("ol.proj.addProjection",ol.proj.addProjection,OPENLAYERS);goog.exportSymbol("ol.proj.addCoordinateTransforms",ol.proj.addCoordinateTransforms,OPENLAYERS);goog.exportSymbol("ol.proj.fromLonLat",ol.proj.fromLonLat,OPENLAYERS);goog.exportSymbol("ol.proj.toLonLat",ol.proj.toLonLat,OPENLAYERS);goog.exportSymbol("ol.proj.get",ol.proj.get,OPENLAYERS);goog.exportSymbol("ol.proj.getTransform",ol.proj.getTransform,OPENLAYERS);goog.exportSymbol("ol.proj.transform",ol.proj.transform,OPENLAYERS);goog.exportSymbol("ol.proj.transformExtent",ol.proj.transformExtent,OPENLAYERS);goog.exportSymbol("ol.layer.Heatmap",ol.layer.Heatmap,OPENLAYERS);goog.exportProperty(ol.layer.Heatmap.prototype,"getBlur",ol.layer.Heatmap.prototype.getBlur);goog.exportProperty(ol.layer.Heatmap.prototype,"getGradient",ol.layer.Heatmap.prototype.getGradient);goog.exportProperty(ol.layer.Heatmap.prototype,"getRadius",ol.layer.Heatmap.prototype.getRadius);goog.exportProperty(ol.layer.Heatmap.prototype,"setBlur",ol.layer.Heatmap.prototype.setBlur);goog.exportProperty(ol.layer.Heatmap.prototype,"setGradient",ol.layer.Heatmap.prototype.setGradient);goog.exportProperty(ol.layer.Heatmap.prototype,"setRadius",ol.layer.Heatmap.prototype.setRadius);goog.exportSymbol("ol.layer.Image",ol.layer.Image,OPENLAYERS);goog.exportProperty(ol.layer.Image.prototype,"getSource",ol.layer.Image.prototype.getSource);goog.exportSymbol("ol.layer.Layer",ol.layer.Layer,OPENLAYERS);goog.exportProperty(ol.layer.Layer.prototype,"getSource",ol.layer.Layer.prototype.getSource);goog.exportProperty(ol.layer.Layer.prototype,"setMap",ol.layer.Layer.prototype.setMap);goog.exportProperty(ol.layer.Layer.prototype,"setSource",ol.layer.Layer.prototype.setSource);goog.exportSymbol("ol.layer.Base",ol.layer.Base,OPENLAYERS);goog.exportProperty(ol.layer.Base.prototype,"getBrightness",ol.layer.Base.prototype.getBrightness);goog.exportProperty(ol.layer.Base.prototype,"getContrast",ol.layer.Base.prototype.getContrast);goog.exportProperty(ol.layer.Base.prototype,"getHue",ol.layer.Base.prototype.getHue);goog.exportProperty(ol.layer.Base.prototype,"getExtent",ol.layer.Base.prototype.getExtent);goog.exportProperty(ol.layer.Base.prototype,"getMaxResolution",ol.layer.Base.prototype.getMaxResolution);goog.exportProperty(ol.layer.Base.prototype,"getMinResolution",ol.layer.Base.prototype.getMinResolution);goog.exportProperty(ol.layer.Base.prototype,"getOpacity",ol.layer.Base.prototype.getOpacity);goog.exportProperty(ol.layer.Base.prototype,"getSaturation",ol.layer.Base.prototype.getSaturation);goog.exportProperty(ol.layer.Base.prototype,"getVisible",ol.layer.Base.prototype.getVisible);goog.exportProperty(ol.layer.Base.prototype,"getZIndex",ol.layer.Base.prototype.getZIndex);goog.exportProperty(ol.layer.Base.prototype,"setBrightness",ol.layer.Base.prototype.setBrightness);goog.exportProperty(ol.layer.Base.prototype,"setContrast",ol.layer.Base.prototype.setContrast);goog.exportProperty(ol.layer.Base.prototype,"setHue",ol.layer.Base.prototype.setHue);goog.exportProperty(ol.layer.Base.prototype,"setExtent",ol.layer.Base.prototype.setExtent);goog.exportProperty(ol.layer.Base.prototype,"setMaxResolution",ol.layer.Base.prototype.setMaxResolution);goog.exportProperty(ol.layer.Base.prototype,"setMinResolution",ol.layer.Base.prototype.setMinResolution);goog.exportProperty(ol.layer.Base.prototype,"setOpacity",ol.layer.Base.prototype.setOpacity);goog.exportProperty(ol.layer.Base.prototype,"setSaturation",ol.layer.Base.prototype.setSaturation);goog.exportProperty(ol.layer.Base.prototype,"setVisible",ol.layer.Base.prototype.setVisible);goog.exportProperty(ol.layer.Base.prototype,"setZIndex",ol.layer.Base.prototype.setZIndex);goog.exportSymbol("ol.layer.Group",ol.layer.Group,OPENLAYERS);goog.exportProperty(ol.layer.Group.prototype,"getLayers",ol.layer.Group.prototype.getLayers);goog.exportProperty(ol.layer.Group.prototype,"setLayers",ol.layer.Group.prototype.setLayers);goog.exportSymbol("ol.layer.Tile",ol.layer.Tile,OPENLAYERS);goog.exportProperty(ol.layer.Tile.prototype,"getPreload",ol.layer.Tile.prototype.getPreload);goog.exportProperty(ol.layer.Tile.prototype,"getSource",ol.layer.Tile.prototype.getSource);goog.exportProperty(ol.layer.Tile.prototype,"setPreload",ol.layer.Tile.prototype.setPreload);goog.exportProperty(ol.layer.Tile.prototype,"getUseInterimTilesOnError",ol.layer.Tile.prototype.getUseInterimTilesOnError);goog.exportProperty(ol.layer.Tile.prototype,"setUseInterimTilesOnError",ol.layer.Tile.prototype.setUseInterimTilesOnError);goog.exportSymbol("ol.layer.Vector",ol.layer.Vector,OPENLAYERS);goog.exportProperty(ol.layer.Vector.prototype,"getSource",ol.layer.Vector.prototype.getSource);goog.exportProperty(ol.layer.Vector.prototype,"getStyle",ol.layer.Vector.prototype.getStyle);goog.exportProperty(ol.layer.Vector.prototype,"getStyleFunction",ol.layer.Vector.prototype.getStyleFunction);goog.exportProperty(ol.layer.Vector.prototype,"setStyle",ol.layer.Vector.prototype.setStyle);goog.exportSymbol("ol.interaction.DoubleClickZoom",ol.interaction.DoubleClickZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.DoubleClickZoom.handleEvent",ol.interaction.DoubleClickZoom.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.DragAndDrop",ol.interaction.DragAndDrop,OPENLAYERS);goog.exportSymbol("ol.interaction.DragAndDrop.handleEvent",ol.interaction.DragAndDrop.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"features",ol.interaction.DragAndDropEvent.prototype.features);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"file",ol.interaction.DragAndDropEvent.prototype.file);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"projection",ol.interaction.DragAndDropEvent.prototype.projection);goog.exportProperty(ol.DragBoxEvent.prototype,"coordinate",ol.DragBoxEvent.prototype.coordinate);goog.exportSymbol("ol.interaction.DragBox",ol.interaction.DragBox,OPENLAYERS);goog.exportProperty(ol.interaction.DragBox.prototype,"getGeometry",ol.interaction.DragBox.prototype.getGeometry);goog.exportSymbol("ol.interaction.DragPan",ol.interaction.DragPan,OPENLAYERS);goog.exportSymbol("ol.interaction.DragRotateAndZoom",ol.interaction.DragRotateAndZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.DragRotate",ol.interaction.DragRotate,OPENLAYERS);goog.exportSymbol("ol.interaction.DragZoom",ol.interaction.DragZoom,OPENLAYERS);goog.exportProperty(ol.interaction.DrawEvent.prototype,"feature",ol.interaction.DrawEvent.prototype.feature);goog.exportSymbol("ol.interaction.Draw",ol.interaction.Draw,OPENLAYERS);goog.exportSymbol("ol.interaction.Draw.handleEvent",ol.interaction.Draw.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.Draw.prototype,"removeLastPoint",ol.interaction.Draw.prototype.removeLastPoint);goog.exportProperty(ol.interaction.Draw.prototype,"finishDrawing",ol.interaction.Draw.prototype.finishDrawing);goog.exportProperty(ol.interaction.Draw.prototype,"extend",ol.interaction.Draw.prototype.extend);goog.exportSymbol("ol.interaction.Draw.createRegularPolygon",ol.interaction.Draw.createRegularPolygon,OPENLAYERS);goog.exportSymbol("ol.interaction.Interaction",ol.interaction.Interaction,OPENLAYERS);goog.exportProperty(ol.interaction.Interaction.prototype,"getActive",ol.interaction.Interaction.prototype.getActive);goog.exportProperty(ol.interaction.Interaction.prototype,"setActive",ol.interaction.Interaction.prototype.setActive);goog.exportSymbol("ol.interaction.defaults",ol.interaction.defaults,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardPan",ol.interaction.KeyboardPan,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardPan.handleEvent",ol.interaction.KeyboardPan.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardZoom",ol.interaction.KeyboardZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardZoom.handleEvent",ol.interaction.KeyboardZoom.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.ModifyEvent.prototype,"features",ol.interaction.ModifyEvent.prototype.features);goog.exportProperty(ol.interaction.ModifyEvent.prototype,"mapBrowserPointerEvent",ol.interaction.ModifyEvent.prototype.mapBrowserPointerEvent);goog.exportSymbol("ol.interaction.Modify",ol.interaction.Modify,OPENLAYERS);goog.exportSymbol("ol.interaction.Modify.handleEvent",ol.interaction.Modify.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.MouseWheelZoom",ol.interaction.MouseWheelZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.MouseWheelZoom.handleEvent",ol.interaction.MouseWheelZoom.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.PinchRotate",ol.interaction.PinchRotate,OPENLAYERS);goog.exportSymbol("ol.interaction.PinchZoom",ol.interaction.PinchZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.Pointer",ol.interaction.Pointer,OPENLAYERS);goog.exportSymbol("ol.interaction.Pointer.handleEvent",ol.interaction.Pointer.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.SelectEvent.prototype,"selected",ol.interaction.SelectEvent.prototype.selected);goog.exportProperty(ol.interaction.SelectEvent.prototype,"deselected",ol.interaction.SelectEvent.prototype.deselected);goog.exportProperty(ol.interaction.SelectEvent.prototype,"mapBrowserEvent",ol.interaction.SelectEvent.prototype.mapBrowserEvent);goog.exportSymbol("ol.interaction.Select",ol.interaction.Select,OPENLAYERS);goog.exportProperty(ol.interaction.Select.prototype,"getFeatures",ol.interaction.Select.prototype.getFeatures);goog.exportSymbol("ol.interaction.Select.handleEvent",ol.interaction.Select.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.Select.prototype,"setMap",ol.interaction.Select.prototype.setMap);goog.exportSymbol("ol.interaction.Snap",ol.interaction.Snap,OPENLAYERS);goog.exportProperty(ol.interaction.Snap.prototype,"addFeature",ol.interaction.Snap.prototype.addFeature);goog.exportProperty(ol.interaction.Snap.prototype,"removeFeature",ol.interaction.Snap.prototype.removeFeature);goog.exportSymbol("ol.interaction.Translate",ol.interaction.Translate,OPENLAYERS);goog.exportSymbol("ol.geom.Circle",ol.geom.Circle,OPENLAYERS);goog.exportProperty(ol.geom.Circle.prototype,"clone",ol.geom.Circle.prototype.clone);goog.exportProperty(ol.geom.Circle.prototype,"getCenter",ol.geom.Circle.prototype.getCenter);goog.exportProperty(ol.geom.Circle.prototype,"getRadius",ol.geom.Circle.prototype.getRadius);goog.exportProperty(ol.geom.Circle.prototype,"getType",ol.geom.Circle.prototype.getType);goog.exportProperty(ol.geom.Circle.prototype,"intersectsExtent",ol.geom.Circle.prototype.intersectsExtent);goog.exportProperty(ol.geom.Circle.prototype,"setCenter",ol.geom.Circle.prototype.setCenter);goog.exportProperty(ol.geom.Circle.prototype,"setCenterAndRadius",ol.geom.Circle.prototype.setCenterAndRadius);goog.exportProperty(ol.geom.Circle.prototype,"setRadius",ol.geom.Circle.prototype.setRadius);goog.exportProperty(ol.geom.Circle.prototype,"transform",ol.geom.Circle.prototype.transform);goog.exportSymbol("ol.geom.Geometry",ol.geom.Geometry,OPENLAYERS);goog.exportProperty(ol.geom.Geometry.prototype,"getClosestPoint",ol.geom.Geometry.prototype.getClosestPoint);goog.exportProperty(ol.geom.Geometry.prototype,"getExtent",ol.geom.Geometry.prototype.getExtent);goog.exportProperty(ol.geom.Geometry.prototype,"transform",ol.geom.Geometry.prototype.transform);goog.exportSymbol("ol.geom.GeometryCollection",ol.geom.GeometryCollection,OPENLAYERS);goog.exportProperty(ol.geom.GeometryCollection.prototype,"clone",ol.geom.GeometryCollection.prototype.clone);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getGeometries",ol.geom.GeometryCollection.prototype.getGeometries);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getType",ol.geom.GeometryCollection.prototype.getType);goog.exportProperty(ol.geom.GeometryCollection.prototype,"intersectsExtent",ol.geom.GeometryCollection.prototype.intersectsExtent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"setGeometries",ol.geom.GeometryCollection.prototype.setGeometries);goog.exportProperty(ol.geom.GeometryCollection.prototype,"applyTransform",ol.geom.GeometryCollection.prototype.applyTransform);goog.exportProperty(ol.geom.GeometryCollection.prototype,"translate",ol.geom.GeometryCollection.prototype.translate);goog.exportSymbol("ol.geom.LinearRing",ol.geom.LinearRing,OPENLAYERS);goog.exportProperty(ol.geom.LinearRing.prototype,"clone",ol.geom.LinearRing.prototype.clone);goog.exportProperty(ol.geom.LinearRing.prototype,"getArea",ol.geom.LinearRing.prototype.getArea);goog.exportProperty(ol.geom.LinearRing.prototype,"getCoordinates",ol.geom.LinearRing.prototype.getCoordinates);goog.exportProperty(ol.geom.LinearRing.prototype,"getType",ol.geom.LinearRing.prototype.getType);goog.exportProperty(ol.geom.LinearRing.prototype,"setCoordinates",ol.geom.LinearRing.prototype.setCoordinates);goog.exportSymbol("ol.geom.LineString",ol.geom.LineString,OPENLAYERS);goog.exportProperty(ol.geom.LineString.prototype,"appendCoordinate",ol.geom.LineString.prototype.appendCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"clone",ol.geom.LineString.prototype.clone);goog.exportProperty(ol.geom.LineString.prototype,"forEachSegment",ol.geom.LineString.prototype.forEachSegment);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinateAtM",ol.geom.LineString.prototype.getCoordinateAtM);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinates",ol.geom.LineString.prototype.getCoordinates);goog.exportProperty(ol.geom.LineString.prototype,"getLength",ol.geom.LineString.prototype.getLength);goog.exportProperty(ol.geom.LineString.prototype,"getType",ol.geom.LineString.prototype.getType);goog.exportProperty(ol.geom.LineString.prototype,"intersectsExtent",ol.geom.LineString.prototype.intersectsExtent);goog.exportProperty(ol.geom.LineString.prototype,"setCoordinates",ol.geom.LineString.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiLineString",ol.geom.MultiLineString,OPENLAYERS);goog.exportProperty(ol.geom.MultiLineString.prototype,"appendLineString",ol.geom.MultiLineString.prototype.appendLineString);goog.exportProperty(ol.geom.MultiLineString.prototype,"clone",ol.geom.MultiLineString.prototype.clone);goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinateAtM",ol.geom.MultiLineString.prototype.getCoordinateAtM);goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinates",ol.geom.MultiLineString.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineString",ol.geom.MultiLineString.prototype.getLineString);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineStrings",ol.geom.MultiLineString.prototype.getLineStrings);goog.exportProperty(ol.geom.MultiLineString.prototype,"getType",ol.geom.MultiLineString.prototype.getType);goog.exportProperty(ol.geom.MultiLineString.prototype,"intersectsExtent",ol.geom.MultiLineString.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiLineString.prototype,"setCoordinates",ol.geom.MultiLineString.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiPoint",ol.geom.MultiPoint,OPENLAYERS);goog.exportProperty(ol.geom.MultiPoint.prototype,"appendPoint",ol.geom.MultiPoint.prototype.appendPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"clone",ol.geom.MultiPoint.prototype.clone);goog.exportProperty(ol.geom.MultiPoint.prototype,"getCoordinates",ol.geom.MultiPoint.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoint",ol.geom.MultiPoint.prototype.getPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoints",ol.geom.MultiPoint.prototype.getPoints);goog.exportProperty(ol.geom.MultiPoint.prototype,"getType",ol.geom.MultiPoint.prototype.getType);goog.exportProperty(ol.geom.MultiPoint.prototype,"intersectsExtent",ol.geom.MultiPoint.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiPoint.prototype,"setCoordinates",ol.geom.MultiPoint.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiPolygon",ol.geom.MultiPolygon,OPENLAYERS);goog.exportProperty(ol.geom.MultiPolygon.prototype,"appendPolygon",ol.geom.MultiPolygon.prototype.appendPolygon);goog.exportProperty(ol.geom.MultiPolygon.prototype,"clone",ol.geom.MultiPolygon.prototype.clone);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getArea",ol.geom.MultiPolygon.prototype.getArea);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getCoordinates",ol.geom.MultiPolygon.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getInteriorPoints",ol.geom.MultiPolygon.prototype.getInteriorPoints);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygon",ol.geom.MultiPolygon.prototype.getPolygon);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygons",ol.geom.MultiPolygon.prototype.getPolygons);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getType",ol.geom.MultiPolygon.prototype.getType);goog.exportProperty(ol.geom.MultiPolygon.prototype,"intersectsExtent",ol.geom.MultiPolygon.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"setCoordinates",ol.geom.MultiPolygon.prototype.setCoordinates);goog.exportSymbol("ol.geom.Point",ol.geom.Point,OPENLAYERS);goog.exportProperty(ol.geom.Point.prototype,"clone",ol.geom.Point.prototype.clone);goog.exportProperty(ol.geom.Point.prototype,"getCoordinates",ol.geom.Point.prototype.getCoordinates);goog.exportProperty(ol.geom.Point.prototype,"getType",ol.geom.Point.prototype.getType);goog.exportProperty(ol.geom.Point.prototype,"intersectsExtent",ol.geom.Point.prototype.intersectsExtent);goog.exportProperty(ol.geom.Point.prototype,"setCoordinates",ol.geom.Point.prototype.setCoordinates);goog.exportSymbol("ol.geom.Polygon",ol.geom.Polygon,OPENLAYERS);goog.exportProperty(ol.geom.Polygon.prototype,"appendLinearRing",ol.geom.Polygon.prototype.appendLinearRing);goog.exportProperty(ol.geom.Polygon.prototype,"clone",ol.geom.Polygon.prototype.clone);goog.exportProperty(ol.geom.Polygon.prototype,"getArea",ol.geom.Polygon.prototype.getArea);goog.exportProperty(ol.geom.Polygon.prototype,"getCoordinates",ol.geom.Polygon.prototype.getCoordinates);goog.exportProperty(ol.geom.Polygon.prototype,"getInteriorPoint",ol.geom.Polygon.prototype.getInteriorPoint);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRingCount",ol.geom.Polygon.prototype.getLinearRingCount);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRing",ol.geom.Polygon.prototype.getLinearRing);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRings",ol.geom.Polygon.prototype.getLinearRings);goog.exportProperty(ol.geom.Polygon.prototype,"getType",ol.geom.Polygon.prototype.getType);goog.exportProperty(ol.geom.Polygon.prototype,"intersectsExtent",ol.geom.Polygon.prototype.intersectsExtent);goog.exportProperty(ol.geom.Polygon.prototype,"setCoordinates",ol.geom.Polygon.prototype.setCoordinates);goog.exportSymbol("ol.geom.Polygon.circular",ol.geom.Polygon.circular,OPENLAYERS);goog.exportSymbol("ol.geom.Polygon.fromExtent",ol.geom.Polygon.fromExtent,OPENLAYERS);goog.exportSymbol("ol.geom.Polygon.fromCircle",ol.geom.Polygon.fromCircle,OPENLAYERS);goog.exportSymbol("ol.geom.SimpleGeometry",ol.geom.SimpleGeometry,OPENLAYERS);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getFirstCoordinate",ol.geom.SimpleGeometry.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLastCoordinate",ol.geom.SimpleGeometry.prototype.getLastCoordinate);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLayout",ol.geom.SimpleGeometry.prototype.getLayout);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"applyTransform",ol.geom.SimpleGeometry.prototype.applyTransform);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"translate",ol.geom.SimpleGeometry.prototype.translate);goog.exportSymbol("ol.format.EsriJSON",ol.format.EsriJSON,OPENLAYERS);goog.exportProperty(ol.format.EsriJSON.prototype,"readFeature",ol.format.EsriJSON.prototype.readFeature);goog.exportProperty(ol.format.EsriJSON.prototype,"readFeatures",ol.format.EsriJSON.prototype.readFeatures);goog.exportProperty(ol.format.EsriJSON.prototype,"readGeometry",ol.format.EsriJSON.prototype.readGeometry);goog.exportProperty(ol.format.EsriJSON.prototype,"readProjection",ol.format.EsriJSON.prototype.readProjection);goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometry",ol.format.EsriJSON.prototype.writeGeometry);goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometryObject",ol.format.EsriJSON.prototype.writeGeometryObject);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeature",ol.format.EsriJSON.prototype.writeFeature);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatureObject",ol.format.EsriJSON.prototype.writeFeatureObject);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatures",ol.format.EsriJSON.prototype.writeFeatures);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeaturesObject",ol.format.EsriJSON.prototype.writeFeaturesObject);goog.exportSymbol("ol.format.Feature",ol.format.Feature,OPENLAYERS);goog.exportSymbol("ol.format.GeoJSON",ol.format.GeoJSON,OPENLAYERS);goog.exportProperty(ol.format.GeoJSON.prototype,"readFeature",ol.format.GeoJSON.prototype.readFeature);goog.exportProperty(ol.format.GeoJSON.prototype,"readFeatures",ol.format.GeoJSON.prototype.readFeatures);goog.exportProperty(ol.format.GeoJSON.prototype,"readGeometry",ol.format.GeoJSON.prototype.readGeometry);goog.exportProperty(ol.format.GeoJSON.prototype,"readProjection",ol.format.GeoJSON.prototype.readProjection);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeature",ol.format.GeoJSON.prototype.writeFeature);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatureObject",ol.format.GeoJSON.prototype.writeFeatureObject);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatures",ol.format.GeoJSON.prototype.writeFeatures);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeaturesObject",ol.format.GeoJSON.prototype.writeFeaturesObject);goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometry",ol.format.GeoJSON.prototype.writeGeometry);goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometryObject",ol.format.GeoJSON.prototype.writeGeometryObject);goog.exportSymbol("ol.format.GPX",ol.format.GPX,OPENLAYERS);goog.exportProperty(ol.format.GPX.prototype,"readFeature",ol.format.GPX.prototype.readFeature);goog.exportProperty(ol.format.GPX.prototype,"readFeatures",ol.format.GPX.prototype.readFeatures);goog.exportProperty(ol.format.GPX.prototype,"readProjection",ol.format.GPX.prototype.readProjection);goog.exportProperty(ol.format.GPX.prototype,"writeFeatures",ol.format.GPX.prototype.writeFeatures);goog.exportProperty(ol.format.GPX.prototype,"writeFeaturesNode",ol.format.GPX.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.IGC",ol.format.IGC,OPENLAYERS);goog.exportProperty(ol.format.IGC.prototype,"readFeature",ol.format.IGC.prototype.readFeature);goog.exportProperty(ol.format.IGC.prototype,"readFeatures",ol.format.IGC.prototype.readFeatures);goog.exportProperty(ol.format.IGC.prototype,"readProjection",ol.format.IGC.prototype.readProjection);goog.exportSymbol("ol.format.KML",ol.format.KML,OPENLAYERS);goog.exportProperty(ol.format.KML.prototype,"readFeature",ol.format.KML.prototype.readFeature);goog.exportProperty(ol.format.KML.prototype,"readFeatures",ol.format.KML.prototype.readFeatures);goog.exportProperty(ol.format.KML.prototype,"readName",ol.format.KML.prototype.readName);goog.exportProperty(ol.format.KML.prototype,"readNetworkLinks",ol.format.KML.prototype.readNetworkLinks);goog.exportProperty(ol.format.KML.prototype,"readProjection",ol.format.KML.prototype.readProjection);goog.exportProperty(ol.format.KML.prototype,"writeFeatures",ol.format.KML.prototype.writeFeatures);goog.exportProperty(ol.format.KML.prototype,"writeFeaturesNode",ol.format.KML.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.OSMXML",ol.format.OSMXML,OPENLAYERS);goog.exportProperty(ol.format.OSMXML.prototype,"readFeatures",ol.format.OSMXML.prototype.readFeatures);goog.exportProperty(ol.format.OSMXML.prototype,"readProjection",ol.format.OSMXML.prototype.readProjection);goog.exportSymbol("ol.format.Polyline",ol.format.Polyline,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.encodeDeltas",ol.format.Polyline.encodeDeltas,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.decodeDeltas",ol.format.Polyline.decodeDeltas,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.encodeFloats",ol.format.Polyline.encodeFloats,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.decodeFloats",ol.format.Polyline.decodeFloats,OPENLAYERS);goog.exportProperty(ol.format.Polyline.prototype,"readFeature",ol.format.Polyline.prototype.readFeature);goog.exportProperty(ol.format.Polyline.prototype,"readFeatures",ol.format.Polyline.prototype.readFeatures);goog.exportProperty(ol.format.Polyline.prototype,"readGeometry",ol.format.Polyline.prototype.readGeometry);goog.exportProperty(ol.format.Polyline.prototype,"readProjection",ol.format.Polyline.prototype.readProjection);goog.exportProperty(ol.format.Polyline.prototype,"writeGeometry",ol.format.Polyline.prototype.writeGeometry);goog.exportSymbol("ol.format.TopoJSON",ol.format.TopoJSON,OPENLAYERS);goog.exportProperty(ol.format.TopoJSON.prototype,"readFeatures",ol.format.TopoJSON.prototype.readFeatures);goog.exportProperty(ol.format.TopoJSON.prototype,"readProjection",ol.format.TopoJSON.prototype.readProjection);goog.exportSymbol("ol.format.WFS",ol.format.WFS,OPENLAYERS);goog.exportProperty(ol.format.WFS.prototype,"readFeatures",ol.format.WFS.prototype.readFeatures);goog.exportProperty(ol.format.WFS.prototype,"readTransactionResponse",ol.format.WFS.prototype.readTransactionResponse);goog.exportProperty(ol.format.WFS.prototype,"readFeatureCollectionMetadata",ol.format.WFS.prototype.readFeatureCollectionMetadata);goog.exportProperty(ol.format.WFS.prototype,"writeGetFeature",ol.format.WFS.prototype.writeGetFeature);goog.exportProperty(ol.format.WFS.prototype,"writeTransaction",ol.format.WFS.prototype.writeTransaction);goog.exportProperty(ol.format.WFS.prototype,"readProjection",ol.format.WFS.prototype.readProjection);goog.exportSymbol("ol.format.WKT",ol.format.WKT,OPENLAYERS);goog.exportProperty(ol.format.WKT.prototype,"readFeature",ol.format.WKT.prototype.readFeature);goog.exportProperty(ol.format.WKT.prototype,"readFeatures",ol.format.WKT.prototype.readFeatures);goog.exportProperty(ol.format.WKT.prototype,"readGeometry",ol.format.WKT.prototype.readGeometry);goog.exportProperty(ol.format.WKT.prototype,"writeFeature",ol.format.WKT.prototype.writeFeature);goog.exportProperty(ol.format.WKT.prototype,"writeFeatures",ol.format.WKT.prototype.writeFeatures);goog.exportProperty(ol.format.WKT.prototype,"writeGeometry",ol.format.WKT.prototype.writeGeometry);goog.exportSymbol("ol.format.WMSCapabilities",ol.format.WMSCapabilities,OPENLAYERS);goog.exportProperty(ol.format.WMSCapabilities.prototype,"read",ol.format.WMSCapabilities.prototype.read);goog.exportSymbol("ol.format.WMSGetFeatureInfo",ol.format.WMSGetFeatureInfo,OPENLAYERS);goog.exportProperty(ol.format.WMSGetFeatureInfo.prototype,"readFeatures",ol.format.WMSGetFeatureInfo.prototype.readFeatures);goog.exportSymbol("ol.format.WMTSCapabilities",ol.format.WMTSCapabilities,OPENLAYERS);goog.exportProperty(ol.format.WMTSCapabilities.prototype,"read",ol.format.WMTSCapabilities.prototype.read);goog.exportSymbol("ol.format.GML2",ol.format.GML2,OPENLAYERS);goog.exportSymbol("ol.format.GML3",ol.format.GML3,OPENLAYERS);goog.exportProperty(ol.format.GML3.prototype,"writeGeometryNode",ol.format.GML3.prototype.writeGeometryNode);goog.exportProperty(ol.format.GML3.prototype,"writeFeatures",ol.format.GML3.prototype.writeFeatures);goog.exportProperty(ol.format.GML3.prototype,"writeFeaturesNode",ol.format.GML3.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.GML",ol.format.GML,OPENLAYERS);goog.exportProperty(ol.format.GML.prototype,"writeFeatures",ol.format.GML.prototype.writeFeatures);goog.exportProperty(ol.format.GML.prototype,"writeFeaturesNode",ol.format.GML.prototype.writeFeaturesNode);goog.exportProperty(ol.format.GMLBase.prototype,"readFeatures",ol.format.GMLBase.prototype.readFeatures);goog.exportSymbol("ol.events.condition.altKeyOnly",ol.events.condition.altKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.altShiftKeysOnly",ol.events.condition.altShiftKeysOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.always",ol.events.condition.always,OPENLAYERS);goog.exportSymbol("ol.events.condition.click",ol.events.condition.click,OPENLAYERS);goog.exportSymbol("ol.events.condition.never",ol.events.condition.never,OPENLAYERS);goog.exportSymbol("ol.events.condition.pointerMove",ol.events.condition.pointerMove,OPENLAYERS);goog.exportSymbol("ol.events.condition.singleClick",ol.events.condition.singleClick,OPENLAYERS);goog.exportSymbol("ol.events.condition.doubleClick",ol.events.condition.doubleClick,OPENLAYERS);goog.exportSymbol("ol.events.condition.noModifierKeys",ol.events.condition.noModifierKeys,OPENLAYERS);goog.exportSymbol("ol.events.condition.platformModifierKeyOnly",ol.events.condition.platformModifierKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.shiftKeyOnly",ol.events.condition.shiftKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.targetNotEditable",ol.events.condition.targetNotEditable,OPENLAYERS);goog.exportSymbol("ol.events.condition.mouseOnly",ol.events.condition.mouseOnly,OPENLAYERS);goog.exportSymbol("ol.control.Attribution",ol.control.Attribution,OPENLAYERS);goog.exportSymbol("ol.control.Attribution.render",ol.control.Attribution.render,OPENLAYERS);goog.exportProperty(ol.control.Attribution.prototype,"getCollapsible",ol.control.Attribution.prototype.getCollapsible);goog.exportProperty(ol.control.Attribution.prototype,"setCollapsible",ol.control.Attribution.prototype.setCollapsible);goog.exportProperty(ol.control.Attribution.prototype,"setCollapsed",ol.control.Attribution.prototype.setCollapsed);goog.exportProperty(ol.control.Attribution.prototype,"getCollapsed",ol.control.Attribution.prototype.getCollapsed);goog.exportSymbol("ol.control.Control",ol.control.Control,OPENLAYERS);goog.exportProperty(ol.control.Control.prototype,"getMap",ol.control.Control.prototype.getMap);goog.exportProperty(ol.control.Control.prototype,"setMap",ol.control.Control.prototype.setMap);goog.exportProperty(ol.control.Control.prototype,"setTarget",ol.control.Control.prototype.setTarget);goog.exportSymbol("ol.control.defaults",ol.control.defaults,OPENLAYERS);goog.exportSymbol("ol.control.FullScreen",ol.control.FullScreen,OPENLAYERS);goog.exportSymbol("ol.control.MousePosition",ol.control.MousePosition,OPENLAYERS);goog.exportSymbol("ol.control.MousePosition.render",ol.control.MousePosition.render,OPENLAYERS);goog.exportProperty(ol.control.MousePosition.prototype,"getCoordinateFormat",ol.control.MousePosition.prototype.getCoordinateFormat);goog.exportProperty(ol.control.MousePosition.prototype,"getProjection",ol.control.MousePosition.prototype.getProjection);goog.exportProperty(ol.control.MousePosition.prototype,"setCoordinateFormat",ol.control.MousePosition.prototype.setCoordinateFormat);goog.exportProperty(ol.control.MousePosition.prototype,"setProjection",ol.control.MousePosition.prototype.setProjection);goog.exportSymbol("ol.control.OverviewMap",ol.control.OverviewMap,OPENLAYERS);goog.exportSymbol("ol.control.OverviewMap.render",ol.control.OverviewMap.render,OPENLAYERS);goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsible",ol.control.OverviewMap.prototype.getCollapsible);goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsible",ol.control.OverviewMap.prototype.setCollapsible);goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsed",ol.control.OverviewMap.prototype.setCollapsed);goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsed",ol.control.OverviewMap.prototype.getCollapsed);goog.exportSymbol("ol.control.Rotate",ol.control.Rotate,OPENLAYERS);goog.exportSymbol("ol.control.Rotate.render",ol.control.Rotate.render,OPENLAYERS);goog.exportSymbol("ol.control.ScaleLine",ol.control.ScaleLine,OPENLAYERS);goog.exportProperty(ol.control.ScaleLine.prototype,"getUnits",ol.control.ScaleLine.prototype.getUnits);goog.exportSymbol("ol.control.ScaleLine.render",ol.control.ScaleLine.render,OPENLAYERS);goog.exportProperty(ol.control.ScaleLine.prototype,"setUnits",ol.control.ScaleLine.prototype.setUnits);goog.exportSymbol("ol.control.Zoom",ol.control.Zoom,OPENLAYERS);goog.exportSymbol("ol.control.ZoomSlider",ol.control.ZoomSlider,OPENLAYERS);goog.exportSymbol("ol.control.ZoomSlider.render",ol.control.ZoomSlider.render,OPENLAYERS);goog.exportSymbol("ol.control.ZoomToExtent",ol.control.ZoomToExtent,OPENLAYERS);goog.exportSymbol("ol.color.asArray",ol.color.asArray,OPENLAYERS);goog.exportSymbol("ol.color.asString",ol.color.asString,OPENLAYERS);goog.exportProperty(ol.Object.prototype,"changed",ol.Object.prototype.changed);goog.exportProperty(ol.Object.prototype,"getRevision",ol.Object.prototype.getRevision);goog.exportProperty(ol.Object.prototype,"on",ol.Object.prototype.on);goog.exportProperty(ol.Object.prototype,"once",ol.Object.prototype.once);goog.exportProperty(ol.Object.prototype,"un",ol.Object.prototype.un);goog.exportProperty(ol.Object.prototype,"unByKey",ol.Object.prototype.unByKey);goog.exportProperty(ol.Collection.prototype,"get",ol.Collection.prototype.get);goog.exportProperty(ol.Collection.prototype,"getKeys",ol.Collection.prototype.getKeys);goog.exportProperty(ol.Collection.prototype,"getProperties",ol.Collection.prototype.getProperties);goog.exportProperty(ol.Collection.prototype,"set",ol.Collection.prototype.set);goog.exportProperty(ol.Collection.prototype,"setProperties",ol.Collection.prototype.setProperties);goog.exportProperty(ol.Collection.prototype,"unset",ol.Collection.prototype.unset);goog.exportProperty(ol.Collection.prototype,"changed",ol.Collection.prototype.changed);goog.exportProperty(ol.Collection.prototype,"getRevision",ol.Collection.prototype.getRevision);goog.exportProperty(ol.Collection.prototype,"on",ol.Collection.prototype.on);goog.exportProperty(ol.Collection.prototype,"once",ol.Collection.prototype.once);goog.exportProperty(ol.Collection.prototype,"un",ol.Collection.prototype.un);goog.exportProperty(ol.Collection.prototype,"unByKey",ol.Collection.prototype.unByKey);goog.exportProperty(ol.DeviceOrientation.prototype,"get",ol.DeviceOrientation.prototype.get);goog.exportProperty(ol.DeviceOrientation.prototype,"getKeys",ol.DeviceOrientation.prototype.getKeys);goog.exportProperty(ol.DeviceOrientation.prototype,"getProperties",ol.DeviceOrientation.prototype.getProperties);goog.exportProperty(ol.DeviceOrientation.prototype,"set",ol.DeviceOrientation.prototype.set);goog.exportProperty(ol.DeviceOrientation.prototype,"setProperties",ol.DeviceOrientation.prototype.setProperties);goog.exportProperty(ol.DeviceOrientation.prototype,"unset",ol.DeviceOrientation.prototype.unset);goog.exportProperty(ol.DeviceOrientation.prototype,"changed",ol.DeviceOrientation.prototype.changed);goog.exportProperty(ol.DeviceOrientation.prototype,"getRevision",ol.DeviceOrientation.prototype.getRevision);goog.exportProperty(ol.DeviceOrientation.prototype,"on",ol.DeviceOrientation.prototype.on);goog.exportProperty(ol.DeviceOrientation.prototype,"once",ol.DeviceOrientation.prototype.once);goog.exportProperty(ol.DeviceOrientation.prototype,"un",ol.DeviceOrientation.prototype.un);goog.exportProperty(ol.DeviceOrientation.prototype,"unByKey",ol.DeviceOrientation.prototype.unByKey);goog.exportProperty(ol.Feature.prototype,"get",ol.Feature.prototype.get);goog.exportProperty(ol.Feature.prototype,"getKeys",ol.Feature.prototype.getKeys);goog.exportProperty(ol.Feature.prototype,"getProperties",ol.Feature.prototype.getProperties);goog.exportProperty(ol.Feature.prototype,"set",ol.Feature.prototype.set);goog.exportProperty(ol.Feature.prototype,"setProperties",ol.Feature.prototype.setProperties);goog.exportProperty(ol.Feature.prototype,"unset",ol.Feature.prototype.unset);goog.exportProperty(ol.Feature.prototype,"changed",ol.Feature.prototype.changed);goog.exportProperty(ol.Feature.prototype,"getRevision",ol.Feature.prototype.getRevision);goog.exportProperty(ol.Feature.prototype,"on",ol.Feature.prototype.on);goog.exportProperty(ol.Feature.prototype,"once",ol.Feature.prototype.once);goog.exportProperty(ol.Feature.prototype,"un",ol.Feature.prototype.un);goog.exportProperty(ol.Feature.prototype,"unByKey",ol.Feature.prototype.unByKey);goog.exportProperty(ol.Geolocation.prototype,"get",ol.Geolocation.prototype.get);goog.exportProperty(ol.Geolocation.prototype,"getKeys",ol.Geolocation.prototype.getKeys);goog.exportProperty(ol.Geolocation.prototype,"getProperties",ol.Geolocation.prototype.getProperties);goog.exportProperty(ol.Geolocation.prototype,"set",ol.Geolocation.prototype.set);goog.exportProperty(ol.Geolocation.prototype,"setProperties",ol.Geolocation.prototype.setProperties);goog.exportProperty(ol.Geolocation.prototype,"unset",ol.Geolocation.prototype.unset);goog.exportProperty(ol.Geolocation.prototype,"changed",ol.Geolocation.prototype.changed);goog.exportProperty(ol.Geolocation.prototype,"getRevision",ol.Geolocation.prototype.getRevision);goog.exportProperty(ol.Geolocation.prototype,"on",ol.Geolocation.prototype.on);goog.exportProperty(ol.Geolocation.prototype,"once",ol.Geolocation.prototype.once);goog.exportProperty(ol.Geolocation.prototype,"un",ol.Geolocation.prototype.un);goog.exportProperty(ol.Geolocation.prototype,"unByKey",ol.Geolocation.prototype.unByKey);goog.exportProperty(ol.ImageTile.prototype,"getTileCoord",ol.ImageTile.prototype.getTileCoord);goog.exportProperty(ol.Map.prototype,"get",ol.Map.prototype.get);goog.exportProperty(ol.Map.prototype,"getKeys",ol.Map.prototype.getKeys);goog.exportProperty(ol.Map.prototype,"getProperties",ol.Map.prototype.getProperties);goog.exportProperty(ol.Map.prototype,"set",ol.Map.prototype.set);goog.exportProperty(ol.Map.prototype,"setProperties",ol.Map.prototype.setProperties);goog.exportProperty(ol.Map.prototype,"unset",ol.Map.prototype.unset);goog.exportProperty(ol.Map.prototype,"changed",ol.Map.prototype.changed);goog.exportProperty(ol.Map.prototype,"getRevision",ol.Map.prototype.getRevision);goog.exportProperty(ol.Map.prototype,"on",ol.Map.prototype.on);goog.exportProperty(ol.Map.prototype,"once",ol.Map.prototype.once);goog.exportProperty(ol.Map.prototype,"un",ol.Map.prototype.un);goog.exportProperty(ol.Map.prototype,"unByKey",ol.Map.prototype.unByKey);goog.exportProperty(ol.MapBrowserEvent.prototype,"map",ol.MapBrowserEvent.prototype.map);goog.exportProperty(ol.MapBrowserEvent.prototype,"frameState",ol.MapBrowserEvent.prototype.frameState);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"originalEvent",ol.MapBrowserPointerEvent.prototype.originalEvent);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"pixel",ol.MapBrowserPointerEvent.prototype.pixel);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"coordinate",ol.MapBrowserPointerEvent.prototype.coordinate);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"dragging",ol.MapBrowserPointerEvent.prototype.dragging);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"preventDefault",ol.MapBrowserPointerEvent.prototype.preventDefault);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"stopPropagation",ol.MapBrowserPointerEvent.prototype.stopPropagation);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"map",ol.MapBrowserPointerEvent.prototype.map);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"frameState",ol.MapBrowserPointerEvent.prototype.frameState);goog.exportProperty(ol.Overlay.prototype,"get",ol.Overlay.prototype.get);goog.exportProperty(ol.Overlay.prototype,"getKeys",ol.Overlay.prototype.getKeys);goog.exportProperty(ol.Overlay.prototype,"getProperties",ol.Overlay.prototype.getProperties);goog.exportProperty(ol.Overlay.prototype,"set",ol.Overlay.prototype.set);goog.exportProperty(ol.Overlay.prototype,"setProperties",ol.Overlay.prototype.setProperties);goog.exportProperty(ol.Overlay.prototype,"unset",ol.Overlay.prototype.unset);goog.exportProperty(ol.Overlay.prototype,"changed",ol.Overlay.prototype.changed);goog.exportProperty(ol.Overlay.prototype,"getRevision",ol.Overlay.prototype.getRevision);goog.exportProperty(ol.Overlay.prototype,"on",ol.Overlay.prototype.on);goog.exportProperty(ol.Overlay.prototype,"once",ol.Overlay.prototype.once);goog.exportProperty(ol.Overlay.prototype,"un",ol.Overlay.prototype.un);goog.exportProperty(ol.Overlay.prototype,"unByKey",ol.Overlay.prototype.unByKey);goog.exportProperty(ol.View.prototype,"get",ol.View.prototype.get);goog.exportProperty(ol.View.prototype,"getKeys",ol.View.prototype.getKeys);goog.exportProperty(ol.View.prototype,"getProperties",ol.View.prototype.getProperties);goog.exportProperty(ol.View.prototype,"set",ol.View.prototype.set);goog.exportProperty(ol.View.prototype,"setProperties",ol.View.prototype.setProperties);goog.exportProperty(ol.View.prototype,"unset",ol.View.prototype.unset);goog.exportProperty(ol.View.prototype,"changed",ol.View.prototype.changed);goog.exportProperty(ol.View.prototype,"getRevision",ol.View.prototype.getRevision);goog.exportProperty(ol.View.prototype,"on",ol.View.prototype.on);goog.exportProperty(ol.View.prototype,"once",ol.View.prototype.once);goog.exportProperty(ol.View.prototype,"un",ol.View.prototype.un);goog.exportProperty(ol.View.prototype,"unByKey",ol.View.prototype.unByKey);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMaxZoom",ol.tilegrid.WMTS.prototype.getMaxZoom);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMinZoom",ol.tilegrid.WMTS.prototype.getMinZoom);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getOrigin",ol.tilegrid.WMTS.prototype.getOrigin);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolution",ol.tilegrid.WMTS.prototype.getResolution);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolutions",ol.tilegrid.WMTS.prototype.getResolutions);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndResolution);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndZ);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileSize",ol.tilegrid.WMTS.prototype.getTileSize);goog.exportProperty(ol.style.Circle.prototype,"getOpacity",ol.style.Circle.prototype.getOpacity);goog.exportProperty(ol.style.Circle.prototype,"getRotateWithView",ol.style.Circle.prototype.getRotateWithView);goog.exportProperty(ol.style.Circle.prototype,"getRotation",ol.style.Circle.prototype.getRotation);goog.exportProperty(ol.style.Circle.prototype,"getScale",ol.style.Circle.prototype.getScale);goog.exportProperty(ol.style.Circle.prototype,"getSnapToPixel",ol.style.Circle.prototype.getSnapToPixel);goog.exportProperty(ol.style.Circle.prototype,"setOpacity",ol.style.Circle.prototype.setOpacity);goog.exportProperty(ol.style.Circle.prototype,"setRotation",ol.style.Circle.prototype.setRotation);goog.exportProperty(ol.style.Circle.prototype,"setScale",ol.style.Circle.prototype.setScale);goog.exportProperty(ol.style.Icon.prototype,"getOpacity",ol.style.Icon.prototype.getOpacity);goog.exportProperty(ol.style.Icon.prototype,"getRotateWithView",ol.style.Icon.prototype.getRotateWithView);goog.exportProperty(ol.style.Icon.prototype,"getRotation",ol.style.Icon.prototype.getRotation);goog.exportProperty(ol.style.Icon.prototype,"getScale",ol.style.Icon.prototype.getScale);goog.exportProperty(ol.style.Icon.prototype,"getSnapToPixel",ol.style.Icon.prototype.getSnapToPixel);goog.exportProperty(ol.style.Icon.prototype,"setOpacity",ol.style.Icon.prototype.setOpacity);goog.exportProperty(ol.style.Icon.prototype,"setRotation",ol.style.Icon.prototype.setRotation);goog.exportProperty(ol.style.Icon.prototype,"setScale",ol.style.Icon.prototype.setScale);goog.exportProperty(ol.style.RegularShape.prototype,"getOpacity",ol.style.RegularShape.prototype.getOpacity);goog.exportProperty(ol.style.RegularShape.prototype,"getRotateWithView",ol.style.RegularShape.prototype.getRotateWithView);goog.exportProperty(ol.style.RegularShape.prototype,"getRotation",ol.style.RegularShape.prototype.getRotation);goog.exportProperty(ol.style.RegularShape.prototype,"getScale",ol.style.RegularShape.prototype.getScale);goog.exportProperty(ol.style.RegularShape.prototype,"getSnapToPixel",ol.style.RegularShape.prototype.getSnapToPixel);goog.exportProperty(ol.style.RegularShape.prototype,"setOpacity",ol.style.RegularShape.prototype.setOpacity);goog.exportProperty(ol.style.RegularShape.prototype,"setRotation",ol.style.RegularShape.prototype.setRotation);goog.exportProperty(ol.style.RegularShape.prototype,"setScale",ol.style.RegularShape.prototype.setScale);goog.exportProperty(ol.source.Source.prototype,"get",ol.source.Source.prototype.get);goog.exportProperty(ol.source.Source.prototype,"getKeys",ol.source.Source.prototype.getKeys);goog.exportProperty(ol.source.Source.prototype,"getProperties",ol.source.Source.prototype.getProperties);goog.exportProperty(ol.source.Source.prototype,"set",ol.source.Source.prototype.set);goog.exportProperty(ol.source.Source.prototype,"setProperties",ol.source.Source.prototype.setProperties);goog.exportProperty(ol.source.Source.prototype,"unset",ol.source.Source.prototype.unset);goog.exportProperty(ol.source.Source.prototype,"changed",ol.source.Source.prototype.changed);goog.exportProperty(ol.source.Source.prototype,"getRevision",ol.source.Source.prototype.getRevision);goog.exportProperty(ol.source.Source.prototype,"on",ol.source.Source.prototype.on);goog.exportProperty(ol.source.Source.prototype,"once",ol.source.Source.prototype.once);goog.exportProperty(ol.source.Source.prototype,"un",ol.source.Source.prototype.un);goog.exportProperty(ol.source.Source.prototype,"unByKey",ol.source.Source.prototype.unByKey);goog.exportProperty(ol.source.Tile.prototype,"getAttributions",ol.source.Tile.prototype.getAttributions);goog.exportProperty(ol.source.Tile.prototype,"getLogo",ol.source.Tile.prototype.getLogo);goog.exportProperty(ol.source.Tile.prototype,"getProjection",ol.source.Tile.prototype.getProjection);goog.exportProperty(ol.source.Tile.prototype,"getState",ol.source.Tile.prototype.getState);goog.exportProperty(ol.source.Tile.prototype,"setAttributions",ol.source.Tile.prototype.setAttributions);goog.exportProperty(ol.source.Tile.prototype,"get",ol.source.Tile.prototype.get);goog.exportProperty(ol.source.Tile.prototype,"getKeys",ol.source.Tile.prototype.getKeys);goog.exportProperty(ol.source.Tile.prototype,"getProperties",ol.source.Tile.prototype.getProperties);goog.exportProperty(ol.source.Tile.prototype,"set",ol.source.Tile.prototype.set);goog.exportProperty(ol.source.Tile.prototype,"setProperties",ol.source.Tile.prototype.setProperties);goog.exportProperty(ol.source.Tile.prototype,"unset",ol.source.Tile.prototype.unset);goog.exportProperty(ol.source.Tile.prototype,"changed",ol.source.Tile.prototype.changed);goog.exportProperty(ol.source.Tile.prototype,"getRevision",ol.source.Tile.prototype.getRevision);goog.exportProperty(ol.source.Tile.prototype,"on",ol.source.Tile.prototype.on);goog.exportProperty(ol.source.Tile.prototype,"once",ol.source.Tile.prototype.once);goog.exportProperty(ol.source.Tile.prototype,"un",ol.source.Tile.prototype.un);goog.exportProperty(ol.source.Tile.prototype,"unByKey",ol.source.Tile.prototype.unByKey);goog.exportProperty(ol.source.TileImage.prototype,"getTileGrid",ol.source.TileImage.prototype.getTileGrid);goog.exportProperty(ol.source.TileImage.prototype,"getAttributions",ol.source.TileImage.prototype.getAttributions);goog.exportProperty(ol.source.TileImage.prototype,"getLogo",ol.source.TileImage.prototype.getLogo);goog.exportProperty(ol.source.TileImage.prototype,"getProjection",ol.source.TileImage.prototype.getProjection);goog.exportProperty(ol.source.TileImage.prototype,"getState",ol.source.TileImage.prototype.getState);goog.exportProperty(ol.source.TileImage.prototype,"setAttributions",ol.source.TileImage.prototype.setAttributions);goog.exportProperty(ol.source.TileImage.prototype,"get",ol.source.TileImage.prototype.get);goog.exportProperty(ol.source.TileImage.prototype,"getKeys",ol.source.TileImage.prototype.getKeys);goog.exportProperty(ol.source.TileImage.prototype,"getProperties",ol.source.TileImage.prototype.getProperties);goog.exportProperty(ol.source.TileImage.prototype,"set",ol.source.TileImage.prototype.set);goog.exportProperty(ol.source.TileImage.prototype,"setProperties",ol.source.TileImage.prototype.setProperties);goog.exportProperty(ol.source.TileImage.prototype,"unset",ol.source.TileImage.prototype.unset);goog.exportProperty(ol.source.TileImage.prototype,"changed",ol.source.TileImage.prototype.changed);goog.exportProperty(ol.source.TileImage.prototype,"getRevision",ol.source.TileImage.prototype.getRevision);goog.exportProperty(ol.source.TileImage.prototype,"on",ol.source.TileImage.prototype.on);goog.exportProperty(ol.source.TileImage.prototype,"once",ol.source.TileImage.prototype.once);goog.exportProperty(ol.source.TileImage.prototype,"un",ol.source.TileImage.prototype.un);goog.exportProperty(ol.source.TileImage.prototype,"unByKey",ol.source.TileImage.prototype.unByKey);goog.exportProperty(ol.source.BingMaps.prototype,"getTileLoadFunction",ol.source.BingMaps.prototype.getTileLoadFunction);goog.exportProperty(ol.source.BingMaps.prototype,"getTileUrlFunction",ol.source.BingMaps.prototype.getTileUrlFunction);goog.exportProperty(ol.source.BingMaps.prototype,"setTileLoadFunction",ol.source.BingMaps.prototype.setTileLoadFunction);goog.exportProperty(ol.source.BingMaps.prototype,"setTileUrlFunction",ol.source.BingMaps.prototype.setTileUrlFunction);goog.exportProperty(ol.source.BingMaps.prototype,"getTileGrid",ol.source.BingMaps.prototype.getTileGrid);goog.exportProperty(ol.source.BingMaps.prototype,"getAttributions",ol.source.BingMaps.prototype.getAttributions);goog.exportProperty(ol.source.BingMaps.prototype,"getLogo",ol.source.BingMaps.prototype.getLogo);goog.exportProperty(ol.source.BingMaps.prototype,"getProjection",ol.source.BingMaps.prototype.getProjection);goog.exportProperty(ol.source.BingMaps.prototype,"getState",ol.source.BingMaps.prototype.getState);goog.exportProperty(ol.source.BingMaps.prototype,"setAttributions",ol.source.BingMaps.prototype.setAttributions);goog.exportProperty(ol.source.BingMaps.prototype,"get",ol.source.BingMaps.prototype.get);goog.exportProperty(ol.source.BingMaps.prototype,"getKeys",ol.source.BingMaps.prototype.getKeys);goog.exportProperty(ol.source.BingMaps.prototype,"getProperties",ol.source.BingMaps.prototype.getProperties);goog.exportProperty(ol.source.BingMaps.prototype,"set",ol.source.BingMaps.prototype.set);goog.exportProperty(ol.source.BingMaps.prototype,"setProperties",ol.source.BingMaps.prototype.setProperties);goog.exportProperty(ol.source.BingMaps.prototype,"unset",ol.source.BingMaps.prototype.unset);goog.exportProperty(ol.source.BingMaps.prototype,"changed",ol.source.BingMaps.prototype.changed);goog.exportProperty(ol.source.BingMaps.prototype,"getRevision",ol.source.BingMaps.prototype.getRevision);goog.exportProperty(ol.source.BingMaps.prototype,"on",ol.source.BingMaps.prototype.on);goog.exportProperty(ol.source.BingMaps.prototype,"once",ol.source.BingMaps.prototype.once);goog.exportProperty(ol.source.BingMaps.prototype,"un",ol.source.BingMaps.prototype.un);goog.exportProperty(ol.source.BingMaps.prototype,"unByKey",ol.source.BingMaps.prototype.unByKey);goog.exportProperty(ol.source.Vector.prototype,"getAttributions",ol.source.Vector.prototype.getAttributions);goog.exportProperty(ol.source.Vector.prototype,"getLogo",ol.source.Vector.prototype.getLogo);goog.exportProperty(ol.source.Vector.prototype,"getProjection",ol.source.Vector.prototype.getProjection);goog.exportProperty(ol.source.Vector.prototype,"getState",ol.source.Vector.prototype.getState);goog.exportProperty(ol.source.Vector.prototype,"setAttributions",ol.source.Vector.prototype.setAttributions);goog.exportProperty(ol.source.Vector.prototype,"get",ol.source.Vector.prototype.get);goog.exportProperty(ol.source.Vector.prototype,"getKeys",ol.source.Vector.prototype.getKeys);goog.exportProperty(ol.source.Vector.prototype,"getProperties",ol.source.Vector.prototype.getProperties);goog.exportProperty(ol.source.Vector.prototype,"set",ol.source.Vector.prototype.set);goog.exportProperty(ol.source.Vector.prototype,"setProperties",ol.source.Vector.prototype.setProperties);goog.exportProperty(ol.source.Vector.prototype,"unset",ol.source.Vector.prototype.unset);goog.exportProperty(ol.source.Vector.prototype,"changed",ol.source.Vector.prototype.changed);goog.exportProperty(ol.source.Vector.prototype,"getRevision",ol.source.Vector.prototype.getRevision);goog.exportProperty(ol.source.Vector.prototype,"on",ol.source.Vector.prototype.on);goog.exportProperty(ol.source.Vector.prototype,"once",ol.source.Vector.prototype.once);goog.exportProperty(ol.source.Vector.prototype,"un",ol.source.Vector.prototype.un);goog.exportProperty(ol.source.Vector.prototype,"unByKey",ol.source.Vector.prototype.unByKey);goog.exportProperty(ol.source.Cluster.prototype,"addFeature",ol.source.Cluster.prototype.addFeature);goog.exportProperty(ol.source.Cluster.prototype,"addFeatures",ol.source.Cluster.prototype.addFeatures);goog.exportProperty(ol.source.Cluster.prototype,"clear",ol.source.Cluster.prototype.clear);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeature",ol.source.Cluster.prototype.forEachFeature);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureInExtent",ol.source.Cluster.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureIntersectingExtent",ol.source.Cluster.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesCollection",ol.source.Cluster.prototype.getFeaturesCollection);goog.exportProperty(ol.source.Cluster.prototype,"getFeatures",ol.source.Cluster.prototype.getFeatures);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesAtCoordinate",ol.source.Cluster.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesInExtent",ol.source.Cluster.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.Cluster.prototype,"getClosestFeatureToCoordinate",ol.source.Cluster.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.Cluster.prototype,"getExtent",ol.source.Cluster.prototype.getExtent);goog.exportProperty(ol.source.Cluster.prototype,"getFeatureById",ol.source.Cluster.prototype.getFeatureById);goog.exportProperty(ol.source.Cluster.prototype,"removeFeature",ol.source.Cluster.prototype.removeFeature);goog.exportProperty(ol.source.Cluster.prototype,"getAttributions",ol.source.Cluster.prototype.getAttributions);goog.exportProperty(ol.source.Cluster.prototype,"getLogo",ol.source.Cluster.prototype.getLogo);goog.exportProperty(ol.source.Cluster.prototype,"getProjection",ol.source.Cluster.prototype.getProjection);goog.exportProperty(ol.source.Cluster.prototype,"getState",ol.source.Cluster.prototype.getState);goog.exportProperty(ol.source.Cluster.prototype,"setAttributions",ol.source.Cluster.prototype.setAttributions);goog.exportProperty(ol.source.Cluster.prototype,"get",ol.source.Cluster.prototype.get);goog.exportProperty(ol.source.Cluster.prototype,"getKeys",ol.source.Cluster.prototype.getKeys);goog.exportProperty(ol.source.Cluster.prototype,"getProperties",ol.source.Cluster.prototype.getProperties);goog.exportProperty(ol.source.Cluster.prototype,"set",ol.source.Cluster.prototype.set);goog.exportProperty(ol.source.Cluster.prototype,"setProperties",ol.source.Cluster.prototype.setProperties);goog.exportProperty(ol.source.Cluster.prototype,"unset",ol.source.Cluster.prototype.unset);goog.exportProperty(ol.source.Cluster.prototype,"changed",ol.source.Cluster.prototype.changed);goog.exportProperty(ol.source.Cluster.prototype,"getRevision",ol.source.Cluster.prototype.getRevision);goog.exportProperty(ol.source.Cluster.prototype,"on",ol.source.Cluster.prototype.on);goog.exportProperty(ol.source.Cluster.prototype,"once",ol.source.Cluster.prototype.once);goog.exportProperty(ol.source.Cluster.prototype,"un",ol.source.Cluster.prototype.un);goog.exportProperty(ol.source.Cluster.prototype,"unByKey",ol.source.Cluster.prototype.unByKey);goog.exportProperty(ol.source.Image.prototype,"getAttributions",ol.source.Image.prototype.getAttributions);goog.exportProperty(ol.source.Image.prototype,"getLogo",ol.source.Image.prototype.getLogo);goog.exportProperty(ol.source.Image.prototype,"getProjection",ol.source.Image.prototype.getProjection);goog.exportProperty(ol.source.Image.prototype,"getState",ol.source.Image.prototype.getState);goog.exportProperty(ol.source.Image.prototype,"setAttributions",ol.source.Image.prototype.setAttributions);goog.exportProperty(ol.source.Image.prototype,"get",ol.source.Image.prototype.get);goog.exportProperty(ol.source.Image.prototype,"getKeys",ol.source.Image.prototype.getKeys);goog.exportProperty(ol.source.Image.prototype,"getProperties",ol.source.Image.prototype.getProperties);goog.exportProperty(ol.source.Image.prototype,"set",ol.source.Image.prototype.set);goog.exportProperty(ol.source.Image.prototype,"setProperties",ol.source.Image.prototype.setProperties);goog.exportProperty(ol.source.Image.prototype,"unset",ol.source.Image.prototype.unset);goog.exportProperty(ol.source.Image.prototype,"changed",ol.source.Image.prototype.changed);goog.exportProperty(ol.source.Image.prototype,"getRevision",ol.source.Image.prototype.getRevision);goog.exportProperty(ol.source.Image.prototype,"on",ol.source.Image.prototype.on);goog.exportProperty(ol.source.Image.prototype,"once",ol.source.Image.prototype.once);goog.exportProperty(ol.source.Image.prototype,"un",ol.source.Image.prototype.un);goog.exportProperty(ol.source.Image.prototype,"unByKey",ol.source.Image.prototype.unByKey);goog.exportProperty(ol.source.ImageCanvas.prototype,"getAttributions",ol.source.ImageCanvas.prototype.getAttributions);goog.exportProperty(ol.source.ImageCanvas.prototype,"getLogo",ol.source.ImageCanvas.prototype.getLogo);goog.exportProperty(ol.source.ImageCanvas.prototype,"getProjection",ol.source.ImageCanvas.prototype.getProjection);goog.exportProperty(ol.source.ImageCanvas.prototype,"getState",ol.source.ImageCanvas.prototype.getState);goog.exportProperty(ol.source.ImageCanvas.prototype,"setAttributions",ol.source.ImageCanvas.prototype.setAttributions);goog.exportProperty(ol.source.ImageCanvas.prototype,"get",ol.source.ImageCanvas.prototype.get);goog.exportProperty(ol.source.ImageCanvas.prototype,"getKeys",ol.source.ImageCanvas.prototype.getKeys);goog.exportProperty(ol.source.ImageCanvas.prototype,"getProperties",ol.source.ImageCanvas.prototype.getProperties);goog.exportProperty(ol.source.ImageCanvas.prototype,"set",ol.source.ImageCanvas.prototype.set);goog.exportProperty(ol.source.ImageCanvas.prototype,"setProperties",ol.source.ImageCanvas.prototype.setProperties);goog.exportProperty(ol.source.ImageCanvas.prototype,"unset",ol.source.ImageCanvas.prototype.unset);goog.exportProperty(ol.source.ImageCanvas.prototype,"changed",ol.source.ImageCanvas.prototype.changed);goog.exportProperty(ol.source.ImageCanvas.prototype,"getRevision",ol.source.ImageCanvas.prototype.getRevision);goog.exportProperty(ol.source.ImageCanvas.prototype,"on",ol.source.ImageCanvas.prototype.on);goog.exportProperty(ol.source.ImageCanvas.prototype,"once",ol.source.ImageCanvas.prototype.once);goog.exportProperty(ol.source.ImageCanvas.prototype,"un",ol.source.ImageCanvas.prototype.un);goog.exportProperty(ol.source.ImageCanvas.prototype,"unByKey",ol.source.ImageCanvas.prototype.unByKey);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getAttributions",ol.source.ImageMapGuide.prototype.getAttributions);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getLogo",ol.source.ImageMapGuide.prototype.getLogo);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProjection",ol.source.ImageMapGuide.prototype.getProjection);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getState",ol.source.ImageMapGuide.prototype.getState);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setAttributions",ol.source.ImageMapGuide.prototype.setAttributions);goog.exportProperty(ol.source.ImageMapGuide.prototype,"get",ol.source.ImageMapGuide.prototype.get);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getKeys",ol.source.ImageMapGuide.prototype.getKeys);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProperties",ol.source.ImageMapGuide.prototype.getProperties);goog.exportProperty(ol.source.ImageMapGuide.prototype,"set",ol.source.ImageMapGuide.prototype.set);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setProperties",ol.source.ImageMapGuide.prototype.setProperties);goog.exportProperty(ol.source.ImageMapGuide.prototype,"unset",ol.source.ImageMapGuide.prototype.unset);goog.exportProperty(ol.source.ImageMapGuide.prototype,"changed",ol.source.ImageMapGuide.prototype.changed);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getRevision",ol.source.ImageMapGuide.prototype.getRevision);goog.exportProperty(ol.source.ImageMapGuide.prototype,"on",ol.source.ImageMapGuide.prototype.on);goog.exportProperty(ol.source.ImageMapGuide.prototype,"once",ol.source.ImageMapGuide.prototype.once);goog.exportProperty(ol.source.ImageMapGuide.prototype,"un",ol.source.ImageMapGuide.prototype.un);goog.exportProperty(ol.source.ImageMapGuide.prototype,"unByKey",ol.source.ImageMapGuide.prototype.unByKey);goog.exportProperty(ol.source.ImageStatic.prototype,"getAttributions",ol.source.ImageStatic.prototype.getAttributions);goog.exportProperty(ol.source.ImageStatic.prototype,"getLogo",ol.source.ImageStatic.prototype.getLogo);goog.exportProperty(ol.source.ImageStatic.prototype,"getProjection",ol.source.ImageStatic.prototype.getProjection);goog.exportProperty(ol.source.ImageStatic.prototype,"getState",ol.source.ImageStatic.prototype.getState);goog.exportProperty(ol.source.ImageStatic.prototype,"setAttributions",ol.source.ImageStatic.prototype.setAttributions);goog.exportProperty(ol.source.ImageStatic.prototype,"get",ol.source.ImageStatic.prototype.get);goog.exportProperty(ol.source.ImageStatic.prototype,"getKeys",ol.source.ImageStatic.prototype.getKeys);goog.exportProperty(ol.source.ImageStatic.prototype,"getProperties",ol.source.ImageStatic.prototype.getProperties);goog.exportProperty(ol.source.ImageStatic.prototype,"set",ol.source.ImageStatic.prototype.set);goog.exportProperty(ol.source.ImageStatic.prototype,"setProperties",ol.source.ImageStatic.prototype.setProperties);goog.exportProperty(ol.source.ImageStatic.prototype,"unset",ol.source.ImageStatic.prototype.unset);goog.exportProperty(ol.source.ImageStatic.prototype,"changed",ol.source.ImageStatic.prototype.changed);goog.exportProperty(ol.source.ImageStatic.prototype,"getRevision",ol.source.ImageStatic.prototype.getRevision);goog.exportProperty(ol.source.ImageStatic.prototype,"on",ol.source.ImageStatic.prototype.on);goog.exportProperty(ol.source.ImageStatic.prototype,"once",ol.source.ImageStatic.prototype.once);goog.exportProperty(ol.source.ImageStatic.prototype,"un",ol.source.ImageStatic.prototype.un);goog.exportProperty(ol.source.ImageStatic.prototype,"unByKey",ol.source.ImageStatic.prototype.unByKey);goog.exportProperty(ol.source.ImageVector.prototype,"getAttributions",ol.source.ImageVector.prototype.getAttributions);goog.exportProperty(ol.source.ImageVector.prototype,"getLogo",ol.source.ImageVector.prototype.getLogo);goog.exportProperty(ol.source.ImageVector.prototype,"getProjection",ol.source.ImageVector.prototype.getProjection);goog.exportProperty(ol.source.ImageVector.prototype,"getState",ol.source.ImageVector.prototype.getState);goog.exportProperty(ol.source.ImageVector.prototype,"setAttributions",ol.source.ImageVector.prototype.setAttributions);goog.exportProperty(ol.source.ImageVector.prototype,"get",ol.source.ImageVector.prototype.get);goog.exportProperty(ol.source.ImageVector.prototype,"getKeys",ol.source.ImageVector.prototype.getKeys);goog.exportProperty(ol.source.ImageVector.prototype,"getProperties",ol.source.ImageVector.prototype.getProperties);goog.exportProperty(ol.source.ImageVector.prototype,"set",ol.source.ImageVector.prototype.set);goog.exportProperty(ol.source.ImageVector.prototype,"setProperties",ol.source.ImageVector.prototype.setProperties);goog.exportProperty(ol.source.ImageVector.prototype,"unset",ol.source.ImageVector.prototype.unset);goog.exportProperty(ol.source.ImageVector.prototype,"changed",ol.source.ImageVector.prototype.changed);goog.exportProperty(ol.source.ImageVector.prototype,"getRevision",ol.source.ImageVector.prototype.getRevision);goog.exportProperty(ol.source.ImageVector.prototype,"on",ol.source.ImageVector.prototype.on);goog.exportProperty(ol.source.ImageVector.prototype,"once",ol.source.ImageVector.prototype.once);goog.exportProperty(ol.source.ImageVector.prototype,"un",ol.source.ImageVector.prototype.un);goog.exportProperty(ol.source.ImageVector.prototype,"unByKey",ol.source.ImageVector.prototype.unByKey);goog.exportProperty(ol.source.ImageWMS.prototype,"getAttributions",ol.source.ImageWMS.prototype.getAttributions);goog.exportProperty(ol.source.ImageWMS.prototype,"getLogo",ol.source.ImageWMS.prototype.getLogo);goog.exportProperty(ol.source.ImageWMS.prototype,"getProjection",ol.source.ImageWMS.prototype.getProjection);goog.exportProperty(ol.source.ImageWMS.prototype,"getState",ol.source.ImageWMS.prototype.getState);goog.exportProperty(ol.source.ImageWMS.prototype,"setAttributions",ol.source.ImageWMS.prototype.setAttributions);goog.exportProperty(ol.source.ImageWMS.prototype,"get",ol.source.ImageWMS.prototype.get);goog.exportProperty(ol.source.ImageWMS.prototype,"getKeys",ol.source.ImageWMS.prototype.getKeys);goog.exportProperty(ol.source.ImageWMS.prototype,"getProperties",ol.source.ImageWMS.prototype.getProperties);goog.exportProperty(ol.source.ImageWMS.prototype,"set",ol.source.ImageWMS.prototype.set);goog.exportProperty(ol.source.ImageWMS.prototype,"setProperties",ol.source.ImageWMS.prototype.setProperties);goog.exportProperty(ol.source.ImageWMS.prototype,"unset",ol.source.ImageWMS.prototype.unset);goog.exportProperty(ol.source.ImageWMS.prototype,"changed",ol.source.ImageWMS.prototype.changed);goog.exportProperty(ol.source.ImageWMS.prototype,"getRevision",ol.source.ImageWMS.prototype.getRevision);goog.exportProperty(ol.source.ImageWMS.prototype,"on",ol.source.ImageWMS.prototype.on);goog.exportProperty(ol.source.ImageWMS.prototype,"once",ol.source.ImageWMS.prototype.once);goog.exportProperty(ol.source.ImageWMS.prototype,"un",ol.source.ImageWMS.prototype.un);goog.exportProperty(ol.source.ImageWMS.prototype,"unByKey",ol.source.ImageWMS.prototype.unByKey);goog.exportProperty(ol.source.XYZ.prototype,"getTileLoadFunction",ol.source.XYZ.prototype.getTileLoadFunction);goog.exportProperty(ol.source.XYZ.prototype,"getTileUrlFunction",ol.source.XYZ.prototype.getTileUrlFunction);goog.exportProperty(ol.source.XYZ.prototype,"setTileLoadFunction",ol.source.XYZ.prototype.setTileLoadFunction);goog.exportProperty(ol.source.XYZ.prototype,"setTileUrlFunction",ol.source.XYZ.prototype.setTileUrlFunction);goog.exportProperty(ol.source.XYZ.prototype,"getTileGrid",ol.source.XYZ.prototype.getTileGrid);goog.exportProperty(ol.source.XYZ.prototype,"getAttributions",ol.source.XYZ.prototype.getAttributions);goog.exportProperty(ol.source.XYZ.prototype,"getLogo",ol.source.XYZ.prototype.getLogo);goog.exportProperty(ol.source.XYZ.prototype,"getProjection",ol.source.XYZ.prototype.getProjection);goog.exportProperty(ol.source.XYZ.prototype,"getState",ol.source.XYZ.prototype.getState);goog.exportProperty(ol.source.XYZ.prototype,"setAttributions",ol.source.XYZ.prototype.setAttributions);goog.exportProperty(ol.source.XYZ.prototype,"get",ol.source.XYZ.prototype.get);goog.exportProperty(ol.source.XYZ.prototype,"getKeys",ol.source.XYZ.prototype.getKeys);goog.exportProperty(ol.source.XYZ.prototype,"getProperties",ol.source.XYZ.prototype.getProperties);goog.exportProperty(ol.source.XYZ.prototype,"set",ol.source.XYZ.prototype.set);goog.exportProperty(ol.source.XYZ.prototype,"setProperties",ol.source.XYZ.prototype.setProperties);goog.exportProperty(ol.source.XYZ.prototype,"unset",ol.source.XYZ.prototype.unset);goog.exportProperty(ol.source.XYZ.prototype,"changed",ol.source.XYZ.prototype.changed);goog.exportProperty(ol.source.XYZ.prototype,"getRevision",ol.source.XYZ.prototype.getRevision);goog.exportProperty(ol.source.XYZ.prototype,"on",ol.source.XYZ.prototype.on);goog.exportProperty(ol.source.XYZ.prototype,"once",ol.source.XYZ.prototype.once);goog.exportProperty(ol.source.XYZ.prototype,"un",ol.source.XYZ.prototype.un);goog.exportProperty(ol.source.XYZ.prototype,"unByKey",ol.source.XYZ.prototype.unByKey);goog.exportProperty(ol.source.MapQuest.prototype,"getUrls",ol.source.MapQuest.prototype.getUrls);goog.exportProperty(ol.source.MapQuest.prototype,"setUrl",ol.source.MapQuest.prototype.setUrl);goog.exportProperty(ol.source.MapQuest.prototype,"getTileLoadFunction",ol.source.MapQuest.prototype.getTileLoadFunction);goog.exportProperty(ol.source.MapQuest.prototype,"getTileUrlFunction",ol.source.MapQuest.prototype.getTileUrlFunction);goog.exportProperty(ol.source.MapQuest.prototype,"setTileLoadFunction",ol.source.MapQuest.prototype.setTileLoadFunction);goog.exportProperty(ol.source.MapQuest.prototype,"setTileUrlFunction",ol.source.MapQuest.prototype.setTileUrlFunction);goog.exportProperty(ol.source.MapQuest.prototype,"getTileGrid",ol.source.MapQuest.prototype.getTileGrid);goog.exportProperty(ol.source.MapQuest.prototype,"getAttributions",ol.source.MapQuest.prototype.getAttributions);goog.exportProperty(ol.source.MapQuest.prototype,"getLogo",ol.source.MapQuest.prototype.getLogo);goog.exportProperty(ol.source.MapQuest.prototype,"getProjection",ol.source.MapQuest.prototype.getProjection);goog.exportProperty(ol.source.MapQuest.prototype,"getState",ol.source.MapQuest.prototype.getState);goog.exportProperty(ol.source.MapQuest.prototype,"setAttributions",ol.source.MapQuest.prototype.setAttributions);goog.exportProperty(ol.source.MapQuest.prototype,"get",ol.source.MapQuest.prototype.get);goog.exportProperty(ol.source.MapQuest.prototype,"getKeys",ol.source.MapQuest.prototype.getKeys);goog.exportProperty(ol.source.MapQuest.prototype,"getProperties",ol.source.MapQuest.prototype.getProperties);goog.exportProperty(ol.source.MapQuest.prototype,"set",ol.source.MapQuest.prototype.set);goog.exportProperty(ol.source.MapQuest.prototype,"setProperties",ol.source.MapQuest.prototype.setProperties);goog.exportProperty(ol.source.MapQuest.prototype,"unset",ol.source.MapQuest.prototype.unset);goog.exportProperty(ol.source.MapQuest.prototype,"changed",ol.source.MapQuest.prototype.changed);goog.exportProperty(ol.source.MapQuest.prototype,"getRevision",ol.source.MapQuest.prototype.getRevision);goog.exportProperty(ol.source.MapQuest.prototype,"on",ol.source.MapQuest.prototype.on);goog.exportProperty(ol.source.MapQuest.prototype,"once",ol.source.MapQuest.prototype.once);goog.exportProperty(ol.source.MapQuest.prototype,"un",ol.source.MapQuest.prototype.un);goog.exportProperty(ol.source.MapQuest.prototype,"unByKey",ol.source.MapQuest.prototype.unByKey);goog.exportProperty(ol.source.OSM.prototype,"getUrls",ol.source.OSM.prototype.getUrls);goog.exportProperty(ol.source.OSM.prototype,"setUrl",ol.source.OSM.prototype.setUrl);goog.exportProperty(ol.source.OSM.prototype,"getTileLoadFunction",ol.source.OSM.prototype.getTileLoadFunction);goog.exportProperty(ol.source.OSM.prototype,"getTileUrlFunction",ol.source.OSM.prototype.getTileUrlFunction);goog.exportProperty(ol.source.OSM.prototype,"setTileLoadFunction",ol.source.OSM.prototype.setTileLoadFunction);goog.exportProperty(ol.source.OSM.prototype,"setTileUrlFunction",ol.source.OSM.prototype.setTileUrlFunction);goog.exportProperty(ol.source.OSM.prototype,"getTileGrid",ol.source.OSM.prototype.getTileGrid);goog.exportProperty(ol.source.OSM.prototype,"getAttributions",ol.source.OSM.prototype.getAttributions);goog.exportProperty(ol.source.OSM.prototype,"getLogo",ol.source.OSM.prototype.getLogo);goog.exportProperty(ol.source.OSM.prototype,"getProjection",ol.source.OSM.prototype.getProjection);goog.exportProperty(ol.source.OSM.prototype,"getState",ol.source.OSM.prototype.getState);goog.exportProperty(ol.source.OSM.prototype,"setAttributions",ol.source.OSM.prototype.setAttributions);goog.exportProperty(ol.source.OSM.prototype,"get",ol.source.OSM.prototype.get);goog.exportProperty(ol.source.OSM.prototype,"getKeys",ol.source.OSM.prototype.getKeys);goog.exportProperty(ol.source.OSM.prototype,"getProperties",ol.source.OSM.prototype.getProperties);goog.exportProperty(ol.source.OSM.prototype,"set",ol.source.OSM.prototype.set);goog.exportProperty(ol.source.OSM.prototype,"setProperties",ol.source.OSM.prototype.setProperties);goog.exportProperty(ol.source.OSM.prototype,"unset",ol.source.OSM.prototype.unset);goog.exportProperty(ol.source.OSM.prototype,"changed",ol.source.OSM.prototype.changed);goog.exportProperty(ol.source.OSM.prototype,"getRevision",ol.source.OSM.prototype.getRevision);goog.exportProperty(ol.source.OSM.prototype,"on",ol.source.OSM.prototype.on);goog.exportProperty(ol.source.OSM.prototype,"once",ol.source.OSM.prototype.once);goog.exportProperty(ol.source.OSM.prototype,"un",ol.source.OSM.prototype.un);goog.exportProperty(ol.source.OSM.prototype,"unByKey",ol.source.OSM.prototype.unByKey);goog.exportProperty(ol.source.Raster.prototype,"getAttributions",ol.source.Raster.prototype.getAttributions);goog.exportProperty(ol.source.Raster.prototype,"getLogo",ol.source.Raster.prototype.getLogo);goog.exportProperty(ol.source.Raster.prototype,"getProjection",ol.source.Raster.prototype.getProjection);goog.exportProperty(ol.source.Raster.prototype,"getState",ol.source.Raster.prototype.getState);goog.exportProperty(ol.source.Raster.prototype,"setAttributions",ol.source.Raster.prototype.setAttributions);goog.exportProperty(ol.source.Raster.prototype,"get",ol.source.Raster.prototype.get);goog.exportProperty(ol.source.Raster.prototype,"getKeys",ol.source.Raster.prototype.getKeys);goog.exportProperty(ol.source.Raster.prototype,"getProperties",ol.source.Raster.prototype.getProperties);goog.exportProperty(ol.source.Raster.prototype,"set",ol.source.Raster.prototype.set);goog.exportProperty(ol.source.Raster.prototype,"setProperties",ol.source.Raster.prototype.setProperties);goog.exportProperty(ol.source.Raster.prototype,"unset",ol.source.Raster.prototype.unset);goog.exportProperty(ol.source.Raster.prototype,"changed",ol.source.Raster.prototype.changed);goog.exportProperty(ol.source.Raster.prototype,"getRevision",ol.source.Raster.prototype.getRevision);goog.exportProperty(ol.source.Raster.prototype,"on",ol.source.Raster.prototype.on);goog.exportProperty(ol.source.Raster.prototype,"once",ol.source.Raster.prototype.once);goog.exportProperty(ol.source.Raster.prototype,"un",ol.source.Raster.prototype.un);goog.exportProperty(ol.source.Raster.prototype,"unByKey",ol.source.Raster.prototype.unByKey);goog.exportProperty(ol.source.Stamen.prototype,"getUrls",ol.source.Stamen.prototype.getUrls);goog.exportProperty(ol.source.Stamen.prototype,"setUrl",ol.source.Stamen.prototype.setUrl);goog.exportProperty(ol.source.Stamen.prototype,"getTileLoadFunction",ol.source.Stamen.prototype.getTileLoadFunction);goog.exportProperty(ol.source.Stamen.prototype,"getTileUrlFunction",ol.source.Stamen.prototype.getTileUrlFunction);goog.exportProperty(ol.source.Stamen.prototype,"setTileLoadFunction",ol.source.Stamen.prototype.setTileLoadFunction);goog.exportProperty(ol.source.Stamen.prototype,"setTileUrlFunction",ol.source.Stamen.prototype.setTileUrlFunction);goog.exportProperty(ol.source.Stamen.prototype,"getTileGrid",ol.source.Stamen.prototype.getTileGrid);goog.exportProperty(ol.source.Stamen.prototype,"getAttributions",ol.source.Stamen.prototype.getAttributions);goog.exportProperty(ol.source.Stamen.prototype,"getLogo",ol.source.Stamen.prototype.getLogo);goog.exportProperty(ol.source.Stamen.prototype,"getProjection",ol.source.Stamen.prototype.getProjection);goog.exportProperty(ol.source.Stamen.prototype,"getState",ol.source.Stamen.prototype.getState);goog.exportProperty(ol.source.Stamen.prototype,"setAttributions",ol.source.Stamen.prototype.setAttributions);goog.exportProperty(ol.source.Stamen.prototype,"get",ol.source.Stamen.prototype.get);goog.exportProperty(ol.source.Stamen.prototype,"getKeys",ol.source.Stamen.prototype.getKeys);goog.exportProperty(ol.source.Stamen.prototype,"getProperties",ol.source.Stamen.prototype.getProperties);goog.exportProperty(ol.source.Stamen.prototype,"set",ol.source.Stamen.prototype.set);goog.exportProperty(ol.source.Stamen.prototype,"setProperties",ol.source.Stamen.prototype.setProperties);goog.exportProperty(ol.source.Stamen.prototype,"unset",ol.source.Stamen.prototype.unset);goog.exportProperty(ol.source.Stamen.prototype,"changed",ol.source.Stamen.prototype.changed);goog.exportProperty(ol.source.Stamen.prototype,"getRevision",ol.source.Stamen.prototype.getRevision);goog.exportProperty(ol.source.Stamen.prototype,"on",ol.source.Stamen.prototype.on);goog.exportProperty(ol.source.Stamen.prototype,"once",ol.source.Stamen.prototype.once);goog.exportProperty(ol.source.Stamen.prototype,"un",ol.source.Stamen.prototype.un);goog.exportProperty(ol.source.Stamen.prototype,"unByKey",ol.source.Stamen.prototype.unByKey);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileLoadFunction",ol.source.TileArcGISRest.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileUrlFunction",ol.source.TileArcGISRest.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileLoadFunction",ol.source.TileArcGISRest.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileUrlFunction",ol.source.TileArcGISRest.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileGrid",ol.source.TileArcGISRest.prototype.getTileGrid);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getAttributions",ol.source.TileArcGISRest.prototype.getAttributions);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getLogo",ol.source.TileArcGISRest.prototype.getLogo);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProjection",ol.source.TileArcGISRest.prototype.getProjection);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getState",ol.source.TileArcGISRest.prototype.getState);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setAttributions",ol.source.TileArcGISRest.prototype.setAttributions);goog.exportProperty(ol.source.TileArcGISRest.prototype,"get",ol.source.TileArcGISRest.prototype.get);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getKeys",ol.source.TileArcGISRest.prototype.getKeys);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProperties",ol.source.TileArcGISRest.prototype.getProperties);goog.exportProperty(ol.source.TileArcGISRest.prototype,"set",ol.source.TileArcGISRest.prototype.set);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setProperties",ol.source.TileArcGISRest.prototype.setProperties);goog.exportProperty(ol.source.TileArcGISRest.prototype,"unset",ol.source.TileArcGISRest.prototype.unset);goog.exportProperty(ol.source.TileArcGISRest.prototype,"changed",ol.source.TileArcGISRest.prototype.changed);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getRevision",ol.source.TileArcGISRest.prototype.getRevision);goog.exportProperty(ol.source.TileArcGISRest.prototype,"on",ol.source.TileArcGISRest.prototype.on);goog.exportProperty(ol.source.TileArcGISRest.prototype,"once",ol.source.TileArcGISRest.prototype.once);goog.exportProperty(ol.source.TileArcGISRest.prototype,"un",ol.source.TileArcGISRest.prototype.un);goog.exportProperty(ol.source.TileArcGISRest.prototype,"unByKey",ol.source.TileArcGISRest.prototype.unByKey);goog.exportProperty(ol.source.TileDebug.prototype,"getTileGrid",ol.source.TileDebug.prototype.getTileGrid);goog.exportProperty(ol.source.TileDebug.prototype,"getAttributions",ol.source.TileDebug.prototype.getAttributions);goog.exportProperty(ol.source.TileDebug.prototype,"getLogo",ol.source.TileDebug.prototype.getLogo);goog.exportProperty(ol.source.TileDebug.prototype,"getProjection",ol.source.TileDebug.prototype.getProjection);goog.exportProperty(ol.source.TileDebug.prototype,"getState",ol.source.TileDebug.prototype.getState);goog.exportProperty(ol.source.TileDebug.prototype,"setAttributions",ol.source.TileDebug.prototype.setAttributions);goog.exportProperty(ol.source.TileDebug.prototype,"get",ol.source.TileDebug.prototype.get);goog.exportProperty(ol.source.TileDebug.prototype,"getKeys",ol.source.TileDebug.prototype.getKeys);goog.exportProperty(ol.source.TileDebug.prototype,"getProperties",ol.source.TileDebug.prototype.getProperties);goog.exportProperty(ol.source.TileDebug.prototype,"set",ol.source.TileDebug.prototype.set);goog.exportProperty(ol.source.TileDebug.prototype,"setProperties",ol.source.TileDebug.prototype.setProperties);goog.exportProperty(ol.source.TileDebug.prototype,"unset",ol.source.TileDebug.prototype.unset);goog.exportProperty(ol.source.TileDebug.prototype,"changed",ol.source.TileDebug.prototype.changed);goog.exportProperty(ol.source.TileDebug.prototype,"getRevision",ol.source.TileDebug.prototype.getRevision);goog.exportProperty(ol.source.TileDebug.prototype,"on",ol.source.TileDebug.prototype.on);goog.exportProperty(ol.source.TileDebug.prototype,"once",ol.source.TileDebug.prototype.once);goog.exportProperty(ol.source.TileDebug.prototype,"un",ol.source.TileDebug.prototype.un);goog.exportProperty(ol.source.TileDebug.prototype,"unByKey",ol.source.TileDebug.prototype.unByKey);goog.exportProperty(ol.source.TileJSON.prototype,"getTileLoadFunction",ol.source.TileJSON.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileJSON.prototype,"getTileUrlFunction",ol.source.TileJSON.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileJSON.prototype,"setTileLoadFunction",ol.source.TileJSON.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileJSON.prototype,"setTileUrlFunction",ol.source.TileJSON.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileJSON.prototype,"getTileGrid",ol.source.TileJSON.prototype.getTileGrid);goog.exportProperty(ol.source.TileJSON.prototype,"getAttributions",ol.source.TileJSON.prototype.getAttributions);goog.exportProperty(ol.source.TileJSON.prototype,"getLogo",ol.source.TileJSON.prototype.getLogo);goog.exportProperty(ol.source.TileJSON.prototype,"getProjection",ol.source.TileJSON.prototype.getProjection);goog.exportProperty(ol.source.TileJSON.prototype,"getState",ol.source.TileJSON.prototype.getState);goog.exportProperty(ol.source.TileJSON.prototype,"setAttributions",ol.source.TileJSON.prototype.setAttributions);goog.exportProperty(ol.source.TileJSON.prototype,"get",ol.source.TileJSON.prototype.get);goog.exportProperty(ol.source.TileJSON.prototype,"getKeys",ol.source.TileJSON.prototype.getKeys);goog.exportProperty(ol.source.TileJSON.prototype,"getProperties",ol.source.TileJSON.prototype.getProperties);goog.exportProperty(ol.source.TileJSON.prototype,"set",ol.source.TileJSON.prototype.set);goog.exportProperty(ol.source.TileJSON.prototype,"setProperties",ol.source.TileJSON.prototype.setProperties);goog.exportProperty(ol.source.TileJSON.prototype,"unset",ol.source.TileJSON.prototype.unset);goog.exportProperty(ol.source.TileJSON.prototype,"changed",ol.source.TileJSON.prototype.changed);goog.exportProperty(ol.source.TileJSON.prototype,"getRevision",ol.source.TileJSON.prototype.getRevision);goog.exportProperty(ol.source.TileJSON.prototype,"on",ol.source.TileJSON.prototype.on);goog.exportProperty(ol.source.TileJSON.prototype,"once",ol.source.TileJSON.prototype.once);goog.exportProperty(ol.source.TileJSON.prototype,"un",ol.source.TileJSON.prototype.un);goog.exportProperty(ol.source.TileJSON.prototype,"unByKey",ol.source.TileJSON.prototype.unByKey);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTileGrid",ol.source.TileUTFGrid.prototype.getTileGrid);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getAttributions",ol.source.TileUTFGrid.prototype.getAttributions);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getLogo",ol.source.TileUTFGrid.prototype.getLogo);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProjection",ol.source.TileUTFGrid.prototype.getProjection);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getState",ol.source.TileUTFGrid.prototype.getState);goog.exportProperty(ol.source.TileUTFGrid.prototype,"setAttributions",ol.source.TileUTFGrid.prototype.setAttributions);goog.exportProperty(ol.source.TileUTFGrid.prototype,"get",ol.source.TileUTFGrid.prototype.get);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getKeys",ol.source.TileUTFGrid.prototype.getKeys);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProperties",ol.source.TileUTFGrid.prototype.getProperties);goog.exportProperty(ol.source.TileUTFGrid.prototype,"set",ol.source.TileUTFGrid.prototype.set);goog.exportProperty(ol.source.TileUTFGrid.prototype,"setProperties",ol.source.TileUTFGrid.prototype.setProperties);goog.exportProperty(ol.source.TileUTFGrid.prototype,"unset",ol.source.TileUTFGrid.prototype.unset);goog.exportProperty(ol.source.TileUTFGrid.prototype,"changed",ol.source.TileUTFGrid.prototype.changed);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getRevision",ol.source.TileUTFGrid.prototype.getRevision);goog.exportProperty(ol.source.TileUTFGrid.prototype,"on",ol.source.TileUTFGrid.prototype.on);goog.exportProperty(ol.source.TileUTFGrid.prototype,"once",ol.source.TileUTFGrid.prototype.once);goog.exportProperty(ol.source.TileUTFGrid.prototype,"un",ol.source.TileUTFGrid.prototype.un);goog.exportProperty(ol.source.TileUTFGrid.prototype,"unByKey",ol.source.TileUTFGrid.prototype.unByKey);goog.exportProperty(ol.source.TileVector.prototype,"addFeature",ol.source.TileVector.prototype.addFeature);goog.exportProperty(ol.source.TileVector.prototype,"addFeatures",ol.source.TileVector.prototype.addFeatures);goog.exportProperty(ol.source.TileVector.prototype,"clear",ol.source.TileVector.prototype.clear);goog.exportProperty(ol.source.TileVector.prototype,"forEachFeature",ol.source.TileVector.prototype.forEachFeature);goog.exportProperty(ol.source.TileVector.prototype,"forEachFeatureInExtent",ol.source.TileVector.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.TileVector.prototype,"forEachFeatureIntersectingExtent",ol.source.TileVector.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesCollection",ol.source.TileVector.prototype.getFeaturesCollection);goog.exportProperty(ol.source.TileVector.prototype,"getFeatures",ol.source.TileVector.prototype.getFeatures);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesAtCoordinate",ol.source.TileVector.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesInExtent",ol.source.TileVector.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.TileVector.prototype,"getClosestFeatureToCoordinate",ol.source.TileVector.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.TileVector.prototype,"getExtent",ol.source.TileVector.prototype.getExtent);goog.exportProperty(ol.source.TileVector.prototype,"getFeatureById",ol.source.TileVector.prototype.getFeatureById);goog.exportProperty(ol.source.TileVector.prototype,"removeFeature",ol.source.TileVector.prototype.removeFeature);goog.exportProperty(ol.source.TileVector.prototype,"getAttributions",ol.source.TileVector.prototype.getAttributions);goog.exportProperty(ol.source.TileVector.prototype,"getLogo",ol.source.TileVector.prototype.getLogo);goog.exportProperty(ol.source.TileVector.prototype,"getProjection",ol.source.TileVector.prototype.getProjection);goog.exportProperty(ol.source.TileVector.prototype,"getState",ol.source.TileVector.prototype.getState);goog.exportProperty(ol.source.TileVector.prototype,"setAttributions",ol.source.TileVector.prototype.setAttributions);goog.exportProperty(ol.source.TileVector.prototype,"get",ol.source.TileVector.prototype.get);goog.exportProperty(ol.source.TileVector.prototype,"getKeys",ol.source.TileVector.prototype.getKeys);goog.exportProperty(ol.source.TileVector.prototype,"getProperties",ol.source.TileVector.prototype.getProperties);goog.exportProperty(ol.source.TileVector.prototype,"set",ol.source.TileVector.prototype.set);goog.exportProperty(ol.source.TileVector.prototype,"setProperties",ol.source.TileVector.prototype.setProperties);goog.exportProperty(ol.source.TileVector.prototype,"unset",ol.source.TileVector.prototype.unset);goog.exportProperty(ol.source.TileVector.prototype,"changed",ol.source.TileVector.prototype.changed);goog.exportProperty(ol.source.TileVector.prototype,"getRevision",ol.source.TileVector.prototype.getRevision);goog.exportProperty(ol.source.TileVector.prototype,"on",ol.source.TileVector.prototype.on);goog.exportProperty(ol.source.TileVector.prototype,"once",ol.source.TileVector.prototype.once);goog.exportProperty(ol.source.TileVector.prototype,"un",ol.source.TileVector.prototype.un);goog.exportProperty(ol.source.TileVector.prototype,"unByKey",ol.source.TileVector.prototype.unByKey);goog.exportProperty(ol.source.TileWMS.prototype,"getTileLoadFunction",ol.source.TileWMS.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileWMS.prototype,"getTileUrlFunction",ol.source.TileWMS.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileWMS.prototype,"setTileLoadFunction",ol.source.TileWMS.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileWMS.prototype,"setTileUrlFunction",ol.source.TileWMS.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileWMS.prototype,"getTileGrid",ol.source.TileWMS.prototype.getTileGrid);goog.exportProperty(ol.source.TileWMS.prototype,"getAttributions",ol.source.TileWMS.prototype.getAttributions);goog.exportProperty(ol.source.TileWMS.prototype,"getLogo",ol.source.TileWMS.prototype.getLogo);goog.exportProperty(ol.source.TileWMS.prototype,"getProjection",ol.source.TileWMS.prototype.getProjection);goog.exportProperty(ol.source.TileWMS.prototype,"getState",ol.source.TileWMS.prototype.getState);goog.exportProperty(ol.source.TileWMS.prototype,"setAttributions",ol.source.TileWMS.prototype.setAttributions);goog.exportProperty(ol.source.TileWMS.prototype,"get",ol.source.TileWMS.prototype.get);goog.exportProperty(ol.source.TileWMS.prototype,"getKeys",ol.source.TileWMS.prototype.getKeys);goog.exportProperty(ol.source.TileWMS.prototype,"getProperties",ol.source.TileWMS.prototype.getProperties);goog.exportProperty(ol.source.TileWMS.prototype,"set",ol.source.TileWMS.prototype.set);goog.exportProperty(ol.source.TileWMS.prototype,"setProperties",ol.source.TileWMS.prototype.setProperties);goog.exportProperty(ol.source.TileWMS.prototype,"unset",ol.source.TileWMS.prototype.unset);goog.exportProperty(ol.source.TileWMS.prototype,"changed",ol.source.TileWMS.prototype.changed);goog.exportProperty(ol.source.TileWMS.prototype,"getRevision",ol.source.TileWMS.prototype.getRevision);goog.exportProperty(ol.source.TileWMS.prototype,"on",ol.source.TileWMS.prototype.on);goog.exportProperty(ol.source.TileWMS.prototype,"once",ol.source.TileWMS.prototype.once);goog.exportProperty(ol.source.TileWMS.prototype,"un",ol.source.TileWMS.prototype.un);goog.exportProperty(ol.source.TileWMS.prototype,"unByKey",ol.source.TileWMS.prototype.unByKey);goog.exportProperty(ol.source.WMTS.prototype,"getTileLoadFunction",ol.source.WMTS.prototype.getTileLoadFunction);goog.exportProperty(ol.source.WMTS.prototype,"getTileUrlFunction",ol.source.WMTS.prototype.getTileUrlFunction);goog.exportProperty(ol.source.WMTS.prototype,"setTileLoadFunction",ol.source.WMTS.prototype.setTileLoadFunction);goog.exportProperty(ol.source.WMTS.prototype,"setTileUrlFunction",ol.source.WMTS.prototype.setTileUrlFunction);goog.exportProperty(ol.source.WMTS.prototype,"getTileGrid",ol.source.WMTS.prototype.getTileGrid);goog.exportProperty(ol.source.WMTS.prototype,"getAttributions",ol.source.WMTS.prototype.getAttributions);goog.exportProperty(ol.source.WMTS.prototype,"getLogo",ol.source.WMTS.prototype.getLogo);goog.exportProperty(ol.source.WMTS.prototype,"getProjection",ol.source.WMTS.prototype.getProjection);goog.exportProperty(ol.source.WMTS.prototype,"getState",ol.source.WMTS.prototype.getState);goog.exportProperty(ol.source.WMTS.prototype,"setAttributions",ol.source.WMTS.prototype.setAttributions);goog.exportProperty(ol.source.WMTS.prototype,"get",ol.source.WMTS.prototype.get);goog.exportProperty(ol.source.WMTS.prototype,"getKeys",ol.source.WMTS.prototype.getKeys);goog.exportProperty(ol.source.WMTS.prototype,"getProperties",ol.source.WMTS.prototype.getProperties);goog.exportProperty(ol.source.WMTS.prototype,"set",ol.source.WMTS.prototype.set);goog.exportProperty(ol.source.WMTS.prototype,"setProperties",ol.source.WMTS.prototype.setProperties);goog.exportProperty(ol.source.WMTS.prototype,"unset",ol.source.WMTS.prototype.unset);goog.exportProperty(ol.source.WMTS.prototype,"changed",ol.source.WMTS.prototype.changed);goog.exportProperty(ol.source.WMTS.prototype,"getRevision",ol.source.WMTS.prototype.getRevision);goog.exportProperty(ol.source.WMTS.prototype,"on",ol.source.WMTS.prototype.on);goog.exportProperty(ol.source.WMTS.prototype,"once",ol.source.WMTS.prototype.once);goog.exportProperty(ol.source.WMTS.prototype,"un",ol.source.WMTS.prototype.un);goog.exportProperty(ol.source.WMTS.prototype,"unByKey",ol.source.WMTS.prototype.unByKey);goog.exportProperty(ol.source.Zoomify.prototype,"getTileLoadFunction",ol.source.Zoomify.prototype.getTileLoadFunction);goog.exportProperty(ol.source.Zoomify.prototype,"getTileUrlFunction",ol.source.Zoomify.prototype.getTileUrlFunction);goog.exportProperty(ol.source.Zoomify.prototype,"setTileLoadFunction",ol.source.Zoomify.prototype.setTileLoadFunction);goog.exportProperty(ol.source.Zoomify.prototype,"setTileUrlFunction",ol.source.Zoomify.prototype.setTileUrlFunction);goog.exportProperty(ol.source.Zoomify.prototype,"getTileGrid",ol.source.Zoomify.prototype.getTileGrid);goog.exportProperty(ol.source.Zoomify.prototype,"getAttributions",ol.source.Zoomify.prototype.getAttributions);goog.exportProperty(ol.source.Zoomify.prototype,"getLogo",ol.source.Zoomify.prototype.getLogo);goog.exportProperty(ol.source.Zoomify.prototype,"getProjection",ol.source.Zoomify.prototype.getProjection);goog.exportProperty(ol.source.Zoomify.prototype,"getState",ol.source.Zoomify.prototype.getState);goog.exportProperty(ol.source.Zoomify.prototype,"setAttributions",ol.source.Zoomify.prototype.setAttributions);goog.exportProperty(ol.source.Zoomify.prototype,"get",ol.source.Zoomify.prototype.get);goog.exportProperty(ol.source.Zoomify.prototype,"getKeys",ol.source.Zoomify.prototype.getKeys);goog.exportProperty(ol.source.Zoomify.prototype,"getProperties",ol.source.Zoomify.prototype.getProperties);goog.exportProperty(ol.source.Zoomify.prototype,"set",ol.source.Zoomify.prototype.set);goog.exportProperty(ol.source.Zoomify.prototype,"setProperties",ol.source.Zoomify.prototype.setProperties);goog.exportProperty(ol.source.Zoomify.prototype,"unset",ol.source.Zoomify.prototype.unset);goog.exportProperty(ol.source.Zoomify.prototype,"changed",ol.source.Zoomify.prototype.changed);goog.exportProperty(ol.source.Zoomify.prototype,"getRevision",ol.source.Zoomify.prototype.getRevision);goog.exportProperty(ol.source.Zoomify.prototype,"on",ol.source.Zoomify.prototype.on);goog.exportProperty(ol.source.Zoomify.prototype,"once",ol.source.Zoomify.prototype.once);goog.exportProperty(ol.source.Zoomify.prototype,"un",ol.source.Zoomify.prototype.un);goog.exportProperty(ol.source.Zoomify.prototype,"unByKey",ol.source.Zoomify.prototype.unByKey);goog.exportProperty(ol.renderer.Layer.prototype,"changed",ol.renderer.Layer.prototype.changed);goog.exportProperty(ol.renderer.Layer.prototype,"getRevision",ol.renderer.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.Layer.prototype,"on",ol.renderer.Layer.prototype.on);goog.exportProperty(ol.renderer.Layer.prototype,"once",ol.renderer.Layer.prototype.once);goog.exportProperty(ol.renderer.Layer.prototype,"un",ol.renderer.Layer.prototype.un);goog.exportProperty(ol.renderer.Layer.prototype,"unByKey",ol.renderer.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"changed",ol.renderer.webgl.Layer.prototype.changed);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"getRevision",ol.renderer.webgl.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"on",ol.renderer.webgl.Layer.prototype.on);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"once",ol.renderer.webgl.Layer.prototype.once);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"un",ol.renderer.webgl.Layer.prototype.un);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"unByKey",ol.renderer.webgl.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"changed",ol.renderer.webgl.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"getRevision",ol.renderer.webgl.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"on",ol.renderer.webgl.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"once",ol.renderer.webgl.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"un",ol.renderer.webgl.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"unByKey",ol.renderer.webgl.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"changed",ol.renderer.webgl.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"getRevision",ol.renderer.webgl.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"on",ol.renderer.webgl.TileLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"once",ol.renderer.webgl.TileLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"un",ol.renderer.webgl.TileLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"unByKey",ol.renderer.webgl.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"changed",ol.renderer.webgl.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"getRevision",ol.renderer.webgl.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"on",ol.renderer.webgl.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"once",ol.renderer.webgl.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"un",ol.renderer.webgl.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"unByKey",ol.renderer.webgl.VectorLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.Layer.prototype,"changed",ol.renderer.dom.Layer.prototype.changed);goog.exportProperty(ol.renderer.dom.Layer.prototype,"getRevision",ol.renderer.dom.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.Layer.prototype,"on",ol.renderer.dom.Layer.prototype.on);goog.exportProperty(ol.renderer.dom.Layer.prototype,"once",ol.renderer.dom.Layer.prototype.once);goog.exportProperty(ol.renderer.dom.Layer.prototype,"un",ol.renderer.dom.Layer.prototype.un);goog.exportProperty(ol.renderer.dom.Layer.prototype,"unByKey",ol.renderer.dom.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"changed",ol.renderer.dom.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"getRevision",ol.renderer.dom.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"on",ol.renderer.dom.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"once",ol.renderer.dom.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"un",ol.renderer.dom.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"unByKey",ol.renderer.dom.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"changed",ol.renderer.dom.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"getRevision",ol.renderer.dom.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"on",ol.renderer.dom.TileLayer.prototype.on);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"once",ol.renderer.dom.TileLayer.prototype.once);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"un",ol.renderer.dom.TileLayer.prototype.un);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"unByKey",ol.renderer.dom.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"changed",ol.renderer.dom.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"getRevision",ol.renderer.dom.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"on",ol.renderer.dom.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"once",ol.renderer.dom.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"un",ol.renderer.dom.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"unByKey",ol.renderer.dom.VectorLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"changed",ol.renderer.canvas.Layer.prototype.changed);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"getRevision",ol.renderer.canvas.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"on",ol.renderer.canvas.Layer.prototype.on);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"once",ol.renderer.canvas.Layer.prototype.once);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"un",ol.renderer.canvas.Layer.prototype.un);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"unByKey",ol.renderer.canvas.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"changed",ol.renderer.canvas.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"getRevision",ol.renderer.canvas.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"on",ol.renderer.canvas.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"once",ol.renderer.canvas.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"un",ol.renderer.canvas.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"unByKey",ol.renderer.canvas.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"changed",ol.renderer.canvas.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"getRevision",ol.renderer.canvas.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"on",ol.renderer.canvas.TileLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"once",ol.renderer.canvas.TileLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"un",ol.renderer.canvas.TileLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"unByKey",ol.renderer.canvas.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"changed",ol.renderer.canvas.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"getRevision",ol.renderer.canvas.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"on",ol.renderer.canvas.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"once",ol.renderer.canvas.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"un",ol.renderer.canvas.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"unByKey",ol.renderer.canvas.VectorLayer.prototype.unByKey);goog.exportProperty(ol.layer.Base.prototype,"get",ol.layer.Base.prototype.get);goog.exportProperty(ol.layer.Base.prototype,"getKeys",ol.layer.Base.prototype.getKeys);goog.exportProperty(ol.layer.Base.prototype,"getProperties",ol.layer.Base.prototype.getProperties);goog.exportProperty(ol.layer.Base.prototype,"set",ol.layer.Base.prototype.set);goog.exportProperty(ol.layer.Base.prototype,"setProperties",ol.layer.Base.prototype.setProperties);goog.exportProperty(ol.layer.Base.prototype,"unset",ol.layer.Base.prototype.unset);goog.exportProperty(ol.layer.Base.prototype,"changed",ol.layer.Base.prototype.changed);goog.exportProperty(ol.layer.Base.prototype,"getRevision",ol.layer.Base.prototype.getRevision);goog.exportProperty(ol.layer.Base.prototype,"on",ol.layer.Base.prototype.on);goog.exportProperty(ol.layer.Base.prototype,"once",ol.layer.Base.prototype.once);goog.exportProperty(ol.layer.Base.prototype,"un",ol.layer.Base.prototype.un);goog.exportProperty(ol.layer.Base.prototype,"unByKey",ol.layer.Base.prototype.unByKey);goog.exportProperty(ol.layer.Layer.prototype,"getBrightness",ol.layer.Layer.prototype.getBrightness);goog.exportProperty(ol.layer.Layer.prototype,"getContrast",ol.layer.Layer.prototype.getContrast);goog.exportProperty(ol.layer.Layer.prototype,"getHue",ol.layer.Layer.prototype.getHue);goog.exportProperty(ol.layer.Layer.prototype,"getExtent",ol.layer.Layer.prototype.getExtent);goog.exportProperty(ol.layer.Layer.prototype,"getMaxResolution",ol.layer.Layer.prototype.getMaxResolution);goog.exportProperty(ol.layer.Layer.prototype,"getMinResolution",ol.layer.Layer.prototype.getMinResolution);goog.exportProperty(ol.layer.Layer.prototype,"getOpacity",ol.layer.Layer.prototype.getOpacity);goog.exportProperty(ol.layer.Layer.prototype,"getSaturation",ol.layer.Layer.prototype.getSaturation);goog.exportProperty(ol.layer.Layer.prototype,"getVisible",ol.layer.Layer.prototype.getVisible);goog.exportProperty(ol.layer.Layer.prototype,"getZIndex",ol.layer.Layer.prototype.getZIndex);goog.exportProperty(ol.layer.Layer.prototype,"setBrightness",ol.layer.Layer.prototype.setBrightness);goog.exportProperty(ol.layer.Layer.prototype,"setContrast",ol.layer.Layer.prototype.setContrast);goog.exportProperty(ol.layer.Layer.prototype,"setHue",ol.layer.Layer.prototype.setHue);goog.exportProperty(ol.layer.Layer.prototype,"setExtent",ol.layer.Layer.prototype.setExtent);goog.exportProperty(ol.layer.Layer.prototype,"setMaxResolution",ol.layer.Layer.prototype.setMaxResolution);goog.exportProperty(ol.layer.Layer.prototype,"setMinResolution",ol.layer.Layer.prototype.setMinResolution);goog.exportProperty(ol.layer.Layer.prototype,"setOpacity",ol.layer.Layer.prototype.setOpacity);goog.exportProperty(ol.layer.Layer.prototype,"setSaturation",ol.layer.Layer.prototype.setSaturation);goog.exportProperty(ol.layer.Layer.prototype,"setVisible",ol.layer.Layer.prototype.setVisible);goog.exportProperty(ol.layer.Layer.prototype,"setZIndex",ol.layer.Layer.prototype.setZIndex);goog.exportProperty(ol.layer.Layer.prototype,"get",ol.layer.Layer.prototype.get);goog.exportProperty(ol.layer.Layer.prototype,"getKeys",ol.layer.Layer.prototype.getKeys);goog.exportProperty(ol.layer.Layer.prototype,"getProperties",ol.layer.Layer.prototype.getProperties);goog.exportProperty(ol.layer.Layer.prototype,"set",ol.layer.Layer.prototype.set);goog.exportProperty(ol.layer.Layer.prototype,"setProperties",ol.layer.Layer.prototype.setProperties);goog.exportProperty(ol.layer.Layer.prototype,"unset",ol.layer.Layer.prototype.unset);goog.exportProperty(ol.layer.Layer.prototype,"changed",ol.layer.Layer.prototype.changed);goog.exportProperty(ol.layer.Layer.prototype,"getRevision",ol.layer.Layer.prototype.getRevision);goog.exportProperty(ol.layer.Layer.prototype,"on",ol.layer.Layer.prototype.on);goog.exportProperty(ol.layer.Layer.prototype,"once",ol.layer.Layer.prototype.once);goog.exportProperty(ol.layer.Layer.prototype,"un",ol.layer.Layer.prototype.un);goog.exportProperty(ol.layer.Layer.prototype,"unByKey",ol.layer.Layer.prototype.unByKey);goog.exportProperty(ol.layer.Vector.prototype,"setMap",ol.layer.Vector.prototype.setMap);goog.exportProperty(ol.layer.Vector.prototype,"setSource",ol.layer.Vector.prototype.setSource);goog.exportProperty(ol.layer.Vector.prototype,"getBrightness",ol.layer.Vector.prototype.getBrightness);goog.exportProperty(ol.layer.Vector.prototype,"getContrast",ol.layer.Vector.prototype.getContrast);goog.exportProperty(ol.layer.Vector.prototype,"getHue",ol.layer.Vector.prototype.getHue);goog.exportProperty(ol.layer.Vector.prototype,"getExtent",ol.layer.Vector.prototype.getExtent);goog.exportProperty(ol.layer.Vector.prototype,"getMaxResolution",ol.layer.Vector.prototype.getMaxResolution);goog.exportProperty(ol.layer.Vector.prototype,"getMinResolution",ol.layer.Vector.prototype.getMinResolution);goog.exportProperty(ol.layer.Vector.prototype,"getOpacity",ol.layer.Vector.prototype.getOpacity);goog.exportProperty(ol.layer.Vector.prototype,"getSaturation",ol.layer.Vector.prototype.getSaturation);goog.exportProperty(ol.layer.Vector.prototype,"getVisible",ol.layer.Vector.prototype.getVisible);goog.exportProperty(ol.layer.Vector.prototype,"getZIndex",ol.layer.Vector.prototype.getZIndex);goog.exportProperty(ol.layer.Vector.prototype,"setBrightness",ol.layer.Vector.prototype.setBrightness);goog.exportProperty(ol.layer.Vector.prototype,"setContrast",ol.layer.Vector.prototype.setContrast);goog.exportProperty(ol.layer.Vector.prototype,"setHue",ol.layer.Vector.prototype.setHue);goog.exportProperty(ol.layer.Vector.prototype,"setExtent",ol.layer.Vector.prototype.setExtent);goog.exportProperty(ol.layer.Vector.prototype,"setMaxResolution",ol.layer.Vector.prototype.setMaxResolution);goog.exportProperty(ol.layer.Vector.prototype,"setMinResolution",ol.layer.Vector.prototype.setMinResolution);goog.exportProperty(ol.layer.Vector.prototype,"setOpacity",ol.layer.Vector.prototype.setOpacity);goog.exportProperty(ol.layer.Vector.prototype,"setSaturation",ol.layer.Vector.prototype.setSaturation);goog.exportProperty(ol.layer.Vector.prototype,"setVisible",ol.layer.Vector.prototype.setVisible);goog.exportProperty(ol.layer.Vector.prototype,"setZIndex",ol.layer.Vector.prototype.setZIndex);goog.exportProperty(ol.layer.Vector.prototype,"get",ol.layer.Vector.prototype.get);goog.exportProperty(ol.layer.Vector.prototype,"getKeys",ol.layer.Vector.prototype.getKeys);goog.exportProperty(ol.layer.Vector.prototype,"getProperties",ol.layer.Vector.prototype.getProperties);goog.exportProperty(ol.layer.Vector.prototype,"set",ol.layer.Vector.prototype.set);goog.exportProperty(ol.layer.Vector.prototype,"setProperties",ol.layer.Vector.prototype.setProperties);goog.exportProperty(ol.layer.Vector.prototype,"unset",ol.layer.Vector.prototype.unset);goog.exportProperty(ol.layer.Vector.prototype,"changed",ol.layer.Vector.prototype.changed);goog.exportProperty(ol.layer.Vector.prototype,"getRevision",ol.layer.Vector.prototype.getRevision);goog.exportProperty(ol.layer.Vector.prototype,"on",ol.layer.Vector.prototype.on);goog.exportProperty(ol.layer.Vector.prototype,"once",ol.layer.Vector.prototype.once);goog.exportProperty(ol.layer.Vector.prototype,"un",ol.layer.Vector.prototype.un);goog.exportProperty(ol.layer.Vector.prototype,"unByKey",ol.layer.Vector.prototype.unByKey);goog.exportProperty(ol.layer.Heatmap.prototype,"getSource",ol.layer.Heatmap.prototype.getSource);goog.exportProperty(ol.layer.Heatmap.prototype,"getStyle",ol.layer.Heatmap.prototype.getStyle);goog.exportProperty(ol.layer.Heatmap.prototype,"getStyleFunction",ol.layer.Heatmap.prototype.getStyleFunction);goog.exportProperty(ol.layer.Heatmap.prototype,"setStyle",ol.layer.Heatmap.prototype.setStyle);goog.exportProperty(ol.layer.Heatmap.prototype,"setMap",ol.layer.Heatmap.prototype.setMap);goog.exportProperty(ol.layer.Heatmap.prototype,"setSource",ol.layer.Heatmap.prototype.setSource);goog.exportProperty(ol.layer.Heatmap.prototype,"getBrightness",ol.layer.Heatmap.prototype.getBrightness);goog.exportProperty(ol.layer.Heatmap.prototype,"getContrast",ol.layer.Heatmap.prototype.getContrast);goog.exportProperty(ol.layer.Heatmap.prototype,"getHue",ol.layer.Heatmap.prototype.getHue);goog.exportProperty(ol.layer.Heatmap.prototype,"getExtent",ol.layer.Heatmap.prototype.getExtent);goog.exportProperty(ol.layer.Heatmap.prototype,"getMaxResolution",ol.layer.Heatmap.prototype.getMaxResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"getMinResolution",ol.layer.Heatmap.prototype.getMinResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"getOpacity",ol.layer.Heatmap.prototype.getOpacity);goog.exportProperty(ol.layer.Heatmap.prototype,"getSaturation",ol.layer.Heatmap.prototype.getSaturation);goog.exportProperty(ol.layer.Heatmap.prototype,"getVisible",ol.layer.Heatmap.prototype.getVisible);goog.exportProperty(ol.layer.Heatmap.prototype,"getZIndex",ol.layer.Heatmap.prototype.getZIndex);goog.exportProperty(ol.layer.Heatmap.prototype,"setBrightness",ol.layer.Heatmap.prototype.setBrightness);goog.exportProperty(ol.layer.Heatmap.prototype,"setContrast",ol.layer.Heatmap.prototype.setContrast);goog.exportProperty(ol.layer.Heatmap.prototype,"setHue",ol.layer.Heatmap.prototype.setHue);goog.exportProperty(ol.layer.Heatmap.prototype,"setExtent",ol.layer.Heatmap.prototype.setExtent);goog.exportProperty(ol.layer.Heatmap.prototype,"setMaxResolution",ol.layer.Heatmap.prototype.setMaxResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"setMinResolution",ol.layer.Heatmap.prototype.setMinResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"setOpacity",ol.layer.Heatmap.prototype.setOpacity);goog.exportProperty(ol.layer.Heatmap.prototype,"setSaturation",ol.layer.Heatmap.prototype.setSaturation);goog.exportProperty(ol.layer.Heatmap.prototype,"setVisible",ol.layer.Heatmap.prototype.setVisible);goog.exportProperty(ol.layer.Heatmap.prototype,"setZIndex",ol.layer.Heatmap.prototype.setZIndex);goog.exportProperty(ol.layer.Heatmap.prototype,"get",ol.layer.Heatmap.prototype.get);goog.exportProperty(ol.layer.Heatmap.prototype,"getKeys",ol.layer.Heatmap.prototype.getKeys);goog.exportProperty(ol.layer.Heatmap.prototype,"getProperties",ol.layer.Heatmap.prototype.getProperties);goog.exportProperty(ol.layer.Heatmap.prototype,"set",ol.layer.Heatmap.prototype.set);goog.exportProperty(ol.layer.Heatmap.prototype,"setProperties",ol.layer.Heatmap.prototype.setProperties);goog.exportProperty(ol.layer.Heatmap.prototype,"unset",ol.layer.Heatmap.prototype.unset);goog.exportProperty(ol.layer.Heatmap.prototype,"changed",ol.layer.Heatmap.prototype.changed);goog.exportProperty(ol.layer.Heatmap.prototype,"getRevision",ol.layer.Heatmap.prototype.getRevision);goog.exportProperty(ol.layer.Heatmap.prototype,"on",ol.layer.Heatmap.prototype.on);goog.exportProperty(ol.layer.Heatmap.prototype,"once",ol.layer.Heatmap.prototype.once);goog.exportProperty(ol.layer.Heatmap.prototype,"un",ol.layer.Heatmap.prototype.un);goog.exportProperty(ol.layer.Heatmap.prototype,"unByKey",ol.layer.Heatmap.prototype.unByKey);goog.exportProperty(ol.layer.Image.prototype,"setMap",ol.layer.Image.prototype.setMap);goog.exportProperty(ol.layer.Image.prototype,"setSource",ol.layer.Image.prototype.setSource);goog.exportProperty(ol.layer.Image.prototype,"getBrightness",ol.layer.Image.prototype.getBrightness);goog.exportProperty(ol.layer.Image.prototype,"getContrast",ol.layer.Image.prototype.getContrast);goog.exportProperty(ol.layer.Image.prototype,"getHue",ol.layer.Image.prototype.getHue);goog.exportProperty(ol.layer.Image.prototype,"getExtent",ol.layer.Image.prototype.getExtent);goog.exportProperty(ol.layer.Image.prototype,"getMaxResolution",ol.layer.Image.prototype.getMaxResolution);goog.exportProperty(ol.layer.Image.prototype,"getMinResolution",ol.layer.Image.prototype.getMinResolution);goog.exportProperty(ol.layer.Image.prototype,"getOpacity",ol.layer.Image.prototype.getOpacity);goog.exportProperty(ol.layer.Image.prototype,"getSaturation",ol.layer.Image.prototype.getSaturation);goog.exportProperty(ol.layer.Image.prototype,"getVisible",ol.layer.Image.prototype.getVisible);goog.exportProperty(ol.layer.Image.prototype,"getZIndex",ol.layer.Image.prototype.getZIndex);goog.exportProperty(ol.layer.Image.prototype,"setBrightness",ol.layer.Image.prototype.setBrightness);goog.exportProperty(ol.layer.Image.prototype,"setContrast",ol.layer.Image.prototype.setContrast);goog.exportProperty(ol.layer.Image.prototype,"setHue",ol.layer.Image.prototype.setHue);goog.exportProperty(ol.layer.Image.prototype,"setExtent",ol.layer.Image.prototype.setExtent);goog.exportProperty(ol.layer.Image.prototype,"setMaxResolution",ol.layer.Image.prototype.setMaxResolution);goog.exportProperty(ol.layer.Image.prototype,"setMinResolution",ol.layer.Image.prototype.setMinResolution);goog.exportProperty(ol.layer.Image.prototype,"setOpacity",ol.layer.Image.prototype.setOpacity);goog.exportProperty(ol.layer.Image.prototype,"setSaturation",ol.layer.Image.prototype.setSaturation);goog.exportProperty(ol.layer.Image.prototype,"setVisible",ol.layer.Image.prototype.setVisible);goog.exportProperty(ol.layer.Image.prototype,"setZIndex",ol.layer.Image.prototype.setZIndex);goog.exportProperty(ol.layer.Image.prototype,"get",ol.layer.Image.prototype.get);goog.exportProperty(ol.layer.Image.prototype,"getKeys",ol.layer.Image.prototype.getKeys);goog.exportProperty(ol.layer.Image.prototype,"getProperties",ol.layer.Image.prototype.getProperties);goog.exportProperty(ol.layer.Image.prototype,"set",ol.layer.Image.prototype.set);goog.exportProperty(ol.layer.Image.prototype,"setProperties",ol.layer.Image.prototype.setProperties);goog.exportProperty(ol.layer.Image.prototype,"unset",ol.layer.Image.prototype.unset);goog.exportProperty(ol.layer.Image.prototype,"changed",ol.layer.Image.prototype.changed);goog.exportProperty(ol.layer.Image.prototype,"getRevision",ol.layer.Image.prototype.getRevision);goog.exportProperty(ol.layer.Image.prototype,"on",ol.layer.Image.prototype.on);goog.exportProperty(ol.layer.Image.prototype,"once",ol.layer.Image.prototype.once);goog.exportProperty(ol.layer.Image.prototype,"un",ol.layer.Image.prototype.un);goog.exportProperty(ol.layer.Image.prototype,"unByKey",ol.layer.Image.prototype.unByKey);goog.exportProperty(ol.layer.Group.prototype,"getBrightness",ol.layer.Group.prototype.getBrightness);goog.exportProperty(ol.layer.Group.prototype,"getContrast",ol.layer.Group.prototype.getContrast);goog.exportProperty(ol.layer.Group.prototype,"getHue",ol.layer.Group.prototype.getHue);goog.exportProperty(ol.layer.Group.prototype,"getExtent",ol.layer.Group.prototype.getExtent);goog.exportProperty(ol.layer.Group.prototype,"getMaxResolution",ol.layer.Group.prototype.getMaxResolution);goog.exportProperty(ol.layer.Group.prototype,"getMinResolution",ol.layer.Group.prototype.getMinResolution);goog.exportProperty(ol.layer.Group.prototype,"getOpacity",ol.layer.Group.prototype.getOpacity);goog.exportProperty(ol.layer.Group.prototype,"getSaturation",ol.layer.Group.prototype.getSaturation);goog.exportProperty(ol.layer.Group.prototype,"getVisible",ol.layer.Group.prototype.getVisible);goog.exportProperty(ol.layer.Group.prototype,"getZIndex",ol.layer.Group.prototype.getZIndex);goog.exportProperty(ol.layer.Group.prototype,"setBrightness",ol.layer.Group.prototype.setBrightness);goog.exportProperty(ol.layer.Group.prototype,"setContrast",ol.layer.Group.prototype.setContrast);goog.exportProperty(ol.layer.Group.prototype,"setHue",ol.layer.Group.prototype.setHue);goog.exportProperty(ol.layer.Group.prototype,"setExtent",ol.layer.Group.prototype.setExtent);goog.exportProperty(ol.layer.Group.prototype,"setMaxResolution",ol.layer.Group.prototype.setMaxResolution);goog.exportProperty(ol.layer.Group.prototype,"setMinResolution",ol.layer.Group.prototype.setMinResolution);goog.exportProperty(ol.layer.Group.prototype,"setOpacity",ol.layer.Group.prototype.setOpacity);goog.exportProperty(ol.layer.Group.prototype,"setSaturation",ol.layer.Group.prototype.setSaturation);goog.exportProperty(ol.layer.Group.prototype,"setVisible",ol.layer.Group.prototype.setVisible);goog.exportProperty(ol.layer.Group.prototype,"setZIndex",ol.layer.Group.prototype.setZIndex);goog.exportProperty(ol.layer.Group.prototype,"get",ol.layer.Group.prototype.get);goog.exportProperty(ol.layer.Group.prototype,"getKeys",ol.layer.Group.prototype.getKeys);goog.exportProperty(ol.layer.Group.prototype,"getProperties",ol.layer.Group.prototype.getProperties);goog.exportProperty(ol.layer.Group.prototype,"set",ol.layer.Group.prototype.set);goog.exportProperty(ol.layer.Group.prototype,"setProperties",ol.layer.Group.prototype.setProperties);goog.exportProperty(ol.layer.Group.prototype,"unset",ol.layer.Group.prototype.unset);goog.exportProperty(ol.layer.Group.prototype,"changed",ol.layer.Group.prototype.changed);goog.exportProperty(ol.layer.Group.prototype,"getRevision",ol.layer.Group.prototype.getRevision);goog.exportProperty(ol.layer.Group.prototype,"on",ol.layer.Group.prototype.on);goog.exportProperty(ol.layer.Group.prototype,"once",ol.layer.Group.prototype.once);goog.exportProperty(ol.layer.Group.prototype,"un",ol.layer.Group.prototype.un);goog.exportProperty(ol.layer.Group.prototype,"unByKey",ol.layer.Group.prototype.unByKey);goog.exportProperty(ol.layer.Tile.prototype,"setMap",ol.layer.Tile.prototype.setMap);goog.exportProperty(ol.layer.Tile.prototype,"setSource",ol.layer.Tile.prototype.setSource);goog.exportProperty(ol.layer.Tile.prototype,"getBrightness",ol.layer.Tile.prototype.getBrightness);goog.exportProperty(ol.layer.Tile.prototype,"getContrast",ol.layer.Tile.prototype.getContrast);goog.exportProperty(ol.layer.Tile.prototype,"getHue",ol.layer.Tile.prototype.getHue);goog.exportProperty(ol.layer.Tile.prototype,"getExtent",ol.layer.Tile.prototype.getExtent);goog.exportProperty(ol.layer.Tile.prototype,"getMaxResolution",ol.layer.Tile.prototype.getMaxResolution);goog.exportProperty(ol.layer.Tile.prototype,"getMinResolution",ol.layer.Tile.prototype.getMinResolution);goog.exportProperty(ol.layer.Tile.prototype,"getOpacity",ol.layer.Tile.prototype.getOpacity);goog.exportProperty(ol.layer.Tile.prototype,"getSaturation",ol.layer.Tile.prototype.getSaturation);goog.exportProperty(ol.layer.Tile.prototype,"getVisible",ol.layer.Tile.prototype.getVisible);goog.exportProperty(ol.layer.Tile.prototype,"getZIndex",ol.layer.Tile.prototype.getZIndex);goog.exportProperty(ol.layer.Tile.prototype,"setBrightness",ol.layer.Tile.prototype.setBrightness);goog.exportProperty(ol.layer.Tile.prototype,"setContrast",ol.layer.Tile.prototype.setContrast);goog.exportProperty(ol.layer.Tile.prototype,"setHue",ol.layer.Tile.prototype.setHue);goog.exportProperty(ol.layer.Tile.prototype,"setExtent",ol.layer.Tile.prototype.setExtent);goog.exportProperty(ol.layer.Tile.prototype,"setMaxResolution",ol.layer.Tile.prototype.setMaxResolution);goog.exportProperty(ol.layer.Tile.prototype,"setMinResolution",ol.layer.Tile.prototype.setMinResolution);goog.exportProperty(ol.layer.Tile.prototype,"setOpacity",ol.layer.Tile.prototype.setOpacity);goog.exportProperty(ol.layer.Tile.prototype,"setSaturation",ol.layer.Tile.prototype.setSaturation);goog.exportProperty(ol.layer.Tile.prototype,"setVisible",ol.layer.Tile.prototype.setVisible);goog.exportProperty(ol.layer.Tile.prototype,"setZIndex",ol.layer.Tile.prototype.setZIndex);goog.exportProperty(ol.layer.Tile.prototype,"get",ol.layer.Tile.prototype.get);goog.exportProperty(ol.layer.Tile.prototype,"getKeys",ol.layer.Tile.prototype.getKeys);goog.exportProperty(ol.layer.Tile.prototype,"getProperties",ol.layer.Tile.prototype.getProperties);goog.exportProperty(ol.layer.Tile.prototype,"set",ol.layer.Tile.prototype.set);goog.exportProperty(ol.layer.Tile.prototype,"setProperties",ol.layer.Tile.prototype.setProperties);goog.exportProperty(ol.layer.Tile.prototype,"unset",ol.layer.Tile.prototype.unset);goog.exportProperty(ol.layer.Tile.prototype,"changed",ol.layer.Tile.prototype.changed);goog.exportProperty(ol.layer.Tile.prototype,"getRevision",ol.layer.Tile.prototype.getRevision);goog.exportProperty(ol.layer.Tile.prototype,"on",ol.layer.Tile.prototype.on);goog.exportProperty(ol.layer.Tile.prototype,"once",ol.layer.Tile.prototype.once);goog.exportProperty(ol.layer.Tile.prototype,"un",ol.layer.Tile.prototype.un);goog.exportProperty(ol.layer.Tile.prototype,"unByKey",ol.layer.Tile.prototype.unByKey);goog.exportProperty(ol.interaction.Interaction.prototype,"get",ol.interaction.Interaction.prototype.get);goog.exportProperty(ol.interaction.Interaction.prototype,"getKeys",ol.interaction.Interaction.prototype.getKeys);goog.exportProperty(ol.interaction.Interaction.prototype,"getProperties",ol.interaction.Interaction.prototype.getProperties);goog.exportProperty(ol.interaction.Interaction.prototype,"set",ol.interaction.Interaction.prototype.set);goog.exportProperty(ol.interaction.Interaction.prototype,"setProperties",ol.interaction.Interaction.prototype.setProperties);goog.exportProperty(ol.interaction.Interaction.prototype,"unset",ol.interaction.Interaction.prototype.unset);goog.exportProperty(ol.interaction.Interaction.prototype,"changed",ol.interaction.Interaction.prototype.changed);goog.exportProperty(ol.interaction.Interaction.prototype,"getRevision",ol.interaction.Interaction.prototype.getRevision);goog.exportProperty(ol.interaction.Interaction.prototype,"on",ol.interaction.Interaction.prototype.on);goog.exportProperty(ol.interaction.Interaction.prototype,"once",ol.interaction.Interaction.prototype.once);goog.exportProperty(ol.interaction.Interaction.prototype,"un",ol.interaction.Interaction.prototype.un);goog.exportProperty(ol.interaction.Interaction.prototype,"unByKey",ol.interaction.Interaction.prototype.unByKey);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getActive",ol.interaction.DoubleClickZoom.prototype.getActive);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setActive",ol.interaction.DoubleClickZoom.prototype.setActive);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"get",ol.interaction.DoubleClickZoom.prototype.get);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getKeys",ol.interaction.DoubleClickZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getProperties",ol.interaction.DoubleClickZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"set",ol.interaction.DoubleClickZoom.prototype.set);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setProperties",ol.interaction.DoubleClickZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unset",ol.interaction.DoubleClickZoom.prototype.unset);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"changed",ol.interaction.DoubleClickZoom.prototype.changed);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getRevision",ol.interaction.DoubleClickZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"on",ol.interaction.DoubleClickZoom.prototype.on);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"once",ol.interaction.DoubleClickZoom.prototype.once);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"un",ol.interaction.DoubleClickZoom.prototype.un);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unByKey",ol.interaction.DoubleClickZoom.prototype.unByKey);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getActive",ol.interaction.DragAndDrop.prototype.getActive);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setActive",ol.interaction.DragAndDrop.prototype.setActive);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"get",ol.interaction.DragAndDrop.prototype.get);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getKeys",ol.interaction.DragAndDrop.prototype.getKeys);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getProperties",ol.interaction.DragAndDrop.prototype.getProperties);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"set",ol.interaction.DragAndDrop.prototype.set);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setProperties",ol.interaction.DragAndDrop.prototype.setProperties);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unset",ol.interaction.DragAndDrop.prototype.unset);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"changed",ol.interaction.DragAndDrop.prototype.changed);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getRevision",ol.interaction.DragAndDrop.prototype.getRevision);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"on",ol.interaction.DragAndDrop.prototype.on);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"once",ol.interaction.DragAndDrop.prototype.once);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"un",ol.interaction.DragAndDrop.prototype.un);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unByKey",ol.interaction.DragAndDrop.prototype.unByKey);goog.exportProperty(ol.interaction.Pointer.prototype,"getActive",ol.interaction.Pointer.prototype.getActive);goog.exportProperty(ol.interaction.Pointer.prototype,"setActive",ol.interaction.Pointer.prototype.setActive);goog.exportProperty(ol.interaction.Pointer.prototype,"get",ol.interaction.Pointer.prototype.get);goog.exportProperty(ol.interaction.Pointer.prototype,"getKeys",ol.interaction.Pointer.prototype.getKeys);goog.exportProperty(ol.interaction.Pointer.prototype,"getProperties",ol.interaction.Pointer.prototype.getProperties);goog.exportProperty(ol.interaction.Pointer.prototype,"set",ol.interaction.Pointer.prototype.set);goog.exportProperty(ol.interaction.Pointer.prototype,"setProperties",ol.interaction.Pointer.prototype.setProperties);goog.exportProperty(ol.interaction.Pointer.prototype,"unset",ol.interaction.Pointer.prototype.unset);goog.exportProperty(ol.interaction.Pointer.prototype,"changed",ol.interaction.Pointer.prototype.changed);goog.exportProperty(ol.interaction.Pointer.prototype,"getRevision",ol.interaction.Pointer.prototype.getRevision);goog.exportProperty(ol.interaction.Pointer.prototype,"on",ol.interaction.Pointer.prototype.on);goog.exportProperty(ol.interaction.Pointer.prototype,"once",ol.interaction.Pointer.prototype.once);goog.exportProperty(ol.interaction.Pointer.prototype,"un",ol.interaction.Pointer.prototype.un);goog.exportProperty(ol.interaction.Pointer.prototype,"unByKey",ol.interaction.Pointer.prototype.unByKey);goog.exportProperty(ol.interaction.DragBox.prototype,"getActive",ol.interaction.DragBox.prototype.getActive);goog.exportProperty(ol.interaction.DragBox.prototype,"setActive",ol.interaction.DragBox.prototype.setActive);goog.exportProperty(ol.interaction.DragBox.prototype,"get",ol.interaction.DragBox.prototype.get);goog.exportProperty(ol.interaction.DragBox.prototype,"getKeys",ol.interaction.DragBox.prototype.getKeys);goog.exportProperty(ol.interaction.DragBox.prototype,"getProperties",ol.interaction.DragBox.prototype.getProperties);goog.exportProperty(ol.interaction.DragBox.prototype,"set",ol.interaction.DragBox.prototype.set);goog.exportProperty(ol.interaction.DragBox.prototype,"setProperties",ol.interaction.DragBox.prototype.setProperties);goog.exportProperty(ol.interaction.DragBox.prototype,"unset",ol.interaction.DragBox.prototype.unset);goog.exportProperty(ol.interaction.DragBox.prototype,"changed",ol.interaction.DragBox.prototype.changed);goog.exportProperty(ol.interaction.DragBox.prototype,"getRevision",ol.interaction.DragBox.prototype.getRevision);goog.exportProperty(ol.interaction.DragBox.prototype,"on",ol.interaction.DragBox.prototype.on);goog.exportProperty(ol.interaction.DragBox.prototype,"once",ol.interaction.DragBox.prototype.once);goog.exportProperty(ol.interaction.DragBox.prototype,"un",ol.interaction.DragBox.prototype.un);goog.exportProperty(ol.interaction.DragBox.prototype,"unByKey",ol.interaction.DragBox.prototype.unByKey);goog.exportProperty(ol.interaction.DragPan.prototype,"getActive",ol.interaction.DragPan.prototype.getActive);goog.exportProperty(ol.interaction.DragPan.prototype,"setActive",ol.interaction.DragPan.prototype.setActive);goog.exportProperty(ol.interaction.DragPan.prototype,"get",ol.interaction.DragPan.prototype.get);goog.exportProperty(ol.interaction.DragPan.prototype,"getKeys",ol.interaction.DragPan.prototype.getKeys);goog.exportProperty(ol.interaction.DragPan.prototype,"getProperties",ol.interaction.DragPan.prototype.getProperties);goog.exportProperty(ol.interaction.DragPan.prototype,"set",ol.interaction.DragPan.prototype.set);goog.exportProperty(ol.interaction.DragPan.prototype,"setProperties",ol.interaction.DragPan.prototype.setProperties);goog.exportProperty(ol.interaction.DragPan.prototype,"unset",ol.interaction.DragPan.prototype.unset);goog.exportProperty(ol.interaction.DragPan.prototype,"changed",ol.interaction.DragPan.prototype.changed);goog.exportProperty(ol.interaction.DragPan.prototype,"getRevision",ol.interaction.DragPan.prototype.getRevision);goog.exportProperty(ol.interaction.DragPan.prototype,"on",ol.interaction.DragPan.prototype.on);goog.exportProperty(ol.interaction.DragPan.prototype,"once",ol.interaction.DragPan.prototype.once);goog.exportProperty(ol.interaction.DragPan.prototype,"un",ol.interaction.DragPan.prototype.un);goog.exportProperty(ol.interaction.DragPan.prototype,"unByKey",ol.interaction.DragPan.prototype.unByKey);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getActive",ol.interaction.DragRotateAndZoom.prototype.getActive);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setActive",ol.interaction.DragRotateAndZoom.prototype.setActive);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"get",ol.interaction.DragRotateAndZoom.prototype.get);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getKeys",ol.interaction.DragRotateAndZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getProperties",ol.interaction.DragRotateAndZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"set",ol.interaction.DragRotateAndZoom.prototype.set);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setProperties",ol.interaction.DragRotateAndZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unset",ol.interaction.DragRotateAndZoom.prototype.unset);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"changed",ol.interaction.DragRotateAndZoom.prototype.changed);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getRevision",ol.interaction.DragRotateAndZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"on",ol.interaction.DragRotateAndZoom.prototype.on);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"once",ol.interaction.DragRotateAndZoom.prototype.once);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"un",ol.interaction.DragRotateAndZoom.prototype.un);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unByKey",ol.interaction.DragRotateAndZoom.prototype.unByKey);goog.exportProperty(ol.interaction.DragRotate.prototype,"getActive",ol.interaction.DragRotate.prototype.getActive);goog.exportProperty(ol.interaction.DragRotate.prototype,"setActive",ol.interaction.DragRotate.prototype.setActive);goog.exportProperty(ol.interaction.DragRotate.prototype,"get",ol.interaction.DragRotate.prototype.get);goog.exportProperty(ol.interaction.DragRotate.prototype,"getKeys",ol.interaction.DragRotate.prototype.getKeys);goog.exportProperty(ol.interaction.DragRotate.prototype,"getProperties",ol.interaction.DragRotate.prototype.getProperties);goog.exportProperty(ol.interaction.DragRotate.prototype,"set",ol.interaction.DragRotate.prototype.set);goog.exportProperty(ol.interaction.DragRotate.prototype,"setProperties",ol.interaction.DragRotate.prototype.setProperties);goog.exportProperty(ol.interaction.DragRotate.prototype,"unset",ol.interaction.DragRotate.prototype.unset);goog.exportProperty(ol.interaction.DragRotate.prototype,"changed",ol.interaction.DragRotate.prototype.changed);goog.exportProperty(ol.interaction.DragRotate.prototype,"getRevision",ol.interaction.DragRotate.prototype.getRevision);goog.exportProperty(ol.interaction.DragRotate.prototype,"on",ol.interaction.DragRotate.prototype.on);goog.exportProperty(ol.interaction.DragRotate.prototype,"once",ol.interaction.DragRotate.prototype.once);goog.exportProperty(ol.interaction.DragRotate.prototype,"un",ol.interaction.DragRotate.prototype.un);goog.exportProperty(ol.interaction.DragRotate.prototype,"unByKey",ol.interaction.DragRotate.prototype.unByKey);goog.exportProperty(ol.interaction.DragZoom.prototype,"getGeometry",ol.interaction.DragZoom.prototype.getGeometry);goog.exportProperty(ol.interaction.DragZoom.prototype,"getActive",ol.interaction.DragZoom.prototype.getActive);goog.exportProperty(ol.interaction.DragZoom.prototype,"setActive",ol.interaction.DragZoom.prototype.setActive);goog.exportProperty(ol.interaction.DragZoom.prototype,"get",ol.interaction.DragZoom.prototype.get);goog.exportProperty(ol.interaction.DragZoom.prototype,"getKeys",ol.interaction.DragZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DragZoom.prototype,"getProperties",ol.interaction.DragZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DragZoom.prototype,"set",ol.interaction.DragZoom.prototype.set);goog.exportProperty(ol.interaction.DragZoom.prototype,"setProperties",ol.interaction.DragZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DragZoom.prototype,"unset",ol.interaction.DragZoom.prototype.unset);goog.exportProperty(ol.interaction.DragZoom.prototype,"changed",ol.interaction.DragZoom.prototype.changed);goog.exportProperty(ol.interaction.DragZoom.prototype,"getRevision",ol.interaction.DragZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DragZoom.prototype,"on",ol.interaction.DragZoom.prototype.on);goog.exportProperty(ol.interaction.DragZoom.prototype,"once",ol.interaction.DragZoom.prototype.once);goog.exportProperty(ol.interaction.DragZoom.prototype,"un",ol.interaction.DragZoom.prototype.un);goog.exportProperty(ol.interaction.DragZoom.prototype,"unByKey",ol.interaction.DragZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Draw.prototype,"getActive",ol.interaction.Draw.prototype.getActive);goog.exportProperty(ol.interaction.Draw.prototype,"setActive",ol.interaction.Draw.prototype.setActive);goog.exportProperty(ol.interaction.Draw.prototype,"get",ol.interaction.Draw.prototype.get);goog.exportProperty(ol.interaction.Draw.prototype,"getKeys",ol.interaction.Draw.prototype.getKeys);goog.exportProperty(ol.interaction.Draw.prototype,"getProperties",ol.interaction.Draw.prototype.getProperties);goog.exportProperty(ol.interaction.Draw.prototype,"set",ol.interaction.Draw.prototype.set);goog.exportProperty(ol.interaction.Draw.prototype,"setProperties",ol.interaction.Draw.prototype.setProperties);goog.exportProperty(ol.interaction.Draw.prototype,"unset",ol.interaction.Draw.prototype.unset);goog.exportProperty(ol.interaction.Draw.prototype,"changed",ol.interaction.Draw.prototype.changed);goog.exportProperty(ol.interaction.Draw.prototype,"getRevision",ol.interaction.Draw.prototype.getRevision);goog.exportProperty(ol.interaction.Draw.prototype,"on",ol.interaction.Draw.prototype.on);goog.exportProperty(ol.interaction.Draw.prototype,"once",ol.interaction.Draw.prototype.once);goog.exportProperty(ol.interaction.Draw.prototype,"un",ol.interaction.Draw.prototype.un);goog.exportProperty(ol.interaction.Draw.prototype,"unByKey",ol.interaction.Draw.prototype.unByKey);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getActive",ol.interaction.KeyboardPan.prototype.getActive);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setActive",ol.interaction.KeyboardPan.prototype.setActive);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"get",ol.interaction.KeyboardPan.prototype.get);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getKeys",ol.interaction.KeyboardPan.prototype.getKeys);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getProperties",ol.interaction.KeyboardPan.prototype.getProperties);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"set",ol.interaction.KeyboardPan.prototype.set);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setProperties",ol.interaction.KeyboardPan.prototype.setProperties);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unset",ol.interaction.KeyboardPan.prototype.unset);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"changed",ol.interaction.KeyboardPan.prototype.changed);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getRevision",ol.interaction.KeyboardPan.prototype.getRevision);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"on",ol.interaction.KeyboardPan.prototype.on);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"once",ol.interaction.KeyboardPan.prototype.once);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"un",ol.interaction.KeyboardPan.prototype.un);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unByKey",ol.interaction.KeyboardPan.prototype.unByKey);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getActive",ol.interaction.KeyboardZoom.prototype.getActive);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setActive",ol.interaction.KeyboardZoom.prototype.setActive);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"get",ol.interaction.KeyboardZoom.prototype.get);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getKeys",ol.interaction.KeyboardZoom.prototype.getKeys);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getProperties",ol.interaction.KeyboardZoom.prototype.getProperties);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"set",ol.interaction.KeyboardZoom.prototype.set);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setProperties",ol.interaction.KeyboardZoom.prototype.setProperties);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unset",ol.interaction.KeyboardZoom.prototype.unset);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"changed",ol.interaction.KeyboardZoom.prototype.changed);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getRevision",ol.interaction.KeyboardZoom.prototype.getRevision);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"on",ol.interaction.KeyboardZoom.prototype.on);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"once",ol.interaction.KeyboardZoom.prototype.once);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"un",ol.interaction.KeyboardZoom.prototype.un);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unByKey",ol.interaction.KeyboardZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Modify.prototype,"getActive",ol.interaction.Modify.prototype.getActive);goog.exportProperty(ol.interaction.Modify.prototype,"setActive",ol.interaction.Modify.prototype.setActive);goog.exportProperty(ol.interaction.Modify.prototype,"get",ol.interaction.Modify.prototype.get);goog.exportProperty(ol.interaction.Modify.prototype,"getKeys",ol.interaction.Modify.prototype.getKeys);goog.exportProperty(ol.interaction.Modify.prototype,"getProperties",ol.interaction.Modify.prototype.getProperties);goog.exportProperty(ol.interaction.Modify.prototype,"set",ol.interaction.Modify.prototype.set);goog.exportProperty(ol.interaction.Modify.prototype,"setProperties",ol.interaction.Modify.prototype.setProperties);goog.exportProperty(ol.interaction.Modify.prototype,"unset",ol.interaction.Modify.prototype.unset);goog.exportProperty(ol.interaction.Modify.prototype,"changed",ol.interaction.Modify.prototype.changed);goog.exportProperty(ol.interaction.Modify.prototype,"getRevision",ol.interaction.Modify.prototype.getRevision);goog.exportProperty(ol.interaction.Modify.prototype,"on",ol.interaction.Modify.prototype.on);goog.exportProperty(ol.interaction.Modify.prototype,"once",ol.interaction.Modify.prototype.once);goog.exportProperty(ol.interaction.Modify.prototype,"un",ol.interaction.Modify.prototype.un);goog.exportProperty(ol.interaction.Modify.prototype,"unByKey",ol.interaction.Modify.prototype.unByKey);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getActive",ol.interaction.MouseWheelZoom.prototype.getActive);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setActive",ol.interaction.MouseWheelZoom.prototype.setActive);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"get",ol.interaction.MouseWheelZoom.prototype.get);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getKeys",ol.interaction.MouseWheelZoom.prototype.getKeys);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getProperties",ol.interaction.MouseWheelZoom.prototype.getProperties);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"set",ol.interaction.MouseWheelZoom.prototype.set);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setProperties",ol.interaction.MouseWheelZoom.prototype.setProperties);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unset",ol.interaction.MouseWheelZoom.prototype.unset);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"changed",ol.interaction.MouseWheelZoom.prototype.changed);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getRevision",ol.interaction.MouseWheelZoom.prototype.getRevision);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"on",ol.interaction.MouseWheelZoom.prototype.on);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"once",ol.interaction.MouseWheelZoom.prototype.once);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"un",ol.interaction.MouseWheelZoom.prototype.un);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unByKey",ol.interaction.MouseWheelZoom.prototype.unByKey);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getActive",ol.interaction.PinchRotate.prototype.getActive);goog.exportProperty(ol.interaction.PinchRotate.prototype,"setActive",ol.interaction.PinchRotate.prototype.setActive);goog.exportProperty(ol.interaction.PinchRotate.prototype,"get",ol.interaction.PinchRotate.prototype.get);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getKeys",ol.interaction.PinchRotate.prototype.getKeys);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getProperties",ol.interaction.PinchRotate.prototype.getProperties);goog.exportProperty(ol.interaction.PinchRotate.prototype,"set",ol.interaction.PinchRotate.prototype.set);goog.exportProperty(ol.interaction.PinchRotate.prototype,"setProperties",ol.interaction.PinchRotate.prototype.setProperties);goog.exportProperty(ol.interaction.PinchRotate.prototype,"unset",ol.interaction.PinchRotate.prototype.unset);goog.exportProperty(ol.interaction.PinchRotate.prototype,"changed",ol.interaction.PinchRotate.prototype.changed);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getRevision",ol.interaction.PinchRotate.prototype.getRevision);goog.exportProperty(ol.interaction.PinchRotate.prototype,"on",ol.interaction.PinchRotate.prototype.on);goog.exportProperty(ol.interaction.PinchRotate.prototype,"once",ol.interaction.PinchRotate.prototype.once);goog.exportProperty(ol.interaction.PinchRotate.prototype,"un",ol.interaction.PinchRotate.prototype.un);goog.exportProperty(ol.interaction.PinchRotate.prototype,"unByKey",ol.interaction.PinchRotate.prototype.unByKey);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getActive",ol.interaction.PinchZoom.prototype.getActive);goog.exportProperty(ol.interaction.PinchZoom.prototype,"setActive",ol.interaction.PinchZoom.prototype.setActive);goog.exportProperty(ol.interaction.PinchZoom.prototype,"get",ol.interaction.PinchZoom.prototype.get);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getKeys",ol.interaction.PinchZoom.prototype.getKeys);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getProperties",ol.interaction.PinchZoom.prototype.getProperties);goog.exportProperty(ol.interaction.PinchZoom.prototype,"set",ol.interaction.PinchZoom.prototype.set);goog.exportProperty(ol.interaction.PinchZoom.prototype,"setProperties",ol.interaction.PinchZoom.prototype.setProperties);goog.exportProperty(ol.interaction.PinchZoom.prototype,"unset",ol.interaction.PinchZoom.prototype.unset);goog.exportProperty(ol.interaction.PinchZoom.prototype,"changed",ol.interaction.PinchZoom.prototype.changed);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getRevision",ol.interaction.PinchZoom.prototype.getRevision);goog.exportProperty(ol.interaction.PinchZoom.prototype,"on",ol.interaction.PinchZoom.prototype.on);goog.exportProperty(ol.interaction.PinchZoom.prototype,"once",ol.interaction.PinchZoom.prototype.once);goog.exportProperty(ol.interaction.PinchZoom.prototype,"un",ol.interaction.PinchZoom.prototype.un);goog.exportProperty(ol.interaction.PinchZoom.prototype,"unByKey",ol.interaction.PinchZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Select.prototype,"getActive",ol.interaction.Select.prototype.getActive);goog.exportProperty(ol.interaction.Select.prototype,"setActive",ol.interaction.Select.prototype.setActive);goog.exportProperty(ol.interaction.Select.prototype,"get",ol.interaction.Select.prototype.get);goog.exportProperty(ol.interaction.Select.prototype,"getKeys",ol.interaction.Select.prototype.getKeys);goog.exportProperty(ol.interaction.Select.prototype,"getProperties",ol.interaction.Select.prototype.getProperties);goog.exportProperty(ol.interaction.Select.prototype,"set",ol.interaction.Select.prototype.set);goog.exportProperty(ol.interaction.Select.prototype,"setProperties",ol.interaction.Select.prototype.setProperties);goog.exportProperty(ol.interaction.Select.prototype,"unset",ol.interaction.Select.prototype.unset);goog.exportProperty(ol.interaction.Select.prototype,"changed",ol.interaction.Select.prototype.changed);goog.exportProperty(ol.interaction.Select.prototype,"getRevision",ol.interaction.Select.prototype.getRevision);goog.exportProperty(ol.interaction.Select.prototype,"on",ol.interaction.Select.prototype.on);goog.exportProperty(ol.interaction.Select.prototype,"once",ol.interaction.Select.prototype.once);goog.exportProperty(ol.interaction.Select.prototype,"un",ol.interaction.Select.prototype.un);goog.exportProperty(ol.interaction.Select.prototype,"unByKey",ol.interaction.Select.prototype.unByKey);goog.exportProperty(ol.interaction.Snap.prototype,"getActive",ol.interaction.Snap.prototype.getActive);goog.exportProperty(ol.interaction.Snap.prototype,"setActive",ol.interaction.Snap.prototype.setActive);goog.exportProperty(ol.interaction.Snap.prototype,"get",ol.interaction.Snap.prototype.get);goog.exportProperty(ol.interaction.Snap.prototype,"getKeys",ol.interaction.Snap.prototype.getKeys);goog.exportProperty(ol.interaction.Snap.prototype,"getProperties",ol.interaction.Snap.prototype.getProperties);goog.exportProperty(ol.interaction.Snap.prototype,"set",ol.interaction.Snap.prototype.set);goog.exportProperty(ol.interaction.Snap.prototype,"setProperties",ol.interaction.Snap.prototype.setProperties);goog.exportProperty(ol.interaction.Snap.prototype,"unset",ol.interaction.Snap.prototype.unset);goog.exportProperty(ol.interaction.Snap.prototype,"changed",ol.interaction.Snap.prototype.changed);goog.exportProperty(ol.interaction.Snap.prototype,"getRevision",ol.interaction.Snap.prototype.getRevision);goog.exportProperty(ol.interaction.Snap.prototype,"on",ol.interaction.Snap.prototype.on);goog.exportProperty(ol.interaction.Snap.prototype,"once",ol.interaction.Snap.prototype.once);goog.exportProperty(ol.interaction.Snap.prototype,"un",ol.interaction.Snap.prototype.un);goog.exportProperty(ol.interaction.Snap.prototype,"unByKey",ol.interaction.Snap.prototype.unByKey);goog.exportProperty(ol.interaction.Translate.prototype,"getActive",ol.interaction.Translate.prototype.getActive);goog.exportProperty(ol.interaction.Translate.prototype,"setActive",ol.interaction.Translate.prototype.setActive);goog.exportProperty(ol.interaction.Translate.prototype,"get",ol.interaction.Translate.prototype.get);goog.exportProperty(ol.interaction.Translate.prototype,"getKeys",ol.interaction.Translate.prototype.getKeys);goog.exportProperty(ol.interaction.Translate.prototype,"getProperties",ol.interaction.Translate.prototype.getProperties);goog.exportProperty(ol.interaction.Translate.prototype,"set",ol.interaction.Translate.prototype.set);goog.exportProperty(ol.interaction.Translate.prototype,"setProperties",ol.interaction.Translate.prototype.setProperties);goog.exportProperty(ol.interaction.Translate.prototype,"unset",ol.interaction.Translate.prototype.unset);goog.exportProperty(ol.interaction.Translate.prototype,"changed",ol.interaction.Translate.prototype.changed);goog.exportProperty(ol.interaction.Translate.prototype,"getRevision",ol.interaction.Translate.prototype.getRevision);goog.exportProperty(ol.interaction.Translate.prototype,"on",ol.interaction.Translate.prototype.on);goog.exportProperty(ol.interaction.Translate.prototype,"once",ol.interaction.Translate.prototype.once);goog.exportProperty(ol.interaction.Translate.prototype,"un",ol.interaction.Translate.prototype.un);goog.exportProperty(ol.interaction.Translate.prototype,"unByKey",ol.interaction.Translate.prototype.unByKey);goog.exportProperty(ol.geom.Geometry.prototype,"get",ol.geom.Geometry.prototype.get);goog.exportProperty(ol.geom.Geometry.prototype,"getKeys",ol.geom.Geometry.prototype.getKeys);goog.exportProperty(ol.geom.Geometry.prototype,"getProperties",ol.geom.Geometry.prototype.getProperties);goog.exportProperty(ol.geom.Geometry.prototype,"set",ol.geom.Geometry.prototype.set);goog.exportProperty(ol.geom.Geometry.prototype,"setProperties",ol.geom.Geometry.prototype.setProperties);goog.exportProperty(ol.geom.Geometry.prototype,"unset",ol.geom.Geometry.prototype.unset);goog.exportProperty(ol.geom.Geometry.prototype,"changed",ol.geom.Geometry.prototype.changed);goog.exportProperty(ol.geom.Geometry.prototype,"getRevision",ol.geom.Geometry.prototype.getRevision);goog.exportProperty(ol.geom.Geometry.prototype,"on",ol.geom.Geometry.prototype.on);goog.exportProperty(ol.geom.Geometry.prototype,"once",ol.geom.Geometry.prototype.once);goog.exportProperty(ol.geom.Geometry.prototype,"un",ol.geom.Geometry.prototype.un);goog.exportProperty(ol.geom.Geometry.prototype,"unByKey",ol.geom.Geometry.prototype.unByKey);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getClosestPoint",ol.geom.SimpleGeometry.prototype.getClosestPoint);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getExtent",ol.geom.SimpleGeometry.prototype.getExtent);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"transform",ol.geom.SimpleGeometry.prototype.transform);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"get",ol.geom.SimpleGeometry.prototype.get);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getKeys",ol.geom.SimpleGeometry.prototype.getKeys);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getProperties",ol.geom.SimpleGeometry.prototype.getProperties);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"set",ol.geom.SimpleGeometry.prototype.set);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"setProperties",ol.geom.SimpleGeometry.prototype.setProperties);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unset",ol.geom.SimpleGeometry.prototype.unset);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"changed",ol.geom.SimpleGeometry.prototype.changed);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getRevision",ol.geom.SimpleGeometry.prototype.getRevision);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"on",ol.geom.SimpleGeometry.prototype.on);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"once",ol.geom.SimpleGeometry.prototype.once);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"un",ol.geom.SimpleGeometry.prototype.un);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unByKey",ol.geom.SimpleGeometry.prototype.unByKey);goog.exportProperty(ol.geom.Circle.prototype,"getFirstCoordinate",ol.geom.Circle.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Circle.prototype,"getLastCoordinate",ol.geom.Circle.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Circle.prototype,"getLayout",ol.geom.Circle.prototype.getLayout);goog.exportProperty(ol.geom.Circle.prototype,"getClosestPoint",ol.geom.Circle.prototype.getClosestPoint);goog.exportProperty(ol.geom.Circle.prototype,"getExtent",ol.geom.Circle.prototype.getExtent);goog.exportProperty(ol.geom.Circle.prototype,"get",ol.geom.Circle.prototype.get);goog.exportProperty(ol.geom.Circle.prototype,"getKeys",ol.geom.Circle.prototype.getKeys);goog.exportProperty(ol.geom.Circle.prototype,"getProperties",ol.geom.Circle.prototype.getProperties);goog.exportProperty(ol.geom.Circle.prototype,"set",ol.geom.Circle.prototype.set);goog.exportProperty(ol.geom.Circle.prototype,"setProperties",ol.geom.Circle.prototype.setProperties);goog.exportProperty(ol.geom.Circle.prototype,"unset",ol.geom.Circle.prototype.unset);goog.exportProperty(ol.geom.Circle.prototype,"changed",ol.geom.Circle.prototype.changed);goog.exportProperty(ol.geom.Circle.prototype,"getRevision",ol.geom.Circle.prototype.getRevision);goog.exportProperty(ol.geom.Circle.prototype,"on",ol.geom.Circle.prototype.on);goog.exportProperty(ol.geom.Circle.prototype,"once",ol.geom.Circle.prototype.once);goog.exportProperty(ol.geom.Circle.prototype,"un",ol.geom.Circle.prototype.un);goog.exportProperty(ol.geom.Circle.prototype,"unByKey",ol.geom.Circle.prototype.unByKey);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getClosestPoint",ol.geom.GeometryCollection.prototype.getClosestPoint);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getExtent",ol.geom.GeometryCollection.prototype.getExtent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"transform",ol.geom.GeometryCollection.prototype.transform);goog.exportProperty(ol.geom.GeometryCollection.prototype,"get",ol.geom.GeometryCollection.prototype.get);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getKeys",ol.geom.GeometryCollection.prototype.getKeys);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getProperties",ol.geom.GeometryCollection.prototype.getProperties);goog.exportProperty(ol.geom.GeometryCollection.prototype,"set",ol.geom.GeometryCollection.prototype.set);goog.exportProperty(ol.geom.GeometryCollection.prototype,"setProperties",ol.geom.GeometryCollection.prototype.setProperties);goog.exportProperty(ol.geom.GeometryCollection.prototype,"unset",ol.geom.GeometryCollection.prototype.unset);goog.exportProperty(ol.geom.GeometryCollection.prototype,"changed",ol.geom.GeometryCollection.prototype.changed);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getRevision",ol.geom.GeometryCollection.prototype.getRevision);goog.exportProperty(ol.geom.GeometryCollection.prototype,"on",ol.geom.GeometryCollection.prototype.on);goog.exportProperty(ol.geom.GeometryCollection.prototype,"once",ol.geom.GeometryCollection.prototype.once);goog.exportProperty(ol.geom.GeometryCollection.prototype,"un",ol.geom.GeometryCollection.prototype.un);goog.exportProperty(ol.geom.GeometryCollection.prototype,"unByKey",ol.geom.GeometryCollection.prototype.unByKey);goog.exportProperty(ol.geom.LinearRing.prototype,"getFirstCoordinate",ol.geom.LinearRing.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.LinearRing.prototype,"getLastCoordinate",ol.geom.LinearRing.prototype.getLastCoordinate);goog.exportProperty(ol.geom.LinearRing.prototype,"getLayout",ol.geom.LinearRing.prototype.getLayout);goog.exportProperty(ol.geom.LinearRing.prototype,"getClosestPoint",ol.geom.LinearRing.prototype.getClosestPoint);goog.exportProperty(ol.geom.LinearRing.prototype,"getExtent",ol.geom.LinearRing.prototype.getExtent);goog.exportProperty(ol.geom.LinearRing.prototype,"transform",ol.geom.LinearRing.prototype.transform);goog.exportProperty(ol.geom.LinearRing.prototype,"get",ol.geom.LinearRing.prototype.get);goog.exportProperty(ol.geom.LinearRing.prototype,"getKeys",ol.geom.LinearRing.prototype.getKeys);goog.exportProperty(ol.geom.LinearRing.prototype,"getProperties",ol.geom.LinearRing.prototype.getProperties);goog.exportProperty(ol.geom.LinearRing.prototype,"set",ol.geom.LinearRing.prototype.set);goog.exportProperty(ol.geom.LinearRing.prototype,"setProperties",ol.geom.LinearRing.prototype.setProperties);goog.exportProperty(ol.geom.LinearRing.prototype,"unset",ol.geom.LinearRing.prototype.unset);goog.exportProperty(ol.geom.LinearRing.prototype,"changed",ol.geom.LinearRing.prototype.changed);goog.exportProperty(ol.geom.LinearRing.prototype,"getRevision",ol.geom.LinearRing.prototype.getRevision);goog.exportProperty(ol.geom.LinearRing.prototype,"on",ol.geom.LinearRing.prototype.on);goog.exportProperty(ol.geom.LinearRing.prototype,"once",ol.geom.LinearRing.prototype.once);goog.exportProperty(ol.geom.LinearRing.prototype,"un",ol.geom.LinearRing.prototype.un);goog.exportProperty(ol.geom.LinearRing.prototype,"unByKey",ol.geom.LinearRing.prototype.unByKey);goog.exportProperty(ol.geom.LineString.prototype,"getFirstCoordinate",ol.geom.LineString.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"getLastCoordinate",ol.geom.LineString.prototype.getLastCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"getLayout",ol.geom.LineString.prototype.getLayout);goog.exportProperty(ol.geom.LineString.prototype,"getClosestPoint",ol.geom.LineString.prototype.getClosestPoint);goog.exportProperty(ol.geom.LineString.prototype,"getExtent",ol.geom.LineString.prototype.getExtent);goog.exportProperty(ol.geom.LineString.prototype,"transform",ol.geom.LineString.prototype.transform);goog.exportProperty(ol.geom.LineString.prototype,"get",ol.geom.LineString.prototype.get);goog.exportProperty(ol.geom.LineString.prototype,"getKeys",ol.geom.LineString.prototype.getKeys);goog.exportProperty(ol.geom.LineString.prototype,"getProperties",ol.geom.LineString.prototype.getProperties);goog.exportProperty(ol.geom.LineString.prototype,"set",ol.geom.LineString.prototype.set);goog.exportProperty(ol.geom.LineString.prototype,"setProperties",ol.geom.LineString.prototype.setProperties);goog.exportProperty(ol.geom.LineString.prototype,"unset",ol.geom.LineString.prototype.unset);goog.exportProperty(ol.geom.LineString.prototype,"changed",ol.geom.LineString.prototype.changed);goog.exportProperty(ol.geom.LineString.prototype,"getRevision",ol.geom.LineString.prototype.getRevision);goog.exportProperty(ol.geom.LineString.prototype,"on",ol.geom.LineString.prototype.on);goog.exportProperty(ol.geom.LineString.prototype,"once",ol.geom.LineString.prototype.once);goog.exportProperty(ol.geom.LineString.prototype,"un",ol.geom.LineString.prototype.un);goog.exportProperty(ol.geom.LineString.prototype,"unByKey",ol.geom.LineString.prototype.unByKey);goog.exportProperty(ol.geom.MultiLineString.prototype,"getFirstCoordinate",ol.geom.MultiLineString.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLastCoordinate",ol.geom.MultiLineString.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLayout",ol.geom.MultiLineString.prototype.getLayout);goog.exportProperty(ol.geom.MultiLineString.prototype,"getClosestPoint",ol.geom.MultiLineString.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiLineString.prototype,"getExtent",ol.geom.MultiLineString.prototype.getExtent);goog.exportProperty(ol.geom.MultiLineString.prototype,"transform",ol.geom.MultiLineString.prototype.transform);goog.exportProperty(ol.geom.MultiLineString.prototype,"get",ol.geom.MultiLineString.prototype.get);goog.exportProperty(ol.geom.MultiLineString.prototype,"getKeys",ol.geom.MultiLineString.prototype.getKeys);goog.exportProperty(ol.geom.MultiLineString.prototype,"getProperties",ol.geom.MultiLineString.prototype.getProperties);goog.exportProperty(ol.geom.MultiLineString.prototype,"set",ol.geom.MultiLineString.prototype.set);goog.exportProperty(ol.geom.MultiLineString.prototype,"setProperties",ol.geom.MultiLineString.prototype.setProperties);goog.exportProperty(ol.geom.MultiLineString.prototype,"unset",ol.geom.MultiLineString.prototype.unset);goog.exportProperty(ol.geom.MultiLineString.prototype,"changed",ol.geom.MultiLineString.prototype.changed);goog.exportProperty(ol.geom.MultiLineString.prototype,"getRevision",ol.geom.MultiLineString.prototype.getRevision);goog.exportProperty(ol.geom.MultiLineString.prototype,"on",ol.geom.MultiLineString.prototype.on);goog.exportProperty(ol.geom.MultiLineString.prototype,"once",ol.geom.MultiLineString.prototype.once);goog.exportProperty(ol.geom.MultiLineString.prototype,"un",ol.geom.MultiLineString.prototype.un);goog.exportProperty(ol.geom.MultiLineString.prototype,"unByKey",ol.geom.MultiLineString.prototype.unByKey);goog.exportProperty(ol.geom.MultiPoint.prototype,"getFirstCoordinate",ol.geom.MultiPoint.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiPoint.prototype,"getLastCoordinate",ol.geom.MultiPoint.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiPoint.prototype,"getLayout",ol.geom.MultiPoint.prototype.getLayout);goog.exportProperty(ol.geom.MultiPoint.prototype,"getClosestPoint",ol.geom.MultiPoint.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"getExtent",ol.geom.MultiPoint.prototype.getExtent);goog.exportProperty(ol.geom.MultiPoint.prototype,"transform",ol.geom.MultiPoint.prototype.transform);goog.exportProperty(ol.geom.MultiPoint.prototype,"get",ol.geom.MultiPoint.prototype.get);goog.exportProperty(ol.geom.MultiPoint.prototype,"getKeys",ol.geom.MultiPoint.prototype.getKeys);goog.exportProperty(ol.geom.MultiPoint.prototype,"getProperties",ol.geom.MultiPoint.prototype.getProperties);goog.exportProperty(ol.geom.MultiPoint.prototype,"set",ol.geom.MultiPoint.prototype.set);goog.exportProperty(ol.geom.MultiPoint.prototype,"setProperties",ol.geom.MultiPoint.prototype.setProperties);goog.exportProperty(ol.geom.MultiPoint.prototype,"unset",ol.geom.MultiPoint.prototype.unset);goog.exportProperty(ol.geom.MultiPoint.prototype,"changed",ol.geom.MultiPoint.prototype.changed);goog.exportProperty(ol.geom.MultiPoint.prototype,"getRevision",ol.geom.MultiPoint.prototype.getRevision);goog.exportProperty(ol.geom.MultiPoint.prototype,"on",ol.geom.MultiPoint.prototype.on);goog.exportProperty(ol.geom.MultiPoint.prototype,"once",ol.geom.MultiPoint.prototype.once);goog.exportProperty(ol.geom.MultiPoint.prototype,"un",ol.geom.MultiPoint.prototype.un);goog.exportProperty(ol.geom.MultiPoint.prototype,"unByKey",ol.geom.MultiPoint.prototype.unByKey);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getFirstCoordinate",ol.geom.MultiPolygon.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLastCoordinate",ol.geom.MultiPolygon.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLayout",ol.geom.MultiPolygon.prototype.getLayout);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getClosestPoint",ol.geom.MultiPolygon.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getExtent",ol.geom.MultiPolygon.prototype.getExtent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"transform",ol.geom.MultiPolygon.prototype.transform);goog.exportProperty(ol.geom.MultiPolygon.prototype,"get",ol.geom.MultiPolygon.prototype.get);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getKeys",ol.geom.MultiPolygon.prototype.getKeys);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getProperties",ol.geom.MultiPolygon.prototype.getProperties);goog.exportProperty(ol.geom.MultiPolygon.prototype,"set",ol.geom.MultiPolygon.prototype.set);goog.exportProperty(ol.geom.MultiPolygon.prototype,"setProperties",ol.geom.MultiPolygon.prototype.setProperties);goog.exportProperty(ol.geom.MultiPolygon.prototype,"unset",ol.geom.MultiPolygon.prototype.unset);goog.exportProperty(ol.geom.MultiPolygon.prototype,"changed",ol.geom.MultiPolygon.prototype.changed);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getRevision",ol.geom.MultiPolygon.prototype.getRevision);goog.exportProperty(ol.geom.MultiPolygon.prototype,"on",ol.geom.MultiPolygon.prototype.on);goog.exportProperty(ol.geom.MultiPolygon.prototype,"once",ol.geom.MultiPolygon.prototype.once);goog.exportProperty(ol.geom.MultiPolygon.prototype,"un",ol.geom.MultiPolygon.prototype.un);goog.exportProperty(ol.geom.MultiPolygon.prototype,"unByKey",ol.geom.MultiPolygon.prototype.unByKey);goog.exportProperty(ol.geom.Point.prototype,"getFirstCoordinate",ol.geom.Point.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Point.prototype,"getLastCoordinate",ol.geom.Point.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Point.prototype,"getLayout",ol.geom.Point.prototype.getLayout);goog.exportProperty(ol.geom.Point.prototype,"getClosestPoint",ol.geom.Point.prototype.getClosestPoint);goog.exportProperty(ol.geom.Point.prototype,"getExtent",ol.geom.Point.prototype.getExtent);goog.exportProperty(ol.geom.Point.prototype,"transform",ol.geom.Point.prototype.transform);goog.exportProperty(ol.geom.Point.prototype,"get",ol.geom.Point.prototype.get);goog.exportProperty(ol.geom.Point.prototype,"getKeys",ol.geom.Point.prototype.getKeys);goog.exportProperty(ol.geom.Point.prototype,"getProperties",ol.geom.Point.prototype.getProperties);goog.exportProperty(ol.geom.Point.prototype,"set",ol.geom.Point.prototype.set);goog.exportProperty(ol.geom.Point.prototype,"setProperties",ol.geom.Point.prototype.setProperties);goog.exportProperty(ol.geom.Point.prototype,"unset",ol.geom.Point.prototype.unset);goog.exportProperty(ol.geom.Point.prototype,"changed",ol.geom.Point.prototype.changed);goog.exportProperty(ol.geom.Point.prototype,"getRevision",ol.geom.Point.prototype.getRevision);goog.exportProperty(ol.geom.Point.prototype,"on",ol.geom.Point.prototype.on);goog.exportProperty(ol.geom.Point.prototype,"once",ol.geom.Point.prototype.once);goog.exportProperty(ol.geom.Point.prototype,"un",ol.geom.Point.prototype.un);goog.exportProperty(ol.geom.Point.prototype,"unByKey",ol.geom.Point.prototype.unByKey);goog.exportProperty(ol.geom.Polygon.prototype,"getFirstCoordinate",ol.geom.Polygon.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Polygon.prototype,"getLastCoordinate",ol.geom.Polygon.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Polygon.prototype,"getLayout",ol.geom.Polygon.prototype.getLayout);goog.exportProperty(ol.geom.Polygon.prototype,"getClosestPoint",ol.geom.Polygon.prototype.getClosestPoint);goog.exportProperty(ol.geom.Polygon.prototype,"getExtent",ol.geom.Polygon.prototype.getExtent);goog.exportProperty(ol.geom.Polygon.prototype,"transform",ol.geom.Polygon.prototype.transform);goog.exportProperty(ol.geom.Polygon.prototype,"get",ol.geom.Polygon.prototype.get);goog.exportProperty(ol.geom.Polygon.prototype,"getKeys",ol.geom.Polygon.prototype.getKeys);goog.exportProperty(ol.geom.Polygon.prototype,"getProperties",ol.geom.Polygon.prototype.getProperties);goog.exportProperty(ol.geom.Polygon.prototype,"set",ol.geom.Polygon.prototype.set);goog.exportProperty(ol.geom.Polygon.prototype,"setProperties",ol.geom.Polygon.prototype.setProperties);goog.exportProperty(ol.geom.Polygon.prototype,"unset",ol.geom.Polygon.prototype.unset);goog.exportProperty(ol.geom.Polygon.prototype,"changed",ol.geom.Polygon.prototype.changed);goog.exportProperty(ol.geom.Polygon.prototype,"getRevision",ol.geom.Polygon.prototype.getRevision);goog.exportProperty(ol.geom.Polygon.prototype,"on",ol.geom.Polygon.prototype.on);goog.exportProperty(ol.geom.Polygon.prototype,"once",ol.geom.Polygon.prototype.once);goog.exportProperty(ol.geom.Polygon.prototype,"un",ol.geom.Polygon.prototype.un);goog.exportProperty(ol.geom.Polygon.prototype,"unByKey",ol.geom.Polygon.prototype.unByKey);goog.exportProperty(ol.format.GML2.prototype,"readFeatures",ol.format.GML2.prototype.readFeatures);goog.exportProperty(ol.format.GML3.prototype,"readFeatures",ol.format.GML3.prototype.readFeatures);goog.exportProperty(ol.format.GML.prototype,"readFeatures",ol.format.GML.prototype.readFeatures);goog.exportProperty(ol.control.Control.prototype,"get",ol.control.Control.prototype.get);goog.exportProperty(ol.control.Control.prototype,"getKeys",ol.control.Control.prototype.getKeys);goog.exportProperty(ol.control.Control.prototype,"getProperties",ol.control.Control.prototype.getProperties);goog.exportProperty(ol.control.Control.prototype,"set",ol.control.Control.prototype.set);goog.exportProperty(ol.control.Control.prototype,"setProperties",ol.control.Control.prototype.setProperties);goog.exportProperty(ol.control.Control.prototype,"unset",ol.control.Control.prototype.unset);goog.exportProperty(ol.control.Control.prototype,"changed",ol.control.Control.prototype.changed);goog.exportProperty(ol.control.Control.prototype,"getRevision",ol.control.Control.prototype.getRevision);goog.exportProperty(ol.control.Control.prototype,"on",ol.control.Control.prototype.on);goog.exportProperty(ol.control.Control.prototype,"once",ol.control.Control.prototype.once);goog.exportProperty(ol.control.Control.prototype,"un",ol.control.Control.prototype.un);goog.exportProperty(ol.control.Control.prototype,"unByKey",ol.control.Control.prototype.unByKey);goog.exportProperty(ol.control.Attribution.prototype,"getMap",ol.control.Attribution.prototype.getMap);goog.exportProperty(ol.control.Attribution.prototype,"setMap",ol.control.Attribution.prototype.setMap);goog.exportProperty(ol.control.Attribution.prototype,"setTarget",ol.control.Attribution.prototype.setTarget);goog.exportProperty(ol.control.Attribution.prototype,"get",ol.control.Attribution.prototype.get);goog.exportProperty(ol.control.Attribution.prototype,"getKeys",ol.control.Attribution.prototype.getKeys);goog.exportProperty(ol.control.Attribution.prototype,"getProperties",ol.control.Attribution.prototype.getProperties);goog.exportProperty(ol.control.Attribution.prototype,"set",ol.control.Attribution.prototype.set);goog.exportProperty(ol.control.Attribution.prototype,"setProperties",ol.control.Attribution.prototype.setProperties);goog.exportProperty(ol.control.Attribution.prototype,"unset",ol.control.Attribution.prototype.unset);goog.exportProperty(ol.control.Attribution.prototype,"changed",ol.control.Attribution.prototype.changed);goog.exportProperty(ol.control.Attribution.prototype,"getRevision",ol.control.Attribution.prototype.getRevision);goog.exportProperty(ol.control.Attribution.prototype,"on",ol.control.Attribution.prototype.on);goog.exportProperty(ol.control.Attribution.prototype,"once",ol.control.Attribution.prototype.once);goog.exportProperty(ol.control.Attribution.prototype,"un",ol.control.Attribution.prototype.un);goog.exportProperty(ol.control.Attribution.prototype,"unByKey",ol.control.Attribution.prototype.unByKey);goog.exportProperty(ol.control.FullScreen.prototype,"getMap",ol.control.FullScreen.prototype.getMap);goog.exportProperty(ol.control.FullScreen.prototype,"setMap",ol.control.FullScreen.prototype.setMap);goog.exportProperty(ol.control.FullScreen.prototype,"setTarget",ol.control.FullScreen.prototype.setTarget);goog.exportProperty(ol.control.FullScreen.prototype,"get",ol.control.FullScreen.prototype.get);goog.exportProperty(ol.control.FullScreen.prototype,"getKeys",ol.control.FullScreen.prototype.getKeys);goog.exportProperty(ol.control.FullScreen.prototype,"getProperties",ol.control.FullScreen.prototype.getProperties);goog.exportProperty(ol.control.FullScreen.prototype,"set",ol.control.FullScreen.prototype.set);goog.exportProperty(ol.control.FullScreen.prototype,"setProperties",ol.control.FullScreen.prototype.setProperties);goog.exportProperty(ol.control.FullScreen.prototype,"unset",ol.control.FullScreen.prototype.unset);goog.exportProperty(ol.control.FullScreen.prototype,"changed",ol.control.FullScreen.prototype.changed);goog.exportProperty(ol.control.FullScreen.prototype,"getRevision",ol.control.FullScreen.prototype.getRevision);goog.exportProperty(ol.control.FullScreen.prototype,"on",ol.control.FullScreen.prototype.on);goog.exportProperty(ol.control.FullScreen.prototype,"once",ol.control.FullScreen.prototype.once);goog.exportProperty(ol.control.FullScreen.prototype,"un",ol.control.FullScreen.prototype.un);goog.exportProperty(ol.control.FullScreen.prototype,"unByKey",ol.control.FullScreen.prototype.unByKey);goog.exportProperty(ol.control.MousePosition.prototype,"getMap",ol.control.MousePosition.prototype.getMap);goog.exportProperty(ol.control.MousePosition.prototype,"setMap",ol.control.MousePosition.prototype.setMap);goog.exportProperty(ol.control.MousePosition.prototype,"setTarget",ol.control.MousePosition.prototype.setTarget);goog.exportProperty(ol.control.MousePosition.prototype,"get",ol.control.MousePosition.prototype.get);goog.exportProperty(ol.control.MousePosition.prototype,"getKeys",ol.control.MousePosition.prototype.getKeys);goog.exportProperty(ol.control.MousePosition.prototype,"getProperties",ol.control.MousePosition.prototype.getProperties);goog.exportProperty(ol.control.MousePosition.prototype,"set",ol.control.MousePosition.prototype.set);goog.exportProperty(ol.control.MousePosition.prototype,"setProperties",ol.control.MousePosition.prototype.setProperties);goog.exportProperty(ol.control.MousePosition.prototype,"unset",ol.control.MousePosition.prototype.unset);goog.exportProperty(ol.control.MousePosition.prototype,"changed",ol.control.MousePosition.prototype.changed);goog.exportProperty(ol.control.MousePosition.prototype,"getRevision",ol.control.MousePosition.prototype.getRevision);goog.exportProperty(ol.control.MousePosition.prototype,"on",ol.control.MousePosition.prototype.on);goog.exportProperty(ol.control.MousePosition.prototype,"once",ol.control.MousePosition.prototype.once);goog.exportProperty(ol.control.MousePosition.prototype,"un",ol.control.MousePosition.prototype.un);goog.exportProperty(ol.control.MousePosition.prototype,"unByKey",ol.control.MousePosition.prototype.unByKey);goog.exportProperty(ol.control.OverviewMap.prototype,"getMap",ol.control.OverviewMap.prototype.getMap);goog.exportProperty(ol.control.OverviewMap.prototype,"setMap",ol.control.OverviewMap.prototype.setMap);goog.exportProperty(ol.control.OverviewMap.prototype,"setTarget",ol.control.OverviewMap.prototype.setTarget);goog.exportProperty(ol.control.OverviewMap.prototype,"get",ol.control.OverviewMap.prototype.get);goog.exportProperty(ol.control.OverviewMap.prototype,"getKeys",ol.control.OverviewMap.prototype.getKeys);goog.exportProperty(ol.control.OverviewMap.prototype,"getProperties",ol.control.OverviewMap.prototype.getProperties);goog.exportProperty(ol.control.OverviewMap.prototype,"set",ol.control.OverviewMap.prototype.set);goog.exportProperty(ol.control.OverviewMap.prototype,"setProperties",ol.control.OverviewMap.prototype.setProperties);goog.exportProperty(ol.control.OverviewMap.prototype,"unset",ol.control.OverviewMap.prototype.unset);goog.exportProperty(ol.control.OverviewMap.prototype,"changed",ol.control.OverviewMap.prototype.changed);goog.exportProperty(ol.control.OverviewMap.prototype,"getRevision",ol.control.OverviewMap.prototype.getRevision);goog.exportProperty(ol.control.OverviewMap.prototype,"on",ol.control.OverviewMap.prototype.on);goog.exportProperty(ol.control.OverviewMap.prototype,"once",ol.control.OverviewMap.prototype.once);goog.exportProperty(ol.control.OverviewMap.prototype,"un",ol.control.OverviewMap.prototype.un);goog.exportProperty(ol.control.OverviewMap.prototype,"unByKey",ol.control.OverviewMap.prototype.unByKey);goog.exportProperty(ol.control.Rotate.prototype,"getMap",ol.control.Rotate.prototype.getMap);goog.exportProperty(ol.control.Rotate.prototype,"setMap",ol.control.Rotate.prototype.setMap);goog.exportProperty(ol.control.Rotate.prototype,"setTarget",ol.control.Rotate.prototype.setTarget);goog.exportProperty(ol.control.Rotate.prototype,"get",ol.control.Rotate.prototype.get);goog.exportProperty(ol.control.Rotate.prototype,"getKeys",ol.control.Rotate.prototype.getKeys);goog.exportProperty(ol.control.Rotate.prototype,"getProperties",ol.control.Rotate.prototype.getProperties);goog.exportProperty(ol.control.Rotate.prototype,"set",ol.control.Rotate.prototype.set);goog.exportProperty(ol.control.Rotate.prototype,"setProperties",ol.control.Rotate.prototype.setProperties);goog.exportProperty(ol.control.Rotate.prototype,"unset",ol.control.Rotate.prototype.unset);goog.exportProperty(ol.control.Rotate.prototype,"changed",ol.control.Rotate.prototype.changed);goog.exportProperty(ol.control.Rotate.prototype,"getRevision",ol.control.Rotate.prototype.getRevision);goog.exportProperty(ol.control.Rotate.prototype,"on",ol.control.Rotate.prototype.on);goog.exportProperty(ol.control.Rotate.prototype,"once",ol.control.Rotate.prototype.once);goog.exportProperty(ol.control.Rotate.prototype,"un",ol.control.Rotate.prototype.un);goog.exportProperty(ol.control.Rotate.prototype,"unByKey",ol.control.Rotate.prototype.unByKey);goog.exportProperty(ol.control.ScaleLine.prototype,"getMap",ol.control.ScaleLine.prototype.getMap);goog.exportProperty(ol.control.ScaleLine.prototype,"setMap",ol.control.ScaleLine.prototype.setMap);goog.exportProperty(ol.control.ScaleLine.prototype,"setTarget",ol.control.ScaleLine.prototype.setTarget);goog.exportProperty(ol.control.ScaleLine.prototype,"get",ol.control.ScaleLine.prototype.get);goog.exportProperty(ol.control.ScaleLine.prototype,"getKeys",ol.control.ScaleLine.prototype.getKeys);goog.exportProperty(ol.control.ScaleLine.prototype,"getProperties",ol.control.ScaleLine.prototype.getProperties);goog.exportProperty(ol.control.ScaleLine.prototype,"set",ol.control.ScaleLine.prototype.set);goog.exportProperty(ol.control.ScaleLine.prototype,"setProperties",ol.control.ScaleLine.prototype.setProperties);goog.exportProperty(ol.control.ScaleLine.prototype,"unset",ol.control.ScaleLine.prototype.unset);goog.exportProperty(ol.control.ScaleLine.prototype,"changed",ol.control.ScaleLine.prototype.changed);goog.exportProperty(ol.control.ScaleLine.prototype,"getRevision",ol.control.ScaleLine.prototype.getRevision);goog.exportProperty(ol.control.ScaleLine.prototype,"on",ol.control.ScaleLine.prototype.on);goog.exportProperty(ol.control.ScaleLine.prototype,"once",ol.control.ScaleLine.prototype.once);goog.exportProperty(ol.control.ScaleLine.prototype,"un",ol.control.ScaleLine.prototype.un);goog.exportProperty(ol.control.ScaleLine.prototype,"unByKey",ol.control.ScaleLine.prototype.unByKey);goog.exportProperty(ol.control.Zoom.prototype,"getMap",ol.control.Zoom.prototype.getMap);goog.exportProperty(ol.control.Zoom.prototype,"setMap",ol.control.Zoom.prototype.setMap);goog.exportProperty(ol.control.Zoom.prototype,"setTarget",ol.control.Zoom.prototype.setTarget);goog.exportProperty(ol.control.Zoom.prototype,"get",ol.control.Zoom.prototype.get);goog.exportProperty(ol.control.Zoom.prototype,"getKeys",ol.control.Zoom.prototype.getKeys);goog.exportProperty(ol.control.Zoom.prototype,"getProperties",ol.control.Zoom.prototype.getProperties);goog.exportProperty(ol.control.Zoom.prototype,"set",ol.control.Zoom.prototype.set);goog.exportProperty(ol.control.Zoom.prototype,"setProperties",ol.control.Zoom.prototype.setProperties);goog.exportProperty(ol.control.Zoom.prototype,"unset",ol.control.Zoom.prototype.unset);goog.exportProperty(ol.control.Zoom.prototype,"changed",ol.control.Zoom.prototype.changed);goog.exportProperty(ol.control.Zoom.prototype,"getRevision",ol.control.Zoom.prototype.getRevision);goog.exportProperty(ol.control.Zoom.prototype,"on",ol.control.Zoom.prototype.on);goog.exportProperty(ol.control.Zoom.prototype,"once",ol.control.Zoom.prototype.once);goog.exportProperty(ol.control.Zoom.prototype,"un",ol.control.Zoom.prototype.un);goog.exportProperty(ol.control.Zoom.prototype,"unByKey",ol.control.Zoom.prototype.unByKey);goog.exportProperty(ol.control.ZoomSlider.prototype,"getMap",ol.control.ZoomSlider.prototype.getMap);goog.exportProperty(ol.control.ZoomSlider.prototype,"setMap",ol.control.ZoomSlider.prototype.setMap);goog.exportProperty(ol.control.ZoomSlider.prototype,"setTarget",ol.control.ZoomSlider.prototype.setTarget);goog.exportProperty(ol.control.ZoomSlider.prototype,"get",ol.control.ZoomSlider.prototype.get);goog.exportProperty(ol.control.ZoomSlider.prototype,"getKeys",ol.control.ZoomSlider.prototype.getKeys);goog.exportProperty(ol.control.ZoomSlider.prototype,"getProperties",ol.control.ZoomSlider.prototype.getProperties);goog.exportProperty(ol.control.ZoomSlider.prototype,"set",ol.control.ZoomSlider.prototype.set);goog.exportProperty(ol.control.ZoomSlider.prototype,"setProperties",ol.control.ZoomSlider.prototype.setProperties);goog.exportProperty(ol.control.ZoomSlider.prototype,"unset",ol.control.ZoomSlider.prototype.unset);goog.exportProperty(ol.control.ZoomSlider.prototype,"changed",ol.control.ZoomSlider.prototype.changed);goog.exportProperty(ol.control.ZoomSlider.prototype,"getRevision",ol.control.ZoomSlider.prototype.getRevision);goog.exportProperty(ol.control.ZoomSlider.prototype,"on",ol.control.ZoomSlider.prototype.on);goog.exportProperty(ol.control.ZoomSlider.prototype,"once",ol.control.ZoomSlider.prototype.once);goog.exportProperty(ol.control.ZoomSlider.prototype,"un",ol.control.ZoomSlider.prototype.un);goog.exportProperty(ol.control.ZoomSlider.prototype,"unByKey",ol.control.ZoomSlider.prototype.unByKey);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getMap",ol.control.ZoomToExtent.prototype.getMap);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setMap",ol.control.ZoomToExtent.prototype.setMap);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setTarget",ol.control.ZoomToExtent.prototype.setTarget);goog.exportProperty(ol.control.ZoomToExtent.prototype,"get",ol.control.ZoomToExtent.prototype.get);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getKeys",ol.control.ZoomToExtent.prototype.getKeys);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getProperties",ol.control.ZoomToExtent.prototype.getProperties);goog.exportProperty(ol.control.ZoomToExtent.prototype,"set",ol.control.ZoomToExtent.prototype.set);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setProperties",ol.control.ZoomToExtent.prototype.setProperties);goog.exportProperty(ol.control.ZoomToExtent.prototype,"unset",ol.control.ZoomToExtent.prototype.unset);goog.exportProperty(ol.control.ZoomToExtent.prototype,"changed",ol.control.ZoomToExtent.prototype.changed);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getRevision",ol.control.ZoomToExtent.prototype.getRevision);goog.exportProperty(ol.control.ZoomToExtent.prototype,"on",ol.control.ZoomToExtent.prototype.on);goog.exportProperty(ol.control.ZoomToExtent.prototype,"once",ol.control.ZoomToExtent.prototype.once);goog.exportProperty(ol.control.ZoomToExtent.prototype,"un",ol.control.ZoomToExtent.prototype.un);goog.exportProperty(ol.control.ZoomToExtent.prototype,"unByKey",ol.control.ZoomToExtent.prototype.unByKey);OPENLAYERS.ol=ol;return OPENLAYERS.ol}));